<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8">
<!-- PUBLIC VERSION - Security Layer v2 -->
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-044J002H6P"></script>
<script>const K_MUDANG_VERSION = {
version: "35.2",
build: "2026-02-01",
lang: "ja",
core: {
calcDayPillar: "unified-v1",
calcHourPillar: "unified-v1",
SOLAR_TERMS: "1940-2100",
safeClipboard: "v1"
}
};
const ILJU_IMAGE_KR = {
'ç”²å­': { name: 'æµ·è¾ºã®å¤§æ¨¹', emoji: 'ğŸŒ³ğŸŒŠ', desc: 'è±Šã‹ã•ã«æ ¹ã‚’ä¸‹ã‚ã—ãŸé‡å¿ƒ' },
'ç”²å¯…': { name: 'æ£®ã®è™', emoji: 'ğŸ…ğŸŒ²', desc: 'ç”Ÿã¾ã‚ŒãªãŒã‚‰ã®ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—' },
'ç”²è¾°': { name: 'é¾ã«ä¹—ã‚‹æœ¨', emoji: 'ğŸ‰ğŸŒ³', desc: 'å£®å¤§ãªé‡å¿ƒã¨ç¥è©±çš„ãªå¹¸é‹' },
'ç”²åˆ': { name: 'ç‡ƒãˆã‚‹æœ¨', emoji: 'ğŸŒ³ğŸ”¥', desc: 'æƒ…ç†±çš„ãªæ¨é€²åŠ›ã€‚ç‡ƒãˆå°½ãæ³¨æ„' },
'ç”²ç”³': { name: 'æ–§ã¨æœ¨', emoji: 'ğŸª“ğŸŒ²', desc: 'è©¦ç·´ã‚’é€šã˜ãŸè‡ªå·±æˆé•·' },
'ç”²æˆŒ': { name: 'ç§‹ã®æ£®', emoji: 'ğŸ‚ğŸŒ³', desc: 'å††ç†Ÿã—ãŸçŸ¥æµã¨ä¿è­·æœ¬èƒ½' },
'ä¹™ä¸‘': { name: 'å†¬ã®èŠ±', emoji: 'ğŸŒ±â„ï¸', desc: 'å¿è€ã®æœ«ã«å’²ãé…å’²ãã®èŠ±' },
'ä¹™å¯': { name: 'æ˜¥ã®è”“', emoji: 'ğŸŒ¿ğŸŒ¸', desc: 'æŸ”è»Ÿãªé©å¿œåŠ›ã¨ã»ã®ã‹ãªé­…åŠ›' },
'ä¹™å·³': { name: 'ç«ã®ãã°ã®èŠ±', emoji: 'ğŸŒºğŸ”¥', desc: 'ç¹Šç´°ã•ã®ä¸­ã®å†…ãªã‚‹æƒ…ç†±' },
'ä¹™æœª': { name: 'åº­ã®è‰', emoji: 'ğŸŒ¾ğŸ¡', desc: 'è¬™è™šãªé©å¿œåŠ›ã¨è‚²ã‚€å¿ƒ' },
'ä¹™é…‰': { name: 'é‡‘å±èŠ±ç“¶ã®èŠ±', emoji: 'ğŸ’âš™ï¸', desc: 'ç¯€åˆ¶ã§ç£¨ã‹ã‚ŒãŸç¾ã—ã•' },
'ä¹™äº¥': { name: 'æ¼‚ã†è“®', emoji: 'ğŸª·ğŸ’§', desc: 'æ¿ã‚Šã®ä¸­ã‹ã‚‰å’²ãç´”ç²‹ã•' },
'ä¸™å­': { name: 'æ¹–ä¸Šã®å¤ªé™½', emoji: 'â˜€ï¸ğŸï¸', desc: 'åå°„ã—ã¦å¢—å¹…ã•ã‚Œã‚‹è¼ã' },
'ä¸™å¯…': { name: 'å±±ä¸Šã®æ—¥ã®å‡º', emoji: 'ğŸŒ…ğŸ”ï¸', desc: 'é«˜ã¿ã‹ã‚‰è¼ãæŒ‡å°åŠ›' },
'ä¸™è¾°': { name: 'é¾ã®ç‚', emoji: 'ğŸ‰ğŸ”¥', desc: 'ç¥è©±çš„ãƒ‘ãƒ¯ãƒ¼ã¨å¤‰é©ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼' },
'ä¸™åˆ': { name: 'çœŸæ˜¼ã®å¤ªé™½', emoji: 'â˜€ï¸ğŸ”¥', desc: 'æœ€é«˜æ½®ã®å¼·çƒˆã•ã€‚å‡è¡¡ãŒå¿…è¦' },
'ä¸™ç”³': { name: 'é»„é‡‘ã®å¤•é™½', emoji: 'ğŸŒ…âš™ï¸', desc: 'çµŒé¨“ã§èº«ã«ã¤ã‘ãŸæ¸©ã‹ã„çŸ¥æµ' },
'ä¸™æˆŒ': { name: 'ç„šãç«', emoji: 'ğŸ”¥ğŸ•ï¸', desc: 'äººã‚’é›†ã‚ã‚‹æ¸©ã‚‚ã‚Š' },
'ä¸ä¸‘': { name: 'é›ªã®ä¸­ã®è‹ç‡­', emoji: 'ğŸ•¯ï¸â„ï¸', desc: 'é—‡ã®ä¸­ã§ã‚‚æ¶ˆãˆãªã„å…‰' },
'ä¸å¯': { name: 'åº­åœ’ã®ç¯ã‚Š', emoji: 'ğŸ®ğŸŒ¿', desc: 'æˆé•·ã‚’åŠ©ã‘ã‚‹æŸ”ã‚‰ã‹ãªç…§æ˜' },
'ä¸å·³': { name: 'æ¾æ˜ã‚’æŒã¤è€…', emoji: 'ğŸ”¦ğŸ', desc: 'éš ã•ã‚ŒãŸé“ã‚’ç…§ã‚‰ã™çŸ¥æµ' },
'ä¸æœª': { name: 'æš–ç‚‰ã®ç«', emoji: 'ğŸ”¥ğŸ ', desc: 'å®¶åº­ã®æ¸©ã‚‚ã‚Šã¨å®‰ã‚‰ã' },
'ä¸é…‰': { name: 'é›å†¶å ´ã®ç«èŠ±', emoji: 'ğŸ”¥âš’ï¸', desc: 'ç²¾å¯†ãªç†±ã§ä½œã‚‹åå“' },
'ä¸äº¥': { name: 'æ°´é¢ã®æ˜Ÿæ˜ã‚Š', emoji: 'âœ¨ğŸ’§', desc: 'å¤©ä¸Šã®ç¾ã—ã•ã¨å¤¢å¹»çš„ãªçŸ¥æµ' },
'æˆŠå­': { name: 'å±±ã®æ³‰', emoji: 'â›°ï¸ğŸ’§', desc: 'å …ã„åŸºç›¤ã®ä¸‹ã®éš ã•ã‚ŒãŸæ·±ã•' },
'æˆŠå¯…': { name: 'è™ã®å±±', emoji: 'ğŸ…â›°ï¸', desc: 'å¨å³ã‚ã‚‹å­˜åœ¨æ„Ÿã¨ä¿è­·æœ¬èƒ½' },
'æˆŠè¾°': { name: 'é¾å³°', emoji: 'ğŸ‰â›°ï¸', desc: 'ä¼èª¬çš„ãªé›„å¤§ã•ã¨å®‡å®™çš„æ¨©å¨' },
'æˆŠåˆ': { name: 'ç«å±±', emoji: 'ğŸŒ‹ğŸ”¥', desc: 'çˆ†ç™ºã‚’å¾…ã¤æ½œåœ¨çš„ãªåŠ›' },
'æˆŠç”³': { name: 'æ¡çŸ³å ´ã®å²©', emoji: 'ğŸª¨âš™ï¸', desc: 'ç£¨ã‹ã‚Œã‚‹ã®ã‚’å¾…ã¤åŸçŸ³' },
'æˆŠæˆŒ': { name: 'å¤ä»£ã®å±±', emoji: 'ğŸ”ï¸ğŸŒ™', desc: 'æ™‚ä»£ã‚’è¶…è¶Šã—ãŸçŸ¥æµã¨å®‰å®š' },
'å·±ä¸‘': { name: 'å†¬ã®é‡ã®ç‰›', emoji: 'ğŸ‚â„ï¸', desc: 'è‹¦é›£ã®ä¸­ã§è€ãˆã‚‹è€•ä½œ' },
'å·±å¯': { name: 'æ˜¥ã®åº­åœ’', emoji: 'ğŸŒ·ğŸ¡', desc: 'æˆé•·ã‚’è‚²ã‚€è‚¥æ²ƒãªå¤§åœ°' },
'å·±å·³': { name: 'æ¸©ã‹ã„åœŸ', emoji: 'ğŸŒğŸ”¥', desc: 'ã™ã¹ã¦ã®æ ¹ã®ãŸã‚ã®é¤Šåˆ†' },
'å·±æœª': { name: 'ç¾Šç‰§å ´', emoji: 'ğŸ‘ğŸŒ¾', desc: 'ç©ã‚„ã‹ãªè±Šã‹ã•ã¨ç‰§æ­Œçš„ãªå¹³å’Œ' },
'å·±é…‰': { name: 'æœæ¨¹åœ’ã®åœŸ', emoji: 'ğŸğŸŒ', desc: 'å®Ÿã‚’çµã¶è€•ã•ã‚ŒãŸå¤§åœ°' },
'å·±äº¥': { name: 'å·å²¸', emoji: 'ğŸï¸ğŸ’§', desc: 'è¦ç´ ã®é–“ã®å¢ƒç•Œã€‚æŸ”è»Ÿã ãŒå …å›º' },
'åºšå­': { name: 'é›¨ä¸­ã®å‰£', emoji: 'âš”ï¸ğŸŒ§ï¸', desc: 'è©¦ç·´ã®ä¸­ã§ã‚‚é‹­ã„æ±ºæ–­åŠ›' },
'åºšå¯…': { name: 'æ£®ã®ä¸­ã®æ–§', emoji: 'ğŸª“ğŸŒ²', desc: 'å¤‰é©ã®ãŸã‚ã®å¼·åŠ›ãªé“å…·' },
'åºšè¾°': { name: 'é¾é±—ã®é§', emoji: 'ğŸ‰âš™ï¸', desc: 'ä¼èª¬çš„ãªå®ˆè­·ã¨åŠ›' },
'åºšåˆ': { name: 'ç‚ã®ä¸­ã®åˆƒ', emoji: 'âš”ï¸ğŸ”¥', desc: 'æ¥µé™ã®åœ§åŠ›ã§é›ãˆã‚‰ã‚ŒãŸåˆƒ' },
'åºšç”³': { name: 'åŒå‰£', emoji: 'âš”ï¸âš”ï¸', desc: 'å€å¢—ã•ã‚ŒãŸåŠ›ã¨ç²¾å¯†ã•' },
'åºšæˆŒ': { name: 'å¤ä»£ã®æ­¦å™¨', emoji: 'ğŸ—¡ï¸âŒ›', desc: 'æ­³æœˆãŒè¨¼æ˜ã—ãŸæ¤œè¨¼æ¸ˆã¿ã®åˆƒ' },
'è¾›ä¸‘': { name: 'é‰±çŸ³ã®ä¸­ã®é‡‘', emoji: 'ğŸ’â›°ï¸', desc: 'ç™ºè¦‹ã‚’å¾…ã¤éš ã•ã‚ŒãŸå®ç‰©' },
'è¾›å¯': { name: 'åº­åœ’ã®å®çŸ³', emoji: 'ğŸ’ğŸŒ¿', desc: 'è‡ªç„¶ã®ä¸­ã®ç¹Šç´°ãªç¾ã—ã•' },
'è¾›å·³': { name: 'æº¶ã‘ãŸéŠ€', emoji: 'ğŸª™ğŸ”¥', desc: 'ç†±ã‚’é€šã˜ãŸå¤‰å½¢' },
'è¾›æœª': { name: 'åœ°ä¸­ã®å®çŸ³', emoji: 'ğŸ’ğŸŒ', desc: 'ã‚†ã£ãã‚Šè‚²ã¤åœ°ä¸‹ã®å®ç‰©' },
'è¾›é…‰': { name: 'é¡', emoji: 'ğŸªâœ¨', desc: 'å®Œç’§ãªåå°„ã¨æ˜ç­ã•' },
'è¾›äº¥': { name: 'çœŸç ', emoji: 'ğŸ¦ªğŸ’§', desc: 'è‹¦ç—›ã‹ã‚‰ç”Ÿã¾ã‚ŒãŸç¾ã—ã•' },
'å£¬å­': { name: 'æµ·ã®æ·±æ·µ', emoji: 'ğŸŒŠğŸŒ‘', desc: 'è¨ˆã‚ŠçŸ¥ã‚Œãªã„æ·±ã•ã¨åŠ›' },
'å£¬å¯…': { name: 'æ»', emoji: 'ğŸ’§ğŸ”ï¸', desc: 'å²©ã‚’ã‚‚å‰Šã‚‹æ­¢ã‚ã‚‰ã‚Œãªã„åŠ›' },
'å£¬è¾°': { name: 'é£›é¾', emoji: 'ğŸ‰ğŸŒ§ï¸', desc: 'ç”Ÿå‘½ã‚’ã‚‚ãŸã‚‰ã™ç¥è©±ã®å­˜åœ¨' },
'å£¬åˆ': { name: 'è’¸æ°—', emoji: 'ğŸ’¨â˜€ï¸', desc: 'æ°´ã¨ç«ãŒå‡ºä¼šã„ç”Ÿã¾ã‚ŒãŸå‹•åŠ›' },
'å£¬ç”³': { name: 'å·ã®æµã‚Œ', emoji: 'ğŸï¸ğŸ’¨', desc: 'æ­¢ã¾ã‚‰ãªã„å‰é€²ã®å‹¢ã„' },
'å£¬æˆŒ': { name: 'ç§‹é›¨', emoji: 'ğŸ‚ğŸŒ§ï¸', desc: 'å“€æ„ã«æ¿¡ã‚ŒãŸæ·±ã•ã¨çœå¯Ÿ' },
'ç™¸ä¸‘': { name: 'é‡ã®éœœ', emoji: 'â„ï¸ğŸŒ¾', desc: 'ç¹Šç´°ã ãŒå¤‰é©çš„ãªå½±éŸ¿' },
'ç™¸å¯': { name: 'æœéœ²', emoji: 'ğŸ’§ğŸŒ…', desc: 'æ¯æ—¥æ–°ã—ã„å§‹ã¾ã‚Š' },
'ç™¸å·³': { name: 'éœ§', emoji: 'ğŸŒ«ï¸ğŸ', desc: 'ç¾å®Ÿã‚’è¦†ã†ç¥ç§˜ã®ãƒ™ãƒ¼ãƒ«' },
'ç™¸æœª': { name: 'æµã¿ã®é›¨', emoji: 'ğŸŒ§ï¸ğŸŒ±', desc: 'å‘½ã‚’ä¸ãˆã‚‹é©åº¦ãªæ½¤ã„' },
'ç™¸é…‰': { name: 'åˆƒã®ä¸Šã®éœ²', emoji: 'ğŸ’§ğŸ—¡ï¸', desc: 'æ¥µåº¦ã®é‹­æ•ã•ã¨ç²¾å¯†ã•' },
'ç™¸äº¥': { name: 'æ·±ã„æ³‰', emoji: 'ğŸ’§ğŸ•³ï¸', desc: 'é—‡ã‹ã‚‰æ¹§ãå‡ºã‚‹ç„¡é™ã®æºæ³‰' }
};
const ANIMAL_SVG = {
'å­': 'M25,15 C20,10 15,12 12,18 C10,22 12,28 15,32 C18,36 22,38 25,38 C28,38 32,36 35,32 C38,28 40,22 38,18 C35,12 30,10 25,15 M20,20 L18,25 M30,20 L32,25 M22,30 Q25,33 28,30',
'ä¸‘': 'M15,35 L15,20 C15,15 20,10 25,10 C30,10 35,15 35,20 L35,35 M10,12 L15,18 M40,12 L35,18 M20,25 L20,35 M30,25 L30,35',
'å¯…': 'M25,8 L20,15 L15,12 L18,20 L10,25 L18,28 L15,38 L25,32 L35,38 L32,28 L40,25 L32,20 L35,12 L30,15 Z M22,22 L22,26 M28,22 L28,26',
'å¯': 'M25,38 C20,38 18,35 18,30 L18,15 C18,12 20,10 22,8 L22,5 C22,3 24,2 25,2 C26,2 28,3 28,5 L28,8 C30,10 32,12 32,15 L32,30 C32,35 30,38 25,38 M22,18 L22,22 M28,18 L28,22',
'è¾°': 'M25,5 C15,8 10,18 12,28 C14,35 20,40 28,40 C35,38 40,32 40,25 L35,20 L40,15 L35,12 C32,8 28,5 25,5 M18,20 C20,18 22,20 20,22 M15,28 L10,32 M18,32 L15,38',
'å·³': 'M30,38 C25,40 20,38 18,35 C15,30 15,25 18,20 C20,16 25,15 28,18 C32,15 35,18 35,22 C35,26 32,28 28,28 C25,28 22,25 22,22 M35,30 L38,35',
'åˆ': 'M25,5 L20,12 L15,10 L18,18 L10,22 L15,25 L15,40 L22,35 L25,40 L28,35 L35,40 L35,25 L40,22 L32,18 L35,10 L30,12 Z M22,22 L22,26 M28,22 L28,26',
'æœª': 'M25,8 C20,8 15,12 15,18 C15,22 18,25 20,26 L15,40 L25,35 L35,40 L30,26 C32,25 35,22 35,18 C35,12 30,8 25,8 M12,15 C10,12 8,15 10,18 M38,15 C40,12 42,15 40,18',
'ç”³': 'M25,5 C18,5 15,10 15,15 C15,20 18,23 22,25 C20,28 18,32 20,36 C22,40 28,40 30,36 C32,32 30,28 28,25 C32,23 35,20 35,15 C35,10 32,5 25,5 M20,12 L20,16 M30,12 L30,16 M25,35 L25,40 L22,42 M25,40 L28,42',
'é…‰': 'M25,5 C20,5 18,8 18,12 L18,15 L15,18 L15,25 L18,28 L18,35 C18,38 22,40 25,40 C28,40 32,38 32,35 L32,28 L35,25 L35,18 L32,15 L32,12 C32,8 30,5 25,5 M22,20 L22,24 M28,20 L28,24',
'æˆŒ': 'M25,5 C18,5 15,10 15,15 L15,25 C12,28 10,32 12,35 C15,40 22,40 25,38 C28,40 35,40 38,35 C40,32 38,28 35,25 L35,15 C35,10 32,5 25,5 M20,15 L20,20 M30,15 L30,20 M22,28 Q25,32 28,28',
'äº¥': 'M25,8 C18,8 12,15 12,22 C12,30 18,35 22,38 L18,42 L25,40 L32,42 L28,38 C32,35 38,30 38,22 C38,15 32,8 25,8 M18,18 L18,22 M32,18 L32,22 M20,28 L22,32 M30,28 L28,32'
};
const ANIMAL_QUOTE = {
'å­': { ko: 'çŸ¥æµã¨ä¿Šæ•ã•ã§æ©Ÿä¼šã‚’æ´ã‚', en: 'Seize opportunities with wisdom and agility' },
'ä¸‘': { ko: 'é»™ã€…ã¨ã—ãŸå¿è€ãŒå¤§ããªæˆæœã‚’ç”Ÿã‚€', en: 'Silent perseverance leads to great achievement' },
'å¯…': { ko: 'å‹‡çŒ›ãªæ°—é‹ã§æ–°ãŸãªé“ã‚’åˆ‡ã‚Šé–‹ã‘', en: 'Blaze new trails with courageous spirit' },
'å¯': { ko: 'æŸ”ã‚‰ã‹ã•ã®ä¸­ã«å¼·ã•ã‚’ç§˜ã‚ã‚ˆ', en: 'Embrace strength within gentleness' },
'è¾°': { ko: 'å¤©ã®æ°—ã‚’å—ã‘ã¦é£›ç¿”ã›ã‚ˆ', en: 'Rise with the energy of the heavens' },
'å·³': { ko: 'æ·±ã„æ´å¯Ÿã§æœ¬è³ªã‚’è¦‹æŠœã‘', en: 'Pierce through to essence with deep insight' },
'åˆ': { ko: 'æƒ…ç†±ã®ç‚ã§ä¸–ç•Œã‚’ç…§ã‚‰ã›', en: 'Light up the world with passionate flame' },
'æœª': { ko: 'ç©ã‚„ã‹ãªå¿ƒã§èª¿å’Œã‚’æˆã—é‚ã’ã‚ˆ', en: 'Achieve harmony with a gentle heart' },
'ç”³': { ko: 'è³¢ã„æ©Ÿè»¢ã§é›£é–¢ã‚’çªç ´ã›ã‚ˆ', en: 'Break through obstacles with clever wit' },
'é…‰': { ko: 'è¼ãè‡ªä¿¡ã§å…ˆã‚’è¡Œã‘', en: 'Lead the way with radiant confidence' },
'æˆŒ': { ko: 'å¿ å®Ÿãªå¿ƒãŒä¿¡é ¼ã‚’ç¯‰ã', en: 'Loyal heart builds lasting trust' },
'äº¥': { ko: 'è±Šç©£ãªç¦ã§çš†ã‚’åˆ©ã›ã‚ˆ', en: 'Bless all with abundant fortune' }
};
const ARCHETYPE_60 = {
'ç”²å­': { ko: 'é’ã„ãƒã‚ºãƒŸ', en: 'Blue Rat', color: '#0000AA', pko: 'å§‹ã¾ã‚Šã‚’ä¸»å°ã™ã‚‹é‡æœ›å®¶', pen: 'The Ambitious Pioneer' },
'ä¹™ä¸‘': { ko: 'é’ã„ç‰›', en: 'Blue Ox', color: '#0000AA', pko: '', pen: '' },
'ä¸™å¯…': { ko: 'èµ¤ã„è™', en: 'Red Tiger', color: '#C62828', pko: 'æƒ…ç†±çš„ãªãƒ­ãƒãƒ³ãƒã‚¹ãƒˆ', pen: 'The Passionate Romantic' },
'ä¸å¯': { ko: 'èµ¤ã„ã‚¦ã‚µã‚®', en: 'Red Rabbit', color: '#C62828', pko: 'é‹­ã„æ„Ÿè¦šã®èŠ¸è¡“å®¶', pen: 'The Sharp Artist' },
'æˆŠè¾°': { ko: 'é‡‘ã®é¾', en: 'Golden Dragon', color: '#F9A825', pko: 'ã‚¹ã‚±ãƒ¼ãƒ«ã®å¤§ããªãƒªãƒ¼ãƒ€ãƒ¼', pen: 'The Grand Leader' },
'å·±å·³': { ko: 'é‡‘ã®è›‡', en: 'Golden Snake', color: '#F9A825', pko: 'é™ã‹ã ãŒç·»å¯†ãªæˆ¦ç•¥å®¶', pen: 'The Silent Strategist' },
'åºšåˆ': { ko: 'ç™½ã„é¦¬', en: 'White Horse', color: '#FFFFFF', pko: 'å¦¥å”ãªãç›´é€²å‹', pen: 'The Uncompromising Racer' },
'è¾›æœª': { ko: 'ç™½ã„ç¾Š', en: 'White Sheep', color: '#FFFFFF', pko: 'å¤–æŸ”å†…å‰›ã®å®Œç’§ä¸»ç¾©è€…', pen: 'The Gentle Perfectionist' },
'å£¬ç”³': { ko: 'é»’ã„çŒ¿', en: 'Black Monkey', color: '#000000', pko: 'å¤šæ‰å¤šèƒ½ãªè‡¨æ©Ÿå¿œå¤‰ã®é”äºº', pen: 'The Versatile Genius' },
'ç™¸é…‰': { ko: 'é»’ã„é¶', en: 'Black Rooster', color: '#000000', pko: 'å†·å¾¹ãªçŸ¥æ€§ã®æŒã¡ä¸»', pen: 'The Cool Intellectual' },
'ç”²æˆŒ': { ko: 'é’ã„çŠ¬', en: 'Blue Dog', color: '#0000AA', pko: 'ç‹¬ç«‹çš„ãªç¾©ç†ã®äºº', pen: 'The Independent Loyalist' },
'ä¹™äº¥': { ko: 'é’ã„è±š', en: 'Blue Pig', color: '#0000AA', pko: 'ç©ã‚„ã‹ãªå¹³å’Œä¸»ç¾©è€…', pen: 'The Gentle Peacemaker' },
'ä¸™å­': { ko: 'èµ¤ã„ãƒã‚ºãƒŸ', en: 'Red Rat', color: '#C62828', pko: 'è¯éº—ãªå¼èˆŒã®ç¤¾äº¤ç•Œã®åå£«', pen: 'The Eloquent Socialite' },
'ä¸ä¸‘': { ko: 'èµ¤ã„ç‰›', en: 'Red Ox', color: '#C62828', pko: 'æ¸©ã‹ã„å¿ƒã®å¥‰ä»•è€…', pen: 'The Warm-hearted Server' },
'æˆŠå¯…': { ko: 'é‡‘ã®è™', en: 'Golden Tiger', color: '#F9A825', pko: 'åèª‰ã‚’é‡ã‚“ã˜ã‚‹å¤§ä¸ˆå¤«', pen: 'The Honorable Commander' },
'å·±å¯': { ko: 'é‡‘ã®ã‚¦ã‚µã‚®', en: 'Golden Rabbit', color: '#F9A825', pko: 'å®Ÿåˆ©ã‚’å–ã‚‹å®Ÿåˆ©ä¸»ç¾©è€…', pen: 'The Pragmatic Taker' },
'åºšè¾°': { ko: 'ç™½ã„é¾', en: 'White Dragon', color: '#FFFFFF', pko: 'å‰›ç›´ãªæ”¹é©å®¶', pen: 'The Strong Reformer' },
'è¾›å·³': { ko: 'ç™½ã„è›‡', en: 'White Snake', color: '#FFFFFF', pko: 'é‹­ã„ç›´æ„Ÿã®æŒã¡ä¸»', pen: 'The Intuitive Sage' },
'å£¬åˆ': { ko: 'é»’ã„é¦¬', en: 'Black Horse', color: '#000000', pko: 'è‡ªç”±ãªé­‚ã®æ—…äºº', pen: 'The Free Spirit' },
'ç™¸æœª': { ko: 'é»’ã„ç¾Š', en: 'Black Sheep', color: '#000000', pko: 'ç¹Šç´°ãªæ„Ÿæ€§ã®å®ˆè­·è€…', pen: 'The Sensitive Guardian' },
'ç”²ç”³': { ko: 'é’ã„çŒ¿', en: 'Blue Monkey', color: '#0000AA', pko: 'å¤šæ‰å¤šèƒ½ãªé©å‘½å®¶', pen: 'The Versatile Revolutionary' },
'ä¹™é…‰': { ko: 'é’ã„é¶', en: 'Blue Rooster', color: '#0000AA', pko: 'åˆ€ã®ã‚ˆã†ãªæ±ºæ–­åŠ›ã®æŒã¡ä¸»', pen: 'The Decisive Cutter' },
'ä¸™æˆŒ': { ko: 'èµ¤ã„çŠ¬', en: 'Red Dog', color: '#C62828', pko: 'ç‡ç›´ã§è±ªå¿«ãªãƒªãƒ¼ãƒ€ãƒ¼', pen: 'The Honest Boss' },
'ä¸äº¥': { ko: 'èµ¤ã„è±š', en: 'Red Pig', color: '#C62828', pko: 'ç¥ç§˜çš„ãªäºˆè¨€è€…', pen: 'The Mystic Prophet' },
'æˆŠå­': { ko: 'é‡‘ã®ãƒã‚ºãƒŸ', en: 'Golden Rat', color: '#F9A825', pko: 'è²¡ã‚’è“„ãˆã‚‹éš ã‚Œå¯Œè±ª', pen: 'The Wealth Collector' },
'å·±ä¸‘': { ko: 'é‡‘ã®ç‰›', en: 'Golden Ox', color: '#F9A825', pko: 'æ„šç›´ãªä¿¡å¿µã®æŒã¡ä¸»', pen: 'The Stubborn Believer' },
'åºšå¯…': { ko: 'ç™½ã„è™', en: 'White Tiger', color: '#FFFFFF', pko: 'æ­£ç¾©ã®é—˜å£«', pen: 'The Righteous Fighter' },
'è¾›å¯': { ko: 'ç™½ã„ã‚¦ã‚µã‚®', en: 'White Rabbit', color: '#FFFFFF', pko: 'ç¹Šç´°ã ãŒé­…åŠ›çš„ãªã‚¹ã‚¿ãƒ¼', pen: 'The Sensitive Star' },
'å£¬è¾°': { ko: 'é»’ã„é¾', en: 'Black Dragon', color: '#000000', pko: 'é›„å¤§ãªæŠ±è² ã®å¤‰ã‚ã‚Šè€…', pen: 'The Grand Maverick' },
'ç™¸å·³': { ko: 'é»’ã„è›‡', en: 'Black Snake', color: '#000000', pko: 'è«–ç†çš„ãªå¤©æ‰', pen: 'The Logical Genius' },
'ç”²åˆ': { ko: 'é’ã„é¦¬', en: 'Blue Horse', color: '#0000AA', pko: 'ãƒ­ãƒãƒ³ã‚’è¿½ã†ç†æƒ³ä¸»ç¾©è€…', pen: 'The Romantic Idealist' },
'ä¹™æœª': { ko: 'é’ã„ç¾Š', en: 'Blue Sheep', color: '#0000AA', pko: 'ç¾å®Ÿçš„ãªç®¡ç†è€…', pen: 'The Realistic Manager' },
'ä¸™ç”³': { ko: 'èµ¤ã„çŒ¿', en: 'Red Monkey', color: '#C62828', pko: 'è¯éº—ãªæ‰èƒ½ã®ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼', pen: 'The Talented Entertainer' },
'ä¸é…‰': { ko: 'èµ¤ã„é¶', en: 'Red Rooster', color: '#C62828', pko: 'å¤œç©ºã®æ˜Ÿã®ã‚ˆã†ã«è¼ãè²´æ—', pen: 'The Shining Noble' },
'æˆŠæˆŒ': { ko: 'é‡‘ã®çŠ¬', en: 'Golden Dog', color: '#F9A825', pko: 'ä¿¡é ¼ã§ãã‚‹ä»²è£è€…', pen: 'The Trustworthy Mediator' },
'å·±äº¥': { ko: 'é‡‘ã®è±š', en: 'Golden Pig', color: '#F9A825', pko: 'èé€šæ€§ã®ã‚ã‚‹äº¤æ¸‰å®¶', pen: 'The Flexible Negotiator' },
'åºšå­': { ko: 'ç™½ã„ãƒã‚ºãƒŸ', en: 'White Rat', color: '#FFFFFF', pko: 'å†·å¾¹ãªæ‰¹è©•å®¶', pen: 'The Critical Analyst' },
'è¾›ä¸‘': { ko: 'ç™½ã„ç‰›', en: 'White Ox', color: '#FFFFFF', pko: 'é»™ã€…ã¨æ­©ã‚€ä¿®è¡Œè€…', pen: 'The Silent Practitioner' },
'å£¬å¯…': { ko: 'é»’ã„è™', en: 'Black Tiger', color: '#000000', pko: 'çŸ¥æµæ·±ã„ç‹©äºº', pen: 'The Wise Hunter' },
'ç™¸å¯': { ko: 'é»’ã„ã‚¦ã‚µã‚®', en: 'Black Rabbit', color: '#000000', pko: 'å„ªã—ã„å¤–è¦‹ã®ä¸­ã®é‡å¿ƒå®¶', pen: 'The Gentle Ambition' },
'ç”²è¾°': { ko: 'é’ã„é¾', en: 'Blue Dragon', color: '#0000AA', pko: 'èºŠèº‡ãªãæŒ‘æˆ¦è€…', pen: 'The Bold Challenger' },
'ä¹™å·³': { ko: 'é’ã„è›‡', en: 'Blue Snake', color: '#0000AA', pko: 'è¡¨ç¾åŠ›è±Šã‹ãªé›„å¼å®¶', pen: 'The Expressive Speaker' },
'ä¸™åˆ': { ko: 'èµ¤ã„é¦¬', en: 'Red Horse', color: '#C62828', pko: 'å¤ªé™½ã®ã‚ˆã†ã«ç†±ã„æƒ…ç†±ã®äºº', pen: 'The Blazing Sun' },
'ä¸æœª': { ko: 'èµ¤ã„ç¾Š', en: 'Red Sheep', color: '#C62828', pko: 'æ¸©ã‹ã„çŠ ç‰²ã®ç²¾ç¥', pen: 'The Warm Sacrifice' },
'æˆŠç”³': { ko: 'é‡‘ã®çŒ¿', en: 'Golden Monkey', color: '#F9A825', pko: 'å­¤é«˜ã®ç¾©ç†ã®äºº', pen: 'The Lonely Loyalist' },
'å·±é…‰': { ko: 'é‡‘ã®é¶', en: 'Golden Rooster', color: '#F9A825', pko: 'å¾¹é ­å¾¹å°¾ã®åŸå‰‡ä¸»ç¾©è€…', pen: 'The Strict Principlist' },
'åºšæˆŒ': { ko: 'ç™½ã„çŠ¬', en: 'White Dog', color: '#FFFFFF', pko: 'å¼·é­ãªæ„å¿—ã®å®ˆè­·è€…', pen: 'The Strong Guardian' },
'è¾›äº¥': { ko: 'ç™½ã„è±š', en: 'White Pig', color: '#FFFFFF', pko: 'ç´”ç²‹ã§æ¸…ã‚‰ã‹ãªé­‚', pen: 'The Pure Soul' },
'å£¬å­': { ko: 'é»’ã„ãƒã‚ºãƒŸ', en: 'Black Rat', color: '#000000', pko: 'æ·±ã„æµ·ã®ã‚ˆã†ãªåŒ…å®¹åŠ›', pen: 'The Deep Ocean' },
'ç™¸ä¸‘': { ko: 'é»’ã„ç‰›', en: 'Black Ox', color: '#000000', pko: 'éš ã•ã‚ŒãŸæ½œåœ¨åŠ›ã®çˆ†ç™º', pen: 'The Hidden Potential' },
'ç”²å¯…': { ko: 'é’ã„è™', en: 'Blue Tiger', color: '#0000AA', pko: 'è‡ªå°Šå¿ƒã®å¼·ã„ãƒªãƒ¼ãƒ€ãƒ¼', pen: 'The Proud Boss' },
'ä¹™å¯': { ko: 'é’ã„ã‚¦ã‚µã‚®', en: 'Blue Rabbit', color: '#0000AA', pko: 'ç©ã‚„ã‹ãªã‚«ãƒªã‚¹ãƒ', pen: 'The Soft Charisma' },
'ä¸™è¾°': { ko: 'èµ¤ã„é¾', en: 'Red Dragon', color: '#C62828', pko: 'ä¸‡äººã‚’ç…§ã‚‰ã™å¤ªé™½', pen: 'The Shining Light' },
'ä¸å·³': { ko: 'èµ¤ã„è›‡', en: 'Red Snake', color: '#C62828', pko: 'è¯éº—ãªç‚', pen: 'The Fireworks' },
'æˆŠåˆ': { ko: 'é‡‘ã®é¦¬', en: 'Golden Horse', color: '#F9A825', pko: 'å¤§åœ°ã‚’é§†ã‘ã‚‹é‡ç”Ÿé¦¬', pen: 'The Wild Runner' },
'å·±æœª': { ko: 'é‡‘ã®ç¾Š', en: 'Golden Sheep', color: '#F9A825', pko: 'å¿è€å¿ƒã®å¼·ã„é–‹æ‹“è€…', pen: 'The Patient Pioneer' },
'åºšç”³': { ko: 'ç™½ã„çŒ¿', en: 'White Monkey', color: '#FFFFFF', pko: 'æ¨©å¨ã‚ã‚‹é©å‘½å®¶', pen: 'The Authoritative Rebel' },
'è¾›é…‰': { ko: 'ç™½ã„é¶', en: 'White Rooster', color: '#FFFFFF', pko: 'å®çŸ³ã®ã‚ˆã†ã«è¼ãè‡ªå°Šå¿ƒ', pen: 'The Jewel Pride' },
'å£¬æˆŒ': { ko: 'é»’ã„çŠ¬', en: 'Black Dog', color: '#000000', pko: 'çŸ¥æµã‚’éš ã—ãŸè³¢è€…', pen: 'The Hidden Sage' },
'ç™¸äº¥': { ko: 'é»’ã„è±š', en: 'Black Pig', color: '#000000', pko: 'çµ‚ã‚ã‚Šã¨å§‹ã¾ã‚Šã‚’ç¹‹ãå“²å­¦è€…', pen: 'The Philosopher' }
};
const BRANCH_TO_ANIMAL = {
'å­':'rat','ä¸‘':'ox','å¯…':'tiger','å¯':'rabbit','è¾°':'dragon','å·³':'snake',
'åˆ':'horse','æœª':'sheep','ç”³':'monkey','é…‰':'rooster','æˆŒ':'dog','äº¥':'pig'
};
const animalImages = {};
function preloadAnimalImages() {
Object.values(BRANCH_TO_ANIMAL).forEach(name => {
const img = new Image();
img.src = 'animals/' + name + '.webp';
animalImages[name] = img;
});
}
if (document.readyState === 'loading') {
document.addEventListener('DOMContentLoaded', preloadAnimalImages);
} else {
preloadAnimalImages();
}
const INTERACTION_METAPHOR_KR = {
'wood_fire': { name: 'è–ªã¨ç‚', emoji: 'ğŸªµâ†’ğŸ”¥', type: 'generate', desc: 'ç§ãŒç›¸æ‰‹ã®æƒ…ç†±ã«ç«ã‚’ç¯ã™', advice: 'ãƒãƒ¼ãƒ³ã‚¢ã‚¦ãƒˆã—ãªã„ã‚ˆã†ã‚¨ãƒãƒ«ã‚®ãƒ¼ç®¡ç†' },
'fire_earth': { name: 'ç°ã¨ãªã‚Šè‚¥æ²ƒãªå¤§åœ°ã«', emoji: 'ğŸ”¥â†’ğŸŒ', type: 'generate', desc: 'ç§ã®æƒ…ç†±ãŒç›¸æ‰‹ã®å®‰å®šã‚’è±Šã‹ã«ã™ã‚‹', advice: 'ä¸ãˆã‚‹ã“ã¨ã¨å®ˆã‚‹ã“ã¨ã®å‡è¡¡' },
'earth_metal': { name: 'é‰±è„ˆã®ç™ºè¦‹', emoji: 'â›°ï¸â†’âš™ï¸', type: 'generate', desc: 'ç§ã®æ”¯ãˆãŒç›¸æ‰‹ã®ä¾¡å€¤ã‚’å¼•ãå‡ºã™', advice: 'å¿è€ã‚ã‚‹æŠ•è³‡ãŒè²´ã„çµå®Ÿã‚’çµã¶' },
'metal_water': { name: 'å†·ãŸã„é‡‘å±ã®éœ²', emoji: 'ğŸª™â†’ğŸ’§', type: 'generate', desc: 'ç§ã®æ§‹é€ ãŒç›¸æ‰‹ã®æµã‚Œã‚’å°ã', advice: 'æµã‚Œã‚’æ­¢ã‚ãšã«æ–¹å‘ã‚’ç¤ºã™' },
'water_wood': { name: 'é›¨é™ã‚‹æ£®', emoji: 'ğŸŒ§ï¸â†’ğŸŒ²', type: 'generate', desc: 'ç§ãŒç›¸æ‰‹ã®æˆé•·ã‚’é¤Šã†', advice: 'ç€å®Ÿãªæ”¯ãˆãŒãã³ãˆç«‹ã¤æˆåŠŸã‚’ä½œã‚‹' },
'wood_earth': { name: 'æ ¹ãŒå¤§åœ°ã‚’å‰²ã‚‹', emoji: 'ğŸŒ³âš¡ğŸŒ', type: 'control', desc: 'ç§ãŒç›¸æ‰‹ã®åŸºç›¤ã‚’æºã‚‹ãŒã™', advice: 'æ”¯é…ã§ã¯ãªãæˆé•·ã‚’åŠ©ã‘ã‚‹ã¹ã' },
'earth_water': { name: 'ã‚¹ãƒãƒ³ã‚¸', emoji: 'ğŸ§½ğŸ’§', type: 'control', desc: 'ç›¸æ‰‹ã®æ„Ÿæƒ…ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¸å', advice: 'å®‰å…¨ãªæ¸¯ã¨ãªã‚Šã¤ã¤ã€è‡ªåˆ†ã‚‚çµã‚Šå‡ºã™ã¹ã' },
'water_fire': { name: 'ç«ã‚’æ¶ˆã™æ°´', emoji: 'ğŸ’§ğŸš«ğŸ”¥', type: 'control', desc: 'ç›¸æ‰‹ã®å¼·çƒˆã•ã‚’å†·ã¾ã™', advice: 'å†·ã¾ã™å½±éŸ¿ã¨æƒ…ç†±ã®å…±å­˜ãŒå‡è¡¡' },
'fire_metal': { name: 'æº¶é‰±ç‚‰', emoji: 'ğŸ”¥ğŸ”¨âš™ï¸', type: 'control', desc: 'ç§ã®ç†±ãŒç›¸æ‰‹ã‚’å¤‰å½¢ã•ã›ã‚‹', advice: 'å¤‰å½¢ãŒç ´å£Šã«ãªã‚‰ãªã„ã‚ˆã†ã«' },
'metal_wood': { name: 'æ–§ã¨æœ¨', emoji: 'ğŸª“ğŸŒ³', type: 'control', desc: 'ç§ã®é‹­ã•ãŒç›¸æ‰‹ã®æˆé•·ã‚’æ–­ã¤', advice: 'ç›®çš„ã‚ã‚‹å‰ªå®šã®ã¿ã€ç†ç”±ãªãåˆ‡ã‚‰ãªã„ã“ã¨' },
'wood_wood': { name: 'æ£®ã®åŒç›Ÿ', emoji: 'ğŸŒ²ğŸŒ²', type: 'same', desc: 'åŒã˜æ–¹å‘ã«è‚²ã¤åŒå¿—', advice: 'äº’ã„ã®å…‰ã‚’é®ã‚‰ãšã«æˆé•·' },
'fire_fire': { name: 'é‡ç«', emoji: 'ğŸ”¥ğŸ”¥', type: 'same', desc: 'å¹¾ä½•ç´šæ•°çš„ã«å¤§ãããªã‚‹æƒ…ç†±', advice: 'äº’ã„ã‚’æ¶ˆè€—ã™ã‚‹å‰ã«å…±ã«å‰µé€ ' },
'earth_earth': { name: 'å±±è„ˆ', emoji: 'â›°ï¸â›°ï¸', type: 'same', desc: 'äºŒå€å …å›ºãªåŸºç›¤ã€‚åœæ»ã®å¯èƒ½æ€§', advice: 'å¤‰åŒ–ã‚’å°å…¥ã—ã¦åœæ»ã‚’é˜²æ­¢' },
'metal_metal': { name: 'å‰£ã¨å‰£', emoji: 'âš”ï¸âš”ï¸', type: 'same', desc: 'ã¶ã¤ã‹ã‚‹ã‹é€£åˆã™ã‚‹é‹­ã„ç²¾ç¥', advice: 'åˆƒã‚’äº’ã„ã§ãªãå¤–ã«å‘ã‘ã‚ˆ' },
'water_water': { name: 'æµ·ã®åˆæµ', emoji: 'ğŸŒŠğŸŒŠ', type: 'same', desc: 'æ·±ã•ãŒåˆã‚ã•ã‚Šåºƒå¤§ã«ãªã‚‹', advice: 'äº’ã„ã®æ„Ÿæƒ…ã«æººã‚Œãªã„ã‚ˆã†æ¥åœ°' },
'earth_wood': { name: 'åœŸã®ä¸Šã®æœ¨', emoji: 'ğŸŒğŸŒ²', type: 'support', desc: 'ç§ãŒç›¸æ‰‹ã®æˆé•·åŸºç›¤ã¨ãªã‚‹', advice: 'æ”¯ãˆã¤ã¤åŸ·ç€ã—ãªã„ã“ã¨' },
'wood_metal': { name: 'æ–§ã«åˆ‡ã‚‰ã‚Œã‚‹æœ¨', emoji: 'ğŸŒ²âš¡ğŸª“', type: 'receive', desc: 'ç›¸æ‰‹ã®é‹­ã•ã«å½±éŸ¿ã‚’å—ã‘ã‚‹', advice: 'æŸ”è»Ÿã•ã§å¯¾å¿œ' },
'fire_water': { name: 'æ¶ˆãˆã‚†ãç‚', emoji: 'ğŸ”¥âš¡ğŸ’§', type: 'receive', desc: 'ç›¸æ‰‹ã®å†·é™ã•ã«å†·ã¾ã•ã‚Œã‚‹', advice: 'æƒ…ç†±ã®æœ¬è³ªã‚’å®ˆã‚ŠãªãŒã‚‰èª¿å¾‹' },
'water_earth': { name: 'å °ãæ­¢ã‚ã‚‰ã‚Œã‚‹æ°´', emoji: 'ğŸ’§âš¡ğŸŒ', type: 'receive', desc: 'ç›¸æ‰‹ã®å …ã•ã«æµã‚ŒãŒæ­¢ã¾ã‚‹', advice: 'è¿‚å›ã™ã‚‹çŸ¥æµ' },
'metal_fire': { name: 'æº¶ã‘ã‚‹é‡‘å±', emoji: 'âš™ï¸âš¡ğŸ”¥', type: 'receive', desc: 'ç›¸æ‰‹ã®æƒ…ç†±ã«å¤‰å½¢ã•ã‚Œã‚‹', advice: 'é›éŒ¬ã§å—ã‘å…¥ã‚Œã‚‹' }
};
const BRANCH_CLASH_V2 = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];
const SELF_PUNISHMENT_V2 = [[6,6],[9,9],[4,4],[11,11]];
function analyzeYearlyRisksV2(mySaju, partnerSaju, startYear, years) {
const risks = [];
for (let year = startYear; year < startYear + years; year++) {
const yearBranch = (year - 4) % 12;
const yearEvents = [];
const pBrIdx = BRANCH.findIndex(b => b.c === partnerSaju.day.b.c);
const myBrIdx = BRANCH.findIndex(b => b.c === mySaju.day.b.c);
if (BRANCH_CLASH_V2.some(([a,b]) => (pBrIdx===a&&yearBranch===b)||(pBrIdx===b&&yearBranch===a))) {
yearEvents.push({ type: 'ç›¸æ‰‹æ—¥æ”¯å†²', severity: 'âš ï¸', desc: year+'å¹´ ç›¸æ‰‹ã®æ—¥æ”¯ã¨æ­³é‹ãŒå†²', advice: 'ç›¸æ‰‹ã®ã‚¹ãƒˆãƒ¬ã‚¹æœŸé–“ã€‚ç‰¹ã«é…æ…®ãŒå¿…è¦ã€‚' });
}
if (SELF_PUNISHMENT_V2.some(([a,b]) => pBrIdx===a&&yearBranch===b)) {
yearEvents.push({ type: 'ç›¸æ‰‹è‡ªåˆ‘', severity: 'âš ï¸', desc: year+'å¹´ ç›¸æ‰‹ã®è‡ªåˆ‘æ®ºç™ºå‹•', advice: 'è‡ªè²¬å‚¾å‘ã«æ³¨æ„ã€‚å®‰å®šæ„Ÿã‚’æä¾›ã€‚' });
}
if (BRANCH_CLASH_V2.some(([a,b]) => (myBrIdx===a&&yearBranch===b)||(myBrIdx===b&&yearBranch===a))) {
yearEvents.push({ type: 'ç§ã®æ—¥æ”¯å†²', severity: 'âš ï¸', desc: year+'å¹´ ç§ã®æ—¥æ”¯ã¨æ­³é‹ãŒå†²', advice: 'ç§ãŒè¾›ã„å¹´ã€‚ç›¸æ‰‹ã®åœ°æ”¯ãŒå¿…è¦ã€‚' });
}
if (yearEvents.length > 0) risks.push({ year, events: yearEvents });
}
return risks;
}
function generateCharacterSectionHTML(myIlju, pIlju, myDm, pDm) {
const myChar = ILJU_IMAGE_KR[myIlju] || { name: 'ä¸æ˜', emoji: 'â“', desc: '' };
const pChar = ILJU_IMAGE_KR[pIlju] || { name: 'ä¸æ˜', emoji: 'â“', desc: '' };
const interactionKey = myDm.e + '_' + pDm.e;
const reverseKey = pDm.e + '_' + myDm.e;
const myToP = INTERACTION_METAPHOR_KR[interactionKey];
const pToMe = INTERACTION_METAPHOR_KR[reverseKey];
let html = '<div class="card"><h3>ğŸ­ æ—¥æŸ±ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼</h3><div style="display:grid;grid-template-columns:1fr auto 1fr;gap:10px;align-items:center;margin-top:15px;"><div style="text-align:center;padding:15px;background:rgba(253,216,53,0.1);border-radius:10px;"><p style="font-size:2rem;margin-bottom:5px;">'+myChar.emoji+'</p><p style="font-size:1.1rem;font-weight:bold;color:var(--gold);">"'+myChar.name+'"</p><p style="font-size:0.8rem;color:var(--gray);margin-top:8px;">'+myChar.desc+'</p></div><div style="text-align:center;font-size:1.5rem;">âš¡</div><div style="text-align:center;padding:15px;background:rgba(233,30,99,0.1);border-radius:10px;"><p style="font-size:2rem;margin-bottom:5px;">'+pChar.emoji+'</p><p style="font-size:1.1rem;font-weight:bold;color:#e91e63;">"'+pChar.name+'"</p><p style="font-size:0.8rem;color:var(--gray);margin-top:8px;">'+pChar.desc+'</p></div></div></div>';
if (myToP || pToMe) {
html += '<div class="card"><h3>ğŸ”„ äº”è¡ŒåŠ›å­¦</h3>';
if (myToP) {
html += '<div style="padding:12px;margin-top:10px;border-radius:8px;background:rgba(253,216,53,0.08);border-left:3px solid var(--gold);"><p style="font-weight:bold;margin-bottom:5px;"><span style="color:var(--gold);">ç§</span> â†’ <span style="color:#e91e63;">ç›¸æ‰‹</span>: "'+myToP.name+'" '+myToP.emoji+'</p><p style="font-size:0.9rem;margin-bottom:5px;">'+myToP.desc+'</p><p style="font-size:0.8rem;color:var(--gold);">ğŸ’¡ '+myToP.advice+'</p></div>';
}
if (pToMe) {
html += '<div style="padding:12px;margin-top:10px;border-radius:8px;background:rgba(233,30,99,0.08);border-left:3px solid #e91e63;"><p style="font-weight:bold;margin-bottom:5px;"><span style="color:#e91e63;">ç›¸æ‰‹</span> â†’ <span style="color:var(--gold);">ç§</span>: "'+pToMe.name+'" '+pToMe.emoji+'</p><p style="font-size:0.9rem;margin-bottom:5px;">'+pToMe.desc+'</p><p style="font-size:0.8rem;color:var(--gold);">ğŸ’¡ '+pToMe.advice+'</p></div>';
}
html += '</div>';
}
return { html, myChar, pChar, myToP, pToMe };
}
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-044J002H6P');</script><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"><title>K-MUDANG | å¤©æ©Ÿæ¼æ´© å››æŸ± Â· è­·ç¬¦ Â· ç›¸æ€§</title><meta name="description" content="ã‚ãªãŸã¯ç™½ã„è™ï¼Ÿãã‚Œã¨ã‚‚è’¼ã„é¾ï¼Ÿ äº”è¡Œã®æµã‚Œã®ä¸­ã«ã€ã‚ãªãŸã®ç‰©èªãŒåˆ»ã¾ã‚Œã‚‹ã€‚å››æŸ±æ¨å‘½ Â· ãŠå®ˆã‚Š Â· ç›¸æ€§"><!-- Open Graph / SNSå…±æœ‰ã‚µãƒ ãƒã‚¤ãƒ« --><meta property="og:type" content="website"><meta property="og:title" content="K-MUDANG | å¤©æ©Ÿæ¼æ´© å››æŸ± Â· è­·ç¬¦ Â· ç›¸æ€§"><meta property="og:description" content="ã›ã‚ã¦å·±ã®é‹å‘½ãã‚‰ã„çŸ¥ã£ã¦ãŠã‘ã€‚æ˜ŸãŒç©ºã‘ãŸå ´æ‰€ã‚’ã€ãŠå®ˆã‚ŠãŒæº€ãŸã™ã€‚"><meta property="og:image" content="ogimage.png"><meta property="og:url" content="https://k-mudang.com/jp.html"><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="K-MUDANG | å¤©æ©Ÿæ¼æ´© å››æŸ± Â· è­·ç¬¦ Â· ç›¸æ€§"><meta name="twitter:description" content="ã›ã‚ã¦å·±ã®é‹å‘½ãã‚‰ã„çŸ¥ã£ã¦ãŠã‘ã€‚æ˜ŸãŒç©ºã‘ãŸå ´æ‰€ã‚’ã€ãŠå®ˆã‚ŠãŒæº€ãŸã™ã€‚"><meta name="twitter:image" content="ogimage.png"><!-- JSON-LD Schema --><script type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareApplication","name":"K-MUDANG","alternateName":"å››æŸ±æ¨å‘½ãƒ­ãƒˆ","applicationCategory":"LifestyleApplication","operatingSystem":"Web Browser","description":"ã‚ãªãŸã¯ç™½ã„è™ï¼Ÿè’¼ã„é¾ï¼Ÿ äº”è¡Œã®æµã‚Œã®ä¸­ã«ã€ã‚ãªãŸã®ç‰©èªãŒåˆ»ã¾ã‚Œã‚‹ã€‚å››æŸ±æ¨å‘½ Â· ãŠå®ˆã‚Š Â· ç›¸æ€§","offers":{"@type":"Offer","price":"0","priceCurrency":"JPY"},"author":{"@type":"Organization","name":"K-MUDANG","url":"https://k-mudang.com"},"aggregateRating":{"@type":"AggregateRating","ratingValue":"4.9","ratingCount":"523"}}</script><link rel="icon" type="image/x-icon" href="favicon.ico"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16.png"><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="preconnect" href="https://fonts.googleapis.com"><link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Shippori+Mincho:wght@400;700;800&family=Zen+Kurenaido&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box}:root{--bg:#1a1a2e;--card:#16213e;--gold:#FDD835;--gold-dark:#F9A825;--red:#C62828;--red-dark:#8B0000;--white:#fff;--gray:#9CA3AF;--wood:#4CAF50;--fire:#F44336;--earth:#FF9800;--metal:#9E9E9E;--water:#2196F3;--blue:#003478}body{font-family:'Shippori Mincho','Noto Serif KR',serif;background:var(--bg);color:var(--white);min-height:100vh;padding-bottom:20px;line-height:1.8;position:relative}.watermark{position:fixed;top:120px;left:50%;transform:translateX(-50%);width:500px;max-width:100%;opacity:0.15;z-index:999;pointer-events:none}.watermark img{width:100%;height:auto;display:block}@media (max-width:600px){.watermark{width:100%;left:0;transform:none}}.bagua{position:fixed;font-size:2rem;opacity:0.5;pointer-events:none;z-index:1;font-family:serif;line-height:1;text-shadow:0 0 15px currentColor;text-align:center}.bagua.tl{top:200px;left:10px;color:#FFD700;transform:rotate(45deg)}.bagua.tr{top:200px;right:10px;color:#FF6B6B;transform:rotate(-45deg)}.bagua.bl{bottom:120px;left:10px;color:#4ECDC4;transform:rotate(135deg)}.bagua.br{bottom:120px;right:10px;color:#A29BFE;transform:rotate(-135deg)}.bagua-sub{display:none}header{background:linear-gradient(135deg,#1a1a2e 0%,#16213e 50%,#0f0f23 100%);padding:18px 15px 15px;text-align:center;position:relative;z-index:2;border-bottom:2px solid var(--gold);box-shadow:0 4px 20px rgba(253,216,53,0.2);overflow:hidden}header::before{content:'';position:absolute;top:0;left:-100%;width:200%;height:100%;background:linear-gradient(90deg,transparent,rgba(253,216,53,0.1),transparent);animation:headerShine 3s infinite}@keyframes headerShine{0%{transform:translateX(-50%)}100%{transform:translateX(50%)}}header::after{content:'âœ¦ ç¦ âœ¦ é‹ âœ¦ è²¡ âœ¦ å‰ âœ¦';position:absolute;top:5px;left:50%;transform:translateX(-50%);font-size:9px;color:var(--gold);letter-spacing:8px;opacity:0.5}header h1{font-size:28px;font-weight:900;background:linear-gradient(135deg,#FFD700 0%,#FFF8DC 25%,#FFD700 50%,#FFA500 75%,#FFD700 100%);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:goldShine 3s linear infinite;margin-top:10px;text-shadow:0 0 30px rgba(253,216,53,0.5);position:relative;z-index:1}@keyframes goldShine{0%{background-position:0% center}100%{background-position:200% center}}header p{font-size:12px;color:var(--gold);margin-top:10px;opacity:0.8;letter-spacing:1px;position:relative;z-index:1}.header-sparkles{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden}.sparkle{position:absolute;color:var(--gold);font-size:12px;animation:sparkleAnim 3s ease-in-out infinite;opacity:0}@keyframes sparkleAnim{0%,100%{opacity:0;transform:scale(0.5)}50%{opacity:1;transform:scale(1.2)}}.top-nav{background:rgba(26,26,46,0.75);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);display:flex;justify-content:center;align-items:center;gap:4px;padding:10px 8px;position:sticky;top:0;z-index:100}.top-nav button{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);color:var(--gray);font-family:inherit;font-size:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;padding:10px 18px;border-radius:25px;transition:all 0.2s;opacity:0.5;white-space:nowrap}.top-nav button:hover{background:rgba(255,255,255,0.1)}.top-nav button.active{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--red-dark);font-weight:700;border-color:var(--gold);box-shadow:0 2px 10px rgba(253,216,53,0.3);animation:tabPulse 2s infinite;opacity:1}@keyframes tabPulse{0%,100%{box-shadow:0 2px 10px rgba(253,216,53,0.3)}50%{box-shadow:0 4px 20px rgba(253,216,53,0.7)}}.container{max-width:500px;margin:0 auto;padding:10px;position:relative;z-index:1}.tab{display:none;animation:fadeIn 0.3s}.tab.active{display:block}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.card{background:linear-gradient(145deg,rgba(255,255,255,0.08),rgba(255,255,255,0.03));border:1px solid rgba(255,255,255,0.1);border-radius:16px;padding:15px;margin-bottom:10px}.card h3{font-size:15px;font-weight:700;margin-bottom:10px;color:var(--white);display:flex;align-items:center;gap:8px}.card.gold{background:linear-gradient(145deg,rgba(253,216,53,0.15),rgba(253,216,53,0.05));border-color:rgba(253,216,53,0.3)}.card.warn{background:linear-gradient(145deg,rgba(244,67,54,0.15),rgba(244,67,54,0.05));border-color:rgba(244,67,54,0.3)}.btn{background:linear-gradient(135deg,var(--red),var(--red-dark));color:var(--white);border:none;padding:14px 24px;font-family:inherit;font-size:17px;font-weight:700;border-radius:12px;cursor:pointer;width:100%;margin:4px 0;box-shadow:0 4px 15px rgba(198,40,40,0.3);transition:transform 0.2s}.btn:active{transform:scale(0.98)}.btn.gold{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--red-dark)}.btn.secondary{background:linear-gradient(135deg,#1a1a2e,#2d2d44);border:1px solid rgba(255,255,255,0.2);box-shadow:none}.btn.outline{background:transparent;border:1px solid rgba(255,255,255,0.3);box-shadow:none}.btn-row{display:flex;gap:10px;margin:10px 0}.btn-row .btn{flex:1;margin:0}.balls{display:flex;flex-wrap:wrap;justify-content:center;gap:5px;margin:10px 0}.ball{width:42px;height:42px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:18px;font-weight:700;color:var(--white);box-shadow:0 4px 12px rgba(0,0,0,0.3);position:relative}.ball::before{content:'';position:absolute;top:8px;left:12px;width:8px;height:8px;background:rgba(255,255,255,0.4);border-radius:50%}.ball.sm{width:36px;height:36px;font-size:14px}.ball.sm::before{width:6px;height:6px;top:6px;left:9px}.ball.y{background:linear-gradient(135deg,#FFC107,#FF9800)}.ball.b{background:linear-gradient(135deg,#42A5F5,#1976D2)}.ball.r{background:linear-gradient(135deg,#EF5350,#C62828)}.ball.g{background:linear-gradient(135deg,#66BB6A,#2E7D32)}.ball.p{background:linear-gradient(135deg,#AB47BC,#6A1B9A)}.form-row{display:flex;gap:6px;margin-bottom:8px;align-items:flex-end}.form-group{flex:1}.form-group label{display:block;color:var(--gray);font-size:13px;margin-bottom:4px}.form-group select,.form-group input{width:100%;padding:10px;background:#2a2a3d;border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:var(--white);font-family:inherit;font-size:14px}.form-group select option{background:#2a2a3d;color:#ffffff;padding:10px}.form-group select:focus,.form-group input:focus{outline:none;border-color:var(--gold)}.toggle-btns{display:flex;gap:5px}.toggle-btn{flex:1;padding:10px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.2);border-radius:8px;color:var(--gray);font-family:inherit;font-size:14px;cursor:pointer}.toggle-btn.on{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--red-dark);font-weight:700;border-color:var(--gold)}.pillars{display:flex;justify-content:center;gap:6px;margin:10px 0}.pillar{min-width:70px;background:linear-gradient(180deg,rgba(253,216,53,0.1),rgba(0,0,0,0.3));border:1px solid rgba(253,216,53,0.3);border-radius:12px;padding:12px 8px;text-align:center}.pillar.dm{border-color:var(--gold);box-shadow:0 0 15px rgba(253,216,53,0.3)}.pillar-label{font-size:11px;color:var(--gray);margin-bottom:8px}.pillar-stem,.pillar-branch{font-size:1.6rem;font-weight:900;display:block;margin:3px 0}.pillar-sub{font-size:10px;color:var(--gray);margin-top:6px}.pillar-god{font-size:10px;color:var(--gold);margin-top:4px}.el-wood{color:var(--wood)}.el-fire{color:var(--fire)}.el-earth{color:var(--earth)}.el-metal{color:var(--metal)}.el-water{color:var(--water)}.bg-wood{background:var(--wood)}.bg-fire{background:var(--fire)}.bg-earth{background:var(--earth)}.bg-metal{background:var(--metal)}.bg-water{background:var(--water)}.strength-box{background:rgba(0,0,0,0.3);border-radius:10px;padding:12px;margin:10px 0}.strength-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.strength-title{font-size:14px;color:var(--gold)}.strength-badge{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:700}.strength-badge.strong{background:rgba(239,68,68,0.2);color:#FCA5A5}.strength-badge.weak{background:rgba(59,130,246,0.2);color:#93C5FD}.strength-badge.balanced{background:rgba(234,179,8,0.2);color:#FDE047}.strength-bar{height:8px;background:rgba(255,255,255,0.1);border-radius:4px;overflow:hidden;margin-bottom:12px}.strength-fill{height:100%;border-radius:4px;transition:width 0.5s}.strength-fill.strong{background:linear-gradient(90deg,#EF4444,#F97316)}.strength-fill.weak{background:linear-gradient(90deg,#3B82F6,#06B6D4)}.strength-fill.balanced{background:linear-gradient(90deg,#EAB308,#22C55E)}.factors{display:grid;grid-template-columns:repeat(2,1fr);gap:6px}.factor{display:flex;justify-content:space-between;padding:6px 10px;background:rgba(255,255,255,0.03);border-radius:6px;font-size:13px}.factor-label{color:var(--gray)}.factor-value{font-weight:600}.factor-value.pos{color:var(--wood)}.factor-value.neg{color:var(--fire)}.gods{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin:10px 0}.god{text-align:center;padding:15px 10px;border-radius:12px;background:rgba(0,0,0,0.2)}.god.yong{border:2px solid var(--gold);background:linear-gradient(180deg,rgba(253,216,53,0.1),transparent)}.god.hee{border:2px solid var(--wood);background:linear-gradient(180deg,rgba(76,175,80,0.1),transparent)}.god.gi{border:2px solid var(--fire);background:linear-gradient(180deg,rgba(244,67,54,0.1),transparent)}.god-title{font-size:12px;color:var(--gray);margin-bottom:8px}.god-element{font-size:2rem;font-weight:900}.god-name{font-size:12px;margin-top:5px}.god-desc{font-size:11px;color:var(--gray);margin-top:4px}.sub-tabs{display:flex;gap:5px;margin-bottom:15px;flex-wrap:wrap}.sub-tab{padding:8px 12px;background:rgba(255,255,255,0.05);border:1px solid rgba(255,255,255,0.1);border-radius:20px;color:var(--gray);font-size:12px;cursor:pointer;font-family:inherit}.sub-tab.on{background:var(--gold);color:var(--red-dark);font-weight:700;border-color:var(--gold)}.sub-content{display:none}.sub-content.on{display:block}.daeun-panel{min-height:100px}.info-box{background:rgba(255,255,255,0.03);border-radius:10px;padding:12px;margin:8px 0;border-left:3px solid var(--gray)}.info-box.good{border-color:var(--wood);background:rgba(76,175,80,0.1)}.info-box.warn{border-color:var(--fire);background:rgba(244,67,54,0.1)}.info-box.gold{border-color:var(--gold);background:rgba(253,216,53,0.1)}.info-box p{font-size:14px;line-height:1.8}.info-box strong{color:var(--gold)}.luck-timeline{display:flex;gap:6px;overflow-x:auto;padding:8px 0}.luck-item{min-width:60px;text-align:center;padding:10px 8px;background:rgba(255,255,255,0.05);border-radius:10px;border:1px solid rgba(255,255,255,0.1);flex-shrink:0}.luck-item.current{border-color:var(--gold);background:rgba(253,216,53,0.1)}.luck-item.good{border-color:var(--wood)}.luck-item.bad{border-color:var(--fire)}.luck-age{font-size:11px;color:var(--gray)}.luck-pillar{font-size:16px;font-weight:700;margin:5px 0}.luck-rating{font-size:14px}.sinsal-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.sinsal{display:flex;align-items:flex-start;gap:10px;padding:12px;background:rgba(255,255,255,0.03);border-radius:10px;border:1px solid rgba(255,255,255,0.1)}.sinsal.good{border-color:rgba(76,175,80,0.5);background:rgba(76,175,80,0.1)}.sinsal.bad{border-color:rgba(244,67,54,0.5);background:rgba(244,67,54,0.1)}.sinsal-icon{font-size:1.5rem}.sinsal-name{font-size:13px;font-weight:700;margin-bottom:4px}.sinsal-desc{font-size:12px;color:var(--gray);line-height:1.5}.int-list{margin:10px 0}.int-item{display:flex;align-items:center;gap:12px;padding:12px;background:rgba(255,255,255,0.03);border-radius:10px;margin-bottom:8px}.int-type{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.1);border-radius:50%;font-weight:900;font-size:14px}.int-chars{font-size:16px;font-weight:700}.int-meaning{font-size:13px;color:var(--gray);margin-top:4px;line-height:1.5}.rating{display:flex;align-items:center;gap:5px;margin:10px 0}.rating-label{font-size:12px;color:var(--gray)}.rating-stars{font-size:16px;letter-spacing:2px}.history-item{display:flex;justify-content:center;gap:4px;padding:12px;background:rgba(255,255,255,0.03);border-radius:10px;margin:6px 0}.toast{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--gold);color:var(--red-dark);padding:15px 30px;border-radius:8px;font-size:14px;font-weight:700;opacity:0;transition:all 0.3s;z-index:200}.toast.show{transform:translateX(-50%) translateY(0);opacity:1}.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:200;align-items:center;justify-content:center;padding:20px}.modal.active{display:flex}.modal-content{background:var(--bg);border:1px solid rgba(253,216,53,0.3);border-radius:20px;padding:25px;width:100%;max-width:380px;text-align:center}.modal-content h3{color:var(--gold);margin-bottom:20px;font-size:18px}#capture-area{position:fixed;top:-9999px;left:-9999px;width:380px;padding:35px 25px;background:linear-gradient(145deg,var(--gold),var(--gold-dark));text-align:center;font-family:'Shippori Mincho','Noto Serif KR',serif;border-radius:20px;border:4px solid var(--red)}footer.tab-footer{display:none;text-align:center;padding:20px 15px;color:#666;font-size:11px;line-height:1.8}footer.tab-footer.active{display:block}.share-section{margin-top:20px;padding:15px;background:linear-gradient(145deg,rgba(253,216,53,0.08),rgba(255,215,0,0.03));border-radius:15px;text-align:center}.share-title{font-size:1rem;color:var(--gold);margin-bottom:15px}.share-buttons{display:flex;gap:10px;justify-content:center;flex-wrap:wrap}.share-btn{display:flex;align-items:center;gap:8px;padding:12px 20px;border-radius:25px;border:none;font-size:0.9rem;font-weight:600;cursor:pointer;transition:all 0.3s}.share-btn.line{background:#06C755;color:#FFFFFF}.share-btn.line:hover{background:#05B34D;transform:scale(1.05)}.share-btn.copy-link{background:rgba(255,255,255,0.1);color:var(--gold);border:1px solid var(--gold)}.share-btn.copy-link:hover{background:rgba(253,216,53,0.2)}#talisman-canvas{max-width:100%;height:auto;border-radius:10px;box-shadow:0 10px 40px rgba(212,175,55,0.3)}#talisman-preview{text-align:center;padding:15px;background:rgba(0,0,0,0.3);border-radius:15px;border:1px solid rgba(212,175,55,0.3)}#talisman-ritual-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);z-index:9999;justify-content:center;align-items:center;flex-direction:column}#talisman-ritual-overlay.active{display:flex}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}#talisman-ritual-overlay p{animation:pulse 1.5s infinite}.zodiac-wheel-container{display:none;text-align:center;margin:20px auto;padding:20px}.zodiac-wheel-container.show{display:block}.wheel-wrapper{position:relative;width:280px;height:280px;margin:0 auto 15px;border-radius:50%;box-shadow:0 8px 25px rgba(0,0,0,0.3),0 0 0 3px var(--gold),0 0 20px rgba(212,175,55,0.3)}.wheel-wrapper::after{content:'â–¼';position:absolute;top:-25px;left:50%;transform:translateX(-50%);font-size:24px;color:var(--red);z-index:10;filter:drop-shadow(0 2px 4px rgba(0,0,0,0.5))}.wheel-glow{position:absolute;top:-8px;left:-8px;right:-8px;bottom:-8px;border-radius:50%;background:conic-gradient( from 0deg,transparent,rgba(212,175,55,0.5),transparent,rgba(212,175,55,0.5),transparent );opacity:0;transition:opacity 0.3s ease;z-index:-1}.wheel-glow.active{opacity:1;animation:wheelGlowRotate 0.8s linear infinite}@keyframes wheelGlowRotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}#zodiacWheel{width:100%;height:100%;border-radius:50%;transition:transform 1.5s cubic-bezier(0.15,0.6,0.2,1)}.sparkle-overlay{position:absolute;top:0;left:0;width:100%;height:100%;border-radius:50%;pointer-events:none;opacity:0;transition:opacity 0.3s ease;background:radial-gradient(circle at 25% 25%,rgba(255,255,255,0.5) 0%,transparent 20%),radial-gradient(circle at 75% 30%,rgba(255,255,255,0.3) 0%,transparent 15%)}.sparkle-overlay.active{opacity:1;animation:wheelSparkle 0.15s ease-in-out infinite alternate}@keyframes wheelSparkle{0%{background:radial-gradient(circle at 25% 25%,rgba(255,255,255,0.5) 0%,transparent 20%),radial-gradient(circle at 75% 30%,rgba(255,255,255,0.3) 0%,transparent 15%)}100%{background:radial-gradient(circle at 30% 30%,rgba(255,255,255,0.6) 0%,transparent 25%),radial-gradient(circle at 70% 25%,rgba(255,255,255,0.4) 0%,transparent 20%)}}.zodiac-result-text{font-size:1.3rem;font-weight:bold;color:var(--gold);min-height:1.5em;opacity:0;transition:opacity 0.5s ease,transform 0.5s ease;transform:translateY(10px)}.zodiac-result-text.show{opacity:1;transform:translateY(0)}.zodiac-loading{display:none;color:var(--red);font-weight:500}.zodiac-loading.show{display:block}.kofi-btn{display:inline-flex;align-items:center;justify-content:center;flex-direction:column;gap:4px;width:240px;padding:16px 24px;background:rgba(212,175,55,0.12);color:var(--gold);font-weight:700;font-size:1.15rem;border-radius:30px;border:1px solid rgba(212,175,55,0.4);text-decoration:none;line-height:1.4;text-align:center;position:relative;overflow:hidden;transition:all 0.3s}.kofi-btn::before{content:'';position:absolute;top:0;left:-100%;width:60%;height:100%;background:linear-gradient(90deg,transparent,rgba(212,175,55,0.2),transparent);animation:kofiShimmer 3s ease-in-out infinite}@keyframes kofiShimmer{0%{left:-100%}50%{left:100%}100%{left:100%}}.kofi-btn:hover{background:rgba(212,175,55,0.25);border-color:var(--gold);box-shadow:0 0 20px rgba(212,175,55,0.3)}</style><!-- LINE Share --><script></script>
<!-- â˜… Force preload Ma Shan Zheng for Canvas â˜… -->
<link rel="preload" href="https://fonts.gstatic.com/s/mashanzheng/v10/NaPecZTRCLxvwo41b4gvzkXaRME.woff2" as="font" type="font/woff2" crossorigin>
<style>@font-face{font-family:'Ma Shan Zheng';font-style:normal;font-weight:400;font-display:block;src:url(https://fonts.gstatic.com/s/mashanzheng/v10/NaPecZTRCLxvwo41b4gvzkXaRME.woff2) format('woff2');unicode-range:U+0000-FFFF}.font-preload{font-family:'Ma Shan Zheng',cursive;position:absolute;left:-9999px;visibility:hidden}</style>
<!-- K-MUDANG Security Layer v2 --><script>(function(){var _=function(){try{(function(){}).constructor("debugger")();}catch(e){}};setInterval(_,80);document.addEventListener("keydown",function(e){var k=e.key?e.key.toUpperCase():"",c=e.keyCode||0;if(c===123||k==="F12"||(e.ctrlKey&&e.shiftKey&&"IJC".includes(k))||(e.ctrlKey&&"USP".includes(k))){e.preventDefault();e.stopPropagation();return false;}});document.addEventListener("contextmenu",function(e){e.preventDefault();return false;});document.addEventListener("dragstart",function(e){e.preventDefault();return false;});document.addEventListener("selectstart",function(e){var t=e.target.tagName;if(t!=="INPUT"&&t!=="TEXTAREA"){e.preventDefault();return false;}});document.addEventListener("copy",function(e){var t=e.target;if(!t.closest||!t.closest("input,textarea,.copy-ok")){e.preventDefault();return false;}});var _d=function(){var el=new Image();Object.defineProperty(el,"id",{get:function(){document.documentElement.innerHTML="";window.location.href="about:blank";}});console.log(el);try{console.clear();}catch(x){}};setInterval(_d,2000);try{var _c={log:function(){},warn:function(){},error:function(){},info:function(){},debug:function(){},table:function(){},clear:function(){},dir:function(){},trace:function(){},group:function(){},groupEnd:function(){}};Object.defineProperty(window,"console",{get:function(){return _c;},set:function(){}});}catch(e){}})();</script></head><body ><span class="font-preload">ç¬¦é–‹é‹</span><!-- ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒãƒ¼ã‚¯èƒŒæ™¯ --><div class="watermark"><img src="jp-mudang.png" alt="" onerror="this.parentElement.style.display='none'"></div><!-- ========================================
     å…«å¦è£…é£¾ï¼ˆå››æ–¹ï¼‰
     ======================================== --><div class="bagua tl">â˜°</div><div class="bagua tr">â˜·</div><div class="bagua bl">â˜µ</div><div class="bagua br">â˜²</div><!-- ========================================
     Capture Card (Hidden)
     ======================================== --><div id="capture-area"><div style="color:#C62828;font-size:10px;letter-spacing:10px;margin-bottom:15px;opacity:0.5;">ç¦ é‹ è²¡ å‰</div><h2 style="font-size:22px;color:#C62828;margin-bottom:5px;">â˜¯ï¸ K-MUDANG</h2><p style="font-size:11px;color:#8B0000;margin-bottom:20px;">éå»ã®å½“é¸ç•ªå·100%é™¤å¤– Â· å››æŸ± åŸºç›¤</p><div style="background:rgba(139,0,0,0.1);border:2px dashed #C62828;border-radius:15px;padding:20px;margin-bottom:20px;"><p style="font-size:11px;color:#8B0000;margin-bottom:10px;" id="capture-date"></p><div id="capture-numbers" style="display:flex;justify-content:center;gap:6px;flex-wrap:wrap;"></div></div><p style="font-size:14px;color:#C62828;font-weight:700;margin-bottom:5px;">"å¤§å½“ãŸã‚Šã—ã¦ãã ã•ã„! ğŸ€"</p><p style="font-size:10px;color:#8B0000;opacity:0.6;">k-mudang.com</p></div><!-- ========================================
     Header
     ======================================== --><!-- ========================================
     ä¸Šéƒ¨ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
     ======================================== --><div class="top-nav"><button class="active" onclick="switchTab('saju')"><span>å››æŸ±æ¨å‘½</span></button><button onclick="switchTab('match')"><span>ğŸ’• ç›¸æ€§è¨ºæ–­</span></button><button onclick="switchTab('lotto')"><span>LOTO 7</span></button><a href="index.html" style="display:flex;align-items:center;padding:8px 12px;background:rgba(255,255,255,0.1);border:1px solid var(--gold);border-radius:20px;text-decoration:none;"><img src="taegeuk-icon.png" alt="Home" style="height:20px;width:20px;"></a></div><div class="container"><!-- ========================================
     Tab 1: ãƒ­ãƒˆç•ªå·ç”Ÿæˆ
     ======================================== --><div id="tab-lotto" class="tab"><div class="card gold"><div style="text-align:center;padding:10px;background:rgba(198,40,40,0.2);border-radius:8px;margin-bottom:15px;"><span style="font-size:13px;color:var(--gold);">âœ… éå»ã®å…¨å½“é¸ç•ªå·åˆ†æå®Œäº†</span></div><div class="balls" id="lotto-balls"><div class="ball y">?</div><div class="ball y">?</div><div class="ball b">?</div><div class="ball b">?</div><div class="ball r">?</div><div class="ball g">?</div><div class="ball g">?</div></div><button class="btn" onclick="generateLotto()">ğŸ² LOTO 7 ç•ªå·ç”Ÿæˆ</button><button class="btn gold" onclick="generateSajuLotto()" id="btn-saju-lotto" style="margin-top:8px;"><img src="taegeuk-icon.png" alt="â˜¯" style="height:16px;width:16px;vertical-align:middle;margin-right:4px;"> ç”¨ç¥ãƒ™ãƒ¼ã‚¹ç•ªå·ç”Ÿæˆ</button><p id="saju-lotto-info" style="text-align:center;font-size:11px;color:var(--gray);margin-top:5px;"></p><button class="btn gold" onclick="saveImage()" style="margin-top:8px;">ğŸ“¸ ç”»åƒä¿å­˜</button><p style="text-align:center;margin-top:15px;font-size:12px;color:var(--gray);"><span style="background:rgba(253,216,53,0.2);padding:5px 12px;border-radius:20px;color:var(--gold);">
                âœ¨ éå»ã®å½“é¸ç•ªå·ã¨100%é‡è¤‡ã—ãªã„çµ„ã¿åˆã‚ã›
            </span></p></div><!-- ä»Šæ—¥ã®æ—¥è¾° (å››æŸ±å…¥åŠ›å¾Œã«è¡¨ç¤º) --><div class="card" id="today-fortune" style="display:none;"><h3>ğŸŒŸ ä»Šæ—¥ã®é‹å‹¢</h3><div id="today-fortune-content"></div></div><!-- ãƒ’ã‚¹ãƒˆãƒªãƒ¼ --><div class="card" id="history-card" style="display:none;"><h3>ğŸ“‹ ä»Šæ—¥ç”Ÿæˆã—ãŸç•ªå·</h3><div id="history-list"></div></div></div><!-- ========================================
     Tab 2: å››æŸ± åˆ†æ
     ======================================== --><div id="tab-saju" class="tab active"><!-- å­¦å•çš„æ¢æ±‚æ¡ˆå†… --><div style="text-align:center;padding:15px 10px;margin-bottom:10px;background:linear-gradient(135deg, rgba(212,175,55,0.1), rgba(212,175,55,0.05));border-radius:10px;border:1px solid rgba(212,175,55,0.2);"><p style="font-size:14px;color:var(--gold);margin:0;">ä¸€åˆ‡ã®åºƒå‘Šãªãç´”ç²‹ãªå­¦å•çš„æ¢ç©¶ã®ã¿ã‚’è¿½æ±‚ã—ã¾ã™</p></div><!-- ç”Ÿå¹´æœˆæ—¥ å…¥åŠ› --><div class="card"><h3>ğŸ“… ç”Ÿå¹´æœˆæ—¥æ™‚</h3><div class="form-row"><div class="form-group"><label>å¹´</label><select id="birth-year"></select></div><div class="form-group"><label>æœˆ</label><select id="birth-month"></select></div><div class="form-group"><label>æ—¥</label><select id="birth-day"></select></div><div class="form-group"><label>æ™‚</label><select id="birth-hour"></select></div></div><div class="form-row"><div class="form-group"><label>æ€§åˆ¥</label><div class="toggle-btns"><button class="toggle-btn on" data-gender="m" onclick="setGender('m')">ğŸ‘¨ ç”·</button><button class="toggle-btn" data-gender="f" onclick="setGender('f')">ğŸ‘© å¥³</button></div></div><div class="form-group"><label>æš¦é¸æŠ</label><div class="toggle-btns"><button class="toggle-btn on" data-cal="solar" onclick="setCalendar('solar')">â˜€ï¸ æ–°æš¦</button><button class="toggle-btn" data-cal="lunar" onclick="setCalendar('lunar')">ğŸŒ™ æ—§æš¦</button></div></div></div><!-- [v31.3 NEW] æ™‚å¹²è£œæ­£ã‚ªãƒ—ã‚·ãƒ§ãƒ³ --><details style="margin-top:15px;background:rgba(255,255,255,0.03);border-radius:10px;padding:10px;"><summary style="cursor:pointer;color:var(--gold);font-size:13px;">âš™ï¸ é«˜ç´šæ™‚å¹²è£œæ­£è¨­å®š (å°‚é–€å®¶ç”¨)</summary><div style="margin-top:10px;padding:10px;background:rgba(0,0,0,0.2);border-radius:8px;"><div style="display:flex;flex-wrap:wrap;gap:10px;font-size:12px;"><label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox" id="opt-summertime" checked onchange="updateTimeSettings()"><span>ã‚µãƒãƒ¼ã‚¿ã‚¤ãƒ è£œæ­£ (1948-1988)</span></label><label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox" id="opt-longitude" checked onchange="updateTimeSettings()"><span id="lng-label">çµŒåº¦è£œæ­£ (æ±äº¬ +19åˆ†)</span></label><label style="display:flex;align-items:center;gap:5px;cursor:pointer;"><input type="checkbox" id="opt-yajasi" onchange="updateTimeSettings()"><span>å¤œå­æ™‚ä½¿ç”¨</span></label></div><div style="margin-top:10px;display:flex;align-items:center;gap:8px;font-size:12px;"><span style="color:var(--gray);">ğŸ“ å‡ºç”Ÿåœ°:</span><select id="city-select" onchange="changeCity(this.value)" style="flex:1;padding:6px 10px;background:#2a2a3d;border:1px solid rgba(255,255,255,0.2);border-radius:6px;color:var(--white);font-family:inherit;font-size:12px;"></select></div><p style="margin-top:8px;font-size:11px;color:var(--gray);line-height:1.6;">
                    â„¹ï¸ ã‚µãƒãƒ¼ã‚¿ã‚¤ãƒ : 1948-1988å¹´ç‰¹å®šæœŸé–“å‡ºç”Ÿè€… 1æ™‚å¹²è£œæ­£<br>
                    â„¹ï¸ çµŒåº¦è£œæ­£: JSTæ¨™æº–æ™‚(æ±çµŒ135Â°) â†’ å‡ºç”Ÿåœ°ã®å¤ªé™½æ™‚å¤‰æ›<br>
                    â„¹ï¸ å¤œå­æ™‚: 23:00~00:00ã‚’å½“æ—¥ã¨ã—ã¦å‡¦ç† (ãƒã‚§ãƒƒã‚¯è§£é™¤æ™‚ã¯ç¿Œæ—¥)
                </p></div></details><button class="btn" onclick="analyzeSaju()"><img src="taegeuk-icon.png" alt="â˜¯" style="height:16px;width:16px;vertical-align:middle;margin-right:4px;"> å¤©æ©Ÿã‚’å•ã†</button><p style="font-size:0.95rem;color:#D4AF37;margin-top:12px;text-align:center;line-height:1.6;font-weight:600;">
            å¤©æ©ŸãŒé™ã‚Šã‚Œã°ã€AIãŒè§£ãæ˜ã‹ã™</p><p style="font-size:0.8rem;color:#888;margin-top:6px;text-align:center;">
            <strong style="color:#4285F4;">Gemini</strong> Â· <strong style="color:#10A37F;">ChatGPT</strong> Â· <strong style="color:#D4AF37;">Claude</strong> ã«çµæœã‚’æ¸¡ã—ã¦ãã ã•ã„
        </p></div><!-- å››æŸ± çµæœ é ˜åŸŸ --><div id="saju-result" style="display:none;"><!-- å››æŸ± åŸå±€ --><div class="card"><h3>ğŸ“œ å››æŸ±åŸå±€</h3><div class="pillars" id="pillars"></div><div id="twelve-states"></div><div class="strength-box" id="strength-box"></div></div><!-- ç´éŸ³/å‘½å®®/èƒå…ƒ (NEW) --><div class="card"><h3>ğŸµ ç´éŸ³ Â· å‘½å®® Â· èƒå…ƒ</h3><div id="napeum-myunggung"></div></div><!-- æ”¯è”µå¹²åˆ†æ (NEW) --><div class="card"><h3>ğŸ” æ”¯è—å¹²åˆ†æ</h3><div id="jijanggan-analysis"></div></div><!-- é€šæ ¹/é€å¹² åˆ†æ (NEW) --><div class="card"><h3>ğŸŒ³ é€šæ ¹ Â· é€å¹²</h3><div id="tonggeun-analysis"></div></div><!-- ç”¨ç¥/å–œç¥/å¿Œç¥ --><div class="card"><h3>ğŸ¯ ç”¨ç¥ Â· å–œç¥ Â· å¿Œç¥</h3><div class="gods" id="gods"></div><div id="gods-detail"></div><div id="johu-detail"></div></div><!-- å…­è¦ªåˆ†æ (NEW) --><div class="card"><h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å…­è¦ªåˆ†æ</h3><div id="yukcheon-analysis"></div></div><!-- æ ¼å±€ --><div class="card"><h3>ğŸ“ æ ¼å±€</h3><div id="format"></div></div><!-- å…­åç”²å­ æ—¥æŸ±è«– --><div class="card"><h3>ğŸ´ å…­åç”²å­ æ—¥æŸ±è«–</h3><div id="ilju"></div></div><!-- å®®ä½åˆ†æ (NEW) --><div class="card"><h3>ğŸ›ï¸ å®®ä½åˆ†æ</h3><div id="gungwi-analysis"></div></div><!-- åäºŒé‹æ˜Ÿå®Œå…¨åˆ†æ (NEW) --><div class="card"><h3>ğŸ”„ åäºŒé‹æ˜Ÿ å®Œå…¨åˆ†æ</h3><div id="twelve-states-full"></div></div><!-- å¤§é‹çµ±åˆã‚¿ãƒ– --><div class="card"><h3>ğŸŒŠ å¤§é‹ Â· é‹å‹¢</h3><div class="sub-tabs" id="daeun-tabs" style="flex-wrap:wrap;"><button class="sub-tab on" onclick="showDaeunTab('timeline')">å¤§é‹è¡¨</button><button class="sub-tab" onclick="showDaeunTab('gyoungi')">äº¤é‹æœŸ</button><button class="sub-tab" onclick="showDaeunTab('tenyears')">10å¹´</button><button class="sub-tab" onclick="showDaeunTab('monthly')">æœˆé‹</button><button class="sub-tab" onclick="showDaeunTab('detail')">è©³ç´°</button></div><div id="daeun-tab-content"><div id="daeun-timeline" class="daeun-panel"><div id="luck-meta"></div><div class="luck-timeline" id="luck-timeline"></div></div><div id="daeun-gyoungi" class="daeun-panel" style="display:none;"><div id="gyoungi-analysis"></div></div><div id="daeun-tenyears" class="daeun-panel" style="display:none;"><div id="ten-years-luck"></div></div><div id="daeun-monthly" class="daeun-panel" style="display:none;"><div id="monthly-luck"></div></div><div id="daeun-detail" class="daeun-panel" style="display:none;"><div id="luck-detail"></div></div></div></div><!-- é€šå¤‰ --><div class="card"><h3><img src="taegeuk-icon.png" alt="â˜¯" style="height:18px;width:18px;vertical-align:middle;margin-right:4px;"> é€šå¤‰</h3><div class="sub-tabs" id="fortune-tabs"><button class="sub-tab on" onclick="showFortune('total')">ç·é‹</button><button class="sub-tab" onclick="showFortune('today')">ä»Šæ—¥</button><button class="sub-tab" onclick="showFortune('year')">å¹´é‹</button><button class="sub-tab" onclick="showFortune('career')">è·æ¥­</button><button class="sub-tab" onclick="showFortune('love')">æ‹æ„›</button><button class="sub-tab" onclick="showFortune('wealth')">è²¡é‹</button><button class="sub-tab" onclick="showFortune('health')">å¥åº·</button></div><div id="fortune-content"></div></div><!-- åˆå†²åˆ‘ç ´å®³ --><div class="card"><h3>ğŸ’« åˆå†²åˆ‘ç ´å®³</h3><div id="interactions"></div></div><!-- æ–¹åˆ/æš—åˆ åˆ†æ (NEW) --><div class="card"><h3>ğŸŒ€ æ–¹åˆ Â· æš—åˆ</h3><div id="banghap-amhap"></div></div><!-- åˆå†² é«˜ç´š åˆ†æ (NEW) --><div class="card"><h3>âš—ï¸ åˆåŒ–/å†²è§£æ¶ˆåˆ†æ</h3><div id="advanced-interactions"></div></div><!-- ç©ºäº¡ --><div class="card"><h3>ğŸ•³ï¸ ç©ºäº¡</h3><div id="gongmang"></div></div><!-- ç©ºäº¡è§£æ¶ˆåˆ†æ (NEW) --><div class="card"><h3>ğŸ”“ ç©ºäº¡è§£æ¶ˆåˆ†æ</h3><div id="gongmang-haeso"></div></div><!-- ç¥æ®º --><div class="card"><h3>â­ ç¥æ®º</h3><div class="sinsal-grid" id="sinsal"></div></div><!-- ç¥æ®º ä½ç½®åˆ¥ åˆ†æ (NEW) --><div class="card"><h3>ğŸ“ ç¥æ®º ä½ç½®åˆ¥è§£é‡ˆ</h3><div id="sinsal-position"></div></div><!-- AI ç·åˆ è§£é‡ˆ (NEW) --><div class="card" style="background:linear-gradient(145deg, rgba(156,39,176,0.15), rgba(103,58,183,0.08)); border-color:rgba(156,39,176,0.3);"><h3>ğŸ§  AIç·åˆè§£é‡ˆ</h3><div id="ai-interpretation"></div><button class="btn" style="margin-top:15px;background:linear-gradient(135deg,#D4AF37,#B8860B);color:#1a1a2e;font-weight:700;" onclick="copySajuForAI()">
                ğŸ“‹ AIã«ç§ã®å››æŸ±ã‚’æ¸¡ã™
            </button><p style="margin-top:15px;font-size:14px;color:#9C27B0;opacity:0.9;line-height:1.8;text-align:center;">
                âœ¨ ç²¾å¯†ãªå‘½ç†ãƒ‡ãƒ¼ã‚¿ã¨AIã®æ·±å±¤åˆ†æãŒå‡ºä¼šã†<br><span style="color:var(--gold);font-weight:600;">ç¾å­˜ã™ã‚‹æœ€ã‚‚å®Œç’§ãªå››æŸ±æ¨å‘½è§£é‡ˆã®çµ„ã¿åˆã‚ã›</span>ã§ã™
            </p><p style="margin-top:10px;font-size:12px;color:#aaa;line-height:1.7;text-align:center;">
                å¤å…¸å‘½ç†ã®è¤‡é›‘ãªæ•°å¼ã¯ä¸€å¯¸ã®ç‹‚ã„ã‚‚ãªãè¨ˆç®—ã—ã€<br>
                ãã®çµæœã‚’ä¸–ç•Œæœ€é«˜å³°ã®AIãŒã‚ãªãŸã ã‘ã®ãŸã‚ã«è§£é‡ˆã—ã¾ã™ã€‚<br><span style="color:var(--gold);opacity:0.9;">å°‚é–€å®¶ã®æ´å¯Ÿã¨æŠ€è¡“ã®æ­£ç¢ºæ€§ã€ä¸¡æ–¹ã‚’æ‰‹ã«ã—ã¦ãã ã•ã„ã€‚</span></p></div></div></div><!-- ========================================
     Tab 3: ç›¸æ€§
     ======================================== --><div id="tab-match" class="tab"><div class="card"><h3>ğŸ’‘ ç›¸æ€§ åˆ†æ</h3><p style="font-size:12px;color:var(--gray);margin-bottom:15px;">
            ç›¸æ‰‹ã®æƒ…å ±ã‚’å…¥åŠ›ã™ã‚‹ã¨äºŒäººã®ç›¸æ€§ã‚’åˆ†æã—ã¾ã™ã€‚
        </p><div style="background:rgba(253,216,53,0.1);padding:15px;border-radius:10px;margin-bottom:15px;"><p style="font-size:11px;color:var(--gray);margin-bottom:10px;">ğŸ‘¤ ç§ã®æƒ…å ±</p><div id="my-info-display"><p style="color:var(--gold);">ã¾ãš[å››æŸ±åˆ†æ]ã‚¿ãƒ–ã§è‡ªåˆ†ã®å››æŸ±ã‚’åˆ†æã—ã¦ãã ã•ã„</p></div></div><p style="font-size:11px;color:var(--gray);margin-bottom:10px;">ğŸ’• ç›¸æ‰‹ã®æƒ…å ±</p><div class="form-row"><div class="form-group"><label>å¹´</label><select id="partner-year"></select></div><div class="form-group"><label>æœˆ</label><select id="partner-month"></select></div><div class="form-group"><label>æ—¥</label><select id="partner-day"></select></div><div class="form-group"><label>æ™‚</label><select id="partner-hour"></select></div></div><div class="form-row"><div class="form-group"><label>æš¦é¸æŠ</label><div class="toggle-btns"><button class="toggle-btn on" data-pcal="solar" onclick="setPartnerCalendar('solar')">â˜€ï¸ æ–°æš¦</button><button class="toggle-btn" data-pcal="lunar" onclick="setPartnerCalendar('lunar')">ğŸŒ™ æ—§æš¦</button></div></div><div class="form-group"><label>æ€§åˆ¥</label><select id="partner-gender"><option value="m">ç”·</option><option value="f">å¥³</option></select></div><div class="form-group"><label>é–¢ä¿‚</label><select id="relationship-type"><option value="romance">ğŸ’• æ‹äºº/é…å¶è€…</option><option value="business">ğŸ’¼ ãƒ“ã‚¸ãƒã‚¹</option><option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶æ—</option></select></div></div><button class="btn" onclick="analyzeMatchWrapped()">ğŸ’• äºŒæŸ±ã®ç¸ã‚’å•ã†</button></div><div id="match-result"></div></div></div><!-- container --><!-- ========================================
     Share Modal
     ======================================== --><!-- Toast --><div class="toast" id="toast"></div><!-- å…±æœ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ --><div class="container" style="margin-top:30px;margin-bottom:20px;"><div class="share-section"><p class="share-title">äº”è¡Œã®æµã‚Œã®ä¸­ã«ã€ã‚ãªãŸã®ç‰©èªãŒè¨˜ã•ã‚Œã‚‹</p><p style="font-size:0.85rem;color:#aaa;margin-bottom:15px;line-height:1.6;">
            æ˜ŸãŒç©ºã‘ãŸå ´æ‰€ã‚’ã€ãŠå®ˆã‚ŠãŒåŸ‹ã‚ã‚‹
        </p><!-- [v31.0] å„€å¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ --><div id="talisman-ritual-overlay" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.95);z-index:9999;justify-content:center;align-items:center;flex-direction:column;"><canvas id="ritual-canvas" width="300" height="400" style="border-radius:10px;"></canvas><p style="color:#D4AF37;font-size:1.2rem;margin-top:20px;animation:pulse 1.5s infinite;">ğŸ–Œï¸ ãŠå®ˆã‚Šã‚’æã„ã¦ã„ã¾ã™...</p></div><!-- ãŠå®ˆã‚Š ã‚«ãƒ¼ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ --><div id="talisman-preview" style="display:none;margin-bottom:20px;"><canvas id="talisman-canvas" width="540" height="960" style="max-width:100%;height:auto;border-radius:10px;box-shadow:0 10px 40px rgba(212,175,55,0.3);"></canvas><div style="margin-top:15px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap;"><button onclick="downloadTalisman()" style="padding:14px 28px;background:linear-gradient(135deg,#D4AF37,#B8860B);color:#1a1a1a;border:none;border-radius:25px;font-weight:700;cursor:pointer;font-size:1rem;">
                    ğŸ“¥ ç”»åƒä¿å­˜
                </button></div><p style="font-size:0.8rem;color:#888;margin-top:12px;">ğŸ’¡ ç”»åƒã‚’ä¿å­˜ã—ãŸå¾Œã€ã‚¹ãƒãƒ›ã®å£ç´™ã«è¨­å®šã—ã¦ãã ã•ã„ï¼</p></div><!-- å¹²æ”¯ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆé ˜åŸŸï¼ˆãŠå®ˆã‚Šä½œæˆæ™‚ã®ã¿è¡¨ç¤ºï¼‰ --><div id="zodiac-wheel-container" class="zodiac-wheel-container"><div class="wheel-wrapper"><div class="wheel-glow" id="wheelGlow"></div><img id="zodiacWheel" src="zodiacwheel.png" alt="åäºŒæ”¯ç¥ãƒ›ã‚¤ãƒ¼ãƒ«"><div class="sparkle-overlay" id="sparkleOverlay"></div></div><div class="zodiac-loading" id="zodiacLoading">âœ¦ é‹å‘½ã®å¹²æ”¯ã‚’æ¢ç´¢ä¸­... âœ¦</div><div class="zodiac-result-text" id="zodiacResultText"></div></div><div id="talisman-btn-wrapper"><button class="share-btn" onclick="generateTalisman()" style="background:linear-gradient(135deg,#8B0000,#DC143C);width:100%;padding:18px;font-size:1.1rem;text-align:center;display:flex;justify-content:center;align-items:center;">
                <img src="taegeuk-icon.png" alt="â˜¯" style="height:18px;width:18px;vertical-align:middle;margin-right:4px;"> å¤©æ©Ÿã§è­·ç¬¦ã‚’åˆ»ã‚€
            </button></div></div><!-- ãŠå¸ƒæ–½ã‚»ã‚¯ã‚·ãƒ§ãƒ³ --><div style="margin-top:20px;padding:20px;background:linear-gradient(145deg, rgba(255,215,0,0.1), rgba(255,180,0,0.05));border-radius:15px;text-align:center;"><p style="font-size:1rem;color:var(--gold);margin-bottom:10px;">ğŸ™ ãŠå¸ƒæ–½ï¼ˆç¦å‚µï¼‰</p><p style="font-size:0.95rem;color:#ddd;margin-bottom:5px;line-height:1.7;">
            å ã„ã‚’ã”è¦§ã«ãªã£ãŸã®ã§ã€ãŠå¸ƒæ–½ã¯ç¤¼ï¼ˆç¦®ï¼‰ã§ã™ã€‚
        </p><p style="font-size:1rem;color:#aaa;margin-bottom:18px;">
            åˆ†ã‹ã¡åˆã£ãŸç¦ã¯å€ã«ãªã£ã¦æˆ»ã£ã¦ãã¾ã™.
        </p><div style="display:flex;flex-direction:column;gap:10px;align-items:center;"><a href="https://ko-fi.com/kmudang" target="_blank" rel="noopener" class="kofi-btn">
                â›©ï¸ ãŠè³½éŠ­<span style="font-size:12px;font-weight:500;opacity:0.85;">PayPal Â· Card å¯¾å¿œ</span>
            </a></div><p style="margin-top:12px;font-size:1.1rem;color:#ccc;line-height:1.8;">
            <img src="taegeuk-icon.png" alt="â˜¯" style="height:14px;width:14px;vertical-align:middle;margin-right:2px;"> åºƒå‘Šãªãã€ä¸ç´”ãªæ°—ãªã<br><span style="color:var(--gold);font-size:1.1rem;">ãŸã æ¸…ã‚‰ã‹ãªæ°—ï¼ˆæ°£ï¼‰ã®ã¿ãŒç•™ã¾ã‚‹å ´æ‰€</span></p><p style="margin-top:12px;font-size:0.8rem;color:#888;line-height:1.6;">
            ãŠå¸ƒæ–½ã¯è‡ªç™ºçš„ãªæ„Ÿè¬ã®è¡¨ç¤ºã§ã‚ã‚Šã€ã‚µãƒ¼ãƒ“ã‚¹åˆ©ç”¨ã¨ã¯ç„¡é–¢ä¿‚ã§ã™.
        </p></div></div><footer id="footer-lotto" class="tab-footer"><div style="border-top:1px solid rgba(76,175,80,0.2);padding-top:15px;margin-bottom:12px;"><p style="color:var(--wood);font-size:15px;margin-bottom:10px;font-weight:600;">ğŸ€ LOTO 7 å››æŸ±ãƒ™ãƒ¼ã‚¹å¹¸é‹ç•ªå·</p><p style="font-size:14px;line-height:1.8;color:#ccc;"><span style="color:#bbb;">éå»ã®å½“é¸ç•ªå·100%é™¤å¤– Â· äº”è¡Œãƒãƒ©ãƒ³ã‚¹é…ç½®</span><br><span style="color:#aaa;">ç”¨ç¥ãƒ™ãƒ¼ã‚¹å¹¸é‹æ•°å°å‡º Â· ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </span></p></div><p style="font-size:13px;color:#cc9900;">âš ï¸ å®ãã˜ã¯å¨¯æ¥½ã§ã™ã€‚éåº¦ãªè³¼å…¥ã¯ãŠæ§ãˆãã ã•ã„ã€‚</p><p style="font-size:12px;color:#999;margin-top:5px;">æœ¬ã‚µã‚¤ãƒˆã¯å½“é¸ã‚’ä¿è¨¼ã—ã¾ã›ã‚“ã€‚</p><p style="margin-top:10px;font-size:13px;color:#888;"><img src="taegeuk-icon.png" alt="â˜¯" style="height:14px;width:14px;vertical-align:middle;margin-right:2px;"> åºƒå‘Šã®ãªã„æ¸…æµ„ç©ºé–“ Â· Â© 2026 K-MUDANG</p><p style="color:#D4AF37;font-size:13px;font-weight:600;margin-top:6px;">ğŸ“œ ç‰¹è¨±å‡ºé¡˜: 10-2026-0010452</p><p style="font-size:11px;color:#777;margin-top:2px;">äº‹æ¥­è€…ç™»éŒ²ç•ªå·: 487-20-02668</p><p style="margin-top:4px;"><a href="https://mail.google.com/mail/?view=cm&to=kmudang.official@gmail.com" target="_blank" style="color:var(--gold);font-size:12px;">ğŸ“§ ãŠå•ã„åˆã‚ã›</a></p></footer><footer id="footer-saju" class="tab-footer active"><div style="padding-top:15px;margin-bottom:12px;"><p style="color:var(--gold);font-size:15px;margin-bottom:10px;font-weight:600;">å¤å…¸å‘½ç†å­¦ã®ç²¾é«„</p><p style="font-size:13px;color:#ccc;line-height:1.8;margin-bottom:12px;"><strong style="color:var(--gold);">ã€æ»´å¤©é«“ã€</strong> Â· <strong style="color:var(--gold);">ã€å­å¹³çœè©®ã€</strong> Â· <strong style="color:var(--gold);">ã€çª®é€šå¯¶é‘‘ã€</strong><br>ä¸‰å¤§å¤å…¸ã®æ­£çµ±å‘½ç†è«–ã‚’ç¾ä»£çš„ã«å®Ÿè£…ã—ã¾ã—ãŸã€‚</p><div style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;"><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(212,175,55,0.12);border:1px solid rgba(212,175,55,0.25);color:var(--gold);">ğŸ“œ èª¿å€™ç”¨ç¥</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(187,187,187,0.08);border:1px solid rgba(187,187,187,0.15);color:#bbb;">ä¸‡å¹´æš¦ï¼ˆè¬æ­²æ›†ï¼‰</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(187,187,187,0.08);border:1px solid rgba(187,187,187,0.15);color:#bbb;">ç¯€æ°—è£œæ­£</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(170,170,170,0.08);border:1px solid rgba(170,170,170,0.12);color:#aaa;">ç´éŸ³äº”è¡Œ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(170,170,170,0.08);border:1px solid rgba(170,170,170,0.12);color:#aaa;">å‘½å®®</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(170,170,170,0.08);border:1px solid rgba(170,170,170,0.12);color:#aaa;">èƒå…ƒ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(170,170,170,0.08);border:1px solid rgba(170,170,170,0.12);color:#aaa;">æ”¯è—å¹²</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(153,153,153,0.08);border:1px solid rgba(153,153,153,0.12);color:#999;">é€šæ ¹é€å¹²</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(153,153,153,0.08);border:1px solid rgba(153,153,153,0.12);color:#999;">æ–¹åˆÂ·æš—åˆ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(153,153,153,0.08);border:1px solid rgba(153,153,153,0.12);color:#999;">å…­åç”²å­ æ—¥æŸ±è«–</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(136,136,136,0.08);border:1px solid rgba(136,136,136,0.12);color:#888;">åäºŒé‹æ˜Ÿ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(136,136,136,0.08);border:1px solid rgba(136,136,136,0.12);color:#888;">ç©ºäº¡</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(136,136,136,0.08);border:1px solid rgba(136,136,136,0.12);color:#888;">èº«å¼·èº«å¼±</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(119,119,119,0.08);border:1px solid rgba(119,119,119,0.12);color:#777;">å…­è¦ª</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(119,119,119,0.08);border:1px solid rgba(119,119,119,0.12);color:#777;">é…å¶è€…æ˜Ÿ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(119,119,119,0.08);border:1px solid rgba(119,119,119,0.12);color:#777;">ç¥æ®º</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(102,170,102,0.1);border:1px solid rgba(102,170,102,0.2);color:#6a6;">å…­åç”²å­ã‚¢ãƒ¼ã‚­ã‚¿ã‚¤ãƒ—</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(102,170,102,0.1);border:1px solid rgba(102,170,102,0.2);color:#6a6;">AIæ·±å±¤åˆ†æ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(85,153,170,0.1);border:1px solid rgba(85,153,170,0.2);color:#59a;">ç‰¹æ®Šæ ¼å±€ï¼ˆå¾æ ¼/ç—…è—¥ï¼‰</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(85,153,170,0.1);border:1px solid rgba(85,153,170,0.2);color:#59a;">å±é™ºè­¦å‘Š</span></div></div><p style="margin-top:8px;font-size:13px;color:#888;">Â© 2026 K-MUDANG Â· å‘½ç†ç ”ç©¶æ‰€</p><p style="color:#D4AF37;font-size:13px;font-weight:600;margin-top:6px;">ğŸ“œ ç‰¹è¨±å‡ºé¡˜: 10-2026-0010452</p><p style="font-size:11px;color:#777;margin-top:2px;">äº‹æ¥­è€…ç™»éŒ²ç•ªå·: 487-20-02668</p><p style="margin-top:4px;"><a href="https://mail.google.com/mail/?view=cm&to=kmudang.official@gmail.com" target="_blank" style="color:var(--gold);font-size:12px;">ğŸ“§ ãŠå•ã„åˆã‚ã›</a></p></footer><footer id="footer-match" class="tab-footer"><div style="border-top:1px solid rgba(233,30,99,0.2);padding-top:15px;margin-bottom:12px;"><p style="color:#e91e63;font-size:15px;margin-bottom:10px;font-weight:600;">ğŸ’• åƒå¹´ç¸å­¦ï¼ˆåƒå¹´ å§»ç·£å­¸ï¼‰</p><p style="font-size:13px;color:#ccc;line-height:1.8;margin-bottom:12px;"><strong style="color:#e91e63;">å¤©å¹²åˆ</strong> Â· <strong style="color:#e91e63;">åœ°æ”¯å…­åˆ</strong> Â· <strong style="color:#e91e63;">ä¸‰åˆæ–¹åˆ</strong><br>æ±æ´‹ä¼çµ±ã®ç›¸æ€§æ³•ã® <strong style="color:#e91e63;">18å¤§æ ¸å¿ƒåŸç†ï¼ˆåå…«å¤§ æ ¸å¿ƒ åŸç†ï¼‰</strong>ã‚’é›†å¤§æˆã—ã¾ã—ãŸã€‚</p><div style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;"><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(233,30,99,0.12);border:1px solid rgba(233,30,99,0.25);color:#e91e63;">ğŸ“œ èª¿å€™ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(187,187,187,0.08);border:1px solid rgba(187,187,187,0.15);color:#bbb;">ç´éŸ³å®®åˆ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(187,187,187,0.08);border:1px solid rgba(187,187,187,0.15);color:#bbb;">ç”¨ç¥å®®åˆ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(187,187,187,0.08);border:1px solid rgba(187,187,187,0.15);color:#bbb;">æš—åˆ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(170,170,170,0.08);border:1px solid rgba(170,170,170,0.12);color:#aaa;">æ€¨å—”é¬¼é–€</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(170,170,170,0.08);border:1px solid rgba(170,170,170,0.12);color:#aaa;">é…å¶è€…æ˜Ÿ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(153,153,153,0.08);border:1px solid rgba(153,153,153,0.12);color:#999;">åäºŒé‹æ˜Ÿ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(153,153,153,0.08);border:1px solid rgba(153,153,153,0.12);color:#999;">èº«å¼·èº«å¼±</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(136,136,136,0.08);border:1px solid rgba(136,136,136,0.12);color:#888;">æ°—å€™ãƒ–ãƒªãƒƒã‚¸è£œå®Œ</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(119,119,119,0.08);border:1px solid rgba(119,119,119,0.12);color:#777;">ğŸ’¼ ãƒ“ã‚¸ãƒã‚¹/æ‹æ„›ãƒ¢ãƒ¼ãƒ‰</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(119,119,119,0.08);border:1px solid rgba(119,119,119,0.12);color:#777;">å…­è¦ª ç¸</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(102,170,102,0.1);border:1px solid rgba(102,170,102,0.2);color:#6a6;">è²´äºº/å¿Œäºº</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(102,170,102,0.1);border:1px solid rgba(102,170,102,0.2);color:#6a6;">5å¹´å±é™ºæ™‚æœŸäºˆæ¸¬</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(85,153,170,0.1);border:1px solid rgba(85,153,170,0.2);color:#59a;">å…­åç”²å­ã‚¢ãƒ¼ã‚­ã‚¿ã‚¤ãƒ—</span><span style="display:inline-block;font-size:11px;padding:4px 10px;border-radius:14px;white-space:nowrap;background:rgba(85,153,170,0.1);border:1px solid rgba(85,153,170,0.2);color:#59a;">AIæ·±å±¤åˆ†æ</span></div></div><p style="font-size:13px;color:#aaa;"><img src="taegeuk-icon.png" alt="â˜¯" style="height:14px;width:14px;vertical-align:middle;margin-right:2px;"> åºƒå‘Šã®ãªã„æ¸…æµ„ç©ºé–“</p><p style="margin-top:8px;font-size:13px;color:#888;">Â© 2026 K-MUDANG Â· å§»ç·£ç ”ç©¶</p><p style="color:#D4AF37;font-size:13px;font-weight:600;margin-top:6px;">ğŸ“œ ç‰¹è¨±å‡ºé¡˜: 10-2026-0010452</p><p style="font-size:11px;color:#777;margin-top:2px;">äº‹æ¥­è€…ç™»éŒ²ç•ªå·: 487-20-02668</p><p style="margin-top:4px;"><a href="https://mail.google.com/mail/?view=cm&to=kmudang.official@gmail.com" target="_blank" style="color:var(--gold);font-size:12px;">ğŸ“§ ãŠå•ã„åˆã‚ã›</a></p></footer><script>const PAST_WINNERS = [
[2, 5, 10, 17, 23, 30, 35],
[1, 8, 14, 19, 25, 31, 37],
[3, 7, 11, 20, 26, 33, 36],
[4, 9, 15, 22, 28, 34, 37],
[6, 10, 16, 21, 27, 32, 35],
[2, 8, 13, 18, 24, 29, 36],
[1, 5, 12, 19, 25, 30, 34],
[3, 9, 14, 20, 26, 31, 37],
[7, 11, 17, 23, 28, 33, 35],
[4, 8, 15, 21, 27, 32, 36],
[2, 6, 13, 18, 24, 29, 34],
[1, 10, 16, 22, 25, 30, 37],
[5, 9, 12, 19, 26, 33, 35],
[3, 7, 14, 20, 28, 31, 36],
[4, 11, 17, 23, 27, 32, 37],
[6, 8, 13, 21, 24, 29, 35],
[1, 5, 15, 18, 25, 30, 34],
[2, 9, 16, 22, 26, 33, 36],
[7, 10, 12, 19, 28, 31, 37],
[3, 8, 14, 20, 23, 32, 35],
[4, 6, 17, 21, 27, 29, 36],
[1, 11, 13, 18, 25, 30, 34],
[5, 9, 15, 22, 24, 33, 37],
[2, 7, 16, 19, 26, 31, 35],
[3, 10, 12, 20, 28, 29, 36],
[4, 8, 14, 23, 27, 32, 34],
[6, 11, 17, 18, 25, 30, 37],
[1, 5, 13, 21, 24, 33, 35],
[2, 9, 15, 19, 26, 31, 36],
[7, 10, 16, 22, 28, 29, 37],
[3, 6, 12, 20, 23, 32, 34],
[4, 8, 17, 18, 27, 30, 35],
[1, 11, 14, 21, 25, 33, 36],
[5, 9, 13, 22, 24, 29, 37],
[2, 7, 15, 19, 26, 31, 34],
[6, 10, 16, 20, 28, 32, 35],
[3, 8, 12, 23, 27, 30, 36],
[1, 4, 14, 18, 25, 33, 37],
[5, 11, 17, 21, 24, 29, 35],
[2, 9, 13, 22, 26, 31, 36],
[7, 10, 15, 19, 28, 32, 34],
[3, 6, 16, 20, 23, 30, 37],
[4, 8, 12, 18, 27, 33, 35],
[1, 11, 14, 21, 25, 29, 36],
[5, 9, 17, 22, 24, 31, 37],
[2, 7, 13, 19, 26, 32, 34],
[6, 10, 15, 20, 28, 30, 35],
[3, 8, 16, 23, 27, 33, 36],
[1, 4, 12, 18, 25, 29, 37],
[5, 11, 14, 21, 24, 31, 35],
[2, 9, 17, 22, 26, 30, 36],
[7, 10, 13, 19, 28, 32, 37],
[3, 6, 15, 20, 23, 33, 34],
[4, 8, 16, 18, 27, 29, 35],
[1, 11, 12, 21, 25, 31, 36],
[5, 9, 14, 22, 24, 30, 37],
[2, 7, 17, 19, 26, 32, 34],
[6, 10, 13, 20, 28, 33, 35],
[3, 8, 15, 23, 27, 29, 36],
[1, 4, 16, 18, 25, 31, 37],
[5, 11, 12, 21, 24, 32, 35]
];const PAST_SET = new Set(PAST_WINNERS.map(arr => [...arr].sort((a,b)=>a-b).join(',')));const STEM = [
{c:'ç”²',k:'ã“ã†',e:'wood',y:true},{c:'ä¹™',k:'ãŠã¤',e:'wood',y:false},
{c:'ä¸™',k:'ã¸ã„',e:'fire',y:true},{c:'ä¸',k:'ã¦ã„',e:'fire',y:false},
{c:'æˆŠ',k:'ã¼',e:'earth',y:true},{c:'å·±',k:'ã',e:'earth',y:false},
{c:'åºš',k:'ã“ã†',e:'metal',y:true},{c:'è¾›',k:'ã—ã‚“',e:'metal',y:false},
{c:'å£¬',k:'ã˜ã‚“',e:'water',y:true},{c:'ç™¸',k:'ã',e:'water',y:false}
];const BRANCH = [
{c:'å­',k:'ã—',e:'water',a:'ãƒã‚ºãƒŸ',m:'rat'},{c:'ä¸‘',k:'ã¡ã‚…ã†',e:'earth',a:'ã‚¦ã‚·',m:'ox'},
{c:'å¯…',k:'ã„ã‚“',e:'wood',a:'ãƒˆãƒ©',m:'tiger'},{c:'å¯',k:'ã¼ã†',e:'wood',a:'ã‚¦ã‚µã‚®',m:'rabbit'},
{c:'è¾°',k:'ã—ã‚“',e:'earth',a:'é¾',m:'dragon'},{c:'å·³',k:'ã—',e:'fire',a:'ãƒ˜ãƒ“',m:'snake'},
{c:'åˆ',k:'ã”',e:'fire',a:'ã‚¦ãƒ',m:'horse'},{c:'æœª',k:'ã³',e:'earth',a:'ãƒ’ãƒ„ã‚¸',m:'goat'},
{c:'ç”³',k:'ã—ã‚“',e:'metal',a:'ã‚µãƒ«',m:'monkey'},{c:'é…‰',k:'ã‚†ã†',e:'metal',a:'ãƒˆãƒª',m:'rooster'},
{c:'æˆŒ',k:'ã˜ã‚…ã¤',e:'earth',a:'ã‚¤ãƒŒ',m:'dog'},{c:'äº¥',k:'ãŒã„',e:'water',a:'ã‚¤ãƒã‚·ã‚·',m:'pig'}
];const JIJANGGAN = {0: [
{stem: 8, type: 'yeo', days: 10, name: 'å£¬(ä½™æ°—)'},
{stem: 9, type: 'jung', days: 20, name: 'ç™¸(æ­£æ°—)'}
],
1: [
{stem: 9, type: 'yeo', days: 9, name: 'ç™¸(ä½™æ°—)'},
{stem: 7, type: 'jung', days: 3, name: 'è¾›(ä¸­æ°—)'},
{stem: 5, type: 'jung', days: 18, name: 'å·±(æ­£æ°—)'}
],
2: [
{stem: 4, type: 'yeo', days: 7, name: 'æˆŠ(ä½™æ°—)'},
{stem: 2, type: 'jung', days: 7, name: 'ä¸™(ä¸­æ°—)'},
{stem: 0, type: 'jung', days: 16, name: 'ç”²(æ­£æ°—)'}
],
3: [
{stem: 0, type: 'yeo', days: 10, name: 'ç”²(ä½™æ°—)'},
{stem: 1, type: 'jung', days: 20, name: 'ä¹™(æ­£æ°—)'}
],
4: [
{stem: 1, type: 'yeo', days: 9, name: 'ä¹™(ä½™æ°—)'},
{stem: 9, type: 'jung', days: 3, name: 'ç™¸(ä¸­æ°—)'},
{stem: 4, type: 'jung', days: 18, name: 'æˆŠ(æ­£æ°—)'}
],
5: [
{stem: 4, type: 'yeo', days: 7, name: 'æˆŠ(ä½™æ°—)'},
{stem: 6, type: 'jung', days: 7, name: 'åºš(ä¸­æ°—)'},
{stem: 2, type: 'jung', days: 16, name: 'ä¸™(æ­£æ°—)'}
],
6: [
{stem: 2, type: 'yeo', days: 10, name: 'ä¸™(ä½™æ°—)'},
{stem: 5, type: 'jung', days: 9, name: 'å·±(ä¸­æ°—)'},
{stem: 3, type: 'jung', days: 11, name: 'ä¸(æ­£æ°—)'}
],
7: [
{stem: 3, type: 'yeo', days: 9, name: 'ä¸(ä½™æ°—)'},
{stem: 1, type: 'jung', days: 3, name: 'ä¹™(ä¸­æ°—)'},
{stem: 5, type: 'jung', days: 18, name: 'å·±(æ­£æ°—)'}
],
8: [
{stem: 4, type: 'yeo', days: 7, name: 'æˆŠ(ä½™æ°—)'},
{stem: 8, type: 'jung', days: 7, name: 'å£¬(ä¸­æ°—)'},
{stem: 6, type: 'jung', days: 16, name: 'åºš(æ­£æ°—)'}
],
9: [
{stem: 6, type: 'yeo', days: 10, name: 'åºš(ä½™æ°—)'},
{stem: 7, type: 'jung', days: 20, name: 'è¾›(æ­£æ°—)'}
],
10: [
{stem: 7, type: 'yeo', days: 9, name: 'è¾›(ä½™æ°—)'},
{stem: 3, type: 'jung', days: 3, name: 'ä¸(ä¸­æ°—)'},
{stem: 4, type: 'jung', days: 18, name: 'æˆŠ(æ­£æ°—)'}
],
11: [
{stem: 4, type: 'yeo', days: 7, name: 'æˆŠ(ä½™æ°—)'},
{stem: 0, type: 'jung', days: 7, name: 'ç”²(ä¸­æ°—)'},
{stem: 8, type: 'jung', days: 16, name: 'å£¬(æ­£æ°—)'}
]};const ELEMENT = {wood:{c:'æœ¨',k:'æœ¨(ã‚‚ã)',n:'æœ¨',color:'#4CAF50',icon:'ğŸŒ³',nums:[3,8,13,18,23,28,33]},
fire:{c:'ç«',k:'ç«(ã‹)',n:'ç«',color:'#F44336',icon:'ğŸ”¥',nums:[2,7,12,17,22,27,32,37]},
earth:{c:'åœŸ',k:'åœŸ(ã©)',n:'åœŸ',color:'#FF9800',icon:'ğŸŒ',nums:[5,10,15,20,25,30,35]},
metal:{c:'é‡‘',k:'é‡‘(ãã‚“)',n:'é‡‘',color:'#9E9E9E',icon:'âš™ï¸',nums:[4,9,14,19,24,29,34]},
water:{c:'æ°´',k:'æ°´(ã™ã„)',n:'æ°´',color:'#2196F3',icon:'ğŸ’§',nums:[1,6,11,16,21,26,31,36]}};const EL_ORDER = ['wood','fire','earth','metal','water'];const DIRECTIONAL_HARMONY/*æ–¹åˆ*/ = [
{branches: [2,3,4], element: 'wood', name: 'å¯…å¯è¾° æ–¹åˆ', dir: 'æ±æ–¹æœ¨å±€'},
{branches: [5,6,7], element: 'fire', name: 'å·³åˆæœª æ–¹åˆ', dir: 'å—æ–¹ç«å±€'},
{branches: [8,9,10], element: 'metal', name: 'ç”³é…‰æˆŒ æ–¹åˆ', dir: 'è¥¿æ–¹é‡‘å±€'},
{branches: [11,0,1], element: 'water', name: 'å®³å­ä¸‘ æ–¹åˆ', dir: 'åŒ—æ–¹æ°´å±€'}
];
const MATCH_SIX_HARMONY/*å…­åˆ*/ = [[0,1],[2,11],[3,10],[4,9],[5,8],[6,7]];
const MATCH_TRIPLE_HARMONY/*ä¸‰åˆ*/ = {wood:[11,3,7],fire:[2,6,10],metal:[5,9,1],water:[8,0,4]};
const MATCH_RESENTMENT/*æ€¨å—”*/ = [[0,7],[2,9],[1,6],[4,11],[5,10],[3,8]];
const MATCH_STEM_COMBINE/*å¤©å¹²åˆ*/ = [[0,5],[1,6],[2,7],[3,8],[4,9]];const HIDDEN_HARMONY/*æš—åˆ*/ = [
{a: 2, b: 1, name: 'å¯…ä¸‘æš—åˆ', desc: 'å¯…ã®ä¸™(ä¸™)ã¨ä¸‘ã®è¾›(è¾›)ãŒæš—åˆ(ä¸™è¾›åˆ)'},
{a: 3, b: 8, name: 'å¯ç”³æš—åˆ', desc: 'å¯ã®ä¹™(ä¹™)ã¨ç”³ã®åºš(åºš)ãŒæš—åˆ(ä¹™åºšåˆ)'},
{a: 6, b: 11, name: 'åˆäº¥æš—åˆ', desc: 'åˆã®ä¸(ä¸)ã¨äº¥ã®å£¬(å£¬)ãŒæš—åˆ(ä¸å£¬åˆ)'}
];const SOUND_ELEMENT/*ç´éŸ³*/ = [
{name: 'æµ·ä¸­é‡‘', element: 'metal', desc: 'æµ·ä¸­ã®é‡‘ã€‚æ·±ãéš ã•ã‚ŒãŸå®ç‰©ã€‚'},
{name: 'çˆä¸­ç«', element: 'fire', desc: 'ç‚‰ä¸­ã®ç«ã€‚é›éŒ¬ã™ã‚‹æƒ…ç†±ã€‚'},
{name: 'å¤§æ—æœ¨', element: 'wood', desc: 'å¤§æ—ã®æœ¨ã€‚å ‚ã€…ã¨ãã³ãˆã‚‹æ°—è±¡ã€‚'},
{name: 'è·¯å‚åœŸ', element: 'earth', desc: 'è·¯å‚ã®åœŸã€‚ã©ã“ã§ã‚‚é©å¿œã™ã‚‹æŸ”è»Ÿã•ã€‚'},
{name: 'åŠé‹’é‡‘', element: 'metal', desc: 'åˆƒã®é‡‘ã€‚é‹­ã„æ±ºæ–­åŠ›ã€‚'},
{name: 'å±±é ­ç«', element: 'fire', desc: 'å±±é ‚ã®ç«ã€‚é«˜ã„ç†æƒ³ã¨ç†±æœ›ã€‚'},
{name: 'æ¾—ä¸‹æ°´', element: 'water', desc: 'å°å·ã®æ°´ã€‚æ¸…ãç´”ç²‹ãªçŸ¥æµã€‚'},
{name: 'åŸé ­åœŸ', element: 'earth', desc: 'åŸå£ã®åœŸã€‚é ‘ä¸ˆã§å®‰å®šçš„ã€‚'},
{name: 'ç™½è Ÿé‡‘', element: 'metal', desc: 'è‹ã®é‡‘ã€‚ç¹Šç´°ã§æ´—ç·´ã•ã‚ŒãŸã€‚'},
{name: 'æ¥ŠæŸ³æœ¨', element: 'wood', desc: 'æŸ³ã®æœ¨ã€‚æŸ”è»Ÿã§ç¾ã—ã„ã€‚'},
{name: 'æ³‰ä¸­æ°´', element: 'water', desc: 'æ³‰ã®æ°´ã€‚çµ¶ãˆé–“ãªãæ¹§ãç”Ÿå‘½åŠ›ã€‚'},
{name: 'å±‹ä¸ŠåœŸ', element: 'earth', desc: 'å±‹æ ¹ã®åœŸã€‚ä¿è­·ã—åŒ…ã¿è¾¼ã‚€ã€‚'},
{name: 'éœ¹é‚ç«', element: 'fire', desc: 'ç¨²å¦»ã®ç«ã€‚å¼·çƒˆã§çˆ†ç™ºçš„ãªã€‚'},
{name: 'æ¾æ ¢æœ¨', element: 'wood', desc: 'æ¾ã®æœ¨ã€‚å››å­£ã‚’é€šã˜ã¦é’ã„ç¯€æ“ã€‚'},
{name: 'é•·æµæ°´', element: 'water', desc: 'é•·ã„å·ã®æ°´ã€‚æ‚ ã€…ã¨æµã‚Œã‚‹ã€‚'},
{name: 'ç ‚ä¸­é‡‘', element: 'metal', desc: 'ç ‚ä¸­ã®é‡‘ã€‚éš ã•ã‚ŒãŸæ‰èƒ½ã€‚'},
{name: 'å±±ä¸‹ç«', element: 'fire', desc: 'å±±ä¸‹ã®ç«ã€‚æ½œåœ¨çš„ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã€‚'},
{name: 'å¹³åœ°æœ¨', element: 'wood', desc: 'å¹³åœ°ã®æœ¨ã€‚åºƒãåºƒãŒã‚‹ã€‚'},
{name: 'å£ä¸ŠåœŸ', element: 'earth', desc: 'å£ã®åœŸã€‚èŠ¸è¡“çš„æ„Ÿè¦šã€‚'},
{name: 'é‡‘ç®”é‡‘', element: 'metal', desc: 'é‡‘ç®”ã€‚è¯éº—ã ãŒè–„ã„ã€‚'},
{name: 'è¦†ç‡ˆç«', element: 'fire', desc: 'ç¯ç«ã€‚é—‡ã‚’ç…§ã‚‰ã™çŸ¥æµã€‚'},
{name: 'å¤©æ²³æ°´', element: 'water', desc: 'å¤©æ²³ã®æ°´ã€‚é«˜é ãªç†æƒ³ã€‚'},
{name: 'å¤§é©›åœŸ', element: 'earth', desc: 'å¤§é§…ã®åœŸã€‚ç–é€šã¨äº¤æµã€‚'},
{name: 'é‡µé‡§é‡‘', element: 'metal', desc: 'é‡µã®é‡‘ã€‚é«˜è²´ã§å„ªé›…ãªã€‚'},
{name: 'æ¡‘æŸ˜æœ¨', element: 'wood', desc: 'æ¡‘ã®æœ¨ã€‚å®Ÿç”¨çš„ã§æœ‰ç›Šãªã€‚'},
{name: 'å¤§æºªæ°´', element: 'water', desc: 'å¤§æ¸“ã®æ°´ã€‚æ·±ãåºƒã„ã€‚'},
{name: 'ç ‚ä¸­åœŸ', element: 'earth', desc: 'ç ‚ä¸­ã®åœŸã€‚å …å›ºã«å›ºã‚ã‚‹ã€‚'},
{name: 'å¤©ä¸Šç«', element: 'fire', desc: 'å¤©ã®ç«ï¼ˆå¤ªé™½ï¼‰ã€‚è¼ãå­˜åœ¨ã€‚'},
{name: 'çŸ³æ¦´æœ¨', element: 'wood', desc: 'çŸ³æ¦´ã®æœ¨ã€‚è±Šã‹ãªçµå®Ÿã€‚'},
{name: 'å¤§æµ·æ°´', element: 'water', desc: 'å¤§æµ·ã®æ°´ã€‚æœã¦ãªã„åŒ…å®¹åŠ›ã€‚'}
];const SEASON = {0:'winter',1:'winter',2:'spring',3:'spring',4:'spring',5:'summer',6:'summer',7:'summer',8:'autumn',9:'autumn',10:'autumn',11:'winter'};const TEN_GODS = {peer:{k:'æ¯”è‚©(ã²ã‘ã‚“)',c:'æ¯”è‚©',d:'å…„å¼Ÿã€å‹äººã€ç«¶äº‰è€…ã€‚è‡ªä¿¡ã¨ç‹¬ç«‹å¿ƒã‚’è¡¨ã—ã¾ã™ã€‚'},
robWealth:{k:'åŠ«è²¡(ã”ã†ã–ã„)',c:'åŠ«è²¡',d:'ç«¶äº‰ã€æè²¡ã€‚å‹è² æ¬²ãŒå¼·ã„ãŒãŠé‡‘ã®ç®¡ç†ã«æ³¨æ„ã€‚'},
eatingGod:{k:'é£Ÿç¥(ã—ã‚‡ãã˜ã‚“)',c:'é£Ÿç¥',d:'æ‰èƒ½ã€é£Ÿã¹ç‰©ã€‚å‰µæ„åŠ›ã¨è¡¨ç¾åŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚'},
hurtOfficer:{k:'å‚·å®˜(ã—ã‚‡ã†ã‹ã‚“)',c:'å‚·å®˜',d:'è¡¨ç¾ã€å‰µä½œã€‚èŠ¸è¡“çš„æ‰èƒ½ãŒã‚ã‚‹ãŒè¨€è‘‰ã«æ³¨æ„ å¿…è¦.'},
indirectWealth:{k:'åè²¡(ã¸ã‚“ã–ã„)',c:'åè²¡',d:'æ¨ªè²¡ã€æŠ•è³‡ã€‚äº‹æ¥­æ‰‹è…•ãŒè‰¯ã„ãŒæµ®æ°—æ³¨æ„.'},
directWealth:{k:'æ­£è²¡(ã›ã„ã–ã„)',c:'æ­£è²¡',d:'æ­£å½“ãªè²¡ç‰©ã€‚èª å®Ÿã§è²¯è“„ãŒå¾—æ„ã§ã™ã€‚'},
indirectOfficer:{k:'åå®˜(ã¸ã‚“ã‹ã‚“)',c:'åå®˜',d:'æ¨©å¨, åœ§è¿«. æ¨é€²åŠ›ãŒ ã‚ã‚‹ãŒ ã‚¹ãƒˆãƒ¬ã‚¹ æ³¨æ„.'},
directOfficer:{k:'æ­£å®˜(ã›ã„ã‹ã‚“)',c:'æ­£å®˜',d:'åèª‰ã€æ˜‡é€²ã€‚å“ä½ãŒã‚ã‚Šç¤¾ä¼šçš„èªå®šã‚’å—ã‘ã¾ã™ã€‚'},
indirectSeal:{k:'åå°(ã¸ã‚“ã„ã‚“)',c:'åå°',d:'å­¦å•ã€éœŠæ„Ÿã€‚ç‹¬å‰µçš„ã ãŒé¬±ã«ãªã‚Šãˆã¾ã™ã€‚'},
directSeal:{k:'æ­£å°(ã›ã„ã„ã‚“)',c:'æ­£å°',d:'å­¦æ¥­ã€æ–‡æ›¸ã€‚è©¦é¨“é‹ãŒè‰¯ãå¹´é•·è€…ã®åŠ©ã‘ã‚’å—ã‘ã¾ã™ã€‚'}};const TWELVE_STATES = [
{k:'é•·ç”Ÿ',l:12,d:'æ–°ã—ãç”Ÿã¾ã‚Œã‚‹æ°—ã€‚å§‹ã¾ã‚Šã¨å¸Œæœ›ãŒã‚ã‚Šã¾ã™ã€‚'},
{k:'æ²æµ´',l:8,d:'æ´—ç¤¼ã‚’å—ã‘ã‚‹æ™‚æœŸã€‚å¤‰åŒ–ã¨ä¸å®‰å®šãŒã‚ã‚Šãˆã¾ã™ã€‚'},
{k:'å† å¸¯',l:10,d:'æˆé•·ã™ã‚‹æ°—ã€‚ç™ºå±•ã¨æ©Ÿä¼šãŒè¨ªã‚Œã¾ã™ã€‚'},
{k:'å»ºç¦„',l:11,d:'æ—ºç››ãªæ´»å‹•æœŸã€‚æœ€é«˜ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¨æˆå°±ãŒã‚ã‚Šã¾ã™ã€‚'},
{k:'å¸æ—º',l:12,d:'é ‚ç‚¹ã«é”ã—ãŸçŠ¶æ…‹ã€‚æ¨©åŠ›ã¨åœ°ä½ãŒé«˜ã„ã§ã™ã€‚'},
{k:'è¡°',l:7,d:'ä¸‹é™ã™ã‚‹æ°—ã€‚å®‰å®šã‚’å–ã‚ŠãªãŒã‚‰çŸ¥æµã‚’ç©ã¿ã¾ã™ã€‚'},
{k:'ã¸ã„',l:4,d:'æ°—ãŒå¼±ã¾ã‚‹ã€‚å¥åº·ã¨ä¼‘æ¯ã«æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„ã€‚'},
{k:'ã—',l:3,d:'çµ‚ã‚ã‚Šã‚†ãæ™‚æœŸã€‚ä»•ä¸Šã’ã¨æ•´ç†ãŒå¿…è¦ã§ã™ã€‚'},
{k:'ã¼ã†',l:2,d:'éš ã•ã‚ŒãŸçŠ¶æ…‹ã€‚é™ã‹ã«å†…é¢ã‚’è‚²ã¦ã¦ãã ã•ã„ã€‚'},
{k:'çµ¶',l:1,d:'å®Œå…¨ã«ç©ºã«ãªã£ãŸçŠ¶æ…‹ã€‚æ–°ã—ã„å§‹ã¾ã‚Šã‚’æº–å‚™ã—ã¾ã™ã€‚'},
{k:'èƒ',l:5,d:'å®¿ã‚‹æ°—ã€‚æ–°ã—ã„ç”Ÿå‘½ã¨å¯èƒ½æ€§ãŒèŠ½ç”Ÿãˆã¾ã™ã€‚'},
{k:'é¤Š',l:6,d:'è‚²ã‚€æ™‚æœŸã€‚ã‚†ã£ãã‚Šæˆé•·ã—ã¦ã„ãã¾ã™ã€‚'}
];const SOLAR_TERMS = {1940:[[2,5,1,8],[3,6,18,51],[4,5,23,17],[5,6,11,19],[6,6,15,30],[7,7,2,4],[8,8,11,44],[9,8,14,18],[10,9,5,53],[11,8,8,30],[12,7,1,15],[1,6,7,8]],
1941:[[2,4,6,50],[3,6,0,34],[4,5,5,3],[5,6,17,9],[6,6,21,22],[7,8,7,59],[8,8,17,40],[9,8,20,15],[10,9,11,51],[11,8,14,27],[12,7,7,12],[1,6,12,58]],
1942:[[2,4,12,34],[3,6,6,17],[4,5,10,49],[5,5,22,57],[6,6,3,11],[7,7,13,49],[8,7,23,31],[9,8,2,7],[10,8,17,43],[11,7,20,20],[12,7,13,5],[1,6,18,49]],
1943:[[2,4,18,21],[3,6,12,3],[4,5,16,36],[5,6,4,44],[6,6,8,59],[7,7,19,38],[8,8,5,21],[9,8,7,58],[10,8,23,35],[11,8,2,12],[12,7,18,57],[1,6,0,40]],
1944:[[2,5,0,23],[3,5,18,6],[4,4,22,42],[5,5,10,52],[6,5,15,9],[7,7,1,51],[8,7,11,36],[9,7,14,14],[10,8,5,51],[11,7,8,28],[12,7,1,12],[1,6,6,31]],
1945:[[2,4,6,19],[3,6,0,5],[4,5,4,41],[5,5,16,52],[6,5,21,9],[7,7,7,52],[8,7,17,38],[9,7,20,17],[10,8,11,54],[11,7,14,31],[12,7,7,14],[1,6,12,24]],
1946:[[2,4,12,3],[3,6,5,46],[4,5,10,21],[5,5,22,34],[6,6,2,53],[7,7,13,37],[8,7,23,25],[9,8,2,6],[10,8,17,44],[11,7,20,21],[12,7,13,5],[1,6,18,15]],
1947:[[2,4,17,51],[3,6,11,32],[4,5,16,6],[5,6,4,23],[6,6,8,44],[7,7,19,26],[8,8,5,16],[9,8,7,58],[10,8,23,37],[11,8,2,14],[12,7,18,58],[1,6,0,7]],
1948:[[2,4,23,42],[3,5,17,22],[4,4,21,57],[5,5,10,9],[6,5,14,30],[7,7,1,16],[8,7,11,7],[9,7,13,51],[10,8,5,29],[11,7,8,7],[12,7,0,50],[1,6,5,59]],
1949:[[2,4,5,22],[3,5,23,2],[4,5,3,35],[5,5,15,49],[6,5,20,13],[7,7,6,59],[8,7,16,53],[9,7,19,38],[10,8,11,18],[11,7,13,56],[12,7,6,39],[1,6,11,49]],
1950:[[2,4,11,3],[3,6,4,42],[4,5,9,14],[5,5,21,37],[6,6,2,2],[7,7,12,46],[8,7,22,43],[9,8,1,29],[10,8,17,9],[11,7,19,47],[12,7,12,30],[1,6,17,38]],
1951:[[2,4,16,52],[3,6,10,26],[4,5,14,59],[5,6,3,14],[6,6,7,42],[7,7,18,29],[8,8,4,26],[9,8,7,14],[10,8,22,55],[11,8,1,33],[12,7,18,16],[1,6,23,29]],
1952:[[2,4,22,53],[3,5,16,22],[4,4,20,56],[5,5,9,9],[6,5,13,35],[7,7,0,22],[8,7,10,19],[9,7,13,8],[10,8,4,48],[11,7,7,26],[12,7,0,9],[1,6,5,19]],
1953:[[2,4,4,45],[3,5,22,14],[4,5,2,48],[5,5,15,0],[6,5,19,25],[7,7,6,10],[8,7,16,7],[9,7,18,58],[10,8,10,39],[11,7,13,18],[12,7,6,1],[1,6,11,12]],
1954:[[2,4,10,30],[3,6,3,55],[4,5,8,28],[5,5,20,42],[6,6,1,10],[7,7,11,55],[8,7,21,54],[9,8,0,47],[10,8,16,29],[11,7,19,8],[12,7,11,52],[1,6,17,4]],
1955:[[2,4,16,17],[3,6,9,41],[4,5,14,15],[5,6,2,30],[6,6,6,59],[7,7,17,43],[8,8,3,44],[9,8,6,38],[10,8,22,21],[11,8,1,0],[12,7,17,44],[1,6,22,57]],
1956:[[2,4,22,12],[3,5,15,38],[4,4,20,12],[5,5,8,26],[6,5,12,54],[7,7,23,40],[8,7,9,40],[9,7,12,34],[10,8,4,16],[11,7,6,56],[12,6,23,40],[1,6,4,52]],
1957:[[2,4,3,55],[3,5,21,22],[4,5,1,57],[5,5,14,12],[6,5,18,42],[7,7,5,28],[8,7,15,28],[9,7,18,24],[10,8,10,7],[11,7,12,48],[12,7,5,33],[1,6,10,45]],
1958:[[2,4,9,48],[3,6,3,8],[4,5,7,42],[5,5,19,57],[6,6,0,27],[7,7,11,14],[8,7,21,16],[9,8,0,14],[10,8,15,58],[11,7,18,39],[12,7,11,24],[1,6,16,38]],
1959:[[2,4,15,42],[3,6,8,55],[4,5,13,28],[5,6,1,43],[6,6,6,14],[7,7,17,0],[8,8,3,2],[9,8,6,3],[10,8,21,49],[11,8,0,31],[12,7,17,16],[1,6,22,31]],
1960:[[2,4,21,42],[3,5,14,56],[4,4,19,30],[5,5,7,45],[6,5,12,16],[7,6,23,2],[8,7,8,59],[9,7,11,55],[10,8,3,37],[11,7,6,18],[12,6,23,3],[1,6,4,17]],
1961:[[2,4,3,23],[3,5,20,32],[4,5,1,6],[5,5,13,22],[6,5,17,55],[7,7,4,42],[8,7,14,41],[9,7,17,40],[10,8,9,23],[11,7,12,5],[12,7,4,51],[1,6,10,5]],
1962:[[2,4,9,18],[3,6,2,29],[4,5,6,59],[5,5,19,14],[6,5,23,46],[7,7,10,33],[8,7,20,33],[9,7,23,34],[10,8,15,18],[11,7,17,59],[12,7,10,45],[1,6,15,58]],
1963:[[2,4,15,8],[3,6,8,15],[4,5,12,44],[5,6,1,0],[6,6,5,32],[7,7,16,19],[8,8,2,21],[9,8,5,24],[10,8,21,9],[11,7,23,51],[12,7,16,37],[1,6,21,50]],
1964:[[2,4,21,5],[3,5,14,14],[4,4,18,44],[5,5,6,58],[6,5,11,28],[7,6,22,14],[8,7,8,14],[9,7,11,17],[10,8,3,2],[11,7,5,45],[12,6,22,32],[1,6,3,46]],
1965:[[2,4,2,46],[3,5,19,54],[4,5,0,27],[5,5,12,44],[6,5,17,18],[7,7,4,6],[8,7,14,6],[9,7,17,10],[10,8,8,55],[11,7,11,38],[12,7,4,25],[1,6,9,40]],
1966:[[2,4,8,38],[3,6,1,47],[4,5,6,18],[5,5,18,33],[6,5,23,6],[7,7,9,53],[8,7,19,54],[9,7,23,0],[10,8,14,46],[11,7,17,29],[12,7,10,17],[1,6,15,32]],
1967:[[2,4,14,31],[3,6,7,38],[4,5,12,8],[5,6,0,22],[6,6,4,55],[7,7,15,42],[8,8,1,44],[9,8,4,51],[10,8,20,38],[11,7,23,22],[12,7,16,11],[1,6,21,26]],
1968:[[2,4,20,27],[3,5,13,35],[4,4,18,4],[5,5,6,16],[6,5,10,47],[7,6,21,33],[8,7,7,34],[9,7,10,41],[10,8,2,29],[11,7,5,14],[12,6,22,3],[1,6,3,19]],
1969:[[2,4,2,8],[3,5,19,17],[4,4,23,47],[5,5,12,2],[6,5,16,36],[7,7,3,24],[8,7,13,27],[9,7,16,35],[10,8,8,23],[11,7,11,8],[12,7,3,56],[1,6,9,11]],
1970:[[2,4,7,46],[3,6,0,55],[4,5,5,26],[5,5,17,45],[6,5,22,21],[7,7,9,11],[8,7,19,16],[9,7,22,27],[10,8,14,16],[11,7,17,1],[12,7,9,50],[1,6,15,5]],
1971:[[2,4,13,26],[3,6,6,36],[4,5,11,9],[5,5,23,29],[6,6,4,6],[7,7,14,56],[8,8,1,2],[9,8,4,15],[10,8,20,5],[11,7,22,51],[12,7,15,40],[1,6,20,56]],
1972:[[2,4,19,20],[3,5,12,29],[4,4,17,0],[5,5,5,13],[6,5,9,48],[7,6,20,37],[8,7,6,42],[9,7,10,0],[10,8,1,50],[11,7,4,38],[12,6,21,28],[1,6,2,45]],
1973:[[2,4,1,4],[3,5,18,13],[4,4,22,44],[5,5,11,0],[6,5,15,39],[7,7,2,30],[8,7,12,36],[9,7,15,52],[10,8,7,42],[11,7,10,28],[12,7,3,18],[1,6,8,35]],
1974:[[2,4,6,59],[3,6,0,7],[4,5,4,36],[5,5,16,52],[6,5,21,29],[7,7,8,19],[8,7,18,26],[9,7,21,45],[10,8,13,36],[11,7,16,23],[12,7,9,13],[1,6,14,29]],
1975:[[2,4,12,59],[3,6,6,3],[4,5,10,30],[5,5,22,44],[6,6,3,19],[7,7,14,8],[8,8,0,14],[9,8,3,35],[10,8,19,27],[11,7,22,15],[12,7,15,6],[1,6,20,24]],
1976:[[2,4,18,40],[3,5,11,48],[4,4,16,17],[5,5,4,30],[6,5,9,6],[7,6,19,56],[8,7,6,2],[9,7,9,24],[10,8,1,16],[11,7,4,5],[12,6,20,56],[1,6,2,14]],
1977:[[2,4,0,34],[3,5,17,41],[4,4,22,10],[5,5,10,24],[6,5,15,1],[7,7,1,51],[8,7,11,58],[9,7,15,20],[10,8,7,11],[11,7,10,0],[12,7,2,51],[1,6,8,9]],
1978:[[2,4,6,27],[3,5,23,34],[4,5,4,4],[5,5,16,19],[6,5,20,56],[7,7,7,46],[8,7,17,53],[9,7,21,16],[10,8,13,7],[11,7,15,56],[12,7,8,47],[1,6,14,5]],
1979:[[2,4,12,13],[3,6,5,21],[4,5,9,50],[5,5,22,6],[6,6,2,43],[7,7,13,33],[8,7,23,42],[9,8,3,7],[10,8,18,59],[11,7,21,49],[12,7,14,40],[1,6,19,59]],
1980:[[2,4,18,10],[3,5,11,18],[4,4,15,47],[5,5,3,59],[6,5,8,35],[7,6,19,24],[8,7,5,31],[9,7,8,55],[10,8,0,47],[11,7,3,38],[12,6,20,30],[1,6,1,50]],
1981:[[2,3,23,56],[3,5,17,3],[4,4,21,33],[5,5,9,48],[6,5,14,26],[7,7,1,16],[8,7,11,25],[9,7,14,50],[10,8,6,42],[11,7,9,32],[12,7,2,23],[1,6,7,43]],
1982:[[2,4,5,46],[3,5,22,55],[4,5,3,25],[5,5,15,41],[6,5,20,18],[7,7,7,8],[8,7,17,17],[9,7,20,42],[10,8,12,34],[11,7,15,25],[12,7,8,17],[1,6,13,37]],
1983:[[2,4,11,40],[3,6,4,48],[4,5,9,18],[5,5,21,32],[6,6,2,8],[7,7,12,58],[8,7,23,7],[9,8,2,33],[10,8,18,26],[11,7,21,18],[12,7,14,10],[1,6,19,30]],
1984:[[2,4,17,19],[3,5,10,27],[4,4,14,56],[5,5,3,10],[6,5,7,48],[7,6,18,39],[8,7,4,49],[9,7,8,17],[10,8,0,11],[11,7,3,4],[12,6,19,57],[1,6,1,18]],
1985:[[2,3,23,12],[3,5,16,21],[4,4,20,51],[5,5,9,5],[6,5,13,43],[7,7,0,34],[8,7,10,44],[9,7,14,12],[10,8,6,5],[11,7,8,58],[12,7,1,50],[1,6,7,12]],
1986:[[2,4,5,8],[3,5,22,17],[4,5,2,46],[5,5,14,59],[6,5,19,35],[7,7,6,24],[8,7,16,33],[9,7,20,2],[10,8,11,55],[11,7,14,48],[12,7,7,41],[1,6,13,1]],
1987:[[2,4,10,52],[3,6,4,1],[4,5,8,31],[5,5,20,47],[6,6,1,25],[7,7,12,15],[8,7,22,24],[9,8,1,52],[10,8,17,44],[11,7,20,37],[12,7,13,29],[1,6,18,49]],
1988:[[2,4,16,43],[3,5,9,51],[4,4,14,19],[5,5,2,32],[6,5,7,9],[7,6,17,59],[8,7,4,9],[9,7,7,38],[10,7,23,32],[11,7,2,26],[12,6,19,18],[1,6,0,40]],
1989:[[2,3,22,27],[3,5,15,36],[4,4,20,6],[5,5,8,21],[6,5,12,59],[7,6,23,50],[8,7,10,0],[9,7,13,30],[10,8,5,23],[11,7,8,17],[12,7,1,10],[1,6,6,32]],
1990:[[2,4,4,14],[3,5,21,23],[4,5,1,53],[5,5,14,8],[6,5,18,46],[7,7,5,36],[8,7,15,46],[9,7,19,17],[10,8,11,10],[11,7,14,5],[12,7,6,57],[1,6,12,19]],
1991:[[2,4,10,8],[3,6,3,17],[4,5,7,47],[5,5,20,1],[6,6,0,38],[7,7,11,27],[8,7,21,37],[9,8,1,7],[10,8,17,0],[11,7,19,54],[12,7,12,47],[1,6,18,9]],
1992:[[2,4,15,48],[3,5,9,0],[4,4,13,30],[5,5,1,46],[6,5,6,25],[7,6,17,16],[8,7,3,27],[9,7,6,58],[10,7,22,52],[11,7,1,47],[12,6,18,40],[1,5,23,59]],
1993:[[2,3,21,37],[3,5,14,47],[4,4,19,18],[5,5,7,34],[6,5,12,12],[7,6,23,4],[8,7,9,15],[9,7,12,48],[10,8,4,41],[11,7,7,37],[12,7,0,30],[1,6,5,52]],
1994:[[2,4,3,31],[3,5,20,41],[4,5,1,11],[5,5,13,26],[6,5,18,3],[7,7,4,53],[8,7,15,3],[9,7,18,36],[10,8,10,30],[11,7,13,25],[12,7,6,18],[1,6,11,40]],
1995:[[2,4,9,13],[3,6,2,24],[4,5,6,55],[5,5,19,13],[6,5,23,52],[7,7,10,43],[8,7,20,54],[9,8,0,27],[10,8,16,19],[11,7,19,14],[12,7,12,6],[1,6,17,27]],
1996:[[2,4,14,8],[3,5,8,20],[4,4,12,51],[5,5,1,7],[6,5,5,47],[7,6,16,38],[8,7,2,49],[9,7,6,23],[10,7,22,17],[11,7,1,13],[12,6,18,6],[1,5,23,26]],
1997:[[2,4,2,4],[3,5,20,15],[4,5,0,47],[5,5,13,4],[6,5,17,43],[7,7,4,34],[8,7,14,45],[9,7,18,20],[10,8,10,14],[11,7,13,11],[12,7,6,4],[1,6,11,26]],
1998:[[2,4,7,57],[3,6,1,8],[4,5,5,40],[5,5,17,58],[6,5,22,37],[7,7,9,28],[8,7,19,40],[9,7,23,15],[10,8,15,9],[11,7,18,6],[12,7,10,58],[1,6,16,20]],
1999:[[2,4,13,57],[3,6,7,8],[4,5,11,39],[5,5,23,54],[6,6,4,31],[7,7,15,21],[8,8,1,32],[9,8,5,6],[10,8,20,59],[11,7,23,56],[12,7,16,48],[1,6,22,9]],
2000:[[2,4,19,40],[3,5,12,53],[4,4,17,25],[5,5,5,42],[6,5,10,22],[7,6,21,13],[8,7,7,25],[9,7,11,1],[10,8,2,55],[11,7,5,52],[12,6,22,44],[1,6,4,4]],
2001:[[2,4,1,29],[3,5,18,41],[4,4,23,14],[5,5,11,33],[6,5,16,13],[7,7,3,5],[8,7,13,18],[9,7,16,55],[10,8,8,48],[11,7,11,45],[12,7,4,37],[1,6,9,57]],
2002:[[2,4,7,24],[3,6,0,35],[4,5,5,6],[5,5,17,24],[6,5,22,3],[7,7,8,53],[8,7,19,7],[9,7,22,44],[10,8,14,37],[11,7,17,35],[12,7,10,27],[1,6,15,47]],
2003:[[2,4,13,5],[3,6,6,17],[4,5,10,50],[5,5,23,10],[6,6,3,50],[7,7,14,41],[8,8,0,55],[9,8,4,34],[10,8,20,27],[11,7,23,26],[12,7,16,18],[1,6,21,38]],
2004:[[2,4,18,56],[3,5,12,9],[4,4,16,43],[5,5,5,2],[6,5,9,43],[7,6,20,35],[8,7,6,49],[9,7,10,28],[10,8,2,22],[11,7,5,20],[12,6,22,11],[1,6,3,30]],
2005:[[2,4,0,43],[3,5,17,55],[4,4,22,29],[5,5,10,49],[6,5,15,32],[7,7,2,24],[8,7,12,40],[9,7,16,21],[10,8,8,14],[11,7,11,13],[12,7,4,4],[1,6,9,24]],
2006:[[2,4,6,27],[3,5,23,39],[4,5,4,15],[5,5,16,38],[6,5,21,21],[7,7,8,14],[8,7,18,32],[9,7,22,15],[10,8,14,8],[11,7,17,7],[12,7,9,58],[1,6,15,17]],
2007:[[2,4,12,18],[3,6,5,31],[4,5,10,6],[5,5,22,27],[6,6,3,10],[7,7,14,2],[8,8,0,21],[9,8,4,5],[10,8,19,58],[11,7,22,59],[12,7,15,50],[1,6,21,9]],
2008:[[2,4,18,0],[3,5,11,16],[4,4,15,53],[5,5,4,17],[6,5,9,0],[7,6,19,54],[8,7,6,13],[9,7,9,59],[10,8,1,52],[11,7,4,52],[12,6,21,42],[1,6,2,59]],
2009:[[2,3,23,50],[3,5,17,4],[4,4,21,43],[5,5,10,9],[6,5,14,54],[7,7,1,48],[8,7,12,8],[9,7,15,57],[10,8,7,50],[11,7,10,50],[12,7,3,40],[1,6,8,57]],
2010:[[2,4,5,42],[3,5,23,0],[4,5,3,41],[5,5,16,5],[6,5,20,51],[7,7,7,45],[8,7,17,59],[9,7,21,44],[10,8,13,36],[11,7,16,33],[12,7,9,22],[1,6,14,40]],
2011:[[2,4,11,33],[3,6,4,46],[4,5,9,23],[5,5,21,45],[6,6,2,33],[7,7,13,26],[8,7,23,47],[9,8,3,36],[10,8,19,29],[11,7,22,29],[12,7,15,18],[1,6,20,36]],
2012:[[2,4,17,22],[3,5,10,38],[4,4,15,18],[5,5,3,42],[6,5,8,30],[7,6,19,25],[8,7,5,46],[9,7,9,37],[10,8,1,30],[11,7,4,29],[12,6,21,17],[1,6,2,33]],
2013:[[2,3,23,13],[3,5,16,28],[4,4,21,10],[5,5,9,37],[6,5,14,27],[7,7,1,23],[8,7,11,45],[9,7,15,37],[10,8,7,30],[11,7,10,29],[12,7,3,17],[1,6,8,33]],
2014:[[2,4,5,3],[3,5,22,21],[4,5,2,59],[5,5,15,24],[6,5,20,14],[7,7,7,10],[8,7,17,32],[9,7,21,25],[10,8,13,18],[11,7,16,17],[12,7,9,5],[1,6,14,21]],
2015:[[2,4,10,58],[3,6,4,15],[4,5,8,55],[5,5,21,19],[6,6,2,9],[7,7,13,4],[8,7,23,26],[9,8,3,21],[10,8,19,13],[11,7,22,12],[12,7,15,0],[1,6,20,16]],
2016:[[2,4,16,46],[3,5,10,2],[4,4,14,42],[5,5,3,7],[6,5,7,57],[7,6,18,52],[8,7,5,15],[9,7,9,11],[10,8,1,4],[11,7,4,4],[12,6,20,51],[1,6,2,5]],
2017:[[2,3,22,34],[3,5,15,51],[4,4,20,32],[5,5,9,0],[6,5,13,50],[7,7,0,46],[8,7,11,9],[9,7,15,6],[10,8,6,58],[11,7,9,59],[12,7,2,46],[1,6,8,0]],
2018:[[2,4,4,28],[3,5,21,45],[4,5,2,26],[5,5,14,51],[6,5,19,42],[7,7,6,37],[8,7,16,59],[9,7,20,56],[10,8,12,49],[11,7,15,50],[12,7,8,38],[1,6,13,52]],
2019:[[2,4,10,14],[3,6,3,29],[4,5,8,9],[5,5,20,35],[6,6,1,26],[7,7,12,21],[8,7,22,45],[9,8,2,44],[10,8,18,37],[11,7,21,39],[12,7,14,26],[1,6,19,39]],
2020:[[2,4,16,3],[3,5,9,19],[4,4,13,59],[5,5,2,26],[6,5,7,18],[7,6,18,14],[8,7,4,37],[9,7,8,38],[10,8,0,31],[11,7,3,32],[12,6,20,19],[1,6,1,31]],
2021:[[2,3,21,58],[3,5,15,17],[4,4,19,59],[5,5,8,25],[6,5,13,14],[7,7,0,8],[8,7,10,30],[9,7,14,30],[10,8,6,23],[11,7,9,25],[12,7,2,13],[1,6,7,25]],
2022:[[2,4,3,50],[3,5,21,9],[4,5,1,50],[5,5,14,17],[6,5,19,6],[7,7,5,58],[8,7,16,20],[9,7,20,21],[10,8,12,15],[11,7,15,17],[12,7,8,5],[1,6,13,18]],
2023:[[2,4,9,42],[3,6,2,59],[4,5,7,38],[5,5,20,5],[6,6,0,55],[7,7,11,49],[8,7,22,11],[9,8,2,13],[10,8,18,6],[11,7,21,9],[12,7,13,57],[1,6,19,9]],
2024:[[2,4,15,27],[3,5,8,43],[4,4,13,23],[5,5,1,51],[6,5,6,42],[7,6,17,38],[8,7,4,1],[9,7,8,6],[10,7,23,59],[11,7,2,59],[12,6,19,46],[1,6,0,56]],
2025:[[2,3,21,10],[3,5,14,26],[4,4,19,6],[5,5,7,36],[6,5,12,28],[7,6,23,23],[8,7,9,46],[9,7,13,51],[10,8,5,44],[11,7,8,46],[12,7,1,33],[1,6,6,44]],
2026:[[2,4,5,2],[3,5,22,59],[4,5,3,40],[5,5,20,49],[6,6,0,48],[7,7,10,57],[8,7,20,43],[9,7,23,41],[10,8,15,29],[11,7,18,52],[12,7,11,53],[1,5,17,23]],
2027:[[2,4,8,46],[3,6,2,2],[4,5,6,42],[5,5,19,10],[6,6,0,0],[7,7,10,54],[8,7,21,18],[9,8,1,26],[10,8,17,19],[11,7,20,22],[12,7,13,10],[1,6,18,22]],
2028:[[2,4,14,31],[3,5,7,47],[4,4,12,27],[5,5,0,55],[6,5,5,46],[7,6,16,41],[8,7,3,5],[9,7,7,14],[10,7,23,8],[11,7,2,12],[12,6,19,0],[1,6,0,12]],
2029:[[2,3,20,20],[3,5,13,37],[4,4,18,17],[5,5,6,45],[6,5,11,36],[7,6,22,31],[8,7,8,56],[9,7,13,5],[10,8,4,58],[11,7,8,1],[12,7,0,48],[1,6,6,0]],
2030:[[2,4,2,8],[3,5,19,24],[4,5,0,3],[5,5,12,31],[6,5,17,21],[7,7,4,14],[8,7,14,38],[9,7,18,48],[10,8,10,42],[11,7,13,46],[12,7,6,35],[1,6,11,47]],
2031:[[2,4,7,58],[3,6,1,14],[4,5,5,52],[5,5,18,19],[6,5,23,9],[7,7,10,2],[8,7,20,26],[9,8,0,37],[10,8,16,31],[11,7,19,36],[12,7,12,25],[1,6,17,38]],
2032:[[2,4,13,48],[3,5,7,4],[4,4,11,42],[5,5,0,8],[6,5,4,58],[7,6,15,51],[8,7,2,15],[9,7,6,27],[10,7,22,21],[11,7,1,27],[12,6,18,16],[1,5,23,29]],
2033:[[2,3,19,33],[3,5,12,49],[4,4,17,26],[5,5,5,54],[6,5,10,45],[7,6,21,38],[8,7,8,3],[9,7,12,17],[10,8,4,11],[11,7,7,17],[12,7,0,6],[1,6,5,20]],
2034:[[2,4,1,27],[3,5,18,43],[4,4,23,21],[5,5,11,48],[6,5,16,37],[7,7,3,29],[8,7,13,53],[9,7,18,6],[10,8,10,0],[11,7,13,7],[12,7,5,57],[1,6,11,11]],
2035:[[2,4,7,15],[3,6,0,31],[4,5,5,9],[5,5,17,37],[6,5,22,27],[7,7,9,19],[8,7,19,44],[9,7,23,58],[10,8,15,53],[11,7,18,59],[12,7,11,49],[1,6,17,3]],
2036:[[2,4,13,2],[3,5,6,18],[4,4,10,56],[5,4,23,23],[6,5,4,13],[7,6,15,6],[8,7,1,31],[9,7,5,46],[10,7,21,41],[11,7,0,48],[12,6,17,38],[1,5,22,53]],
2037:[[2,3,18,52],[3,5,12,8],[4,4,16,45],[5,5,5,11],[6,5,10,1],[7,6,20,53],[8,7,7,18],[9,7,11,34],[10,8,3,29],[11,7,6,36],[12,6,23,26],[1,6,4,41]],
2038:[[2,4,0,40],[3,5,17,57],[4,4,22,34],[5,5,11,1],[6,5,15,50],[7,7,2,42],[8,7,13,7],[9,7,17,24],[10,8,9,18],[11,7,12,27],[12,7,5,17],[1,6,10,32]],
2039:[[2,4,6,32],[3,5,23,49],[4,5,4,27],[5,5,16,55],[6,5,21,45],[7,7,8,37],[8,7,18,59],[9,7,23,16],[10,8,15,10],[11,7,18,18],[12,7,11,9],[1,6,16,24]],
2040:[[2,4,12,18],[3,5,5,34],[4,4,10,12],[5,4,22,39],[6,5,3,29],[7,6,14,22],[8,7,0,48],[9,7,5,5],[10,7,21,0],[11,7,0,9],[12,6,17,0],[1,5,22,16]],
2041:[[2,3,18,4],[3,5,11,20],[4,4,15,58],[5,5,4,26],[6,5,9,17],[7,6,20,11],[8,7,6,37],[9,7,10,57],[10,8,2,51],[11,7,6,0],[12,6,22,51],[1,6,4,8]],
2042:[[2,3,23,52],[3,5,17,6],[4,4,21,43],[5,5,10,12],[6,5,15,2],[7,7,1,55],[8,7,12,22],[9,7,16,42],[10,8,8,37],[11,7,11,48],[12,7,4,39],[1,6,9,55]],
2043:[[2,4,5,41],[3,5,22,57],[4,5,3,34],[5,5,16,1],[6,5,20,51],[7,7,7,43],[8,7,18,9],[9,7,22,29],[10,8,14,24],[11,7,17,35],[12,7,10,27],[1,6,15,44]],
2044:[[2,4,11,27],[3,5,4,44],[4,4,9,21],[5,4,21,49],[6,5,2,39],[7,6,13,33],[8,6,23,59],[9,7,4,20],[10,7,20,15],[11,6,23,26],[12,6,16,17],[1,5,21,35]],
2045:[[2,3,17,17],[3,5,10,33],[4,4,15,10],[5,5,3,37],[6,5,8,27],[7,6,19,21],[8,7,5,48],[9,7,10,10],[10,8,2,5],[11,7,5,16],[12,6,22,7],[1,6,3,26]],
2046:[[2,3,23,7],[3,5,16,21],[4,4,20,58],[5,5,9,25],[6,5,14,15],[7,7,1,7],[8,7,11,35],[9,7,15,58],[10,8,7,53],[11,7,11,5],[12,7,3,56],[1,6,9,14]],
2047:[[2,4,4,53],[3,5,22,8],[4,5,2,44],[5,5,15,12],[6,5,20,1],[7,7,6,54],[8,7,17,21],[9,7,21,46],[10,8,13,41],[11,7,16,53],[12,7,9,44],[1,6,15,3]],
2048:[[2,4,10,37],[3,5,3,52],[4,4,8,29],[5,4,20,57],[6,5,1,47],[7,6,12,41],[8,6,23,8],[9,7,3,31],[10,7,19,26],[11,6,22,39],[12,6,15,30],[1,5,20,50]],
2049:[[2,3,16,27],[3,5,9,43],[4,4,14,20],[5,5,2,47],[6,5,7,36],[7,6,18,29],[8,7,4,55],[9,7,9,19],[10,8,1,14],[11,7,4,27],[12,6,21,19],[1,6,2,39]],
2050:[[2,4,0,32],[3,5,17,49],[4,4,22,26],[5,5,10,53],[6,5,15,42],[7,7,2,34],[8,7,12,58],[9,7,17,12],[10,8,9,5],[11,7,12,11],[12,7,5,1],[1,6,10,15]],
2051:[[2,4,4,3],[3,5,21,19],[4,5,1,56],[5,5,14,24],[6,5,19,14],[7,7,6,7],[8,7,16,35],[9,7,20,59],[10,8,12,54],[11,7,16,7],[12,7,8,58],[1,6,14,18]],
2052:[[2,4,9,48],[3,5,3,4],[4,4,7,42],[5,4,20,9],[6,5,1,0],[7,6,11,53],[8,6,22,21],[9,7,2,45],[10,7,18,41],[11,6,21,53],[12,6,14,44],[1,5,20,3]],
2053:[[2,3,15,38],[3,5,8,54],[4,4,13,31],[5,5,1,58],[6,5,6,47],[7,6,17,40],[8,7,4,8],[9,7,8,33],[10,8,0,29],[11,7,3,42],[12,6,20,34],[1,6,1,54]],
2054:[[2,3,21,28],[3,5,14,44],[4,4,19,21],[5,5,7,48],[6,5,12,37],[7,6,23,30],[8,7,9,58],[9,7,14,24],[10,8,6,19],[11,7,9,33],[12,7,2,25],[1,6,7,46]],
2055:[[2,4,3,15],[3,5,20,32],[4,5,1,8],[5,5,13,35],[6,5,18,23],[7,7,5,16],[8,7,15,44],[9,7,20,11],[10,8,12,6],[11,7,15,20],[12,7,8,13],[1,6,13,33]],
2056:[[2,4,8,58],[3,5,2,15],[4,4,6,52],[5,4,19,20],[6,5,0,10],[7,6,11,4],[8,6,21,33],[9,7,2,0],[10,7,17,55],[11,6,21,10],[12,6,14,1],[1,5,19,22]],
2057:[[2,3,14,48],[3,5,8,5],[4,4,12,42],[5,5,1,10],[6,5,5,59],[7,6,16,53],[8,7,3,21],[9,7,7,48],[10,7,23,44],[11,7,2,58],[12,6,19,50],[1,6,1,11]],
2058:[[2,3,20,38],[3,5,13,55],[4,4,18,32],[5,5,7,0],[6,5,11,49],[7,6,22,43],[8,7,9,12],[9,7,13,40],[10,8,5,35],[11,7,8,49],[12,7,1,41],[1,6,7,2]],
2059:[[2,4,2,26],[3,5,19,43],[4,5,0,21],[5,5,12,48],[6,5,17,37],[7,7,4,30],[8,7,14,59],[9,7,19,27],[10,8,11,23],[11,7,14,38],[12,7,7,30],[1,6,12,52]],
2060:[[2,4,8,10],[3,5,1,28],[4,4,6,6],[5,4,18,34],[6,4,23,24],[7,6,10,18],[8,6,20,48],[9,7,1,16],[10,7,17,12],[11,6,20,26],[12,6,13,17],[1,5,18,37]],
2061:[[2,3,14,0],[3,5,7,18],[4,4,11,55],[5,5,0,24],[6,5,5,14],[7,6,16,8],[8,7,2,38],[9,7,7,6],[10,7,23,2],[11,7,2,17],[12,6,19,10],[1,6,0,31]],
2062:[[2,3,19,50],[3,5,13,8],[4,4,17,46],[5,5,6,14],[6,5,11,4],[7,6,21,58],[8,7,8,28],[9,7,12,58],[10,8,4,53],[11,7,8,8],[12,7,1,1],[1,6,6,23]],
2063:[[2,4,1,38],[3,5,18,57],[4,4,23,34],[5,5,12,2],[6,5,16,51],[7,7,3,45],[8,7,14,15],[9,7,18,45],[10,8,10,41],[11,7,13,57],[12,7,6,49],[1,6,12,11]],
2064:[[2,4,7,22],[3,5,0,41],[4,4,5,19],[5,4,17,48],[6,4,22,38],[7,6,9,33],[8,6,20,4],[9,7,0,35],[10,7,16,31],[11,6,19,47],[12,6,12,39],[1,5,17,59]],
2065:[[2,3,13,11],[3,5,6,30],[4,4,11,8],[5,4,23,37],[6,5,4,27],[7,6,15,21],[8,7,1,53],[9,7,6,24],[10,7,22,20],[11,7,1,37],[12,6,18,30],[1,5,23,52]],
2066:[[2,3,19,2],[3,5,12,20],[4,4,16,57],[5,5,5,25],[6,5,10,15],[7,6,21,9],[8,7,7,40],[9,7,12,11],[10,8,4,8],[11,7,7,25],[12,7,0,18],[1,6,5,40]],
2067:[[2,4,0,49],[3,5,18,9],[4,4,22,47],[5,5,11,15],[6,5,16,5],[7,7,2,59],[8,7,13,31],[9,7,18,3],[10,8,9,59],[11,7,13,16],[12,7,6,9],[1,6,11,32]],
2068:[[2,4,6,35],[3,4,23,53],[4,4,4,30],[5,4,16,58],[6,4,21,48],[7,6,8,42],[8,6,19,15],[9,6,23,47],[10,7,15,44],[11,6,19,1],[12,6,11,54],[1,5,17,16]],
2069:[[2,3,12,25],[3,5,5,44],[4,4,10,22],[5,4,22,51],[6,5,3,42],[7,6,14,37],[8,7,1,9],[9,7,5,41],[10,7,21,38],[11,7,0,55],[12,6,17,47],[1,5,23,8]],
2070:[[2,3,18,15],[3,5,11,34],[4,4,16,12],[5,5,4,40],[6,5,9,30],[7,6,20,24],[8,7,6,56],[9,7,11,29],[10,8,3,26],[11,7,6,44],[12,6,23,37],[1,6,4,59]],
2071:[[2,4,0,3],[3,5,17,23],[4,4,22,1],[5,5,10,29],[6,5,15,19],[7,7,2,13],[8,7,12,46],[9,7,17,19],[10,8,9,15],[11,7,12,33],[12,7,5,26],[1,6,10,48]],
2072:[[2,4,5,48],[3,4,23,8],[4,4,3,46],[5,4,16,14],[6,4,21,4],[7,6,7,58],[8,6,18,31],[9,6,23,5],[10,7,15,1],[11,6,18,20],[12,6,11,13],[1,5,16,35]],
2073:[[2,3,11,38],[3,5,4,58],[4,4,9,36],[5,4,22,5],[6,5,2,56],[7,6,13,50],[8,7,0,23],[9,7,4,58],[10,7,20,55],[11,7,0,13],[12,6,17,6],[1,5,22,29]],
2074:[[2,3,17,29],[3,5,10,49],[4,4,15,27],[5,5,3,55],[6,5,8,45],[7,6,19,39],[8,7,6,12],[9,7,10,47],[10,8,2,44],[11,7,6,3],[12,6,22,56],[1,6,4,18]],
2075:[[2,3,23,16],[3,5,16,37],[4,4,21,15],[5,5,9,43],[6,5,14,33],[7,7,1,27],[8,7,11,59],[9,7,16,35],[10,8,8,32],[11,7,11,52],[12,7,4,46],[1,6,10,9]],
2076:[[2,4,5,0],[3,4,22,21],[4,4,2,59],[5,4,15,27],[6,4,20,17],[7,6,7,11],[8,6,17,45],[9,6,22,20],[10,7,14,18],[11,6,17,38],[12,6,10,31],[1,5,15,55]],
2077:[[2,3,10,51],[3,5,4,12],[4,4,8,50],[5,4,21,19],[6,5,2,10],[7,6,13,4],[8,6,23,38],[9,7,4,13],[10,7,20,10],[11,6,23,30],[12,6,16,23],[1,5,21,46]],
2078:[[2,3,16,41],[3,5,10,3],[4,4,14,40],[5,5,3,8],[6,5,7,58],[7,6,18,52],[8,7,5,25],[9,7,10,1],[10,8,1,59],[11,7,5,19],[12,6,22,13],[1,6,3,36]],
2079:[[2,3,22,29],[3,5,15,50],[4,4,20,27],[5,5,8,55],[6,5,13,45],[7,7,0,38],[8,7,11,12],[9,7,15,49],[10,8,7,47],[11,7,11,8],[12,7,4,2],[1,6,9,26]],
2080:[[2,4,4,14],[3,4,21,35],[4,4,2,13],[5,4,14,40],[6,4,19,30],[7,6,6,24],[8,6,16,58],[9,6,21,35],[10,7,13,33],[11,6,16,54],[12,6,9,47],[1,5,15,11]],
2081:[[2,3,10,4],[3,5,3,26],[4,4,8,4],[5,4,20,32],[6,5,1,22],[7,6,12,15],[8,6,22,49],[9,7,3,27],[10,7,19,24],[11,6,22,47],[12,6,15,40],[1,5,21,4]],
2082:[[2,3,15,55],[3,5,9,17],[4,4,13,54],[5,5,2,22],[6,5,7,12],[7,6,18,6],[8,7,4,40],[9,7,9,17],[10,8,1,15],[11,7,4,36],[12,6,21,30],[1,6,2,54]],
2083:[[2,3,21,43],[3,5,15,5],[4,4,19,42],[5,5,8,10],[6,5,12,59],[7,6,23,53],[8,7,10,27],[9,7,15,5],[10,8,7,3],[11,7,10,24],[12,7,3,17],[1,6,8,42]],
2084:[[2,4,3,27],[3,4,20,49],[4,4,1,26],[5,4,13,54],[6,4,18,44],[7,6,5,38],[8,6,16,11],[9,6,20,49],[10,7,12,47],[11,6,16,9],[12,6,9,3],[1,5,14,27]],
2085:[[2,3,9,18],[3,5,2,41],[4,4,7,18],[5,4,19,45],[6,5,0,34],[7,6,11,28],[8,6,21,59],[9,7,2,38],[10,7,18,35],[11,6,21,58],[12,6,14,53],[1,5,20,18]],
2086:[[2,3,15,9],[3,5,8,32],[4,4,13,9],[5,5,1,36],[6,5,6,25],[7,6,17,18],[8,7,3,51],[9,7,8,29],[10,8,0,27],[11,7,3,50],[12,6,20,44],[1,6,2,9]],
2087:[[2,3,20,57],[3,5,14,20],[4,4,18,56],[5,5,7,22],[6,5,12,11],[7,6,23,4],[8,7,9,37],[9,7,14,16],[10,8,6,14],[11,7,9,38],[12,7,2,31],[1,6,7,57]],
2088:[[2,4,2,42],[3,4,20,4],[4,4,0,41],[5,4,13,8],[6,4,17,57],[7,6,4,50],[8,6,15,23],[9,6,20,2],[10,7,11,59],[11,6,15,23],[12,6,8,17],[1,5,13,42]],
2089:[[2,3,8,33],[3,5,1,56],[4,4,6,32],[5,4,18,59],[6,4,23,47],[7,6,10,40],[8,6,21,12],[9,7,1,52],[10,7,17,50],[11,6,21,13],[12,6,14,8],[1,5,19,34]],
2090:[[2,3,14,24],[3,5,7,47],[4,4,12,24],[5,5,0,50],[6,5,5,38],[7,6,16,30],[8,7,3,4],[9,7,7,43],[10,7,23,41],[11,7,3,5],[12,6,20,0],[1,6,1,26]],
2091:[[2,3,20,12],[3,5,13,35],[4,4,18,11],[5,5,6,38],[6,5,11,27],[7,6,22,20],[8,7,8,52],[9,7,13,31],[10,8,5,28],[11,7,8,53],[12,7,1,47],[1,6,7,13]],
2092:[[2,4,1,56],[3,4,19,19],[4,3,23,56],[5,4,12,23],[6,4,17,12],[7,6,4,5],[8,6,14,38],[9,6,19,17],[10,7,11,14],[11,6,14,39],[12,6,7,33],[1,5,12,59]],
2093:[[2,3,7,48],[3,5,1,11],[4,4,5,48],[5,4,18,14],[6,4,23,3],[7,6,9,55],[8,6,20,27],[9,7,1,6],[10,7,17,5],[11,6,20,29],[12,6,13,24],[1,5,18,51]],
2094:[[2,3,13,40],[3,5,7,4],[4,4,11,40],[5,5,0,6],[6,5,4,53],[7,6,15,46],[8,7,2,18],[9,7,6,58],[10,7,22,56],[11,7,2,21],[12,6,19,16],[1,6,0,43]],
2095:[[2,3,19,28],[3,5,12,52],[4,4,17,28],[5,5,5,54],[6,5,10,43],[7,6,21,36],[8,7,8,8],[9,7,12,49],[10,8,4,47],[11,7,8,11],[12,7,1,7],[1,6,6,34]],
2096:[[2,4,1,11],[3,4,18,36],[4,3,23,13],[5,4,11,41],[6,4,16,30],[7,6,3,23],[8,6,13,56],[9,6,18,36],[10,7,10,33],[11,6,13,58],[12,6,6,52],[1,5,12,18]],
2097:[[2,3,7,3],[3,5,0,27],[4,4,5,4],[5,4,17,32],[6,4,22,21],[7,6,9,14],[8,6,19,47],[9,7,0,27],[10,7,16,25],[11,6,19,50],[12,6,12,45],[1,5,18,13]],
2098:[[2,3,12,55],[3,5,6,19],[4,4,10,56],[5,4,23,22],[6,5,4,11],[7,6,15,3],[8,7,1,35],[9,7,6,16],[10,7,22,14],[11,7,1,40],[12,6,18,35],[1,6,0,3]],
2099:[[2,3,18,43],[3,5,12,8],[4,4,16,44],[5,5,5,10],[6,5,9,59],[7,6,20,51],[8,7,7,23],[9,7,12,5],[10,8,4,3],[11,7,7,29],[12,7,0,24],[1,6,5,52]],
2100:[[2,3,24,31],[3,5,17,56],[4,4,22,32],[5,5,10,58],[6,5,15,47],[7,7,2,40],[8,7,13,13],[9,7,17,54],[10,8,9,52],[11,7,13,19],[12,7,6,14],[1,6,11,43]]};const LUNAR_DATA=[0x04bd8,0x04ae0,0x0a570,0x054d5,0x0d260,0x0d950,0x16554,0x056a0,0x09ad0,0x055d2,0x04ae0,0x0a5b6,0x0a4d0,0x0d250,0x1d255,0x0b540,0x0d6a0,0x0ada2,0x095b0,0x14977,0x04970,0x0a4b0,0x0b4b5,0x06a50,0x06d40,0x1ab54,0x02b60,0x09570,0x052f2,0x04970,0x06566,0x0d4a0,0x0ea50,0x06e95,0x05ad0,0x02b60,0x186e3,0x092e0,0x1c8d7,0x0c950,0x0d4a0,0x1d8a6,0x0b550,0x056a0,0x1a5b4,0x025d0,0x092d0,0x0d2b2,0x0a950,0x0b557,0x06ca0,0x0b550,0x15355,0x04da0,0x0a5d0,0x14573,0x052d0,0x0a9a8,0x0e950,0x06aa0,0x0aea6,0x0ab50,0x04b60,0x0aae4,0x0a570,0x05260,0x0f263,0x0d950,0x05b57,0x056a0,0x096d0,0x04dd5,0x04ad0,0x0a4d0,0x0d4d4,0x0d250,0x0d558,0x0b540,0x0b5a0,0x195a6,0x095b0,0x049b0,0x0a974,0x0a4b0,0x0b27a,0x06a50,0x06d40,0x0af46,0x0ab60,0x09570,0x04af5,0x04970,0x064b0,0x074a3,0x0ea50,0x06b58,0x055c0,0x0ab60,0x096d5,0x092e0,0x0c960,0x0d954,0x0d4a0,0x0da50,0x07552,0x056a0,0x0abb7,0x025d0,0x092d0,0x0cab5,0x0a950,0x0b4a0,0x0baa4,0x0ad50,0x055d9,0x04ba0,0x0a5b0,0x15176,0x052b0,0x0a930,0x07954,0x06aa0,0x0ad50,0x05b52,0x04b60,0x0a6e6,0x0a4e0,0x0d260,0x0ea65,0x0d530,0x05aa0,0x076a3,0x096d0,0x04bd7,0x04ad0,0x0a4d0,0x1d0b6,0x0d250,0x0d520,0x0dd45,0x0b5a0,0x056d0,0x055b2,0x049b0,0x0a577,0x0a4b0,0x0aa50,0x1b255,0x06d20,0x0ada0];const LUNAR_START = 1900;const MY_ACCOUNT = "K-MUDANG ãŠå•ã„åˆã‚ã›: kmudang.official@gmail.com";let GENDER = 'm';let CALENDAR = 'solar';let PARTNER_CALENDAR = 'solar';let SAJU = null;let GODS = null;let STRENGTH = null;let BIRTH_YEAR = null;let BIRTH_MONTH = null;let BIRTH_DAY = null;let BIRTH_HOUR = null;let ORIGINAL_LUNAR_YEAR = null;let ORIGINAL_LUNAR_MONTH = null;let ORIGINAL_LUNAR_DAY = null;let currentNumbers = [];let history = [];
let talismanGenerated = false;let talismanDataUrl = null;function generateTalisman() {if (!SAJU || !SAJU.day) {toast('ã¾ãšå››æŸ±åˆ†æã‚’è¡Œã£ã¦ãã ã•ã„ï¼ â˜¯ï¸');return;}
const yearBranchIdx = BRANCH.findIndex(b => b.c === SAJU.year.b.c);spinZodiacWheel(yearBranchIdx, function() {startTalismanGeneration();});setTimeout(() => { if(!talismanGenerated) createHighResTalisman(); }, 100);}
function startTalismanGeneration() {const overlay = document.getElementById('talisman-ritual-overlay');if (overlay) {overlay.classList.add('active');playRitualAnimation(() => {if(!talismanGenerated) createHighResTalisman();overlay.classList.remove('active');document.getElementById('talisman-preview').style.display = 'block';document.getElementById('talisman-btn-wrapper').style.display = 'none';toast('ğŸ® é–‹é‹ãŠå®ˆã‚ŠãŒå®Œæˆã—ã¾ã—ãŸï¼');});} else {if(!talismanGenerated) createHighResTalisman();document.getElementById('talisman-preview').style.display = 'block';document.getElementById('talisman-btn-wrapper').style.display = 'none';toast('ğŸ® é–‹é‹ãŠå®ˆã‚ŠãŒå®Œæˆã—ã¾ã—ãŸï¼');}}
function playRitualAnimation(callback) {const canvas = document.getElementById('ritual-canvas');if (!canvas) {callback();return;}
const ctx = canvas.getContext('2d');const W = 300, H = 400;ctx.fillStyle = '#0a0505';ctx.fillRect(0, 0, W, H);const yongEl = GODS && GODS.yong ? GODS.yong : 'fire';const colors = {fire: { main: '#C41E3A', accent: '#FFD700' },
water: { main: '#1E3A5F', accent: '#87CEEB' },
wood: { main: '#228B22', accent: '#90EE90' },
metal: { main: '#B8860B', accent: '#FFD700' },
earth: { main: '#8B4513', accent: '#DEB887' }};const color = colors[yongEl] || colors.fire;let opacity = 0;const interval = setInterval(() => {ctx.fillStyle = '#0a0505';ctx.fillRect(0, 0, W, H);ctx.strokeStyle = color.main;ctx.lineWidth = 3;ctx.strokeRect(20, 20, W-40, H-40);opacity = Math.min(1, opacity + 0.08);ctx.fillStyle = `rgba(255, 215, 0, ${opacity})`;ctx.font = '180px "Zen Kurenaido", serif';ctx.textAlign = 'center';ctx.textBaseline = 'middle';ctx.fillText('ç¬¦', W/2, H/2 - 30);ctx.fillStyle = `rgba(139, 115, 85, ${opacity})`;ctx.font = '24px "Zen Kurenaido", serif';ctx.fillText('é–‹é‹ãŠå®ˆã‚Šä½œæˆä¸­...', W/2, H - 60);if (opacity >= 1) {clearInterval(interval);setTimeout(callback, 500);}}, 80);}
async function createHighResTalisman() {
await document.fonts.ready;
await document.fonts.load('bold 560px "Ma Shan Zheng"');
await document.fonts.load('bold 180px "Ma Shan Zheng"');
await document.fonts.load('bold 160px "Ma Shan Zheng"');
await document.fonts.load('bold 128px "Ma Shan Zheng"');
await document.fonts.load('bold 104px "Ma Shan Zheng"');
await document.fonts.load('bold 88px "Ma Shan Zheng"');
await document.fonts.load('bold 72px "Ma Shan Zheng"');
await document.fonts.load('bold 32px "Ma Shan Zheng"');
await document.fonts.load('bold 28px "Ma Shan Zheng"');
await document.fonts.load('64px "Ma Shan Zheng"');
await document.fonts.load('56px "Ma Shan Zheng"');
await document.fonts.load('48px "Ma Shan Zheng"');
await document.fonts.load('44px "Ma Shan Zheng"');
await document.fonts.load('40px "Ma Shan Zheng"');
await document.fonts.load('36px "Ma Shan Zheng"');
await document.fonts.load('32px "Ma Shan Zheng"');
await document.fonts.load('24px "Ma Shan Zheng"');
await document.fonts.load('16px "Ma Shan Zheng"');
await document.fonts.load('14px "Ma Shan Zheng"');
const _JP='ã‚ã„ã†ãˆãŠã‹ããã‘ã“ã•ã—ã™ã›ããŸã¡ã¤ã¦ã¨ãªã«ã¬ã­ã®ã¯ã²ãµã¸ã»ã¾ã¿ã‚€ã‚ã‚‚ã‚„ã‚†ã‚ˆã‚‰ã‚Šã‚‹ã‚Œã‚ã‚ã‚’ã‚“é–‹é‹å®ˆå£ç´™è¨­å®šä¿å­˜ç”»åƒæœ€é«˜æ³¨æ„æœˆå¹´ç™½é’èµ¤é»„é»’å¹²æ”¯ç”Ÿç™ºä¸‡äº‹äº¨é€šç«å¾·æ˜Œç››å…‰æ˜å¤§å‰åœŸåšè¼‰è²¡ç¦„è±Šç›ˆé‡‘å …å›ºç™¾æˆå°±æ°´æ½¤æ²¢æ™ºæ…§é”é³³å‡°æ°—é¾è™éº’éºŸæ—¥æŸ±èº«å¼·å¼±ç”¨ç¥å–œå¿Œ';
await document.fonts.load('88px "Zen Kurenaido"', _JP);
await document.fonts.load('80px "Zen Kurenaido"', _JP);
await document.fonts.load('72px "Zen Kurenaido"', _JP);
await document.fonts.load('64px "Zen Kurenaido"', _JP);
await document.fonts.load('56px "Zen Kurenaido"', _JP);
await document.fonts.load('52px "Zen Kurenaido"', _JP);
await document.fonts.load('48px "Zen Kurenaido"', _JP);
await document.fonts.load('44px "Zen Kurenaido"', _JP);
await document.fonts.load('40px "Zen Kurenaido"', _JP);
await document.fonts.load('36px "Zen Kurenaido"', _JP);
await document.fonts.load('32px "Zen Kurenaido"', _JP);
await document.fonts.load('24px "Zen Kurenaido"', _JP);
const canvas = document.getElementById('talisman-canvas');const ctx = canvas.getContext('2d');const W = 2160, H = 3840;canvas.width = W;canvas.height = H;
const currentYear = new Date().getFullYear();
const yearStemIdx = (currentYear - 4) % 10;
const yearBranchIdx = (currentYear - 4) % 12;
const yearStem = STEM[yearStemIdx];
const yearBranch = BRANCH[yearBranchIdx];
const yearElement = ELEMENT[yearStem.e];
const animals = ['å­(ã­ãšã¿)','ä¸‘(ã†ã—)','å¯…(ã¨ã‚‰)','å¯(ã†ã•ã)','è¾°(ãŸã¤)','å·³(ã¸ã³)','åˆ(ã†ã¾)','æœª(ã²ã¤ã˜)','ç”³(ã•ã‚‹)','é…‰(ã¨ã‚Š)','æˆŒ(ã„ã¬)','äº¥(ã„ã®ã—ã—)'];
const yearAnimal = animals[yearBranchIdx];
const colors = ['è’¼ã„','èµ¤ã„','é»„è‰²ã„','ç™½ã„','é»’ã„'];
const yearColor = colors[Math.floor(yearStemIdx / 2)];
const chineseNums = ['ã€‡','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'];
const yearChinese = String(currentYear).split('').map(d => chineseNums[parseInt(d)]).join('');
const yongEl = GODS && GODS.yong ? GODS.yong : 'fire';const themes = {fire: { bg1: '#FFF0F0', bg2: '#FFE0E0', bg3: '#FFF5F5', main: '#B20000', accent: '#8B0000', border: '#4D0000', text: '#1A0A08', symbol: 'å‡¤', symbolName: 'é³³å‡°', energyTitle: 'é³³å‡°ã®æ°—', energyDesc: 'ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨æˆå°±', emoji: 'ğŸ”¥', elColor: '#CC0000' },
water: { bg1: '#E8F0FF', bg2: '#D0E0F8', bg3: '#F0F5FF', main: '#0000AA', accent: '#000080', border: '#000055', text: '#0A0A1E', symbol: 'é¾Ÿ', symbolName: 'ç„æ­¦', energyTitle: 'ç„æ­¦ã®æ°—', energyDesc: 'çŸ¥æµã¨æˆ¦ç•¥', emoji: 'ğŸ’§', elColor: '#0000CC' },
wood: { bg1: '#E8FFE8', bg2: '#D0F0D0', bg3: '#F0FFF0', main: '#003300', accent: '#002200', border: '#001100', text: '#050A05', symbol: 'é¾™', symbolName: 'é’é¾', energyTitle: 'é’é¾ã®æ°—', energyDesc: 'æˆé•·ã¨é©æ–°', emoji: 'ğŸŒ³', elColor: '#004D00' },
metal: { bg1: '#FFFBF0', bg2: '#FFF5E0', bg3: '#FFFEF8', main: '#D4A017', accent: '#C9A227', border: '#8B7500', text: '#3D2B00', symbol: 'è™', symbolName: 'ç™½è™', energyTitle: 'ç™½è™ã®æ°—', energyDesc: 'ç²¾å¯†ã•ã¨æ¨©å¨', emoji: 'âš”ï¸', elColor: '#FFD700' },
earth: { bg1: '#F0EBE0', bg2: '#E0D8C8', bg3: '#F5F0E8', main: '#4A3728', accent: '#3D2B1F', border: '#2D1F15', text: '#100D08', symbol: 'éºŸ', symbolName: 'éº’éºŸ', energyTitle: 'éº’éºŸã®æ°—', energyDesc: 'å¯Œã¨å®‰å®š', emoji: 'ğŸŒ', elColor: '#6B5344' }};const theme = themes[yongEl] || themes.fire;const bgGrad = ctx.createLinearGradient(0, 0, 0, H);bgGrad.addColorStop(0, theme.bg1);bgGrad.addColorStop(0.5, theme.bg2);bgGrad.addColorStop(1, theme.bg3);ctx.fillStyle = bgGrad;ctx.fillRect(0, 0, W, H);
drawHanjiTexture(ctx, W, H);
ctx.strokeStyle = theme.border;
ctx.lineWidth = 12;
ctx.strokeRect(80, 80, W-160, H-160);
ctx.strokeStyle = theme.main;
ctx.lineWidth = 4;
ctx.strokeRect(110, 110, W-220, H-220);
drawCornerOrnamentsHD(ctx, W, H, theme);drawTaegeukHD(ctx, W/2, 300, 120, theme);ctx.fillStyle = theme.main;ctx.font = 'bold 128px "Ma Shan Zheng", cursive';ctx.textAlign = 'center';ctx.fillText(`${yearChinese} å¼€è¿ç¬¦`, W/2, 560);ctx.fillStyle = theme.text;ctx.font = '64px "Zen Kurenaido", serif';ctx.fillText(`${currentYear}å¹´ é–‹é‹ã®ãŠå®ˆã‚Š`, W/2, 660);ctx.strokeStyle = theme.border;ctx.lineWidth = 4;ctx.beginPath();ctx.moveTo(300, 740);ctx.lineTo(W-300, 740);ctx.stroke();const mantras = {wood: { hanja: 'æœ¨å¾·ç”Ÿå‘ ä¸‡äº‹äº¨é€š', meaning: 'æœ¨ã®å¾³ãŒç”Ÿã˜ç™ºã—ã¦ä¸‡äº‹äº¨é€š' },
fire: { hanja: 'ç«å¾·æ˜Œç›› å…‰æ˜å¤§å‰', meaning: 'ç«ã®å¾³ãŒæ˜Œç››ã«ã—ã¦å…‰æ˜å¤§å‰' },
earth: { hanja: 'åœŸå¾·åšè½½ è´¢ç¦„ä¸°ç›ˆ', meaning: 'åœŸã®å¾³ãŒåšãè²¡ç¦„è±Šç›ˆ' },
metal: { hanja: 'é‡‘å¾·åšå›º ç™¾äº‹æˆå°±', meaning: 'é‡‘ã®å¾³ãŒå …å›ºã«ã—ã¦ç™¾äº‹æˆå°±' },
water: { hanja: 'æ°´å¾·æ¶¦æ³½ æ™ºæ…§é€šè¾¾', meaning: 'æ°´ã®å¾³ãŒæ½¤æ²¢ã§æ™ºæ…§é€šé”' }};const mantra = mantras[yongEl] || mantras.fire;ctx.fillStyle = theme.main;ctx.font = 'bold 104px "Ma Shan Zheng", cursive';ctx.fillText(mantra.hanja, W/2, 900);ctx.fillStyle = theme.border;ctx.font = '56px "Zen Kurenaido", serif';ctx.fillText(mantra.meaning, W/2, 1000);ctx.fillStyle = theme.main;ctx.font = 'bold 560px "Ma Shan Zheng", cursive';ctx.fillText('ç¬¦', W/2, 1500);ctx.fillStyle = theme.elColor;ctx.font = 'bold 160px "Ma Shan Zheng", cursive';ctx.fillText(theme.symbol, W/2, 1700);ctx.fillStyle = theme.text;ctx.font = '56px "Zen Kurenaido", serif';ctx.fillText(`${theme.energyTitle}`, W/2, 1770);ctx.font = '36px "Zen Kurenaido", serif';ctx.fillStyle = theme.elColor;ctx.font = '44px "Zen Kurenaido", serif';ctx.fillText(`${theme.energyDesc}`, W/2, 1825);const dayStem = SAJU.day.s.c;const dayBranch = SAJU.day.b.c;ctx.fillStyle = theme.main;ctx.font = 'bold 180px "Ma Shan Zheng", cursive';ctx.fillText(dayStem + dayBranch, W/2, 1980);const iljuKey = dayStem + dayBranch;const dayDesc = (typeof ILJU_60 !== 'undefined' && ILJU_60[iljuKey]) ? ILJU_60[iljuKey].name : '';ctx.fillStyle = theme.border;ctx.font = '56px "Zen Kurenaido", serif';ctx.fillText(dayDesc + ' æ—¥æŸ±', W/2, 2070);ctx.fillStyle = 'rgba(255, 255, 255, 0.85)';roundRectHD(ctx, 200, 2140, W-400, 560, 40);ctx.fill();ctx.strokeStyle = theme.main;ctx.lineWidth = 4;roundRectHD(ctx, 200, 2140, W-400, 560, 40);ctx.stroke();
const animalKey = BRANCH_TO_ANIMAL[dayBranch];
const animalImg = animalImages[animalKey];
const archImg = ARCHETYPE_60[iljuKey];
if (animalImg && animalImg.complete && animalImg.naturalWidth > 0) {
const boxX = 200, boxY = 2140, boxW = W - 400, boxH = 560;
const imgSize = boxH;
const imgX = boxX + boxW - imgSize;
const imgY = boxY;
const borderW = 12;
const borderRadius = 20;
const borderColor = (archImg?.color === '#FFFFFF') ? '#D4D4D4' : (archImg?.color || '#D4AF37');
ctx.save();
ctx.beginPath();
ctx.roundRect(imgX, imgY, imgSize, imgSize, borderRadius);
ctx.clip();
ctx.drawImage(animalImg, imgX, imgY, imgSize, imgSize);
ctx.restore();
ctx.strokeStyle = borderColor;
ctx.lineWidth = borderW;
ctx.beginPath();
ctx.roundRect(imgX + borderW/2, imgY + borderW/2, imgSize - borderW, imgSize - borderW, borderRadius);
ctx.stroke();
}
ctx.textAlign = 'left';ctx.font = '56px "Zen Kurenaido", serif';const yongsinEl = ELEMENT[GODS.yong];const huisinEl = ELEMENT[GODS.hee];const gisinEl = ELEMENT[GODS.gi];ctx.fillStyle = '#CC0000';ctx.font = '80px "Ma Shan Zheng", cursive';ctx.fillText('ç”¨ç¥', 300, 2280);ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText('(ã‚ˆã†ã—ã‚“)', 520, 2280);ctx.font = '56px "Zen Kurenaido", serif';ctx.fillStyle = theme.main;ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText(`${yongsinEl.k} ${theme.emoji}`, 900, 2280);ctx.fillStyle = '#006600';ctx.font = '80px "Ma Shan Zheng", cursive';ctx.fillText('å–œç¥', 300, 2400);ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText('(ãã—ã‚“)', 520, 2400);ctx.font = '56px "Zen Kurenaido", serif';ctx.fillStyle = theme.main;ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText(`${huisinEl.k}`, 900, 2400);ctx.fillStyle = '#666666';ctx.font = '80px "Ma Shan Zheng", cursive';ctx.fillText('å¿Œç¥', 300, 2520);ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText('(ãã—ã‚“)', 520, 2520);ctx.font = '56px "Zen Kurenaido", serif';ctx.fillStyle = '#888';ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText(`${gisinEl.k}`, 900, 2520);ctx.fillStyle = theme.border;ctx.font = '80px "Ma Shan Zheng", cursive';ctx.fillText('èº«å¼·å¼±', 300, 2640);ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText('(å¼·å¼±)', 580, 2640);ctx.font = '56px "Zen Kurenaido", serif';ctx.fillStyle = theme.main;const strType = STRENGTH ? (STRENGTH.type === 'strong' ? 'èº«å¼·' : STRENGTH.type === 'weak' ? 'èº«å¼±' : 'ä¸­å’Œ') : '?';const strPct = STRENGTH ? STRENGTH.pct + '%' : '';ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText(`${strType} ${strPct}`, 900, 2640);ctx.textAlign = 'center';ctx.fillStyle = theme.border;ctx.font = '64px "Zen Kurenaido", serif';ctx.fillText(`â”€â”€â”€ ${currentYear}å¹´ ${yearColor} ${yearAnimal}å¹²æ”¯å¹´ â”€â”€â”€`, W/2, 2820);let bestMonth = '?', worstMonth = '?';try {const monthlyLuck = getYearlyMonthLuck(currentYear, SAJU, GODS);if (monthlyLuck && monthlyLuck.best) bestMonth = monthlyLuck.best.month;if (monthlyLuck && monthlyLuck.worst) worstMonth = monthlyLuck.worst.month;} catch(e) {}
ctx.font = '72px "Zen Kurenaido", serif';ctx.fillStyle = '#006600';ctx.fillText(`âœ¨ æœ€é«˜ã®æœˆ: ${bestMonth}æœˆ`, W/2 - 360, 2940);ctx.fillStyle = '#CC0000';ctx.font = '72px "Zen Kurenaido", serif';ctx.fillText(`âš ï¸ æ³¨æ„ã®æœˆ: ${worstMonth}æœˆ`, W/2 + 360, 2940);ctx.strokeStyle = theme.border;ctx.lineWidth = 4;ctx.beginPath();ctx.moveTo(300, 3060);ctx.lineTo(W-300, 3060);ctx.stroke();
const archetype = ARCHETYPE_60[iljuKey];
const animalBranch = dayBranch;
if (archetype) {
ctx.font = '88px "Zen Kurenaido", serif';
if(archetype.color==='#FFFFFF'){ctx.strokeStyle='rgba(75,55,40,0.7)';ctx.lineWidth=8;ctx.lineJoin='round';ctx.strokeText(`${archetype.ko}`,W/2,3200);}
ctx.fillStyle = archetype.color;ctx.fillText(`${archetype.ko}`, W/2, 3200);
const quote = ANIMAL_QUOTE[animalBranch];
if (quote) {
ctx.fillStyle = 'rgba(75, 55, 40, 0.85)';
ctx.font = '64px "Zen Kurenaido", serif';ctx.fillText(quote.ko, W/2, 3300);
}
if (archetype.pko) {
ctx.fillStyle = 'rgba(75, 55, 40, 0.7)';
ctx.font = '80px "Zen Kurenaido", serif';ctx.fillText(archetype.pko, W/2, 3420);
}
}
ctx.fillStyle = theme.main;
ctx.font = '64px "Zen Kurenaido", serif';ctx.fillText('å„ã¯é€€ãç¦ãŒæ¥ãŸã‚Šã€ä¸‡äº‹å¤§å‰ãªã‚Š', W/2, 3540);
ctx.fillStyle = theme.border;
ctx.font = '56px "Zen Kurenaido", serif';
ctx.fillText('â˜¯ï¸ k-mudang.com', W/2, 3640);
ctx.fillStyle = 'rgba(75, 55, 40, 0.5)';ctx.font = '52px "Zen Kurenaido", serif';ctx.fillText('ğŸ“± ã‚¹ãƒãƒ›ã®å£ç´™ã«è¨­å®šã—ã¦ãã ã•ã„', W/2, 3710);talismanGenerated = true;talismanDataUrl = canvas.toDataURL('image/jpeg', 0.92);}

function drawHanjiTexture(ctx, W, H) {
for(let i=0;i<W*H*0.15;i++){const x=Math.random()*W;const y=Math.random()*H;const size=Math.random()*2.5+0.5;const colors=['rgba(139,90,43,','rgba(101,67,33,','rgba(180,140,100,','rgba(120,80,40,','rgba(160,120,80,'];const c=colors[Math.floor(Math.random()*colors.length)];const alpha=Math.random()*0.35+0.1;ctx.fillStyle=c+alpha+')';ctx.fillRect(x,y,size,size);}
ctx.globalAlpha=0.15;for(let i=0;i<800;i++){const x=Math.random()*W;const y=Math.random()*H;const len=Math.random()*60+20;const isH=Math.random()>0.5;ctx.strokeStyle='rgba(120,80,40,0.3)';ctx.lineWidth=Math.random()*1.5+0.3;ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(isH?x+len:x+Math.random()*5,isH?y+Math.random()*3:y+len);ctx.stroke();}ctx.globalAlpha=1.0;
const vignette=ctx.createRadialGradient(W/2,H/2,H*0.3,W/2,H/2,H*0.8);vignette.addColorStop(0,'rgba(139,90,43,0)');vignette.addColorStop(0.7,'rgba(120,80,40,0.05)');vignette.addColorStop(1,'rgba(101,67,33,0.15)');ctx.fillStyle=vignette;ctx.fillRect(0,0,W,H);}
function getTalismanRarity() {
let hasSamhap = false, hasBanghap = false, hasCheonul = false, hasYearMatch = false;
try {
const adv = analyzeAdvancedInteractions(SAJU);
if (adv && adv.samhapGuk) hasSamhap = adv.samhapGuk.some(s => s.complete);
const banghap = analyzeDirectionalHarmony ? analyzeDirectionalHarmony(SAJU) : [];
hasBanghap = banghap.some(b => b.type === 'complete');
const sinsal = calcSinsal ? calcSinsal(SAJU) : '';
hasCheonul = sinsal.includes('å¤©ä¹™è²´äºº');
const currentYear = new Date().getFullYear();
const yearStemIdx = (currentYear - 4) % 10;
const yearElement = ELEMENT[STEM[yearStemIdx].e];
hasYearMatch = GODS && GODS.yong && yearElement.e === GODS.yong;
} catch(e) { console.log('Rarity check error:', e); }
const hasBureau = hasSamhap || hasBanghap;
if (hasBureau && hasYearMatch) return { grade: 'legendary', label: 'ä¼èª¬', stars: 'â˜…â˜…â˜…â˜…â˜…' };
if (hasBureau || hasCheonul || hasYearMatch) return { grade: 'epic', label: 'è‹±é›„', stars: 'â˜…â˜…â˜…â˜…' };
return { grade: 'rare', label: 'å¸Œå°‘', stars: 'â˜…â˜…â˜…' };
}
function generateSerialNumber() {const now = new Date();const year = now.getFullYear();const random = Math.floor(Math.random() * 9999).toString().padStart(4, '0');const dayPillar = SAJU.day.s.c + SAJU.day.b.c;return `${year}-KMUDANG-${dayPillar}-${random}`;}
function drawTaegeukHD(ctx, x, y, r, theme) {const TAEGEUK_RED = '#C41E3A';const TAEGEUK_BLUE = '#1E3A5F';ctx.beginPath();ctx.arc(x, y, r, 0, Math.PI * 2);ctx.strokeStyle = theme.main;ctx.lineWidth = 8;ctx.stroke();ctx.beginPath();ctx.arc(x, y, r * 0.85, 0, Math.PI, false);ctx.fillStyle = TAEGEUK_BLUE;ctx.fill();ctx.beginPath();ctx.arc(x, y, r * 0.85, Math.PI, Math.PI * 2, false);ctx.fillStyle = TAEGEUK_RED;ctx.fill();ctx.beginPath();ctx.arc(x - r * 0.35, y, r * 0.28, 0, Math.PI * 2);ctx.fillStyle = TAEGEUK_RED;ctx.fill();ctx.beginPath();ctx.arc(x + r * 0.35, y, r * 0.28, 0, Math.PI * 2);ctx.fillStyle = TAEGEUK_BLUE;ctx.fill();}
function drawCornerOrnamentsHD(ctx, W, H, theme) {
const size = 100;
const lineW = 6;
const offset = 140;
ctx.strokeStyle = theme.main;
ctx.lineWidth = lineW;
ctx.beginPath();ctx.moveTo(offset, offset + size);ctx.lineTo(offset, offset);ctx.lineTo(offset + size, offset);ctx.stroke();
ctx.beginPath();ctx.moveTo(W - offset - size, offset);ctx.lineTo(W - offset, offset);ctx.lineTo(W - offset, offset + size);ctx.stroke();
ctx.beginPath();ctx.moveTo(offset, H - offset - size);ctx.lineTo(offset, H - offset);ctx.lineTo(offset + size, H - offset);ctx.stroke();
ctx.beginPath();ctx.moveTo(W - offset - size, H - offset);ctx.lineTo(W - offset, H - offset);ctx.lineTo(W - offset, H - offset - size);ctx.stroke();
}
function roundRectHD(ctx, x, y, w, h, r) {ctx.beginPath();ctx.moveTo(x + r, y);ctx.lineTo(x + w - r, y);ctx.quadraticCurveTo(x + w, y, x + w, y + r);ctx.lineTo(x + w, y + h - r);ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);ctx.lineTo(x + r, y + h);ctx.quadraticCurveTo(x, y + h, x, y + h - r);ctx.lineTo(x, y + r);ctx.quadraticCurveTo(x, y, x + r, y);ctx.closePath();}
function drawTaegeuk(ctx, x, y, r) {ctx.beginPath();ctx.arc(x, y, r, 0, Math.PI * 2);ctx.strokeStyle = '#D4AF37';ctx.lineWidth = 2;ctx.stroke();ctx.beginPath();ctx.arc(x, y, r * 0.8, 0, Math.PI, false);ctx.fillStyle = '#C41E3A';ctx.fill();ctx.beginPath();ctx.arc(x, y, r * 0.8, Math.PI, Math.PI * 2, false);ctx.fillStyle = '#1E3A5F';ctx.fill();ctx.beginPath();ctx.arc(x - r * 0.35, y, r * 0.25, 0, Math.PI * 2);ctx.fillStyle = '#1E3A5F';ctx.fill();ctx.beginPath();ctx.arc(x + r * 0.35, y, r * 0.25, 0, Math.PI * 2);ctx.fillStyle = '#C41E3A';ctx.fill();}
function drawCornerOrnaments(ctx, W, H) {ctx.fillStyle = '#D4AF37';ctx.font = '14px "Ma Shan Zheng", cursive';ctx.textAlign = 'center';ctx.fillText('ç¦', 35, 40);ctx.fillText('ç¥¿', W-35, 40);ctx.fillText('å£½', 35, H-25);ctx.fillText('å–œ', W-35, H-25);}
function roundRect(ctx, x, y, w, h, r) {ctx.beginPath();ctx.moveTo(x + r, y);ctx.lineTo(x + w - r, y);ctx.quadraticCurveTo(x + w, y, x + w, y + r);ctx.lineTo(x + w, y + h - r);ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);ctx.lineTo(x + r, y + h);ctx.quadraticCurveTo(x, y + h, x, y + h - r);ctx.lineTo(x, y + r);ctx.quadraticCurveTo(x, y, x + r, y);ctx.closePath();}
function downloadTalisman() {if (!talismanGenerated) {generateTalisman();if (!talismanGenerated) return;}
const link = document.createElement('a');link.download = 'K-MUDANG_2026_é–‹é‹ãŠå®ˆã‚Š.png';link.href = talismanDataUrl;link.click();toast('ğŸ“¥ ãŠå®ˆã‚Šç”»åƒãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼');}
const SHARE_TITLE = 'â˜¯ï¸ äº”è¡Œã®æµã‚Œã®ä¸­ã«ã€ã‚ãªãŸã®ç‰©èªãŒåˆ»ã¾ã‚Œã‚‹';
const SHARE_BODY = 'æ˜ŸãŒç©ºã‘ãŸå ´æ‰€ã‚’ã€ãŠå®ˆã‚ŠãŒæº€ãŸã™';
const SHARE_URL = 'https://k-mudang.com/jp.html';
function shareTalismanLINE() {if (!talismanGenerated) {generateTalisman();if (!talismanGenerated) return;}
if (navigator.share && navigator.canShare) {const canvas = document.getElementById('talisman-canvas');canvas.toBlob(async (blob) => {const file = new File([blob], 'K-MUDANG_2026_é–‹é‹ãŠå®ˆã‚Š.png', { type: 'image/png' });const shareData = {title: SHARE_TITLE,
text: SHARE_BODY,
url: SHARE_URL,
files: [file]};try {if (navigator.canShare(shareData)) {await navigator.share(shareData);toast('å…±æœ‰å®Œäº†ï¼ ğŸ‰');return;}} catch(e) {if (e.name !== 'AbortError') {console.log('Share failed:', e);}}
shareLINEFallback();}, 'image/png');return;}
shareLINEFallback();}
function shareLINEFallback() {const url = encodeURIComponent(SHARE_URL);const text = encodeURIComponent(SHARE_TITLE + '\n' + SHARE_BODY);
window.open('https://social-plugins.line.me/lineit/share?url=' + url + '&text=' + text, '_blank');
toast('ğŸ’¡ ãŠå®ˆã‚Šç”»åƒã¯[ç”»åƒä¿å­˜]ãƒœã‚¿ãƒ³ã§ä¿å­˜å¾Œã€LINEã§å…±æœ‰ã—ã¦ãã ã•ã„ï¼');}
function shareLINE() {
const url = encodeURIComponent(SHARE_URL);
const text = encodeURIComponent(SHARE_TITLE + '\n' + SHARE_BODY);
window.open('https://social-plugins.line.me/lineit/share?url=' + url + '&text=' + text, '_blank');
}
function getShareText() {return SHARE_BODY;}
function getShareImageUrl() {return 'ogimage.png';}
function copyShareLink() {const text = `${SHARE_TITLE}\n${SHARE_BODY}\nğŸ‘‰ ${SHARE_URL}`;safeClipboard(text, 'ğŸ“‹ å…±æœ‰ãƒªãƒ³ã‚¯ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸï¼');}
function init() {const cy = new Date().getFullYear();['birth-year', 'partner-year'].forEach(id => {const el = document.getElementById(id);if (el) {el.innerHTML = '<option value="" disabled selected>å¹´</option>';for (let i = cy; i >= 1940; i--) el.innerHTML += `<option value="${i}">${i}</option>`;}});['birth-month', 'partner-month'].forEach(id => {const el = document.getElementById(id);if (el) {el.innerHTML = '<option value="" disabled selected>æœˆ</option>';for (let i = 1; i <= 12; i++) el.innerHTML += `<option value="${i}">${i}</option>`;}});['birth-day', 'partner-day'].forEach(id => {const el = document.getElementById(id);if (el) {el.innerHTML = '<option value="" disabled selected>æ—¥</option>';for (let i = 1; i <= 31; i++) el.innerHTML += `<option value="${i}">${i}</option>`;}});const hourEl = document.getElementById('birth-hour');if (hourEl) {hourEl.innerHTML = '<option value="-1" selected>æ™‚é–“ä¸æ˜</option>';const hours = ['å­æ™‚(23:30-01:29)','ä¸‘æ™‚(01:30-03:29)','å¯…æ™‚(03:30-05:29)','å¯æ™‚(05:30-07:29)',
'è¾°æ™‚(07:30-09:29)','å·³æ™‚(09:30-11:29)','åˆæ™‚(11:30-13:29)','æœªæ™‚(13:30-15:29)',
'ç”³æ™‚(15:30-17:29)','é…‰æ™‚(17:30-19:29)','æˆŒæ™‚(19:30-21:29)','äº¥æ™‚(21:30-23:29)'];hours.forEach((t, i) => hourEl.innerHTML += `<option value="${i}">${t}</option>`);}
const pHourEl = document.getElementById('partner-hour');if (pHourEl) {pHourEl.innerHTML = '<option value="-1" selected>æ™‚é–“ä¸æ˜</option>';const pHours = ['å­æ™‚(23:30-01:29)','ä¸‘æ™‚(01:30-03:29)','å¯…æ™‚(03:30-05:29)','å¯æ™‚(05:30-07:29)','è¾°æ™‚(07:30-09:29)','å·³æ™‚(09:30-11:29)','åˆæ™‚(11:30-13:29)','æœªæ™‚(13:30-15:29)','ç”³æ™‚(15:30-17:29)','é…‰æ™‚(17:30-19:29)','æˆŒæ™‚(19:30-21:29)','äº¥æ™‚(21:30-23:29)'];pHours.forEach((t, i) => pHourEl.innerHTML += `<option value="${i}">${t}</option>`);}const cityEl=document.getElementById('city-select');if(cityEl){const cities=Object.keys(JP_CITIES);cityEl.innerHTML=cities.map(c=>`<option value="${c}"${c==='æ±äº¬'?' selected':''}>${c} (${getLngCorrStr(c)})</option>`).join('');}}
function safeClipboard(text, successMsg, failMsg) {
const success = () => toast(successMsg || 'ğŸ“‹ ã‚³ãƒ”ãƒ¼å®Œäº†ï¼');
const fallback = () => {
try {
const ta = document.createElement('textarea');
ta.value = text;
ta.style.cssText = 'position:fixed;left:-9999px;top:-9999px';
document.body.appendChild(ta);
ta.select();
document.execCommand('copy');
document.body.removeChild(ta);
success();
} catch(e) {
toast(failMsg || 'ğŸ“‹ ' + text.substring(0, 50) + '...');
}
};
if (navigator.clipboard && typeof navigator.clipboard.writeText === 'function') {
navigator.clipboard.writeText(text).then(success).catch(fallback);
} else {
fallback();
}
}
document.addEventListener('DOMContentLoaded', init);if (document.readyState !== 'loading') init();function toast(msg) {const t = document.getElementById('toast');t.textContent = msg;t.classList.add('show');setTimeout(() => t.classList.remove('show'), 3000);}
function getBallColor(n) {if (n <= 9) return 'y';if (n <= 18) return 'b';if (n <= 27) return 'r';return 'g';}
function createBall(n, sm = false) {return `<div class="ball ${sm ? 'sm' : ''} ${getBallColor(n)}">${n}</div>`;}
function setGender(g) {GENDER = g;document.querySelectorAll('[data-gender]').forEach(b => b.classList.toggle('on', b.dataset.gender === g));}
function setCalendar(c) {CALENDAR = c;document.querySelectorAll('[data-cal]').forEach(b => b.classList.toggle('on', b.dataset.cal === c));}
function setPartnerCalendar(c) {PARTNER_CALENDAR = c;document.querySelectorAll('[data-pcal]').forEach(b => b.classList.toggle('on', b.dataset.pcal === c));}
function updateTimeSettings() {TIME_CORRECTION_SETTINGS.useSummerTime = document.getElementById('opt-summertime')?.checked ?? true;TIME_CORRECTION_SETTINGS.useLongitude = document.getElementById('opt-longitude')?.checked ?? true;TIME_CORRECTION_SETTINGS.useYajasi = document.getElementById('opt-yajasi')?.checked ?? false;updateLngLabel();}
function changeCity(city) {SELECTED_CITY = city;updateLngLabel();}
function updateLngLabel() {const corr = getLongitudeCorrection();const sign = corr >= 0 ? '+' : '';const lbl = document.getElementById('lng-label');if (lbl) lbl.textContent = 'çµŒåº¦è£œæ­£ (' + SELECTED_CITY + ' ' + sign + corr + 'åˆ†)';}
function switchTab(name) {if(name==='lotto'){const btn=document.getElementById('btn-saju-lotto');const info=document.getElementById('saju-lotto-info');if(btn&&info){if(GODS){btn.disabled=false;btn.style.opacity='1';info.textContent='âœ¨ ç”¨ç¥: '+ELEMENT[GODS.yong].k+' Â· å–œç¥: '+ELEMENT[GODS.hee].k;}else{btn.disabled=true;btn.style.opacity='0.5';info.textContent='ğŸ’¡ ã¾ãšå››æŸ±ã‚¿ãƒ–ã§åˆ†æã—ã¦ãã ã•ã„';}}}document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));document.querySelectorAll('.top-nav button').forEach(b => b.classList.remove('active'));document.querySelectorAll('.tab-footer').forEach(f => f.classList.remove('active'));document.getElementById('tab-' + name)?.classList.add('active');document.getElementById('footer-' + name)?.classList.add('active');if (typeof event !== 'undefined' && event?.currentTarget) event.currentTarget.classList.add('active'); else document.querySelector(`.top-nav button[onclick*="'${name}'"]`)?.classList.add('active');}
function showFortune(type) {document.querySelectorAll('#fortune-tabs .sub-tab').forEach(t => t.classList.remove('on'));event.currentTarget.classList.add('on');renderFortune(type);}
function showDaeunTab(tabName) {document.querySelectorAll('#daeun-tabs .sub-tab').forEach(t => t.classList.remove('on'));event.currentTarget.classList.add('on');document.querySelectorAll('.daeun-panel').forEach(p => p.style.display = 'none');const targetPanel = document.getElementById('daeun-' + tabName);if (targetPanel) {targetPanel.style.display = 'block';}}
function generateLotto() {try {const container = document.getElementById('lotto-balls');if (!container) { toast('ç”»é¢ã‚¨ãƒ©ãƒ¼'); return; }
const btn = event?.currentTarget;if (btn) {btn.disabled = true;btn.textContent = 'ğŸ² æŠ½é¸ä¸­...';}
let counter = 0;const interval = setInterval(() => {const temp = Array.from({length: 7}, () => Math.floor(Math.random() * 37) + 1);container.innerHTML = temp.map(n => createBall(n)).join('');counter++;if (counter > 15) {clearInterval(interval);let nums, attempts = 0;do {const pool = Array.from({length: 37}, (_, i) => i + 1);nums = [];for (let i = 0; i < 7; i++) {const idx = Math.floor(Math.random() * pool.length);nums.push(pool.splice(idx, 1)[0]);}
nums.sort((a, b) => a - b);attempts++;} while (PAST_SET.has(nums.join(',')) && attempts < 1000);currentNumbers = nums;container.innerHTML = nums.map(n => createBall(n)).join('');history.unshift(nums);if (history.length > 5) history.pop();document.getElementById('history-card').style.display = 'block';document.getElementById('history-list').innerHTML = history.map(h =>
`<div class="history-item">${h.map(n => createBall(n, true)).join('')}</div>`
).join('');if (btn) {btn.disabled = false;btn.textContent = 'ğŸ² LOTO 7 ç•ªå·ç”Ÿæˆ';}
if (SAJU) showTodayFortune();}}, 50);} catch (error) {console.error('ãƒ­ãƒˆç”Ÿæˆã‚¨ãƒ©ãƒ¼ï¼š', error);toast('ç•ªå·ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');}}
function generateSajuLotto() {try {if (!GODS) { toast('ã¾ãšå››æŸ±åˆ†æã‚’è¡Œã£ã¦ãã ã•ã„'); return; }
const container = document.getElementById('lotto-balls');if (!container) { toast('ç”»é¢ã‚¨ãƒ©ãƒ¼'); return; }
const yongNums = ELEMENT[GODS.yong]?.nums || [];const heeNums = ELEMENT[GODS.hee]?.nums || [];const giNums = ELEMENT[GODS.gi]?.nums || [];let weightedPool = [];for (let i = 1; i <= 37; i++) {let weight = 1;if (yongNums.includes(i)) weight = 3;else if (heeNums.includes(i)) weight = 2;else if (giNums.includes(i)) weight = 0.5;for (let j = 0; j < weight * 2; j++) weightedPool.push(i);}
const today = new Date();const todayStr = `${today.getFullYear()}-${today.getMonth()+1}-${today.getDate()}`;const seed = `${BIRTH_YEAR}-${BIRTH_MONTH}-${BIRTH_DAY}-${GODS.yong}-${GODS.hee}-${todayStr}`;let hash = 0;for (let i = 0; i < seed.length; i++) {hash = ((hash << 5) - hash) + seed.charCodeAt(i);hash = hash & hash;}
let nums = [], attempts = 0;do {const selected = new Set();let tempHash = hash + attempts;while (selected.size < 7) {tempHash = Math.abs((tempHash * 1103515245 + 12345) & 0x7fffffff);const idx = tempHash % weightedPool.length;selected.add(weightedPool[idx]);}
nums = [...selected].sort((a, b) => a - b);attempts++;} while (PAST_SET.has(nums.join(',')) && attempts < 1000);currentNumbers = nums;container.innerHTML = nums.map(n => createBall(n)).join('');history.unshift(nums);if (history.length > 5) history.pop();document.getElementById('history-card').style.display = 'block';document.getElementById('history-list').innerHTML = history.map(h => `<div class="history-item">${h.map(n => createBall(n, true)).join('')}</div>`).join('');const yongCount = nums.filter(n => yongNums.includes(n)).length;toast(`â˜¯ï¸ LOTO 7 é‹å‘½ç•ªå· (ç”¨ç¥ ${ELEMENT[GODS.yong].k} ${yongCount}å€‹)`);} catch (error) {console.error('å››æŸ± ãƒ­ãƒˆç”Ÿæˆã‚¨ãƒ©ãƒ¼ï¼š', error);toast('ç•ªå·ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');}}
function lunarToSolar(ly, lm, ld, isLeap = false) {if (ly < 1900 || ly > 2049) {console.warn('é™°æš¦å¤‰æ›ï¼šã‚µãƒãƒ¼ãƒˆç¯„å›²å¤–ã®å¹´åº¦', ly);return null;}
const yearIdx = ly - LUNAR_START;if (yearIdx < 0 || yearIdx >= LUNAR_DATA.length) {return null;}
const baseDate = new Date(1900, 0, 31);let totalDays = 0;for (let i = 0; i < yearIdx; i++) {totalDays += getLunarYearDays(LUNAR_START + i);}
const leapMonth = getLeapMonth(ly);for (let i = 1; i < lm; i++) {totalDays += getLunarMonthDays(ly, i);if (leapMonth === i) {totalDays += getLeapMonthDays(ly);}}
if (isLeap && leapMonth === lm) {totalDays += getLunarMonthDays(ly, lm);}
totalDays += ld - 1;const resultDate = new Date(baseDate.getTime() + totalDays * 24 * 60 * 60 * 1000);return {year: resultDate.getFullYear(),
month: resultDate.getMonth() + 1,
day: resultDate.getDate()};}
function getLunarYearDays(year) {const idx = year - LUNAR_START;if (idx < 0 || idx >= LUNAR_DATA.length) return 365;let sum = 0;const data = LUNAR_DATA[idx];for (let i = 1; i <= 12; i++) {sum += getLunarMonthDays(year, i);}
const leapMonth = getLeapMonth(year);if (leapMonth > 0) {sum += getLeapMonthDays(year);}
return sum;}
function getLeapMonth(year) {const idx = year - LUNAR_START;if (idx < 0 || idx >= LUNAR_DATA.length) return 0;return LUNAR_DATA[idx] & 0xf;}
function getLunarMonthDays(year, month) {const idx = year - LUNAR_START;if (idx < 0 || idx >= LUNAR_DATA.length) return 30;const data = LUNAR_DATA[idx];return (data & (0x10000 >> month)) ? 30 : 29;}
function getLeapMonthDays(year) {const idx = year - LUNAR_START;if (idx < 0 || idx >= LUNAR_DATA.length) return 29;const data = LUNAR_DATA[idx];return (data & 0x10000) ? 30 : 29;}
const SUMMER_TIME_PERIODS = [
{start: new Date(1948, 4, 2), end: new Date(1948, 8, 11)},
{start: new Date(1949, 3, 3), end: new Date(1949, 8, 10)},
{start: new Date(1950, 4, 7), end: new Date(1950, 8, 9)},
{start: new Date(1951, 4, 6), end: new Date(1951, 8, 8)}
];function getStandardTimeOffset(year, month, day) {const date = new Date(year, month - 1, day);/* Japan: Always UTC+9, no special offset */
return 0;}
function isInSummerTime(year, month, day, hour, minute) {const date = new Date(year, month - 1, day, hour || 12, minute || 0);for (const period of SUMMER_TIME_PERIODS) {if (date >= period.start && date <= period.end) {return true;}}
return false;}
const JP_CITIES = {
'æ±äº¬': 139.69, 'å¤§é˜ª': 135.50, 'åå¤å±‹': 136.91,
'æœ­å¹Œ': 141.35, 'ç¦å²¡': 130.42, 'é‚£è¦‡': 127.68,
'ä»™å°': 140.87, 'äº¬éƒ½': 135.77, 'ç¥æˆ¸': 135.19,
'æ¨ªæµœ': 139.64, 'åºƒå³¶': 132.46, 'æ–°æ½Ÿ': 139.02,
'é™å²¡': 138.38, 'é‡‘æ²¢': 136.63, 'é•·å´': 129.87,
'é¹¿å…å³¶': 130.56, 'é«˜æ¾': 134.04, 'æ¾å±±': 132.77,
'ç››å²¡': 141.15, 'ç§‹ç”°': 140.10
};
let SELECTED_CITY = 'æ±äº¬';
function getLongitudeCorrection() {
const lng = JP_CITIES[SELECTED_CITY] || 139.69;
return Math.round((lng - 135) * 4);
}
function getLngCorrStr(city) {const lng=JP_CITIES[city]||139.69;const corr=Math.round((lng-135)*4);const sign=corr>=0?'+':'';return sign+corr+'åˆ†';}
const LONGITUDE_CORRECTION = getLongitudeCorrection();let TIME_CORRECTION_SETTINGS = {useSummerTime: true,
useLongitude: true,
useYajasi: false};function correctTimeToSolarTime(year, month, day, hour, minute) {let totalMinutes = hour * 60 + (minute || 0);let correctedYear = year;let correctedMonth = month;let correctedDay = day;if (TIME_CORRECTION_SETTINGS.useSummerTime && isInSummerTime(year, month, day, hour, minute)) {totalMinutes -= 60;}
totalMinutes += getStandardTimeOffset(year, month, day);if (TIME_CORRECTION_SETTINGS.useLongitude) {totalMinutes -= getLongitudeCorrection();}
if (totalMinutes < 0) {totalMinutes += 24 * 60;correctedDay--;if (correctedDay < 1) {correctedMonth--;if (correctedMonth < 1) {correctedMonth = 12;correctedYear--;}
correctedDay = new Date(correctedYear, correctedMonth, 0).getDate();}} else if (totalMinutes >= 24 * 60) {totalMinutes -= 24 * 60;correctedDay++;const lastDay = new Date(correctedYear, correctedMonth, 0).getDate();if (correctedDay > lastDay) {correctedDay = 1;correctedMonth++;if (correctedMonth > 12) {correctedMonth = 1;correctedYear++;}}}
const correctedHour = Math.floor(totalMinutes / 60);const correctedMinute = totalMinutes % 60;return {year: correctedYear,
month: correctedMonth,
day: correctedDay,
hour: correctedHour,
minute: correctedMinute,
summerTimeCorrected: TIME_CORRECTION_SETTINGS.useSummerTime && isInSummerTime(year, month, day, hour, minute),
longitudeCorrected: TIME_CORRECTION_SETTINGS.useLongitude};}
function hourToSiji(hour, minute) {const totalMinutes = hour * 60 + (minute || 0);if (totalMinutes >= 23 * 60 + 30) return 0;if (totalMinutes < 1 * 60 + 30) return 0;return Math.floor((totalMinutes - 90) / 120) + 1;}
function adjustTime(y, m, d, h) {if (h < 0) return { y, m, d, h, hour: 12, minute: 0 };const sijiToHourMinute = [
[0, 30], [2, 30], [4, 30], [6, 30], [8, 30], [10, 30],
[12, 30], [14, 30], [16, 30], [18, 30], [20, 30], [22, 30]
];const [baseHour, baseMinute] = sijiToHourMinute[h];const corrected = correctTimeToSolarTime(y, m, d, baseHour, baseMinute);const newSiji = hourToSiji(corrected.hour, corrected.minute);if (newSiji === 0 && !TIME_CORRECTION_SETTINGS.useYajasi) {if (corrected.hour >= 23 && corrected.minute >= 30) {let nextDay = corrected.day + 1;let nextMonth = corrected.month;let nextYear = corrected.year;const lastDay = new Date(nextYear, nextMonth, 0).getDate();if (nextDay > lastDay) {nextDay = 1;nextMonth++;if (nextMonth > 12) {nextMonth = 1;nextYear++;}}
return { y: nextYear, m: nextMonth, d: nextDay, h: newSiji };}}
return {y: corrected.year,
m: corrected.month,
d: corrected.day,
h: newSiji,
hour: corrected.hour,
minute: corrected.minute};}
function getSolarTermTime(year, termIndex) {let termData = SOLAR_TERMS[year];if (!termData) {const years = Object.keys(SOLAR_TERMS).map(Number).sort((a, b) => a - b);let closest = years[0];for (const y of years) {if (y <= year) closest = y;else break;}
termData = SOLAR_TERMS[closest];}
if (!termData || termIndex < 0 || termIndex >= termData.length) {const defaultDays = [4, 6, 5, 6, 6, 7, 8, 8, 8, 8, 7];return { m: termIndex + 2, d: defaultDays[termIndex] || 5, h: 0, n: 0 };}
const term = termData[termIndex];if (Array.isArray(term)) {return { m: term[0], d: term[1], h: term[2], n: term[3] };}
return term;}
function isBeforeSolarTerm(year, month, day, hour, minute, termIndex) {const term = getSolarTermTime(year, termIndex);const currentTime = new Date(year, month - 1, day, hour || 0, minute || 0);const termTime = new Date(year, term.m - 1, term.d, term.h, term.n);return currentTime < termTime;}
function calcYearPillar(y, m, d, h, n) {let adjY = y;if (isBeforeSolarTerm(y, m, d, h || 0, n || 0, 0)) {adjY--;}
const si = (adjY - 4) % 10;const bi = (adjY - 4) % 12;return { s: STEM[si < 0 ? si + 10 : si], b: BRANCH[bi < 0 ? bi + 12 : bi] };}
function calcMonthPillar(y, m, d, h, n) {let solarMonth;let beforeTerm;if (m === 1) {const term = getSolarTermTime(y - 1, 11);const termTime = new Date(y, term.m - 1, term.d, term.h, term.n);const currentTime = new Date(y, m - 1, d, h || 0, n || 0);beforeTerm = currentTime < termTime;} else {const termIndex = m - 2;beforeTerm = isBeforeSolarTerm(y, m, d, h || 0, n || 0, termIndex);}
if (m === 1) {if (beforeTerm) {solarMonth = 11;} else {solarMonth = 12;}} else if (m === 2) {if (beforeTerm) {solarMonth = 12;} else {solarMonth = 1;}} else {if (beforeTerm) {solarMonth = m - 2;} else {solarMonth = m - 1;}}
const isBeforeLichun = isBeforeSolarTerm(y, m, d, h || 0, n || 0, 0);const yearForStem = isBeforeLichun ? y - 1 : y;const yearIdx = ((yearForStem - 4) % 60 + 60) % 60;const ysi = yearIdx % 10;const monthBranchIndex = (solarMonth + 1) % 12;const inMonthStem = ((ysi % 5) * 2 + 2) % 10;const msi = (inMonthStem + solarMonth - 1) % 10;return { s: STEM[msi], b: BRANCH[monthBranchIndex], solarMonth: solarMonth };}
function calcDayPillar(y, m, d) {if (!y || !m || !d || isNaN(y) || isNaN(m) || isNaN(d)) {console.error('calcDayPillar: Invalid input', {y, m, d});return { s: STEM[0], b: BRANCH[0] };}const a = Math.floor((14 - m) / 12);const adjY = y + 4800 - a;const adjM = m + 12 * a - 3;const jdn = d + Math.floor((153 * adjM + 2) / 5) + 365 * adjY + Math.floor(adjY / 4) - Math.floor(adjY / 100) + Math.floor(adjY / 400) - 32045;const baseJdn = 2445731;const idx60 = ((jdn - baseJdn) % 60 + 60) % 60;return { s: STEM[idx60 % 10], b: BRANCH[idx60 % 12] };}
function calcHourPillar(dayStem, h) {if (h < 0 || h > 11) return null;const hbi = h;const dsi = STEM.indexOf(dayStem);const ziHourStem = ((dsi % 5) * 2) % 10;const hsi = (ziHourStem + hbi) % 10;return { s: STEM[hsi], b: BRANCH[hbi] };}
function analyzeJijanggan(saju) {const dm = saju.day.s;const dmi = STEM.indexOf(dm);const result = { pillars: [], summary: { elements: {wood:0,fire:0,earth:0,metal:0,water:0}, gods: {}, tougans: [] } };const pillarNames = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ™‚æ”¯'];const branches = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b];const stems = [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s];branches.forEach((branch, pIdx) => {if (!branch) return;const bi = BRANCH.indexOf(branch);const jj = JIJANGGAN[bi];const pillarInfo = {name: pillarNames[pIdx],
branch: branch,
hidden: []};jj.forEach((h, hIdx) => {const hiddenStem = STEM[h.stem];const god = getTenGod(hiddenStem, dm);const isJunggi = hIdx === jj.length - 1;const tougan = stems.some((s, si) => s && STEM.indexOf(s) === h.stem);const tonggeun = stems.some((s, si) => {if (!s) return false;return STEM.indexOf(s) === h.stem;});const hiddenInfo = {stem: hiddenStem,
type: isJunggi ? 'æ­£æ°—' : (hIdx === 0 ? 'ä½™æ°—' : 'ä¸­æ°—'),
days: h.days,
god: god,
tougan: tougan,
tonggeun: tonggeun,
strength: isJunggi ? 1.0 : (hIdx === 0 ? 0.3 : 0.5)};pillarInfo.hidden.push(hiddenInfo);result.summary.elements[hiddenStem.e] += hiddenInfo.strength;if (!result.summary.gods[god.c]) result.summary.gods[god.c] = 0;result.summary.gods[god.c] += hiddenInfo.strength;if (tougan && !result.summary.tougans.find(t => t.stem === h.stem)) {result.summary.tougans.push({stem: h.stem,
name: hiddenStem.c + hiddenStem.k,
from: pillarNames[pIdx],
god: god.c});}});result.pillars.push(pillarInfo);});return result;}
function analyzeTonggeunTougan(saju) {const result = { tonggeun: [], tougan: [] };const dm = saju.day.s;const pillarNames = ['å¹´æŸ±', 'æœˆæŸ±', 'æ—¥æŸ±', 'æ™‚æŸ±'];const branches = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b];const stems = [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s];stems.forEach((stem, sIdx) => {if (!stem) return;const si = STEM.indexOf(stem);const roots = [];branches.forEach((branch, bIdx) => {if (!branch) return;const bi = BRANCH.indexOf(branch);const jj = JIJANGGAN[bi];jj.forEach((h, hIdx) => {if (h.stem === si) {const isJunggi = hIdx === jj.length - 1;roots.push({pillar: pillarNames[bIdx].slice(0, 1) + 'æ”¯',
branch: branch.c,
type: isJunggi ? 'æ­£æ°—' : (hIdx === 0 ? 'ä½™æ°—' : 'ä¸­æ°—'),
strength: isJunggi ? 'å¼·' : (hIdx === 0 ? 'å¼±' : 'ä¸­')});}});});if (roots.length > 0) {result.tonggeun.push({pillar: pillarNames[sIdx],
stem: stem.c + stem.k,
god: sIdx === 2 ? 'æ—¥å¹²' : getTenGod(stem, dm).k,
roots: roots});}});branches.forEach((branch, bIdx) => {if (!branch) return;const bi = BRANCH.indexOf(branch);const jj = JIJANGGAN[bi];jj.forEach(h => {stems.forEach((stem, sIdx) => {if (!stem) return;if (STEM.indexOf(stem) === h.stem) {const existing = result.tougan.find(t => t.stem === stem.c + stem.k);if (!existing) {result.tougan.push({stem: stem.c + stem.k,
pillar: pillarNames[sIdx],
from: pillarNames[bIdx].slice(0, 1) + 'æ”¯',
god: sIdx === 2 ? 'æ—¥å¹²' : getTenGod(stem, dm).k});}}});});});return result;}
function getTenGod(stem, dayStem) {const dEl = EL_ORDER.indexOf(dayStem.e);const sEl = EL_ORDER.indexOf(stem.e);const diff = (sEl - dEl + 5) % 5;const samePol = (dayStem.y === stem.y);const godKeys = ['peer','robWealth','eatingGod','hurtOfficer','indirectWealth','directWealth','indirectOfficer','directOfficer','indirectSeal','directSeal'];const godMap = { 0: samePol ? 0 : 1, 1: samePol ? 2 : 3, 2: samePol ? 4 : 5, 3: samePol ? 6 : 7, 4: samePol ? 8 : 9 };return TEN_GODS[godKeys[godMap[diff]]];}
function getTwelveState(dayStem, branch) {const starts = [11, 6, 2, 9, 2, 9, 5, 0, 8, 3];const dsi = STEM.indexOf(dayStem);const bi = BRANCH.indexOf(branch);const start = starts[dsi];const isYang = dayStem.y;const stateIdx = isYang ?
(bi - start + 12) % 12 :
(start - bi + 12) % 12;return TWELVE_STATES[stateIdx];}
function calcNapeum(stem, branch) {const si = STEM.indexOf(stem);const bi = BRANCH.indexOf(branch);let idx60 = -1;for (let i = 0; i < 60; i++) {if (i % 10 === si && i % 12 === bi) {idx60 = i;break;}}
if (idx60 === -1) idx60 = 0;const idx = Math.floor(idx60 / 2);const napeum = SOUND_ELEMENT[idx];return {name: napeum.name,
element: napeum.element,
elementK: ELEMENT[napeum.element].k,
desc: napeum.desc};}
function calcMyunggung(monthBranch, hourBranch) {const mbi = BRANCH.indexOf(monthBranch);const hbi = BRANCH.indexOf(hourBranch);const mgIdx = (14 - mbi - hbi + 24) % 12;const mgBranch = BRANCH[mgIdx];const mgDesc = {0: {name: 'å­å®®(ã—ãã‚…ã†)', trait: 'çŸ¥æµæ·±ãæ²ˆç€ã€‚ç§˜å¯†ãŒå¤šãå¤œã«æ´»å‹•çš„ã€‚', career: 'ç ”ç©¶ã€å“²å­¦ã€å¤œé–“æ¥­ç¨®'},
1: {name: 'ä¸‘å®®(ã¡ã‚…ã†ãã‚…ã†)', trait: 'èª å®Ÿã§ç²˜ã‚Šå¼·ã„ã€‚è²¡ç‰©ã‚’é›†ã‚ã‚‹æ‰è¦šã€‚', career: 'é‡‘èã€ä¸å‹•ç”£ã€è¾²æ¥­'},
2: {name: 'å¯…å®®(ã„ã‚“ãã‚…ã†)', trait: 'é‡å¿ƒçš„ã§å‹‡æ•¢ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒå¼·ã„ã€‚', career: 'è»äººã€æ”¿æ²»ã€ ã‚¹ãƒãƒ¼ãƒ„'},
3: {name: 'å¯å®®(ã¼ã†ãã‚…ã†)', trait: 'æ¸©å’Œã§èŠ¸è¡“çš„ã€‚äººæ°—ãŒå¤šã„ã€‚', career: 'èŠ¸è¡“ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã€ã‚µãƒ¼ãƒ“ã‚¹'},
4: {name: 'è¾°å®®(ã—ã‚“ãã‚…ã†)', trait: 'å¤‰åŒ–ç„¡åŒã§ç¥ç§˜çš„ã€‚å¤§ããªå¤¢ã‚’æŒã¤ã€‚', career: 'å®—æ•™ã€å“²å­¦ã€å‰µæ¥­'},
5: {name: 'å·³å®®(ã—ãã‚…ã†)', trait: 'çŸ¥æµæ·±ãæ…é‡ã€‚ç§˜å¯†ã‚’ã‚ˆãå®ˆã‚‹ã€‚', career: 'æ³•å¾‹ã€åŒ»ç™‚ã€ç›¸è«‡'},
6: {name: 'åˆå®®(ã”ãã‚…ã†)', trait: 'æƒ…ç†±çš„ã§ç©æ¥µçš„ã€‚åèª‰ã‚’é‡è¦–ã€‚', career: 'æ”¿æ²», èŠ¸èƒ½, æ•™è‚²'},
7: {name: 'æœªå®®(ã³ãã‚…ã†)', trait: 'æŸ”ã‚‰ã‹ãèŠ¸è¡“çš„ã€‚å¥‰ä»•ç²¾ç¥ãŒå¼·ã„ã€‚', career: 'èŠ¸è¡“ã€å®—æ•™ã€åŒ»ç™‚'},
8: {name: 'ç”³å®®(ã—ã‚“ãã‚…ã†)', trait: 'è¡æ˜ã§æ©ŸçŸ¥ã«å¯Œã‚€ã€‚è©±è¡“ãŒè‰¯ã„ã€‚', career: 'å–¶æ¥­, å¤–äº¤, IT'},
9: {name: 'é…‰å®®(ã‚†ã†ãã‚…ã†)', trait: 'ç¹Šç´°ã§å®Œç’§ä¸»ç¾©ã€‚ç¾çš„æ„Ÿè¦šã«å„ªã‚Œã‚‹ã€‚', career: 'é‡‘èã€å®çŸ³ã€ç¾å®¹'},
10: {name: 'æˆŒå®®(ã˜ã‚…ã¤ãã‚…ã†)', trait: 'ç¾©ç†å …ãå¿ å®Ÿã€‚è²¬ä»»æ„ŸãŒå¼·ã„ã€‚', career: 'è»äººã€è­¦å¯Ÿã€ä¿å®‰'},
11: {name: 'äº¥å®®(ãŒã„ãã‚…ã†)', trait: 'æ¥½å¤©çš„ã§å¯¾äººé–¢ä¿‚ãŒè‰¯ã„ã€‚ç¦ãŒå¤šã„ã€‚', career: 'è²¿æ˜“ã€æ—…è¡Œã€æµé€š'}};return {branch: mgBranch,
index: mgIdx,
...mgDesc[mgIdx]};}
function calcTaewon(yearStem, monthStem, monthBranch) {const msi = STEM.indexOf(monthStem);const mbi = BRANCH.indexOf(monthBranch);const tStem = STEM[(msi + 1) % 10];const tBranch = BRANCH[(mbi + 3) % 12];const napeum = calcNapeum(tStem, tBranch);return {stem: tStem,
branch: tBranch,
pillar: tStem.c + tBranch.c,
napeum: napeum,
desc: `å—èƒæ™‚ç‚¹ã®æ°—. ${napeum.name}(${napeum.elementK})ã®æ°—ã§ç”Ÿã¾ã‚ŒãŸã€‚`};}
function analyzeDirectionalHarmony(saju) {const branches = [];if (saju.year) branches.push(BRANCH.indexOf(saju.year.b));if (saju.month) branches.push(BRANCH.indexOf(saju.month.b));if (saju.day) branches.push(BRANCH.indexOf(saju.day.b));if (saju.hour) branches.push(BRANCH.indexOf(saju.hour.b));const results = [];for (const bh of DIRECTIONAL_HARMONY) {const has = bh.branches.map(b => branches.includes(b));const count = has.filter(x => x).length;if (count === 3) {results.push({type: 'complete',
name: bh.name,
dir: bh.dir,
element: bh.element,
elementK: ELEMENT[bh.element].k,
branches: bh.branches.map(b => BRANCH[b].c).join(''),
power: 'å¼·åŠ›',
desc: `${bh.dir} å®Œæˆï¼ ${ELEMENT[bh.element].k} æ°—ãŒéå¸¸ã«å¼·ã¾ã‚Šã¾ã™ã€‚`});} else if (count === 2) {const missing = bh.branches.find((b, i) => !has[i]);results.push({type: 'partial',
name: bh.name + ' æœªå®Œ',
dir: bh.dir,
element: bh.element,
elementK: ELEMENT[bh.element].k,
branches: bh.branches.filter((b, i) => has[i]).map(b => BRANCH[b].c).join(''),
missing: BRANCH[missing].c,
power: 'ä¸­è‚è‡“',
desc: `${BRANCH[missing].c}ãŒæ¥ã‚‹ã¨ ${bh.dir}ãŒ å®Œæˆãªã‚Šã¾ã™.`});}}
return results;}
function analyzeHiddenHarmony(saju) {const branches = [];const pillars = ['å¹´æ”¯', 'æœˆæ”¯', 'æ—¥æ”¯', 'æ™‚æ”¯'];if (saju.year) branches.push({idx: BRANCH.indexOf(saju.year.b), name: 'å¹´æ”¯', c: saju.year.b.c});if (saju.month) branches.push({idx: BRANCH.indexOf(saju.month.b), name: 'æœˆæ”¯', c: saju.month.b.c});if (saju.day) branches.push({idx: BRANCH.indexOf(saju.day.b), name: 'æ—¥æ”¯', c: saju.day.b.c});if (saju.hour) branches.push({idx: BRANCH.indexOf(saju.hour.b), name: 'æ™‚æ”¯', c: saju.hour.b.c});const results = [];for (let i = 0; i < branches.length; i++) {for (let j = i + 1; j < branches.length; j++) {for (const ah of HIDDEN_HARMONY) {if ((branches[i].idx === ah.a && branches[j].idx === ah.b) ||
(branches[i].idx === ah.b && branches[j].idx === ah.a)) {results.push({name: ah.name,
positions: `${branches[i].name}(${branches[i].c})â†”${branches[j].name}(${branches[j].c})`,
desc: ah.desc,
meaning: 'è¡¨ã«ã¯ç¾ã‚Œãªã„ãŒå†…å´ã§é€šã˜ã‚‹é–¢ä¿‚ã€‚éš ã•ã‚ŒãŸç¸ã€ç§˜å¯†çš„ãªé–¢ä¿‚ã‚’æ„å‘³ã™ã‚‹ã€‚'});}}}}
return results;}
function analyzeGongmangHaeso(saju, gongmang) {if (!gongmang || !gongmang.affected || gongmang.affected.length === 0) {return { hasGongmang: false, results: [] };}
const branches = [];if (saju.year) branches.push(BRANCH.indexOf(saju.year.b));if (saju.month) branches.push(BRANCH.indexOf(saju.month.b));if (saju.day) branches.push(BRANCH.indexOf(saju.day.b));if (saju.hour) branches.push(BRANCH.indexOf(saju.hour.b));const results = [];for (const affected of gongmang.affected) {const gmBranchIdx = BRANCH.findIndex(b => affected.includes(b.k) || affected.includes(b.c));if (gmBranchIdx === -1) continue;let resolved = false;let resolveMethod = '';const chungPair = (gmBranchIdx + 6) % 12;if (branches.includes(chungPair)) {resolved = true;resolveMethod = `${BRANCH[chungPair].c}(æ²–)ã§ç©ºäº¡è§£æ¶ˆ`;}
const samhapSets = [[0,4,8], [1,5,9], [2,6,10], [3,7,11]];for (const set of samhapSets) {if (set.includes(gmBranchIdx)) {const others = set.filter(s => s !== gmBranchIdx);if (others.every(o => branches.includes(o))) {resolved = true;resolveMethod = `ä¸‰åˆ(${set.map(s => BRANCH[s].c).join('')})ã§ ç©ºäº¡è§£æ¶ˆ`;}}}
results.push({position: affected,
branch: BRANCH[gmBranchIdx].c,
resolved: resolved,
method: resolveMethod,
effect: resolved ?
'ç©ºäº¡ãŒ è§£æ¶ˆã•ã‚Œã¦è©²å½“ã®æ°—ãŒæœ¬æ¥ã®å½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚' :
'ç©ºäº¡ãŒ è§£æ¶ˆã•ã‚Œãšè©²å½“ã®æ°—ãŒå¼±ã¾ã‚Šã¾ã™ã€‚æ­³é‹ã‚„å¤§é‹ã§è§£æ¶ˆã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚'});}
return { hasGongmang: true, results };}
function analyzeSinsalPosition(saju) {const results = [];const positions = [
{name: 'å¹´æ”¯', b: saju.year?.b, meaning: 'å…ˆç¥–ã€ç¤¾ä¼š', age: 'å¹¼å¹´æœŸï¼ˆ0-15æ­³ï¼‰'},
{name: 'æœˆæ”¯', b: saju.month?.b, meaning: 'çˆ¶æ¯ã€å…„å¼Ÿ', age: 'é’å¹´æœŸï¼ˆ15-30æ­³ï¼‰'},
{name: 'æ—¥æ”¯', b: saju.day?.b, meaning: 'é…å¶è€…ã€æœ¬äºº', age: 'ä¸­å¹´æœŸï¼ˆ30-45æ­³ï¼‰'},
{name: 'æ™‚æ”¯', b: saju.hour?.b, meaning: 'å­å¥³, æ™©å¹´', age: 'æ™©å¹´æœŸï¼ˆ45æ­³ä»¥é™ï¼‰'}
];const ybi = BRANCH.indexOf(saju.year?.b);const taohua = {0:9,1:6,2:3,3:0,4:9,5:6,6:3,7:0,8:9,9:6,10:3,11:0};for (const pos of positions) {if (!pos.b) continue;const bi = BRANCH.indexOf(pos.b);if (bi === taohua[ybi]) {results.push({sinsal: 'æ¡ƒèŠ±æ®º',
position: pos.name,
interpretation: pos.name === 'å¹´æ”¯' ? 'å¹¼ã„é ƒã‹ã‚‰äººæ°—ãŒå¤šã„ã€‚æ—©ã„æ‹æ„›ã®å¯èƒ½æ€§ã€‚' :
pos.name === 'æœˆæ”¯' ? 'å­¦ç”Ÿæ™‚ä»£ã«äººæ°—ãŒå¤šã„ã€‚èŠ¸èƒ½äººæ°—è³ªã€‚' :
pos.name === 'æ—¥æ”¯' ? 'é…å¶è€…ãŒé­…åŠ›çš„ã€‚æœ¬äººã‚‚é­…åŠ›ãŒæº¢ã‚Œã‚‹ã€‚' :
'å­å¥³ãŒç¾ã—ã„ã‹äººæ°—ãŒå¤šã„ã€‚æ™©å¹´ã«ã‚‚äººæ°—ã€‚',
advice: pos.name === 'æ—¥æ”¯' ? 'é…å¶è€…ã¨ã® é–¢ä¿‚ã§ æµ®æ°— æ³¨æ„' : 'é­…åŠ›ã‚’é•·æ‰€ã¨ã—ã¦æ´»ç”¨ã—ã¦ãã ã•ã„'});}}
const yima = {0:2,1:11,2:8,3:5,4:2,5:11,6:8,7:5,8:2,9:11,10:8,11:5};for (const pos of positions) {if (!pos.b) continue;const bi = BRANCH.indexOf(pos.b);if (bi === yima[ybi]) {results.push({sinsal: 'é§…é¦¬æ®º',
position: pos.name,
interpretation: pos.name === 'å¹´æ”¯' ? 'å…ˆç¥–ãŒå¼•è¶Šã—ãŒå¤šã‹ã£ãŸã‹ä»–éƒ·æš®ã‚‰ã—ã€‚' :
pos.name === 'æœˆæ”¯' ? 'å¹¼ã„æ™‚æœŸã«å¼•è¶Šã—ãŒå¤šã„ã€‚æµ·å¤–ç•™å­¦ã®å¯èƒ½æ€§ã€‚' :
pos.name === 'æ—¥æ”¯' ? 'è·æ¥­ä¸Šå‡ºå¼µ/ç§»å‹•ãŒå¤šã„ã€‚é…å¶è€…ãŒå¿™ã—ã„äººã€‚' :
'æ™©å¹´ã«ã‚‚æ´»å‹•çš„ã€‚å­å¥³ãŒé ãã«è¡Œãã€‚',
advice: 'ã˜ã£ã¨ã—ã¦ã„ã¦ã¯ãƒ€ãƒ¡ã€‚æ´»ç™ºã«å‹•ã„ã¦ãã ã•ã„ï¼'});}}
const huagai = {0:4,1:1,2:10,3:7,4:4,5:1,6:10,7:7,8:4,9:1,10:10,11:7};for (const pos of positions) {if (!pos.b) continue;const bi = BRANCH.indexOf(pos.b);if (bi === huagai[ybi]) {results.push({sinsal: 'è¯è“‹æ®º',
position: pos.name,
interpretation: pos.name === 'å¹´æ”¯' ? 'å…ˆç¥–ã®ä¸­ã«èŠ¸è¡“å®¶ã‚„å®—æ•™äººãŒã„ã¾ã™ã€‚' :
pos.name === 'æœˆæ”¯' ? 'å­¦ç”Ÿæ™‚ä»£ã«å­¤ç‹¬ã€‚èŠ¸è¡“/å“²å­¦ã«é–¢å¿ƒã€‚' :
pos.name === 'æ—¥æ”¯' ? 'é…å¶è€…ãŒèŠ¸è¡“çš„ã¾ãŸã¯å®—æ•™çš„ã€‚ç²¾ç¥ä¸–ç•Œã‚’é‡è¦–ã€‚' :
'æ™©å¹´ã«å®—æ•™/å“²å­¦ã«æ²¡é ­ã€‚å­¤ç‹¬ã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€‚',
advice: 'èŠ¸è¡“ã€å®—æ•™ã€å­¦å•ãªã©ç²¾ç¥çš„æ´»å‹•ã§æ…°å®‰ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„'});}}
return results;}
function analyzeGyoungi(luck, birthYear, currentYear) {const age = currentYear - birthYear + 1;const results = [];for (let i = 0; i < luck.length - 1; i++) {const curr = luck[i];const next = luck[i + 1];const transitionAge = next.startAge;const transitionYear = birthYear + transitionAge - 1;if (Math.abs(age - transitionAge) <= 2) {const stemChange = `${curr.s.c}â†’${next.s.c}`;const branchChange = `${curr.b.c}â†’${next.b.c}`;const fromEl = ELEMENT[curr.s.e].k + ELEMENT[curr.b.e].k;const toEl = ELEMENT[next.s.e].k + ELEMENT[next.b.e].k;let intensity = 'normal';let warning = '';const elIdx1 = EL_ORDER.indexOf(curr.s.e);const elIdx2 = EL_ORDER.indexOf(next.s.e);if (Math.abs(elIdx1 - elIdx2) === 2 || Math.abs(elIdx1 - elIdx2) === 3) {intensity = 'strong';warning = 'äº”è¡ŒãŒå¤§ããå¤‰ã‚ã‚‹æ™‚æœŸã€‚ç”Ÿæ´»å…¨èˆ¬ã«å¤‰åŒ–ãŒè¨ªã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚';}
if (curr.rating !== next.rating) {intensity = 'strong';if (curr.rating === 'good' && next.rating === 'bad') {warning += ' è‰¯ã„é‹ã‹ã‚‰å›°é›£ãªé‹ã«å¤‰ã‚ã‚Šã¾ã™ã€‚äº‹å‰ã«å‚™ãˆã¦ãã ã•ã„ã€‚';} else if (curr.rating === 'bad' && next.rating === 'good') {warning += ' å›°é›£ãªé‹ãŒçµ‚ã‚ã‚Šè‰¯ã„é‹ãŒæ¥ã¾ã™ã€‚å¸Œæœ›ã‚’æŒã£ã¦ãã ã•ã„ï¼';}}
results.push({transitionAge: transitionAge,
transitionYear: transitionYear,
from: `${curr.s.c}${curr.b.c} (${fromEl})`,
to: `${next.s.c}${next.b.c} (${toEl})`,
stemChange: stemChange,
branchChange: branchChange,
intensity: intensity,
warning: warning || 'å¤§é‹ãŒ è‡ªç„¶ã« è»¢æ›ãªã‚Šã¾ã™.',
advice: intensity === 'strong' ?
'ã“ã®æ™‚æœŸã¯äººç”Ÿã®é‡è¦ãªè»¢æ›ç‚¹ã§ã™ã€‚ å¤§ããªæ±ºå®šã¯æ…é‡ã«ï¼' :
'å¤‰åŒ–ã«è‡ªç„¶ã«é©å¿œã™ã‚Œã°è‰¯ããªã‚Šã¾ã™ã€‚',
isCurrent: Math.abs(age - transitionAge) <= 1});}}
return results;}
function calcStrength(saju) {const dm = saju.day.s;const dme = dm.e;const mbi = BRANCH.findIndex(b => b.c === saju.month.b.c);const season = SEASON[mbi];let score = 0;const factors = [];const peerEl = dme;const sealEl = EL_ORDER[(EL_ORDER.indexOf(dme) + 4) % 5];const exprEl = EL_ORDER[(EL_ORDER.indexOf(dme) + 1) % 5];const wealthEl = EL_ORDER[(EL_ORDER.indexOf(dme) + 2) % 5];const officerEl = EL_ORDER[(EL_ORDER.indexOf(dme) + 3) % 5];const myEls = [peerEl, sealEl];const JIJANGGAN_W = {0: [{s:8, w:0.33}, {s:9, w:0.67}],
1: [{s:9, w:0.3}, {s:7, w:0.1}, {s:5, w:0.6}],
2: [{s:4, w:0.23}, {s:2, w:0.23}, {s:0, w:0.54}],
3: [{s:0, w:0.33}, {s:1, w:0.67}],
4: [{s:1, w:0.3}, {s:9, w:0.1}, {s:4, w:0.6}],
5: [{s:4, w:0.23}, {s:6, w:0.23}, {s:2, w:0.54}],
6: [{s:2, w:0.3}, {s:5, w:0.33}, {s:3, w:0.37}],
7: [{s:3, w:0.3}, {s:1, w:0.1}, {s:5, w:0.6}],
8: [{s:4, w:0.23}, {s:8, w:0.23}, {s:6, w:0.54}],
9: [{s:6, w:0.33}, {s:7, w:0.67}],
10:[{s:7, w:0.3}, {s:3, w:0.1}, {s:4, w:0.6}],
11:[{s:4, w:0.23}, {s:0, w:0.23}, {s:8, w:0.54}]};const allStems = [saju.year.s, saju.month.s, saju.hour?.s].filter(s => s);const allBranches = [saju.year.b, saju.month.b, saju.day.b, saju.hour?.b].filter(b => b);const branchIndices = allBranches.map(b => BRANCH.findIndex(br => br.c === b.c));const STEM_COMBINE = [[0,5],[1,6],[2,7],[3,8],[4,9]];let disabledSeals = [];let disabledPeers = [];const adjacentPairs = [
{ pos1: 'year', pos2: 'month', s1: saju.year.s, s2: saju.month.s },
{ pos1: 'month', pos2: 'day', s1: saju.month.s, s2: saju.day.s },
{ pos1: 'day', pos2: 'hour', s1: saju.day.s, s2: saju.hour?.s }
];adjacentPairs.forEach(pair => {if (!pair.s1 || !pair.s2) return;const idx1 = STEM.findIndex(s => s.c === pair.s1.c);const idx2 = STEM.findIndex(s => s.c === pair.s2.c);const isCombine = STEM_COMBINE.some(([a, b]) =>
(idx1 === a && idx2 === b) || (idx1 === b && idx2 === a)
);if (isCombine) {if (pair.pos1 !== 'day') {if (pair.s1.e === sealEl) disabledSeals.push(idx1);if (pair.s1.e === peerEl) disabledPeers.push(idx1);}
if (pair.pos2 !== 'day') {if (pair.s2.e === sealEl) disabledSeals.push(idx2);if (pair.s2.e === peerEl) disabledPeers.push(idx2);}
factors.push({ l: 'ğŸ”— å¤©å¹²åˆ', v: `${pair.s1.c}${pair.s2.c}åˆ (${pair.pos1}-${pair.pos2}) â†’ ç„¡åŠ›åŒ–`, p: false });}});const monthScore = {2: {wood:3, fire:1, earth:-2, metal:-2, water:-1},
3: {wood:3, fire:2, earth:-2, metal:-2, water:-1},
4: {earth:2, wood:0, fire:-1, metal:-1, water:-1},
5: {fire:3, earth:1, metal:-2, water:-2, wood:0},
6: {fire:3, earth:2, metal:-2, water:-2, wood:0},
7: {earth:2, fire:1, wood:-1, metal:-1, water:-2},
8: {metal:3, water:1, wood:-2, fire:-2, earth:0},
9: {metal:3, water:2, wood:-2, fire:-2, earth:0},
10: {earth:2, metal:1, fire:-1, wood:-2, water:-1},
11: {water:3, wood:1, fire:-2, earth:-2, metal:0},
0: {water:3, wood:2, fire:-2, earth:-2, metal:0},
1: {earth:2, water:0, metal:-1, wood:-1, fire:-2}};const ms = monthScore[mbi][dme];const deukRyung = ms >= 2;score += ms * 6;const monthNames = ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'];factors.push({ l: 'æœˆä»¤å¾—ä»¤', v: `${monthNames[mbi]}æœˆ ${deukRyung ? 'âœ“å½“ä»¤' : 'âœ—å¤±ä»¤'} (${ms >= 0 ? '+' : ''}${ms*6})`, p: deukRyung });let realRootScore = 0;let hasRealRoot = { day: false, hour: false };const TWELVE_STARTS = [11, 6, 2, 9, 2, 9, 5, 0, 8, 3];const TWELVE_NAMES = ['é•·ç”Ÿ','æ²æµ´','å† å¸¯','å»ºç¦„','å¸æ—º','è¡°','ç—…','æ­»','å¢“','çµ¶','èƒ','é¤Š'];const dmIdx = STEM.findIndex(s => s.c === dm.c);const isYangGan = dmIdx % 2 === 0;allBranches.forEach((b, idx) => {const bi = BRANCH.findIndex(br => br.c === b.c);const position = ['year', 'month', 'day', 'hour'][idx];const posWeight = position === 'day' ? 1.5 : position === 'hour' ? 1.3 : position === 'month' ? 1.2 : 1.0;let twIdx = bi - TWELVE_STARTS[dmIdx];if (!isYangGan) twIdx = -twIdx;twIdx = ((twIdx % 12) + 12) % 12;const twName = TWELVE_NAMES[twIdx];let twelveBonus = 0;if (twName === 'å»ºç¦„' || twName === 'å¸æ—º') {twelveBonus = 4 * posWeight;if (position === 'day' || position === 'hour') hasRealRoot[position] = true;} else if (twName === 'å† å¸¯' || twName === 'é•·ç”Ÿ') {twelveBonus = 2 * posWeight;if (position === 'day' || position === 'hour') hasRealRoot[position] = true;}
realRootScore += twelveBonus;const hidden = JIJANGGAN_W[bi] || [];hidden.forEach(h => {const hStem = STEM[h.s];if (hStem.e === peerEl || hStem.e === sealEl) {realRootScore += h.w * posWeight * 2;if (position === 'day') hasRealRoot.day = true;if (position === 'hour') hasRealRoot.hour = true;}});});score += Math.min(realRootScore, 15);const rootStrong = realRootScore >= 4;factors.push({ l: 'é€šæ ¹ï¼ˆå®Ÿéš›ã®æ ¹ï¼‰', v: rootStrong ? `âœ“ ${realRootScore.toFixed(1)}ç‚¹` : `âœ— å¼±æ ¹ (${realRootScore.toFixed(1)})`, p: rootStrong });let helpCount = 0;let attackCount = 0;let exprStemCount = 0;allStems.forEach((st, idx) => {const si = STEM.findIndex(s => s.c === st.c);if (disabledSeals.includes(si) || disabledPeers.includes(si)) {factors.push({ l: 'âš ï¸ åˆå»', v: `${st.c} ç„¡åŠ›åŒ–`, p: false });return;}
if (st.e === peerEl) { helpCount++; score += 2.5; }
if (st.e === sealEl) { helpCount++; score += 2; }
if (st.e === officerEl) { attackCount++; score -= 2; }
if (st.e === wealthEl) { attackCount++; score -= 1; }
if (st.e === exprEl) { exprStemCount++; score -= 2; }});if (helpCount > 0) factors.push({ l: 'å¤©å¹² æ¯”åŠ«/å°æ˜Ÿ', v: `${helpCount}å€‹é€å‡º`, p: true });if (attackCount > 0) factors.push({ l: 'å¤©å¹²å®˜/è²¡åœ§è¿«', v: `${attackCount}å€‹`, p: false });let exprTotal = exprStemCount;allBranches.forEach(b => { if (b.e === exprEl) exprTotal++; });if (exprTotal >= 3) {score -= 4;factors.push({ l: 'âš ï¸ é£Ÿå‚·å¤ªé', v: `${exprTotal}å€‹ â†’ æ´©æ°—éå¤š (âˆ’4)`, p: false });} else if (exprStemCount >= 2) {score -= 2;factors.push({ l: 'âš ï¸ é£Ÿå‚· é€å‡º', v: `${exprStemCount}å¤©å¹² (âˆ’2)`, p: false });}
let officerTotal = 0;[...allStems, ...allBranches].forEach(p => { if (p.e === officerEl) officerTotal++; });if (officerTotal >= 2) {score -= 2;factors.push({ l: 'å®˜æ®ºåœ§è¿«', v: `${officerTotal}å€‹ (âˆ’2)`, p: false });}
const DIRECTIONAL = [
{ branches: [2, 3, 4], element: 'wood', name: 'å¯…å¯è¾° æœ¨å±€' },
{ branches: [5, 6, 7], element: 'fire', name: 'å·³åˆæœª ç«å±€' },
{ branches: [8, 9, 10], element: 'metal', name: 'ç”³é…‰æˆŒ é‡‘å±€' },
{ branches: [11, 0, 1], element: 'water', name: 'äº¥å­ä¸‘ æ°´å±€' }
];let directionalFormed = null;DIRECTIONAL.forEach(d => {if (d.branches.every(b => branchIndices.includes(b))) {directionalFormed = d;if (d.element === peerEl) {score += 8;factors.push({ l: 'ğŸ”¥ æ–¹åˆ', v: `${d.name} â†’ æ¯”åŠ« (+8)`, p: true });} else if (d.element === sealEl) {score += 6;factors.push({ l: 'ğŸ”¥ æ–¹åˆ', v: `${d.name} â†’ å°æ˜Ÿ (+6)`, p: true });} else if (d.element === exprEl) {score -= 5;factors.push({ l: 'âš ï¸ æ–¹åˆ', v: `${d.name} â†’ æ´©æ°— (âˆ’5)`, p: false });} else if (d.element === officerEl) {score -= 6;factors.push({ l: 'âš ï¸ æ–¹åˆ', v: `${d.name} â†’ åœ§è¿« (âˆ’6)`, p: false });}}});const THREE_HARMONY = [
{ branches: [2, 6, 10], element: 'fire', name: 'å¯…åˆæˆŒ ç«å±€' },
{ branches: [8, 0, 4], element: 'water', name: 'ç”³å­è¾° æ°´å±€' },
{ branches: [5, 9, 1], element: 'metal', name: 'å·³é…‰ä¸‘ é‡‘å±€' },
{ branches: [11, 3, 7], element: 'wood', name: 'äº¥å¯æœª æœ¨å±€' }
];if (!directionalFormed) {THREE_HARMONY.forEach(th => {const hasCount = th.branches.filter(b => branchIndices.includes(b)).length;const hasCenter = branchIndices.includes(th.branches[1]);if (hasCount >= 2 && hasCenter) {if (th.element === peerEl) {const bonus = hasCount === 3 ? 7 : 4;score += bonus;factors.push({ l: 'ğŸ”¥ ä¸‰åˆ', v: `${th.name} â†’ æ¯”åŠ« (+${bonus})`, p: true });} else if (th.element === sealEl) {const bonus = hasCount === 3 ? 5 : 3;score += bonus;factors.push({ l: 'ğŸ”¥ ä¸‰åˆ', v: `${th.name} â†’ å°æ˜Ÿ (+${bonus})`, p: true });} else if (th.element === exprEl) {const penalty = hasCount === 3 ? 4 : 2;score -= penalty;factors.push({ l: 'âš ï¸ ä¸‰åˆ', v: `${th.name} â†’ æ´©æ°— (âˆ’${penalty})`, p: false });} else if (th.element === officerEl) {const penalty = hasCount === 3 ? 5 : 3;score -= penalty;factors.push({ l: 'âš ï¸ ä¸‰åˆ', v: `${th.name} â†’ åœ§è¿« (âˆ’${penalty})`, p: false });}}});}
const wangjiClash = [[0,6,'å­åˆå†²'],[3,9,'å¯é…‰æ²–']];for (const [a, b, name] of wangjiClash) {if (branchIndices.includes(a) && branchIndices.includes(b)) {score -= 3;factors.push({ l: 'âš¡ æ—ºæ”¯æ²–', v: `${name} (âˆ’3)`, p: false });}}
let type = 'balanced';let extreme = null;if (score >= 15) { type = 'strong'; extreme = 'æ¥µèº«å¼·'; }
else if (score >= 8) type = 'strong';else if (score >= 3) type = 'balanced';else if (score <= -5) { type = 'weak'; extreme = 'æ¥µèº«å¼±'; }
else if (score <= 2) type = 'weak';if ((hasRealRoot.day || hasRealRoot.hour) && extreme === 'æ¥µèº«å¼±') {extreme = null;type = 'weak';factors.push({ l: 'âš¡ æ ¹è£œæ­£', v: 'æ¥µèº«å¼±â†’èº«å¼±', p: true });}
let pct = Math.round(((score + 15) / 40) * 100);pct = Math.max(5, Math.min(95, pct));if (hasRealRoot.hour && pct < 15) pct = 15;if (hasRealRoot.day && pct < 20) pct = 20;return {type,
score: Math.round(score * 10) / 10,
pct,
factors,
extreme,
hourRoot: hasRealRoot.hour,
dayRoot: hasRealRoot.day,
disabledSeals,
disabledPeers};}
const CLIMATE_BALANCE/*èª¿å€™*/ = {0: {0: {yong:'fire', sub:'wood', desc:'å†¬ã®ç”²æœ¨ã¯å‡ã£ã¦ãŠã‚Šç«ã§æ¸©ã‚ã‚‹'},
1: {yong:'fire', sub:'wood', desc:'ä¸‘æœˆåœŸæ—ºç¯€ã€ç«ã§å¯’æ°—é™¤å»'},
2: {yong:'water', sub:'fire', desc:'å¯…æœˆæ˜¥æ°—é‹ å§‹ã¾ã‚Šã€ æ°´ã§æ ¹ é¤Šåˆ†'},
3: {yong:'water', sub:'fire', desc:'å¯æœˆæœ¨æ—ºã€æ°´ã§æ½¤æ²¢ã«'},
4: {yong:'water', sub:'metal', desc:'è¾°æœˆåœŸæ°—ãŒå¼·ãæ°´ã§èª¿ç¯€'},
5: {yong:'water', sub:'metal', desc:'å·³æœˆå¤ å§‹ã¾ã‚Šã€ æ°´ã§ä¹¾ç‡¥ é˜²æ­¢'},
6: {yong:'water', sub:'metal', desc:'åˆæœˆç«æ—ºã€ æ°´ãŒå¿…é ˆ'},
7: {yong:'water', sub:'metal', desc:'æœªæœˆåœŸæ—ºç¯€ã€ æ°´ã§ç‡¥ç†± é™¤å»'},
8: {yong:'water', sub:'fire', desc:'ç”³æœˆé‡‘æ°—ãŒå¼·ãæ°´ã§æ´©æ°—'},
9: {yong:'water', sub:'fire', desc:'é…‰æœˆé‡‘æ—ºã€ æ°´ã§é‡‘ç”Ÿæ°´'},
10: {yong:'fire', sub:'water', desc:'æˆŒæœˆåœŸæ°—ã€ç«ã§ç”Ÿæœ¨'},
11: {yong:'fire', sub:'water', desc:'äº¥æœˆæ°´æ°—ãŒå¼·ãç«ã§èª¿ç¯€'}},
1: {0: {yong:'fire', sub:'water', desc:'å†¬ ä¹™æœ¨ã¯å¼±ã ç«ã§æ¸©ã‚ã‚‹'},
1: {yong:'fire', sub:'water', desc:'ä¸‘æœˆå¯’æ°—ãŒå¼·ãç«ãŒå¿…é ˆ'},
2: {yong:'water', sub:'fire', desc:'å¯…æœˆåˆæ˜¥ã€ æ°´ã§æˆé•·'},
3: {yong:'fire', sub:'water', desc:'å¯æœˆä¹™æœ¨ æ—ºã€ ç«ã§æ´©æ°—'},
4: {yong:'water', sub:'fire', desc:'è¾°æœˆåœŸæ°—ã€æ°´ã§ç”Ÿæœ¨'},
5: {yong:'water', sub:'metal', desc:'å·³æœˆç«æ°—ãŒå¼·ãæ°´ã§æ»‹é¤Š'},
6: {yong:'water', sub:'metal', desc:'åˆæœˆæš‘ã æ°´ãŒå¿…é ˆ'},
7: {yong:'water', sub:'metal', desc:'æœªæœˆç‡¥ç†±ã€ æ°´ã§æ¶¼ã—ã'},
8: {yong:'fire', sub:'water', desc:'ç”³æœˆé‡‘æ—ºç¯€ã€ç«ã§é‡‘ã‚’åˆ¶å¾¡'},
9: {yong:'fire', sub:'water', desc:'é…‰æœˆé‡‘æ—ºã€ ç«ã§ä¿è­·'},
10: {yong:'fire', sub:'water', desc:'æˆŒæœˆç«æ°— é¦–é•·ã€ ç«ã§æ¸©ã‚ã‚‹'},
11: {yong:'fire', sub:'wood', desc:'å®³æœˆæ°´æ—ºã€ ç«ã§å‡è¡¡'}},
2: {0: {yong:'wood', sub:'earth', desc:'å†¬ã®ä¸™ç«ã¯æœ¨ã§ç”Ÿç«'},
1: {yong:'wood', sub:'fire', desc:'ä¸‘æœˆå¯’åœŸã€ æœ¨ã§ ç”Ÿç«'},
2: {yong:'water', sub:'metal', desc:'å¯…æœˆæœ¨ç”Ÿç« æ—ºã€ æ°´ã§èª¿ç¯€'},
3: {yong:'water', sub:'metal', desc:'å¯æœˆæœ¨æ—ºã€ æ°´ã§å‡è¡¡'},
4: {yong:'water', sub:'metal', desc:'è¾°æœˆåœŸæ°—ã€ æ°´ã§æ½¤æ²¢'},
5: {yong:'water', sub:'metal', desc:'å·³æœˆç«æ—ºã€ æ°´ãŒå¿…é ˆ'},
6: {yong:'water', sub:'metal', desc:'åˆæœˆå¤ªé™½é ‚ç‚¹ã€æ°´ã§å†·å´'},
7: {yong:'water', sub:'metal', desc:'æœªæœˆç‡¥ç†±ã€ æ°´ã§æ¶¼ã—ã'},
8: {yong:'wood', sub:'water', desc:'ç”³æœˆé‡‘æ—ºã€ æœ¨ã§ ç”Ÿç«'},
9: {yong:'wood', sub:'water', desc:'é…‰æœˆé‡‘æ—ºã€ æœ¨ã§ è£œå¼·'},
10: {yong:'wood', sub:'water', desc:'æˆŒæœˆåœŸç‡¥ã€æœ¨ã§ç”Ÿç«'},
11: {yong:'wood', sub:'fire', desc:'å®³æœˆæ°´æ—ºã€ æœ¨ã§ é€šé–¢'}},
3: {0: {yong:'wood', sub:'fire', desc:'å†¬ ä¸ç«ã¯æœ¨ã§ç«ç¨®ç¶­æŒ'},
1: {yong:'wood', sub:'fire', desc:'ä¸‘æœˆå¯’æ°—ã€ æœ¨ã§ ç”Ÿç«'},
2: {yong:'wood', sub:'water', desc:'å¯…æœˆç”Ÿæœ¨ã€ æ°´ã§èª¿ç¯€'},
3: {yong:'wood', sub:'water', desc:'å¯æœˆæœ¨æ—ºã€ æ°´ã§å‡è¡¡'},
4: {yong:'wood', sub:'water', desc:'è¾°æœˆæ¹¿åœŸã€ æœ¨ã§ ç”Ÿç«'},
5: {yong:'water', sub:'wood', desc:'å·³æœˆç«æ—ºã€ æ°´ã§èª¿å€™'},
6: {yong:'water', sub:'wood', desc:'åˆæœˆç«å‰‹é‡‘ã€ æ°´ãŒå¿…é ˆ'},
7: {yong:'water', sub:'wood', desc:'æœªæœˆç‡¥ç†±ã€ æ°´ã§æ¶¼ã—ã'},
8: {yong:'wood', sub:'fire', desc:'ç”³æœˆé‡‘æ°—ãŒå¼·ãæœ¨ã§ç”Ÿç«'},
9: {yong:'wood', sub:'fire', desc:'é…‰æœˆé‡‘æ—ºã€ æœ¨ã§ è£œå¼·'},
10: {yong:'wood', sub:'fire', desc:'æˆŒæœˆç«æ°— é¦–é•·ã€ æœ¨ã§ç¶­æŒ'},
11: {yong:'wood', sub:'fire', desc:'å®³æœˆæ°´å‰‹ç«ã€ æœ¨ã§ é€šé–¢'}},
4: {0: {yong:'fire', sub:'wood', desc:'å†¬ æˆŠåœŸã¯ç«ã§æ¸©ã‚ã‚‹'},
1: {yong:'fire', sub:'wood', desc:'ä¸‘æœˆå¯’åœŸã€ ç«ã§æ¸©æ°—'},
2: {yong:'fire', sub:'wood', desc:'å¯…æœˆæœ¨å‰‹åœŸã€ ç«ã§é€šé–¢'},
3: {yong:'fire', sub:'metal', desc:'å¯æœˆæœ¨æ—ºã€ ç«ã§åˆ¶å¾¡'},
4: {yong:'metal', sub:'water', desc:'è¾°æœˆåœŸæ—ºã€ é‡‘ã§æ´©æ°—'},
5: {yong:'water', sub:'metal', desc:'å·³æœˆç«æ—ºã€ æ°´ã§èª¿å€™'},
6: {yong:'water', sub:'metal', desc:'åˆæœˆç‡¥åœŸã€ æ°´ãŒå¿…é ˆ'},
7: {yong:'water', sub:'metal', desc:'æœªæœˆåœŸæ—ºç¯€ã€ æ°´ã§æ½¤æ²¢'},
8: {yong:'water', sub:'fire', desc:'ç”³æœˆé‡‘æ°—ãŒå¼·ãæ°´ã§å‡è¡¡'},
9: {yong:'fire', sub:'water', desc:'é…‰æœˆé‡‘æ—ºã€ ç«ã§èª¿ç¯€'},
10: {yong:'fire', sub:'water', desc:'æˆŒæœˆåœŸæ—ºã€ ç«ã§ç”ŸåœŸ'},
11: {yong:'fire', sub:'wood', desc:'å®³æœˆæ°´æ—ºã€ ç«ã§æ¸©æ°—'}},
5: {0: {yong:'fire', sub:'wood', desc:'å†¬ å·±åœŸã¯ç«ã§æ¸©ã‚ã‚‹'},
1: {yong:'fire', sub:'wood', desc:'ä¸‘æœˆå¯’æ¹¿åœŸã€ç«ã§æ¸©æ°—'},
2: {yong:'fire', sub:'water', desc:'å¯…æœˆæœ¨å‰‹åœŸã€ ç«ã§ä¿è­·'},
3: {yong:'fire', sub:'water', desc:'å¯æœˆæœ¨æ—ºã€ ç«ã§é€šé–¢'},
4: {yong:'metal', sub:'water', desc:'è¾°æœˆåœŸæ—ºã€ é‡‘ã§æ´©æ°—'},
5: {yong:'water', sub:'metal', desc:'å·³æœˆç‡¥åœŸã€ æ°´ã§æ½¤æ²¢'},
6: {yong:'water', sub:'metal', desc:'åˆæœˆç«æ—ºã€ æ°´ãŒå¿…é ˆ'},
7: {yong:'water', sub:'metal', desc:'æœªæœˆåœŸæ—ºç¯€ã€æ°´ã§èª¿æ¹¿'},
8: {yong:'water', sub:'fire', desc:'ç”³æœˆé‡‘æ°—ã€ æ°´ã§æ½¤ã„'},
9: {yong:'fire', sub:'water', desc:'é…‰æœˆé‡‘æ—ºã€ ç«ã§å‡è¡¡'},
10: {yong:'fire', sub:'water', desc:'æˆŒæœˆåœŸæ—ºã€ ç«ã§ç”ŸåœŸ'},
11: {yong:'fire', sub:'wood', desc:'å®³æœˆæ°´æ—ºã€ ç«ã§èª¿ç¯€'}},
6: {0: {yong:'fire', sub:'earth', desc:'å†¬ã®åºšé‡‘ã¯ç«ã§é›éŒ¬'},
1: {yong:'fire', sub:'earth', desc:'ä¸‘æœˆå¯’é‡‘ã€ç«ã§æº¶ã‹ã™'},
2: {yong:'fire', sub:'water', desc:'å¯…æœˆæœ¨æ°—ã€ç«ã§ä¿è­·'},
3: {yong:'fire', sub:'earth', desc:'å¯æœˆæœ¨æ—ºã€ ç«ã§é€šé–¢'},
4: {yong:'water', sub:'fire', desc:'è¾°æœˆåœŸæ°—ã€ æ°´ã§æ´©é‡‘'},
5: {yong:'water', sub:'earth', desc:'å·³æœˆç«æ—ºã€ æ°´ã§èª¿å€™'},
6: {yong:'water', sub:'earth', desc:'åˆæœˆç«å‰‹é‡‘ã€ æ°´ãŒå¿…é ˆ'},
7: {yong:'water', sub:'earth', desc:'æœªæœˆç‡¥ç†±ã€ æ°´ã§å†·å´'},
8: {yong:'water', sub:'fire', desc:'ç”³æœˆé‡‘æ—ºã€ æ°´ã§æ´©æ°—'},
9: {yong:'water', sub:'fire', desc:'é…‰æœˆé‡‘å‰‹æ˜Ÿã€ æ°´ç« å¿…è¦'},
10: {yong:'fire', sub:'water', desc:'æˆŒæœˆåœŸç”Ÿé‡‘ã€ç«ã§é›éŒ¬'},
11: {yong:'fire', sub:'earth', desc:'å®³æœˆæ°´æ—ºã€ ç«ã§æ¸©æ°—'}},
7: {0: {yong:'fire', sub:'earth', desc:'å†¬ã®è¾›é‡‘ã¯ç«ã§æ¸©ã‚ã‚‹'},
1: {yong:'fire', sub:'earth', desc:'ä¸‘æœˆå¯’é‡‘ã€ ç«ã§æ¸©æ°—'},
2: {yong:'water', sub:'fire', desc:'å¯…æœˆæœ¨æ°—ã€æ°´ã§æ´—æµ„'},
3: {yong:'water', sub:'fire', desc:'å¯æœˆæœ¨æ—ºã€ æ°´ã§æ½¤ã„'},
4: {yong:'water', sub:'fire', desc:'è¾°æœˆåœŸæ°—ã€æ°´ã§æ´—æµ„'},
5: {yong:'water', sub:'earth', desc:'å·³æœˆç«æ—ºã€ æ°´ã§èª¿å€™'},
6: {yong:'water', sub:'earth', desc:'åˆæœˆç«å‰‹é‡‘ã€ æ°´ãŒå¿…é ˆ'},
7: {yong:'water', sub:'earth', desc:'æœªæœˆç‡¥ç†±ã€ æ°´ã§æ¶¼ã—ã'},
8: {yong:'water', sub:'fire', desc:'ç”³æœˆé‡‘æ—ºã€ æ°´ã§æ´©æ°—'},
9: {yong:'water', sub:'fire', desc:'é…‰æœˆé‡‘å‰‹æ˜Ÿã€ æ°´ã§æ´—æµ„'},
10: {yong:'fire', sub:'water', desc:'æˆŒæœˆåœŸæ°—ã€ç«ã§è¼ã'},
11: {yong:'fire', sub:'earth', desc:'å®³æœˆæ°´æ—ºã€ ç«ã§å‡è¡¡'}},
8: {0: {yong:'fire', sub:'earth', desc:'å†¬ã®å£¬æ°´ã¯ç«ã§æ°·ã‚’æº¶ã‹ã™'},
1: {yong:'fire', sub:'wood', desc:'ä¸‘æœˆå¯’æ°´ã€ ç«ã§æ¸©æ°—'},
2: {yong:'earth', sub:'fire', desc:'å¯…æœˆæ°´ç”Ÿæœ¨ã€ åœŸã§åˆ¶å¾¡'},
3: {yong:'earth', sub:'fire', desc:'å¯æœˆæœ¨æ°—ã€åœŸã§å‡è¡¡'},
4: {yong:'metal', sub:'fire', desc:'è¾°æœˆåœŸæ°—ã€ é‡‘ã§ ç”Ÿæ°´'},
5: {yong:'metal', sub:'water', desc:'å·³æœˆç«æ—ºã€ é‡‘ã§ ç”Ÿæ°´'},
6: {yong:'metal', sub:'water', desc:'åˆæœˆç«å‰‹é‡‘ã€ é‡‘æ°´ å¿…è¦'},
7: {yong:'metal', sub:'water', desc:'æœªæœˆåœŸæ—ºã€ é‡‘ã§ é€šé–¢'},
8: {yong:'fire', sub:'earth', desc:'ç”³æœˆé‡‘ç”Ÿæ°´ã€ ç«ã§èª¿ç¯€'},
9: {yong:'fire', sub:'earth', desc:'é…‰æœˆé‡‘æ—ºã€ ç«ã§å‡è¡¡'},
10: {yong:'fire', sub:'wood', desc:'æˆŒæœˆåœŸæ°—ã€ ç«ã§æ¸©æ°—'},
11: {yong:'fire', sub:'wood', desc:'å®³æœˆæ°´æ—ºã€ ç«ãŒå¿…é ˆ'}},
9: {0: {yong:'fire', sub:'wood', desc:'å†¬ã®ç™¸æ°´ã¯ç«ã§æ°·ã‚’æº¶ã‹ã™'},
1: {yong:'fire', sub:'wood', desc:'ä¸‘æœˆå¯’æ°´ã€ ç«ã§æ¸©æ°—'},
2: {yong:'fire', sub:'metal', desc:'å¯…æœˆæœ¨æ°—ã€ç«ã§æ´©æ°—'},
3: {yong:'fire', sub:'metal', desc:'å¯æœˆæœ¨æ—ºã€ ç«ã§å‡è¡¡'},
4: {yong:'fire', sub:'metal', desc:'è¾°æœˆåœŸå‰‹æ°´ã€ ç«ã§é€šé–¢'},
5: {yong:'metal', sub:'water', desc:'å·³æœˆç«æ—ºã€ é‡‘ã§ ç”Ÿæ°´'},
6: {yong:'metal', sub:'water', desc:'åˆæœˆç«å‰‹é‡‘ã€ é‡‘æ°´ å¿…è¦'},
7: {yong:'metal', sub:'water', desc:'æœªæœˆåœŸæ—ºã€ é‡‘ã§ é€šé–¢'},
8: {yong:'fire', sub:'wood', desc:'ç”³æœˆé‡‘ç”Ÿæ°´ã€ ç«ã§èª¿ç¯€'},
9: {yong:'fire', sub:'wood', desc:'é…‰æœˆé‡‘æ—ºã€ ç«ã§æ´©é‡‘'},
10: {yong:'fire', sub:'wood', desc:'æˆŒæœˆåœŸæ°—ã€ ç«ã§æ¸©æ°—'},
11: {yong:'fire', sub:'metal', desc:'å®³æœˆæ°´æ—ºã€ ç«ãŒå¿…é ˆ'}}};function analyzeSamhapBureau(saju) {const brs = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b].filter(b => b);const brIdxs = brs.map(b => BRANCH.indexOf(b));const THREE_HARMONY = [
{ branches: [2, 6, 10], element: 'fire', name: 'å¯…åˆæˆŒ ç«å±€(å¯…åˆæˆŒ ç«å±€)' },
{ branches: [8, 0, 4], element: 'water', name: 'ç”³å­è¾° æ°´å±€(ç”³å­è¾° æ°´å±€)' },
{ branches: [5, 9, 1], element: 'metal', name: 'å·³é…‰ä¸‘ é‡‘å±€(å·³é…‰ä¸‘ é‡‘å±€)' },
{ branches: [11, 3, 7], element: 'wood', name: 'äº¥å¯æœªæœ¨å±€(äº¥å¯æœª æœ¨å±€)' }
];let result = { complete: false, partial: false, element: null, name: null, count: 0 };for (const th of THREE_HARMONY) {const hasCount = th.branches.filter(b => brIdxs.includes(b)).length;const hasCenter = brIdxs.includes(th.branches[1]);if (hasCount === 3) {result = { complete: true, partial: false, element: th.element, name: th.name, count: 3 };break;} else if (hasCount === 2 && hasCenter) {if (!result.complete) {const presentBranches = th.branches.filter(b => brIdxs.includes(b));const branchChars = presentBranches.map(b => BRANCH[b].c).join('');const bureauName = th.name.split('(')[0];result = {complete: false,
partial: true,
element: th.element,
name: branchChars + ' åŠåˆ(' + bureauName + ')',
count: 2,
presentBranches};}}}
return result;}
function fullAnalysis(saju, strength) {const dm = saju.day.s;const dmEl = dm.e;const dmi = STEM.indexOf(dm);const mbi = BRANCH.indexOf(saju.month.b);const samhap = analyzeSamhapBureau(saju);const climate = analyzeClimate(saju);let elCount = countElements(saju);if (samhap.complete) {elCount[samhap.element] = (elCount[samhap.element] || 0) + 2;} else if (samhap.partial) {elCount[samhap.element] = (elCount[samhap.element] || 0) + 1;}
const EL = EL_ORDER;const dmIdx = EL.indexOf(dmEl);const peerEl = dmEl;const exprEl = EL[(dmIdx + 1) % 5];const wealthEl = EL[(dmIdx + 2) % 5];const officerEl = EL[(dmIdx + 3) % 5];const sealEl = EL[(dmIdx + 4) % 5];const str = strength || calcStrength(saju);const isWeak = str.type === 'weak';const isStrong = str.type === 'strong';const officerPower = (elCount[officerEl] || 0) +
(samhap.element === officerEl ? (samhap.complete ? 3 : 1) : 0);const isOfficerStrong = officerPower >= 2;const wealthPower = elCount[wealthEl] || 0;const isWealthStrong = wealthPower >= 3;const sealPower = elCount[sealEl] || 0;const isSealStrong = sealPower >= 3;let yong, hee, gi;let yongReason = '';const peerPower = elCount[peerEl] || 0;const isVeryStrong = str.percent >= 90;if (isVeryStrong && peerPower >= 6) {yong = peerEl;hee = sealEl;gi = officerEl;yongReason = `å¾“æ ¼: æ—¥å¹² ${str.percent}%ã§æ¥µèº«å¼·ã€‚å¼·ã„æ°—ã«å¾“ã†ã¹ã`;}
else if (climate.type.includes('æ¥µå¯’') || climate.type.includes('å¯’')) {yong = 'fire';if (isOfficerStrong && sealEl === 'water') {hee = sealEl;gi = officerEl;yongReason = 'èª¿å€™ç”¨ç¥(è§£å‡)+é€šé–¢: å¯’æ¹¿ã ãŒå®˜æ®ºã‚‚å¼·ã„å¯èƒ½æ€§ã‚ã‚Š';} else {hee = 'wood';gi = 'water';yongReason = 'èª¿å€™ç”¨ç¥(è§£å‡): å¯’æ¹¿å››æŸ±ã§ç«å¿…è¦';}}
else if (climate.type.includes('æ¥µç‡¥') || climate.type.includes('ç‡¥')) {yong = 'water';hee = 'metal';gi = 'fire';yongReason = 'èª¿å€™ç”¨ç¥(æ½¤æ²¢): ç‡¥ç†± å››æŸ±ã§æ°´ãŒå¿…è¦';}
else if (isWeak && isOfficerStrong) {yong = sealEl;hee = peerEl;gi = wealthEl;yongReason = 'é€šé–¢ç”¨ç¥(æ®ºå°ç›¸ç”Ÿ): å®˜æ®ºãŒå¼·ãå°æ˜Ÿã§é€šé–¢';}
else if (isWealthStrong && isWeak) {const peerPower = elCount[peerEl] || 0;if (peerPower <= 1) {yong = sealEl;hee = peerEl;yongReason = 'ç—…å¼±ç”¨ç¥(ç”Ÿæ¯”): æ¯”åŠ«ä¸åœ¨ã§å°æ˜ŸãŒã¾ãšå¿…è¦';} else {yong = peerEl;hee = sealEl;yongReason = 'ç—…å¼±ç”¨ç¥(åˆ†è²¡): è²¡æ˜Ÿéå¤šã§æ¯”åŠ«å¿…è¦';}
gi = wealthEl;}
else if (isStrong) {yong = exprEl;hee = wealthEl;gi = sealEl;yongReason = 'æŠ‘æ‰¶ç”¨ç¥(æ´©æ°—): èº«å¼·ã§é£Ÿå‚·ã«ã¦æ´©æ°—';}
else if (isWeak) {yong = sealEl;hee = peerEl;gi = officerEl;yongReason = 'æŠ‘æ‰¶ç”¨ç¥(æ‰¶åŠ©): èº«å¼±ã§å°æ˜Ÿã«ã¦ç”ŸåŠ©';}
else {yong = exprEl;hee = wealthEl;gi = officerEl;yongReason = 'æŠ‘æ‰¶ç”¨ç¥(æ´©æ°—): ä¸­å’Œå››æŸ±ã§é£Ÿå‚·æ´©æ°—';}
if (samhap.complete && samhap.element === officerEl && yong !== sealEl) {yong = exprEl;yongReason += ` + é£Ÿç¥åˆ¶æ®º(${samhap.name})`;}
const johuData = CLIMATE_BALANCE[dmi] && CLIMATE_BALANCE[dmi][mbi];const yongCount = elCount[yong] || 0;let yongWarning = null;if (yongCount === 0) {yongWarning = `âš ï¸ ç”¨ç¥(${ELEMENT[yong].k}) åŸå±€ ä¸åœ¨! é‹ã§${ELEMENT[yong].k}ãŒ ãŒæ¥ãŸæ™‚ã®ã¿åŠ¹æœç™ºæ®`;} else if (yongCount === 1) {yongWarning = `âš ï¸ ç”¨ç¥(${ELEMENT[yong].k}) åŸå±€ã« 1å€‹ã®ã¿ã€‚è©²å½“æ–‡å­—ãŒæ²–/å…‹ã‚’å—ã‘ã‚‹ã¨ å±é™º`;}
let sudaHwasik = null;const waterCount = elCount.water || 0;const fireCount = elCount.fire || 0;if (dmEl === 'fire' && waterCount >= 3 && fireCount <= 1) {sudaHwasik = 'æ°´å¤šç«ç†„: æ°´ãŒç«ã‚’æ¶ˆã™å½¢å±€. ç«/æœ¨é‹ã«ç™ºç¦ã€æ°´/é‡‘é‹ã«å±é™º';}
let hwadaGeumso = null;const metalCount = elCount.metal || 0;if (dmEl === 'metal' && fireCount >= 3 && metalCount <= 1) {hwadaGeumso = 'ç«å¤šé‡‘å°‘: ç«ãŒé‡‘ã‚’æº¶ã‹ã™å½¢å±€. åœŸ/é‡‘é‹ã«ç™ºç¦ã€ç«/æœ¨é‹ã«å±é™º';}
let hwadaSuBin = null;if (yong === 'water' && fireCount >= 3 && waterCount <= 1) {hwadaSuBin = 'ç«å¤šæ°´è²§: ç”¨ç¥(æ°´)ãŒç«ã§è’¸ç™ºã®å±é™ºï¼è²¡ç‰©/ç¸ãŒå…¥ã£ã¦ã‚‚ã™ãå‡ºã¦ã„ãã€‚ä¸å‹•ç”£/è³‡æ ¼è¨¼ã«å›ºå®šã—ã¦ãã ã•ã„';}
let geumdaMokjeol = null;const woodCount = elCount.wood || 0;if (yong === 'wood' && metalCount >= 3 && woodCount <= 1) {geumdaMokjeol = 'é‡‘å¤šæœ¨æŠ˜: ç”¨ç¥(æœ¨)ãŒ é‡‘ã«åˆ‡ã‚‰ã‚Œã‚‹å±é™ºï¼ æœ¨é‹ãŒæ¥ã¦ã‚‚åŠ¹æœãŒå¼±ã„. æ°´ã§é€šé–¢å¿…è¦';}
let todaGeummae = null;const earthCount = elCount.earth || 0;if (yong === 'metal' && earthCount >= 4 && metalCount <= 1) {todaGeummae = 'åœŸå¤šé‡‘åŸ‹: ç”¨ç¥(é‡‘)ãŒ åœŸã«åŸ‹ã‚‚ã‚Œã‚‹å±é™ºï¼ å¤šã™ãã‚‹æ”¯æ´(å°æ˜Ÿ)ãŒã‹ãˆã£ã¦æ¯’ã€‚ æœ¨ã§åœŸã‚’åˆ¶å¾¡ å¿…è¦';}
let mokdaHwasik = null;if (yong === 'fire' && woodCount >= 4 && fireCount <= 1) {mokdaHwasik = 'æœ¨å¤šç«ç†„: ç”¨ç¥(ç«)ãŒæœ¨ã«è¦†ã‚ã‚Œæ¶ˆãˆã‚‹å±é™ºï¼æœ¨ãŒå¤šã™ãã¦ç«ãŒã¤ã‹ãªã„ã€‚å¼±ã„ç«é‹ã«ç™ºç¦';}
let gunbiJaengjae = null;const peerPowerFinal = elCount[peerEl] || 0;const wealthPowerFinal = elCount[wealthEl] || 0;if (peerPowerFinal >= 4 && wealthPowerFinal <= 1) {gunbiJaengjae = 'ç¾¤æ¯”äº‰è²¡: æ¯”åŠ« å¤ªæ—º, è²¡æ˜Ÿ å¼±ã„. åŒæ¥­ç¦æ­¢ã€é‡‘éŠ­å–å¼•æ™‚ã«è£åˆ‡ã‚Š æ³¨æ„';}
let jaedaSinyak = null;if (wealthPowerFinal >= 3 && str.pct <= 30) {jaedaSinyak = `è²¡å¤šèº«å¼±ï¼šè²¡æ˜Ÿï¼ˆãŠé‡‘ï¼‰ ${wealthPowerFinal}å€‹ã§éå¤šã ãŒæ—¥å¹²ãŒå¼±ãï¼ˆ${str.pct}%ï¼‰è€ãˆ ã§ããªã„ã€‚é‡‘æ¬²ã‚’å‡ºã›ã°å¥åº·ã‚’å¤±ã„ã¾ã™ã€‚ ä¸å‹•ç”£/è³‡æ ¼è¨¼ å½¢ã§å›ºå®šã—ã¦ãã ã•ã„ã€‚`;}
let wangjiChung = null;const branches = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b].filter(b => b);const brIdxs = branches.map(b => BRANCH.indexOf(b));if (brIdxs.includes(0) && brIdxs.includes(6)) {wangjiChung = 'å­åˆå†²: æ°´ç«ç›¸æˆ°! å¿ƒè¡€ç®¡ vs è…è‡“/è†€èƒ±å¥åº·æ³¨æ„';}
else if (brIdxs.includes(3) && brIdxs.includes(9)) {wangjiChung = 'å¯é…‰æ²–: é‡‘æœ¨ç›¸æˆ¦ï¼è‚è‡“/èƒ†åš¢ vs è‚º/å¤§è…¸ å¥åº·æ³¨æ„';}
let wangjiJungcheop = null;const wangji = {0: 'å­', 3: 'å¯', 6: 'åˆ', 9: 'é…‰'};const wangjiHealth = {0: {name: 'æ°´', health: 'è…è‡“/è†€èƒ±/ç”Ÿæ®–å™¨ æ¥µã‚ã¦å±é™ºã€‚æµ®è…«ã€å†·ãˆç—‡æ³¨æ„'},
3: {name: 'æœ¨', health: 'è‚è‡“/èƒ†åš¢/ç›® æ¥µã‚ã¦å±é™ºã€‚æ€’ã‚Šèª¿ç¯€ã€ç­‹è‚‰ç—™æ”£æ³¨æ„'},
6: {name: 'ç«', health: 'å¿ƒè¡€ç®¡/è„³/ç›® æ¥µã‚ã¦å±é™ºï¼è„³å‡ºè¡€ã€å¿ƒè‡“éº»ç—ºæ³¨æ„ã€‚2026å¹´åˆæ­³é‹æ™‚ã«ç·Šæ€¥äº‹æ…‹å¯¾å‚™'},
9: {name: 'é‡‘', health: 'è‚º/å¤§è…¸/çš®è†š æ¥µã‚ã¦å±é™ºã€‚å‘¼å¸å™¨ç–¾æ‚£ã€çš®è†šç—…æ³¨æ„'}};for (const [bi, char] of Object.entries(wangji)) {const count = brIdxs.filter(b => b === parseInt(bi)).length;if (count >= 3) {const info = wangjiHealth[bi];wangjiJungcheop = `æ—ºæ”¯é‡ç•³(${char}${char}${char}): ${info.name} æ°— æš´èµ°ï¼ ${info.health}`;break;}}
let mugeunWarning = null;const dmStemIdx = STEM.indexOf(dm);const dmElIdx = EL_ORDER.indexOf(dmEl);const sameElStems = [dmElIdx * 2, dmElIdx * 2 + 1];let hasRoot = false;for (const bi of brIdxs) {const jjg = JIJANGGAN[bi];if (jjg) {for (const item of jjg) {if (sameElStems.includes(item.stem)) {hasRoot = true;break;}}}
if (hasRoot) break;}
if (!hasRoot) {const elNames = {wood: 'æœ¨', fire: 'ç«', earth: 'åœŸ', metal: 'é‡‘', water: 'æ°´'};mugeunWarning = `ç„¡æ ¹: æ—¥å¹² ${dm.c}(${elNames[dmEl]})ãŒ åœ°æ”¯ã«æ ¹ãªã—ã€‚ è¡¨é¢ä¸Šã¯åŠ›ãŒã‚ã‚‹ã‚ˆã†ã«è¦‹ãˆã¦ã‚‚å®Ÿéš›ã®åŠ›ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ é‹ã§æ¯”åŠ«/å°æ˜ŸãŒæ¥ã¦ã¯ã˜ã‚ã¦åŠ›ã‚’å¾—ã¾ã™ã€‚`;}
let pyeoninDosik = null;const monthBi = BRANCH.indexOf(saju.month?.b);const dayBi = BRANCH.indexOf(saju.day?.b);const isMaoYouChung = (monthBi === 3 && dayBi === 9) || (monthBi === 9 && dayBi === 3);if (isMaoYouChung) {const monthBranchEl = BRANCH_EL[monthBi];const dayBranchEl = BRANCH_EL[dayBi];const dmElIdx = EL_ORDER.indexOf(dmEl);const siksinEl = EL_ORDER[(dmElIdx + 1) % 5];const pyeoninEl = EL_ORDER[(dmElIdx + 4) % 5];if ((monthBranchEl === siksinEl && dayBranchEl === pyeoninEl) ||
(monthBranchEl === 'wood' && dayBranchEl === 'metal')) {pyeoninDosik = `åå°å€’é£Ÿ: æœˆæ”¯(é£Ÿç¥)ã¨æ—¥æ”¯(åå°)ãŒå¯é…‰æ²–ï¼ æ‰èƒ½ï¼ˆé£Ÿã„æ‰¶æŒï¼‰ãŒå£Šã‚ŒãŸå½¢å±€ã€‚ä»•äº‹ã‚’å§‹ã‚ã¦ã‚‚é€”ä¸­ã§è¦†ã•ã‚ŒãŸã‚Šã€æ•æ„Ÿã•ã®ãŸã‚ã«æ©Ÿä¼šã‚’è¹´é£›ã°ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç€å®Ÿã•ãŒé–‹é‹æ³•ã§ã™ã€‚`;}}
return {yong, hee, gi, yongReason,
yongWarning,
sudaHwasik,
hwadaGeumso,
hwadaSuBin,
geumdaMokjeol,
todaGeummae,
mokdaHwasik,
gunbiJaengjae,
jaedaSinyak,
wangjiChung,
wangjiJungcheop,
mugeunWarning,
pyeoninDosik,
johu: johuData?.yong || null,
johuDesc: johuData?.desc || '',
climate, samhap, elCount,
officerPower, isOfficerStrong,
wealthPower, isWealthStrong,
type: str.type,
byungYak: findByungYak(saju, str),
sub: johuData?.sub || null};}
function analyzeClimate(saju) {const mbi = BRANCH.indexOf(saju.month.b);const season = SEASON[mbi];let climate = {type: '', desc: '', needs: []};const brs = [saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b].filter(b => b);const brIdxs = brs.map(b => BRANCH.indexOf(b));let coldCount = 0, hotCount = 0;brIdxs.forEach(bi => {if (bi === 0 || bi === 1 || bi === 11) coldCount++;if (bi === 5 || bi === 6 || bi === 7) hotCount++;});const stems = [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s].filter(s => s);let waterStemCount = 0, fireStemCount = 0;stems.forEach(s => {if (s.e === 'water') waterStemCount++;if (s.e === 'fire') fireStemCount++;});const totalCold = coldCount + waterStemCount;const totalHot = hotCount + fireStemCount;const isWinter = [0, 1, 11].includes(mbi);const isSpring = [2, 3, 4].includes(mbi);const isSummer = [5, 6, 7].includes(mbi);const isAutumn = [8, 9, 10].includes(mbi);if (totalCold >= 4) {if (isWinter) {climate.type = 'æ¥µå¯’';climate.desc = 'çœŸå†¬ã®å‡ã‚Šã¤ã„ãŸå››æŸ±ã§ã™ã€‚ç«ã®æ°—ãŒåˆ‡å®Ÿã«å¿…è¦ã§ã™ã€‚';} else if (isSpring) {climate.type = 'å¯’æ¹¿';climate.desc = 'æ˜¥ã ãŒæ°´æ°—ãŒéå¤šã§æ¹¿å†·ã€‚ç«ã§æ¸©æ°—ã‚’åŠ ãˆã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚';} else if (isAutumn) {climate.type = 'å†·æ¹¿';climate.desc = 'ç§‹ã«æ°´ãŒéå¤šã§æ¹¿æ¶¼ã€‚ç«ã®æ°—ãŒå¿…è¦ã§ã™ã€‚';} else {climate.type = 'æ°´éå¤š';climate.desc = 'å¤ã ãŒæ°´ãŒæº¢ã‚Œã¦ã„ã¾ã™ã€‚å‡è¡¡ãŒå¿…è¦ã§ã™ã€‚';}
climate.needs = ['fire', 'wood'];} else if (totalCold >= 3 || (coldCount >= 2 && season !== 'summer')) {climate.type = 'å¯’(å¯’)';climate.desc = 'å†·ãŸã„å››æŸ±ã§ã™ã€‚æ¸©ã‹ã„ç«ã®æ°—ãŒå¿…è¦ã§ã™ã€‚';climate.needs = ['fire', 'wood'];} else if (totalHot >= 4) {climate.type = 'æ¥µç‡¥';climate.desc = 'ç«ã®æµ· å››æŸ±ã§ã™ã€‚ æ°´ æ°—ãŒ åˆ‡å®Ÿã« å¿…è¦ã—ã¾ã™.';climate.needs = ['water', 'metal'];} else if (totalHot >= 3 || (hotCount >= 2 && season !== 'winter')) {climate.type = 'ç‡¥(ç‡¥)';climate.desc = 'æš‘ãã¦ä¹¾ç‡¥ã—ãŸå››æŸ±ã§ã™ã€‚ æ¶¼ã—ã„æ°´ã®æ°—ãŒå¿…è¦ã§ã™ã€‚';climate.needs = ['water', 'metal'];} else if (season === 'winter') {climate.type = 'å¯’(å¯’)';climate.desc = 'å†¬ å››æŸ±ã§ã™ã€‚ æ¸©ã‹ã„ ç« æ°—ãŒ å¿…è¦ã—ã¾ã™.';climate.needs = ['fire', 'wood'];} else if (season === 'summer') {climate.type = 'ç‡¥(ç‡¥)';climate.desc = 'å¤ã®å››æŸ±ã§ã™ã€‚ æ¶¼ã—ã„æ°´ã®æ°—ãŒå¿…è¦ã§ã™ã€‚';climate.needs = ['water', 'metal'];} else {climate.type = 'ä¸­å’Œ';climate.desc = 'æ°—å€™ãŒæ¯”è¼ƒçš„å‡è¡¡ã®å–ã‚ŒãŸå››æŸ±ã§ã™ã€‚';climate.needs = [];}
return climate;}
function findByungYak(saju, strength) {const dm = saju.day.s;const dmi = STEM.indexOf(dm);const ec = countElements(saju);let byung = null, yak = null;let maxEl = null, maxCount = 0;for (let e of EL_ORDER) {if (ec[e] > maxCount && e !== dm.e) {maxCount = ec[e];maxEl = e;}}
if (maxCount >= 3) {byung = maxEl;const kontrolIdx = (EL_ORDER.indexOf(maxEl) + 3) % 5;yak = EL_ORDER[kontrolIdx];}
return { byung, yak, desc: byung ? `${ELEMENT[byung].k}ãŒéå¤šãªã®ã§${ELEMENT[yak].k}ã§åˆ¶å¾¡` : null };}
function calcGods(saju, str, samhapResult) {const dm = saju.day.s;const dmi = STEM.indexOf(dm);const mbi = BRANCH.indexOf(saju.month.b);const season = SEASON[mbi];let yong, hee, gi, johu = null, johuDesc = '';let isFollower = false;let followerType = null;const climate = analyzeClimate(saju);const isHan = climate.type.includes('å¯’') || climate.type.includes('å¯’');const isJo = climate.type.includes('ç‡¥') || climate.type.includes('ç‡¥');const johuData = CLIMATE_BALANCE[dmi] && CLIMATE_BALANCE[dmi][mbi];if (johuData) {johu = johuData.yong;johuDesc = johuData.desc;}
const dmEl = dm.e;const sealEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 4) % 5];const peerEl = dmEl;const exprEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 1) % 5];const wealthEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 2) % 5];const officerEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 3) % 5];const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (p && p.s) elCount[p.s.e]++;if (p && p.b) elCount[p.b.e]++;});const noRoot = !str.dayRoot && !str.hourRoot;if (str.pct < 10 && noRoot) {let maxEl = null, maxCount = 0;Object.entries(elCount).forEach(([el, cnt]) => {if (el !== dmEl && cnt > maxCount) {maxEl = el;maxCount = cnt;}});if (maxCount >= 4) {isFollower = true;if (maxEl === wealthEl) {followerType = 'å¾“è²¡æ ¼';yong = maxEl;hee = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 1) % 5];gi = sealEl;} else if (maxEl === officerEl) {followerType = 'å¾“æ®ºæ ¼';yong = maxEl;hee = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 4) % 5];gi = dmEl;} else if (maxEl === exprEl) {followerType = 'å¾“å…æ ¼';yong = maxEl;hee = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 1) % 5];gi = sealEl;} else {followerType = 'å¾“å¼·æ ¼';yong = maxEl;hee = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 4) % 5];gi = EL_ORDER[(EL_ORDER.indexOf(maxEl) + 3) % 5];}
johuDesc = `${followerType}: æ¥µèº«å¼±ã§ ${maxEl}ã«å¾“ã†`;}}
if (!isFollower && str.type === 'strong') {yong = exprEl;hee = wealthEl;gi = sealEl;} else if (!isFollower && str.type === 'weak') {yong = sealEl;hee = peerEl;gi = officerEl;} else if (!isFollower) {yong = exprEl;hee = wealthEl;gi = officerEl;}
const ec = countElements(saju);const officerCount = ec[officerEl] || 0;const isOfficerStrong = officerCount >= 2 || (samhapResult && samhapResult.element === officerEl);if (str.type === 'weak' && isOfficerStrong) {yong = sealEl;hee = peerEl;gi = wealthEl;johuDesc = (johuDesc || '') + ' (é€šé–¢ç”¨ç¥: å®˜æ®ºå¤ªæ—ºã‚’åˆ¶å¾¡)';}
else if (isHan && (johu === 'fire' || yong === 'fire')) {yong = 'fire';hee = 'wood';gi = 'water';johuDesc = (johuDesc || '') + ' (èª¿å€™ å„ªå…ˆ: å¯’æ¹¿ å››æŸ±ï¼‰';}
if (isJo && (johu === 'water' || yong === 'water')) {yong = 'water';hee = 'metal';gi = 'fire';johuDesc = (johuDesc || '') + ' (èª¿å€™ å„ªå…ˆ: ç‡¥ç†± å››æŸ±ï¼‰';}
if (samhapResult && samhapResult.complete) {const samhapEl = samhapResult.element;if ((samhapEl === 'metal' && dmEl === 'wood') ||
(samhapEl === 'fire' && dmEl === 'metal') ||
(samhapEl === 'water' && dmEl === 'fire') ||
(samhapEl === 'wood' && dmEl === 'earth') ||
(samhapEl === 'earth' && dmEl === 'water')) {yong = exprEl;hee = 'fire';johuDesc = (johuDesc || '') + ` (${samhapResult.name} åˆ¶æ®º)`;}
if ((samhapEl === 'water' && dmEl === 'wood') ||
(samhapEl === 'wood' && dmEl === 'fire') ||
(samhapEl === 'fire' && dmEl === 'earth') ||
(samhapEl === 'earth' && dmEl === 'metal') ||
(samhapEl === 'metal' && dmEl === 'water')) {yong = exprEl;johuDesc = (johuDesc || '') + ` (${samhapResult.name} æ´©æ°—)`;}}
const byungYak = findByungYak(saju, str);return {yong, hee, gi,
type: str.type,
johu, johuDesc,
climate,
byungYak,
sub: johuData?.sub || null,
isFollower,
followerType};}
const SIX_RELATIONS/*å…­è¦ª*/ = {m: {'æ¯”è‚©': {relation: 'å…„å¼Ÿ/å‹äºº', desc: 'ç§ã¨å¯¾ç­‰ãªé–¢ä¿‚', detailed: 'å…„å¼Ÿå§‰å¦¹, å‹äºº, åŒåƒš, ç«¶äº‰è€…'},
'åŠ«è²¡': {relation: 'å…„å¼Ÿ/ç«¶äº‰è€…', desc: 'ç§ã¨ç«¶äº‰ã™ã‚‹é–¢ä¿‚', detailed: 'ç•°æ¯å…„å¼Ÿ, ã„ã¨ã“, ç«¶äº‰è€…, åŒæ¥­è€…'},
'é£Ÿç¥': {relation: 'å­å¥³(å¨˜)/å¾Œè¼©', desc: 'ç§ãŒç”Ÿã‚“ã ã‚‚ã®', detailed: 'å¨˜, å­«å¨˜, å¾Œè¼©, éƒ¨ä¸‹, å¼Ÿå­'},
'å‚·å®˜': {relation: 'å­å¥³(æ¯å­)/æ‰èƒ½', desc: 'ç§ãŒè¡¨ç¾ã™ã‚‹ã‚‚ã®', detailed: 'æ¯å­, å­«, å‰µä½œç‰©, ã‚¢ã‚¤ãƒ‡ã‚¢'},
'åè²¡': {relation: 'çˆ¶/æ‹äºº', desc: 'ç§ãŒæ²»ã‚ã‚‹è²¡ç‰©', detailed: 'çˆ¶, å¦¾, æ‹äºº, éŠèˆˆ, æŠ•æ©Ÿè²¡'},
'æ­£è²¡': {relation: 'å¦»/è²¡ç”£', desc: 'ç§ãŒå®ˆã‚‹è²¡ç‰©', detailed: 'å¦», æ­£æ¥­ã§ç¨¼ã„ã é‡‘, çµ¦ä¸'},
'åå®˜': {relation: 'å­å¥³(æ¯å­)/è·å ´', desc: 'ç§ã‚’æ²»ã‚ã‚‹ã‚‚ã®', detailed: 'æ¯å­, è·å ´ä¸Šå¸, æ¨©åŠ›, åœ§è¿«'},
'æ­£å®˜': {relation: 'å­å¥³(å¨˜)/åèª‰', desc: 'ç§ã‚’æ­£ã—ãã™ã‚‹ã‚‚ã®', detailed: 'å¨˜, åèª‰, è·å ´, æ³•å¾‹'},
'åå°': {relation: 'ç¶™æ¯/ç¾©çˆ¶', desc: 'ç§ã‚’åã£ã¦è‚²ã¦ã‚‹ã‚‚ã®', detailed: 'ç¶™æ¯, ç¾©æ¯, åº¶æ¯'},
'æ­£å°': {relation: 'æ¯/å­¦å•', desc: 'ç§ã‚’æ­£ã—ãè‚²ã¦ã‚‹ã‚‚ã®', detailed: 'æ¯, å­¦æ¥­, æ–‡æ›¸, è³‡æ ¼è¨¼'}},
f: {'æ¯”è‚©': {relation: 'å§‰å¦¹/å‹äºº', desc: 'ç§ã¨å¯¾ç­‰ãªé–¢ä¿‚', detailed: 'å§‰å¦¹, å‹äºº, åŒåƒš, ç«¶äº‰è€…'},
'åŠ«è²¡': {relation: 'å§‰å¦¹/ç«¶äº‰è€…', desc: 'ç§ã¨ç«¶äº‰ã™ã‚‹é–¢ä¿‚', detailed: 'ç•°æ¯å§‰å¦¹, ã„ã¨ã“, ç«¶äº‰è€…'},
'é£Ÿç¥': {relation: 'å­å¥³(å¨˜)/æ‰èƒ½', desc: 'ç§ãŒç”Ÿã‚“ã ã‚‚ã®', detailed: 'å¨˜, å­«å¨˜, è¡¨ç¾åŠ›, æ‰èƒ½'},
'å‚·å®˜': {relation: 'å­å¥³(æ¯å­)/ç•°æ€§', desc: 'ç§ãŒè¡¨ç¾ã™ã‚‹ã‚‚ã®', detailed: 'æ¯å­, å­«, æ‹äºº, é­…åŠ›'},
'åè²¡': {relation: 'ç¾©çˆ¶/è²¡ç‰©', desc: 'ç§ãŒæ²»ã‚ã‚‹è²¡ç‰©', detailed: 'ç¾©çˆ¶, æŠ•æ©Ÿè²¡, æ¨ªè²¡'},
'æ­£è²¡': {relation: 'ç¾©æ¯/è²¡ç”£', desc: 'ç§ãŒå®ˆã‚‹è²¡ç‰©', detailed: 'ç¾©æ¯, æ­£æ¥­è²¡, çµ¦ä¸'},
'åå®˜': {relation: 'æ‹äºº/ç”·æ€§', desc: 'ç§ã‚’æ²»ã‚ã‚‹ã‚‚ã®', detailed: 'æ‹äºº, æµ®æ°—, ä¸å€«ç”·, æš´åŠ›ç”·'},
'æ­£å®˜': {relation: 'å¤«/åèª‰', desc: 'ç§ã‚’æ­£ã—ãã™ã‚‹ã‚‚ã®', detailed: 'å¤«, åèª‰, è·å ´'},
'åå°': {relation: 'ç¶™æ¯/éšœå®³', desc: 'ç§ã‚’åã£ã¦è‚²ã¦ã‚‹ã‚‚ã®', detailed: 'ç¶™æ¯, ç¾©æ¯, ä¸å®Œå…¨ãªå­¦æ¥­'},
'æ­£å°': {relation: 'æ¯/å­¦å•', desc: 'ç§ã‚’æ­£ã—ãè‚²ã¦ã‚‹ã‚‚ã®', detailed: 'æ¯, å­¦æ¥­, æ–‡æ›¸'}}};const SIX_RELATIONS_POSITION = {year: {name: 'å¹´æŸ±', meaning: 'å…ˆç¥–, ç¤¾ä¼š, åˆå¹´(1-15æ­³ï¼‰', body: 'é ­/é¡”'},
month: {name: 'æœˆæŸ±', meaning: 'çˆ¶æ¯, å…„å¼Ÿ, è·æ¥­, é’å¹´(16-30æ­³ï¼‰', body: 'èƒ¸/è‚©'},
day: {name: 'æ—¥æŸ±', meaning: 'æœ¬äºº, é…å¶è€…, å®¶åº­, ä¸­å¹´(31-45æ­³ï¼‰', body: 'è…°/è…¹éƒ¨'},
hour: {name: 'æ™‚æŸ±', meaning: 'å­å¥³, å¾Œè¼©, æ™©å¹´(46æ­³+)', body: 'è„š/è¶³'}};function analyzeYukcheon(saju, gender) {const dm = saju.day.s;const g = gender || GENDER || 'm';const yukData = SIX_RELATIONS[g];const result = {positions: [],
counts: {},
analysis: [],
spouse: null,
children: null,
parents: null};const pillars = [
{pos: 'year', pillar: saju.year},
{pos: 'month', pillar: saju.month},
{pos: 'day', pillar: saju.day},
{pos: 'hour', pillar: saju.hour}
];pillars.forEach(({pos, pillar}) => {if (!pillar) return;const stemGod = pos === 'day' ? {k: 'æ—¥å¹²', c: 'æ—¥å¹²'} : getTenGod(pillar.s, dm);const mainJJ = JIJANGGAN[BRANCH.indexOf(pillar.b)];const mainStem = mainJJ && mainJJ.length > 0 ? STEM[mainJJ[mainJJ.length - 1].stem] : null;const branchGod = mainStem ? getTenGod(mainStem, dm) : null;const posInfo = SIX_RELATIONS_POSITION[pos];const yukInfo = yukData[stemGod.c];result.positions.push({position: pos,
posName: posInfo.name,
posMeaning: posInfo.meaning,
stem: pillar.s,
branch: pillar.b,
stemGod: stemGod.c,
branchGod: branchGod ? branchGod.c : null,
relation: yukInfo ? yukInfo.relation : 'æœ¬äºº',
detailed: yukInfo ? yukInfo.detailed : 'è‡ªåˆ†è‡ªèº«'});if (stemGod.c !== 'æ—¥å¹²') {result.counts[stemGod.c] = (result.counts[stemGod.c] || 0) + 1;}
if (branchGod) {result.counts[branchGod.c] = (result.counts[branchGod.c] || 0) + 0.5;}});const spouseGod = g === 'm' ? 'æ­£è²¡' : 'æ­£å®˜';const spouseGod2 = g === 'm' ? 'åè²¡' : 'åå®˜';const spouseCount = (result.counts[spouseGod] || 0) + (result.counts[spouseGod2] || 0);const dayBranchState = getTwelveState(dm, saju.day.b);let hasHiddenSpouse = false;const branches = [saju.year.b, saju.month.b, saju.day.b];if (saju.hour) branches.push(saju.hour.b);branches.forEach(br => {const bi = BRANCH.indexOf(br);const jj = JIJANGGAN[bi];if (jj) {jj.forEach(j => {const jjGod = getTenGod(STEM[j.stem], dm);if (jjGod && (jjGod.c === spouseGod || jjGod.c === spouseGod2)) {hasHiddenSpouse = true;}});}});let spouseAnalysis = '';const dbi = BRANCH.indexOf(saju.day.b);const ybi = BRANCH.indexOf(saju.year.b);const mbi = BRANCH.indexOf(saju.month.b);const hbi = saju.hour ? BRANCH.indexOf(saju.hour.b) : -1;const otherBranches = [ybi, mbi];if (hbi >= 0) otherBranches.push(hbi);const chungPairs = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];let spouseClash = false;let spouseClashType = '';chungPairs.forEach(([a,b]) => {if ((dbi === a && otherBranches.includes(b)) || (dbi === b && otherBranches.includes(a))) {spouseClash = true;spouseClashType = 'æ²–(æ²–)';}});const harmPairs = [[3,8],[1,6],[3,4]];harmPairs.forEach(([a,b]) => {if ((dbi === a && otherBranches.includes(b)) || (dbi === b && otherBranches.includes(a))) {if (!spouseClash) {spouseClash = true;spouseClashType = 'å…ƒå—”/å®³(å®³)';}}});if (spouseCount === 0 && !hasHiddenSpouse) {spouseAnalysis = 'é…å¶è€…æ˜ŸãŒ ã‚ã‚Šã¾ã›ã‚“. çµå©šãŒ é…ã‚Œã‚‹ã‹ ç¸ãŒ å¼±ã„å¯èƒ½æ€§ ã‚ã‚Šã¾ã™. å¤§é‹ã§ å…¥ã‚‹ã¨ ç¸ãŒ ç”Ÿã¾ã‚Œã‚‹ã€‚';} else if (spouseCount === 0 && hasHiddenSpouse) {spouseAnalysis = 'å¤©å¹²ã« é…å¶è€…æ˜ŸãŒ ã¯ãªã„ãŒæ”¯è”µå¹²ã«éš ã‚Œ ã‚ã‚Šã¾ã™. è¡¨ã«å‡ºãªã„å®Ÿç›Šå‹ã®é…å¶è€…ã«å‡ºä¼šã£ãŸã‚Šã€ç´¹ä»‹ã‚ˆã‚Šè‡ªç„¶ãªå‡ºä¼šã„ã§ç¸ãŒç”Ÿã¾ã‚Œã‚‹ã€‚';} else if (spouseCount >= 2) {spouseAnalysis = 'é…å¶è€…æ˜ŸãŒ ãŒå¤šã„ã€‚ç•°æ€§ã«äººæ°—ã ãŒæµ®æ°— æ³¨æ„! ä¸€äººã®äººã«é›†ä¸­ã—ã¦ãã ã•ã„ã€‚';} else {spouseAnalysis = 'é…å¶è€…æ˜ŸãŒ é©åˆ‡ã§ã™. è‰¯ã„ ç¸ã«å‡ºä¼šãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚';}
if (spouseClash) {spouseAnalysis += ` âš ï¸ ãŸã ã—ã€é…å¶è€…å®®(æ—¥æ”¯)ãŒ${spouseClashType}ã‚’å—ã‘ã¦å¤«å©¦è‘›è—¤ãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚äº’ã„ã«è·é›¢ã‚’ç½®ãã‹å„è‡ªå¿™ã—ã„ç”Ÿæ´»ãŒã‚€ã—ã‚ è‰¯ã„ã§ã™.`;}
result.spouse = {god: spouseGod,
count: spouseCount,
dayBranch: dayBranchState,
analysis: spouseAnalysis};const childGod = g === 'm' ? ['åå®˜', 'æ­£å®˜'] : ['é£Ÿç¥', 'å‚·å®˜'];const childCount = (result.counts[childGod[0]] || 0) + (result.counts[childGod[1]] || 0);const hourPillar = saju.hour;let childAnalysis = '';if (!hourPillar) {childAnalysis = 'æ™‚æŸ±ãŒãªã„ãŸã‚ å­å¥³ åˆ†æãŒ é›£ã—ã„ã€‚';} else if (childCount === 0) {childAnalysis = 'å­å¥³æ˜Ÿ(å®˜æ˜Ÿ)ãŒ ã‚ã‚Šã¾ã›ã‚“. å­å¥³ãŒé…ã„ã‹å°‘ãªã„å¯èƒ½æ€§ ã‚ã‚Šã¾ã™. ã¾ãŸ çµ„ç¹”ç”Ÿæ´»ã‚ˆã‚Šè‡ªç”±ãªãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã‚„å°‚é–€è·ãŒ ã«ã‚ˆãåˆã†ã€‚è¦å¾‹ã‚ˆã‚Šå‰µé€ æ€§ã§å‹è² ã—ã¦ãã ã•ã„ï¼';} else if (childCount >= 2) {childAnalysis = 'å­å¥³æ˜ŸãŒ ãŒå¤šã„ã€‚ å­å¥³ã®ç¦ãŒã‚ã‚Šå­å¥³ãŒå¤šã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚';} else {childAnalysis = 'å­å¥³ ç¸ãŒ é©å½“ã§ã™.';}
result.children = {gods: childGod,
count: childCount,
analysis: childAnalysis};const fatherGod = 'åè²¡';const motherGod = 'æ­£å°';const fatherCount = result.counts[fatherGod] || 0;const motherCount = result.counts[motherGod] || 0;result.parents = {father: {god: fatherGod, count: fatherCount, analysis: fatherCount > 0 ? 'çˆ¶è¦ªã¨ ç¸ãŒ ã‚ã‚Šã¾ã™.' : 'çˆ¶ ç¸ãŒè–„ã„ã§ã™.'},
mother: {god: motherGod, count: motherCount, analysis: motherCount > 0 ? 'æ¯è¦ªã¨ã®ç¸ãŒæ·±ã„ã§ã™ã€‚' : 'æ¯è¦ªã®ç¸ãŒã‚„ã‚„è–„ã„ã§ã™ã€‚'}};for (let [god, count] of Object.entries(result.counts)) {if (count >= 2) {const info = yukData[god];if (info) {result.analysis.push({type: 'many',
god,
count,
meaning: `${god}ãŒ å¤šãã¦ ${info.detailed} é–¢é€£ã®å‡ºæ¥äº‹ãŒå¤šã„ã€‚`});}}}
const allGods = ['æ¯”è‚©','åŠ«è²¡','é£Ÿç¥','å‚·å®˜','åè²¡','æ­£è²¡','åå®˜','æ­£å®˜','åå°','æ­£å°'];allGods.forEach(god => {if (!result.counts[god]) {const info = yukData[god];if (info) {result.analysis.push({type: 'none',
god,
meaning: `${god}ãŒ ãªãã¦ ${info.detailed} ç¸ãŒè–„ã„ã§ã™.`});}}});return result;}
const FORMATS_INNER = {'æ¯”è‚©':{n:'æ¯”è‚©æ ¼',d:'ç‹¬ç«‹å¿ƒã¨ç«¶äº‰å¿ƒãŒå¼·ã„è‡ªæ‰‹æˆå®¶å‹ã§ã™ã€‚ äººã«è² ã‘ã‚‹ã®ã‚’å«Œã„è‡ªå°Šå¿ƒãŒå¼·ã„ã§ã™ã€‚å…„å¼Ÿã€åŒåƒšã¨ã®ç¸ãŒæ·±ã, å…±åŒäº‹æ¥­ã‚„å”åŠ›äº‹æ¥­ã§æˆåŠŸã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™. ãŸã ã— é ‘å›ºã§ç‹¬æ–­çš„ã«ãªã‚ŠãŒã¡ãªã®ã§ å”èª¿ã™ã‚‹å§¿å‹¢ãŒå¿…è¦ã§ã™ã€‚',b:'ç‹¬ç«‹ äº‹æ¥­, ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹, ã‚¹ãƒãƒ¼ãƒ„, ç«¶äº‰åˆ†é‡',lv:'ä¸­'},
'åŠ«è²¡':{n:'åŠ«è²¡æ ¼',d:'æŒ‘æˆ¦çš„ã§å‹è² æ¬²ãŒå¼·ã„ã§ã™ã€‚ åº¦èƒ¸ãŒã‚ã‚Šå¤§ããªã“ã¨ã«æŒ‘ã‚€ãŒ, æ™‚ã«ç„¡è¬€ã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™. è²¡ç‰©ã«å¯¾ã™ã‚‹æ¬²ãŒã‚ã‚ŠæŠ•æ©Ÿæ€§ãŒã‚ã‚Š ä¸€æ”«åƒé‡‘ã«é™¥ã‚Šã‚„ã™ã„ã§ã™. å¿è€å¿ƒã‚’é¤Šã„ç€å®Ÿã«åŠªåŠ›ã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚',b:'æŠ•è³‡, è³­åš, å†’é™ºäº‹æ¥­, å–¶æ¥­',lv:'ä¸‹'},
'é£Ÿç¥':{n:'é£Ÿç¥æ ¼',d:'ç”Ÿã¾ã‚ŒæŒã£ãŸæ‰èƒ½ãŒå¤šãè¡£é£Ÿä½ãŒè±Šã‹ã§ã™ã€‚é£Ÿã¹ç¦ãŒã‚ã‚Šæ€§æ ¼ãŒæ¥½å¤©çš„ã§ã™ã€‚èŠ¸è¡“çš„æ„Ÿè¦šã«å„ªã‚Œè¡¨ç¾åŠ›ãŒè‰¯ã„ã§ã™ã€‚å­ä¾›é‹ãŒè‰¯ãå¯¿å‘½ã‚‚é•·ã„æ–¹ã§ã™ã€‚ãŸã ã—æ€ ã‘ã‚„ã™ã„ã®ã§å‹¤å‹‰ã•ãŒå¿…è¦ã§ã™ã€‚',b:'é£²é£Ÿæ¥­ã€èŠ¸è¡“ã€æ•™è‚²ã€èŠ¸èƒ½ã€å‰µä½œ',lv:'ä¸Š'},
'å‚·å®˜':{n:'å‚·å®˜æ ¼',d:'å‰µæ„çš„ã§èŠ¸è¡“çš„æ„Ÿæ€§ã«å„ªã‚Œã¦ã„ã¾ã™. é ­ãŒè¡æ˜ã§å¼èˆŒãŒ è‰¯ã„ã§ã™. è¦å‰‡ã«ç¸›ã‚‰ã‚Œã‚‹ã®ã‚’å«Œã„è‡ªç”±ãªé­‚ã§ã™ã€‚ ãŸã ã—å£ãŒè’ãæ¨©å¨ã«åæŠ—ã™ã‚‹å‚¾å‘ãŒã‚ã‚Šä¸Šå¸ã¨è¡çªã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™.',b:'èŠ¸èƒ½, èŠ¸è¡“, è¬›æ¼”, æ‰¹è©•, ä¼ç”»',lv:'ä¸­'},
'åè²¡':{n:'åè²¡æ ¼',d:'äº‹æ¥­æ‰‹è…•ãŒè‰¯ãæŠ•è³‡æ„Ÿè¦šãŒå“è¶Šã—ã¦ã„ã¾ã™. æ¨ªè²¡é‹ãŒã‚ã‚Šé‡‘ãŒå¤§ããå…¥ã£ã¦ã¯å‡ºã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ ç¤¾äº¤æ€§ãŒè‰¯ãäººè„ˆãŒåºƒãã€çˆ¶ã¨ã®ç¸ãŒæ·±ã„ã§ã™. ç•°æ€§é‹ãŒè‰¯ã„ãŒæµ®æ°—ã«æ³¨æ„ï¼',b:'è²¿æ˜“, æµé€š, æŠ•è³‡, å–¶æ¥­, ä»²ä»‹æ¥­',lv:'ä¸Š'},
'æ­£è²¡':{n:'æ­£è²¡æ ¼',d:'èª å®Ÿã§è²¯è“„ã‚’ å¾—æ„ã§ã™. æ­£ç›´ã§ç€å®Ÿãªæ€§æ ¼ã§ä¿¡ç”¨ãŒè‰¯ã„ã§ã™. ç€å®Ÿã«è²¯ã‚ã¦å¯Œè±ªã«ãªã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ å®¶åº­çš„ã§é…å¶è€…ã¨ã®ç¸ãŒè‰¯ã„ã§ã™. ãŸã ã— å°å¿ƒã§åå—‡ã«è¦‹ãˆã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™.',b:'ä¼šè¨ˆ, é‡‘è, å…¬å‹™å“¡, ç®¡ç†è·',lv:'ä¸Š'},
'åå®˜':{n:'åå®˜æ ¼(ä¸ƒæ®ºæ ¼)',d:'æ¨©å¨ã¨æ¨é€²åŠ›ãŒã‚ã‚Šã¾ã™. ã‚«ãƒªã‚¹ãƒãŒã‚ã‚Šæ±ºæ–­åŠ›ãŒé€Ÿã„ã§ã™. ç«¶äº‰ã§å‹ã¡å‡ºä¸–ã—ã‚ˆã†ã¨ã™ã‚‹æ¬²æ±‚ãŒ å¼·ã„ã§ã™. ã†ã¾ãæ²»ã‚ã‚Œã°å°†è»ã®å™¨ã ãŒã€é–“é•ãˆã‚Œã°å¤šè¡€è³ªã§æ•µã‚’å¤šãä½œã‚Šã¾ã™.',b:'è»è­¦, æ³•æ›¹, æ”¿æ²», æ­¦è¡“, ã‚¹ãƒãƒ¼ãƒ„',lv:'ä¸­'},
'æ­£å®˜':{n:'æ­£å®˜æ ¼',d:'å“ä½ãŒã‚ã‚Šåèª‰ã‚’é‡è¦–ã—ã¾ã™. è¦ç¯„ã‚’ã‚ˆãå®ˆã‚Šè²¬ä»»æ„ŸãŒå¼·ã„ã§ã™ã€‚ çµ„ç¹”ã§èªã‚ã‚‰ã‚Œæ˜‡é€²ãŒé€Ÿã„ã§ã™. å®˜è·é‹ãŒã‚ã‚Šå…¬è·ã‚„å¤§ä¼æ¥­ã§æˆåŠŸã—ã¾ã™. ãŸã ã—èé€šæ€§ãŒä¸è¶³ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™.',b:'å…¬å‹™å“¡, å¤§ä¼æ¥­, æ³•æ›¹, æ•™è‚²ç•Œ',lv:'æœ€ä¸Š'},
'åå°':{n:'åå°æ ¼(åå°æ ¼/æ¢Ÿç¥æ ¼)',d:'å­¦ç©¶çš„ã§æ¢ç©¶å¿ƒãŒå¼·ã„ã§ã™ã€‚ç‹¬ç‰¹ãªæ€è€ƒæ–¹å¼ã§éå‡¡ãªã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å‡ºã—ã¾ã™ã€‚å®—æ•™ã€å“²å­¦ã€ç¥ç§˜å­¦ã«é–¢å¿ƒãŒå¤šã„ã§ã™ã€‚ãŸã ã—ä¸€ã¤ã®ã“ã¨ã«é›†ä¸­ã§ããšæœ€å¾Œã¾ã§ä»•ä¸Šã’ã‚‰ã‚Œãªã„å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚',b:'ç ”ç©¶, æŠ€è¡“, IT, å®—æ•™, åŒ»ç™‚',lv:'ä¸­'},
'æ­£å°':{n:'æ­£å°æ ¼',d:'äººå¾³ãŒã‚ã‚Šå­¦å•ã‚’ã‚ˆãã—ã¾ã™ã€‚æ¯ã¨ã®ç¸ãŒæ·±ãçˆ¶æ¯ã®å¾³ãŒã‚ã‚Šã¾ã™ã€‚å­¦ã³ã¸ã®æƒ…ç†±ãŒã‚ã‚Šå­¦è€…ã€æ•™è‚²è€…ã«é©ã—ã¦ã„ã¾ã™ã€‚æ€§æ ¼ãŒæ¸©åšã§äººã‚’ã‚ˆãä¸–è©±ã—ã¾ã™ã€‚',b:'æ•™è‚², å‡ºç‰ˆ, å­¦è¡“, å®—æ•™, ç¦ç¥‰',lv:'ä¸Š'}};const FORMATS_SPECIAL = {'jongwang': {n:'å¾“æ—ºæ ¼', d:'æ—¥å¹²ã®æ°—ãŒ æ¥µåº¦ã«å¼·ãæ¯”åŠ«ã§å¾“(å¾)ã™ã‚‹æ ¼ã§ã™ã€‚ è‡ªåˆ†ã®æ€ã„é€šã‚Šã«ç”Ÿããªã‘ã‚Œã°ãªã‚‰ãšã€ä»–äººã®ä¸‹ã§åƒãã¨æ¯è‹¦ã—ã„ã§ã™ã€‚è‡ªæ‰‹æˆå®¶ã™ã‚‹äº‹æ¥­å®¶ã€CEOã€ç‹¬ç«‹å°‚é–€å®¶ã«é©ã—ã¦ã„ã¾ã™ã€‚å¼·ã„è‡ªå°Šå¿ƒã¨æ¨é€²åŠ›ã§æˆåŠŸã—ã¾ã™ã€‚', b:'CEO, äº‹æ¥­å®¶, æ”¿æ²»å®¶, ç‹¬ç«‹å°‚é–€å®¶', lv:'ç‰¹æ®Š'},
'jonggang': {n:'å¾“å¼·æ ¼', d:'æ—¥å¹²ãŒå¼·ãå°æ˜Ÿã‚‚æ—ºç››ã§å°æ˜Ÿã§å¾“ã™ã‚‹æ ¼ã§ã™ã€‚å­¦å•ã¨åèª‰ã‚’é‡è¦–ã—æ¨©å¨ã‚ã‚‹åœ°ä½ã«ç™»ã‚Šã¾ã™ã€‚æ•™æˆã€ç ”ç©¶å“¡ã€é«˜ä½å…¬å‹™å“¡ã«é©ã—ã¦ã„ã¾ã™ã€‚', b:'æ•™æˆ, ç ”ç©¶å“¡, é«˜ä½å…¬è·', lv:'ç‰¹æ®Š'},
'jonga': {n:'å¾“å…æ ¼(å¾å…’æ ¼)', d:'é£Ÿå‚·ãŒæ¥µåº¦ã«æ—ºç››ã§ é£Ÿå‚·ã§ å¾“ã™ã‚‹æ ¼ã§ã™ã€‚ æ‰èƒ½ã¨è¡¨ç¾åŠ›ãŒå„ªã‚Œ èŠ¸è¡“, èŠ¸èƒ½, å‰µä½œã§ å¤§ãã æˆåŠŸã—ã¾ã™. è‡ªç”±ãªé­‚ã§ç”Ÿããªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚', b:'èŠ¸è¡“å®¶, èŠ¸èƒ½äºº, ä½œå®¶, ã‚¯ãƒªã‚¨ãƒ¼ã‚¿ãƒ¼', lv:'ç‰¹æ®Š'},
'jongjae': {n:'å¾“è²¡æ ¼', d:'è²¡æ˜ŸãŒæ¥µåº¦ã«æ—ºç››ã§ è²¡æ˜Ÿã§ å¾“ã™ã‚‹æ ¼ã§ã™ã€‚ è²¡ç‰©ã‚’æ‰±ã†èƒ½åŠ›ãŒå“è¶Šã—äº‹æ¥­å®¶ã€é‡‘èäººã§å¤§ããªå¯Œã‚’ç¯‰ãã¾ã™. é‡‘ã¨ç¸ãŒæ·±ã„ã§ã™ã€‚', b:'é‡‘èäºº, äº‹æ¥­å®¶, æŠ•è³‡å®¶, ä¸å‹•ç”£', lv:'ç‰¹æ®Š'},
'jongsal': {n:'å¾“æ®ºæ ¼', d:'å®˜æ®ºãŒæ¥µåº¦ã«æ—ºç››ã§å®˜æ®ºã«å¾“ã™ã‚‹æ ¼ã§ã™ã€‚ æ¨©åŠ›ã¨åèª‰ã‚’è¿½æ±‚ã—çµ„ç¹”ã§é«˜ã„åœ°ä½ã«å°±ãã¾ã™. è»è­¦ã€æ”¿æ²»äººã€é«˜ä½å½¹å“¡ã«é©ã—ã¦ã„ã¾ã™ã€‚', b:'è»è­¦, æ”¿æ²»äºº, å½¹å“¡, æ³•æ›¹äºº', lv:'ç‰¹æ®Š'},
'yangin': {n:'ç¾Šåˆƒæ ¼', d:'æ—¥æ”¯ã«ç¾ŠåˆƒãŒã‚ã‚Šæ¥µã‚ã¦å¼·ã„æ°—ã‚’æŒã¤æ ¼ã§ã™ã€‚ æ±ºæ–­åŠ›ã¨æ¨é€²åŠ›ãŒå¤§å¤‰ã§å±æ©Ÿã«å¼·ã„ã§ã™ã€‚ åˆƒ åŒã˜ æ€§æ ¼ã§ æ•µã‚’ä½œã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ãŒã€ã†ã¾ãä½¿ãˆã°è‹±é›„ã«ãªã‚Šã¾ã™ã€‚', b:'è»äºº, å¤–ç§‘åŒ», æ³•æ›¹äºº, ã‚¹ãƒãƒ¼ãƒ„é¸æ‰‹', lv:'ç‰¹æ®Š'},
'geonrok': {n:'å»ºç¦„æ ¼', d:'æœˆæ”¯ãŒæ—¥å¹²ã®å»ºç¦„åœ°ã§æ°—ãŒæ—ºç››ã§ã™ã€‚ è‡ªã‚‰ç«‹ã¡ä¸ŠãŒã‚‹è‡ªæ‰‹æˆå®¶å‹ã§ã€è·æ¥­å®‰å®šæ€§ãŒè‰¯ã„ã§ã™ã€‚ ç€å®ŸãªåŠªåŠ›ã§ä¸­å¹´ä»¥é™ç™ºç¦ã—ã¾ã™ã€‚', b:'å…¬å‹™å“¡ã€å°‚é–€è·ã€è‡ªå–¶æ¥­', lv:'ä¸Š'},
'woldeok': {n:'æœˆå¾³æ ¼', d:'æœˆå¾³è²´äººãŒã‚ã‚Šå¾³ãŒã‚ã‚Šå›°é›£ãªæ™‚ã«åŠ©ã‘ã‚’å—ã‘ã¾ã™ã€‚ äººå“ãŒè‰¯ãä¿¡é ¼ã•ã‚Œå®˜è·é‹ãŒã‚ã‚Šã¾ã™ã€‚', b:'å…¬è·, æ•™è‚², å®—æ•™', lv:'ä¸Š'}};function isFormatBroken(saju, formatGod) {const dm = saju.day.s;const dmEl = dm.e;const breakReasons = [];if (formatGod === 'æ­£å®˜') {const allPillars = [saju.year, saju.month, saju.day, saju.hour].filter(p => p);for (let p of allPillars) {const god = getTenGod(p.s, dm);if (god.c === 'å‚·å®˜') {breakReasons.push('å‚·å®˜è‚©å† : å‚·å®˜ãŒ æ­£å®˜ã‚’å‰‹ã—ã¦ç ´æ ¼');}}}
if (formatGod === 'é£Ÿç¥') {const allPillars = [saju.year, saju.month, saju.day, saju.hour].filter(p => p);for (let p of allPillars) {const god = getTenGod(p.s, dm);if (god.c === 'åå°') {breakReasons.push('æ¢Ÿç¥å¥ªé£Ÿ: åå°ãŒé£Ÿç¥ã‚’å‰‹ã—ã¦ç ´æ ¼');}}}
if (formatGod === 'æ­£è²¡' || formatGod === 'åè²¡') {let biCount = 0;const allPillars = [saju.year, saju.month, saju.day, saju.hour].filter(p => p);for (let p of allPillars) {const god = getTenGod(p.s, dm);if (god.c === 'æ¯”è‚©' || god.c === 'åŠ«è²¡') biCount++;}
if (biCount >= 2) {breakReasons.push('ç¾¤åŠ«äº‰è²¡: æ¯”åŠ«ãŒå¤šãè²¡ã‚’å¥ªã‚ã‚Œã‚‹');}}
return breakReasons;}
function checkYongOverwhelmed(saju, gods) {const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (p?.s) elCount[p.s.e]++;if (p?.b) elCount[p.b.e]++;});const yongCount = elCount[gods.yong] || 0;const giCount = elCount[gods.gi] || 0;if (giCount >= 3 && yongCount <= 1 && giCount >= yongCount * 3) {return { active: true, score: -2, desc: `âš ï¸ è¡°ç¥å†²æ—ºï¼šå¿Œç¥(${ELEMENT[gods.gi].k}) ${giCount}å€‹ vs ç”¨ç¥(${ELEMENT[gods.yong].k}) ${yongCount}å€‹ â†’ ç”¨ç¥ãŒæ¥ã¦ã‚‚åœ§å€’ã•ã‚Œã‚‹ï¼` };}
return { active: false, score: 0, desc: '' };}
function checkPyunInDoShik(saju, gods) {const dm = saju.day.s;const monthBi = BRANCH.findIndex(b => b.c === saju.month.b.c);const shikShinEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 1) % 5];const pyunInEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 4) % 5];if (saju.month.b.e !== shikShinEl) return { active: false, score: 0, desc: '' };const clashPairs = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];const branches = [saju.year.b, saju.month.b, saju.day.b, saju.hour?.b].filter(b => b);let found = false, detail = '';branches.forEach(b => {if (b.e === pyunInEl) {const bi = BRANCH.findIndex(br => br.c === b.c);clashPairs.forEach(([a, c]) => {if ((bi === a && monthBi === c) || (bi === c && monthBi === a)) {found = true;detail = `${b.c}(åå°)â†”${saju.month.b.c}(é£Ÿç¥)`;}});}});if (found) {return { active: true, score: -2, desc: `âš ï¸ åå°å€’é£Ÿï¼š${detail} å†² â†’ æ‰èƒ½ã¯ã‚ã‚‹ãŒæ•æ„Ÿã•ã®ãŸã‚æ©Ÿä¼šã‚’è¹´é£›ã°ã™å½¢å±€ï¼` };}
return { active: false, score: 0, desc: '' };}
function checkWangShinChungBal(yp, saju) {const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (p?.s) elCount[p.s.e]++;if (p?.b) elCount[p.b.e]++;});const wangElements = Object.entries(elCount).filter(([el, cnt]) => cnt >= 4);if (wangElements.length === 0) return { active: false, score: 0, desc: '' };const clashPairs = {'å­':'åˆ','åˆ':'å­','ä¸‘':'æœª','æœª':'ä¸‘','å¯…':'ç”³','ç”³':'å¯…','å¯':'é…‰','é…‰':'å¯','è¾°':'æˆŒ','æˆŒ':'è¾°','å·³':'äº¥','äº¥':'å·³'};const yearBranch = yp.b.c;const clashTarget = clashPairs[yearBranch];if (!clashTarget) return { active: false, score: 0, desc: '' };const branches = [saju.year.b, saju.month.b, saju.day.b, saju.hour?.b].filter(b => b);const targetBranches = branches.filter(b => b.c === clashTarget);if (targetBranches.length === 0) return { active: false, score: 0, desc: '' };const targetEl = targetBranches[0].e;const isWang = wangElements.some(([el]) => el === targetEl);if (isWang) {const wangCount = elCount[targetEl];return { active: true, score: -3, desc: `ğŸš¨ æ—ºç¥å†²ç™ºï¼š${yearBranch}(æ­³é‹)ãŒ${clashTarget}(åŸå±€)ã‚’å†²ï¼${ELEMENT[targetEl].k}ãŒ${wangCount}å€‹ã§æ—ºãªã®ã«è§¦ã‚ŒãŸ â†’ å¤§æ¿€å¤‰/äº‹æ•…/ç ´è²¡æ¥µåº¦æ³¨æ„ï¼` };}
return { active: false, score: 0, desc: '' };}
function checkSpecialFormat(saju, strength) {if (!strength.extreme) return null;const dm = saju.day.s;const ec = countElements(saju);const allPillars = [saju.year, saju.month, saju.day, saju.hour].filter(p => p);const godCounts = {bigeop:0, sikSang:0, jae:0, gwan:0, in:0};allPillars.forEach(p => {const god = getTenGod(p.s, dm);if (['æ¯”è‚©','åŠ«è²¡'].includes(god.c)) godCounts.bigeop++;if (['é£Ÿç¥','å‚·å®˜'].includes(god.c)) godCounts.sikSang++;if (['åè²¡','æ­£è²¡'].includes(god.c)) godCounts.jae++;if (['åå®˜','æ­£å®˜'].includes(god.c)) godCounts.gwan++;if (['åå°','æ­£å°'].includes(god.c)) godCounts.in++;});const ybi = saju.year ? BRANCH.findIndex(b => b.c === saju.year.b.c) : -1;const hasSikSangWithRoot = saju.year && ['å‚·å®˜','é£Ÿç¥'].includes(getTenGod(saju.year.s, saju.day.s)?.c) &&
(ybi === 5 || ybi === 6);if (strength.extreme === 'æ¥µèº«å¼·' && !hasSikSangWithRoot) {if (godCounts.bigeop >= 3) return FORMATS_SPECIAL.jongwang;if (godCounts.in >= 2 && godCounts.bigeop >= 2) return FORMATS_SPECIAL.jonggang;}
if (strength.extreme === 'æ¥µèº«å¼±') {if (godCounts.sikSang >= 3) return FORMATS_SPECIAL.jonga;if (godCounts.jae >= 3) return FORMATS_SPECIAL.jongjae;if (godCounts.gwan >= 3) return FORMATS_SPECIAL.jongsal;}
return null;}
function checkYangInGeonRok(saju) {const dm = saju.day.s;const dsi = STEM.indexOf(dm);const mbi = BRANCH.indexOf(saju.month.b);const geonrokMap = {0:2, 1:3, 2:5, 3:6, 4:5, 5:6, 6:8, 7:9, 8:11, 9:0};const yanginMap = {0:3, 1:2, 2:6, 3:5, 4:6, 5:5, 6:9, 7:8, 8:0, 9:11};if (mbi === geonrokMap[dsi]) {return FORMATS_SPECIAL.geonrok;}
const dbi = BRANCH.indexOf(saju.day.b);if (dbi === yanginMap[dsi]) {return {...FORMATS_SPECIAL.yangin, hasYangIn: true};}
return null;}
function calcFormat(saju, strength, samhapResult) {const str = strength || calcStrength(saju);const specialFormat = checkSpecialFormat(saju, str);if (specialFormat) {return {...specialFormat, type:'special', god:'ç‰¹æ®Š'};}
const yangInGeonRok = checkYangInGeonRok(saju);if (yangInGeonRok && yangInGeonRok.n.includes('ç¾Šåˆƒ')) {return {...yangInGeonRok, type:'special', god:'ç¾Šåˆƒ'};}
if (samhapResult && samhapResult.complete) {const samhapEl = samhapResult.element;const dm = saju.day.s;const dmEl = dm.e;const EL_ORDER = ['wood','fire','earth','metal','water'];const dmIdx = EL_ORDER.indexOf(dmEl);const samhapIdx = EL_ORDER.indexOf(samhapEl);const diff = (samhapIdx - dmIdx + 5) % 5;let samhapGod = '';let samhapFormatInfo = null;if (diff === 0) {samhapGod = 'æ¯”è‚©';} else if (diff === 1) {samhapGod = 'é£Ÿç¥';} else if (diff === 2) {samhapGod = 'åè²¡';} else if (diff === 3) {samhapGod = 'åå®˜';samhapFormatInfo = {n: `åå®˜æ ¼(${samhapResult.name} å¤‰æ ¼)`,
d: `${samhapResult.name}ãŒ å®Œæˆã—å®˜æ®ºãŒå¤ªæ—ºã—ã¾ã™ã€‚ é£Ÿç¥åˆ¶æ®ºãŒå¿…è¦ã§ã€åˆ¶æ®ºã•ã‚Œã‚Œã°æ¨©åŠ›ã¨æˆåŠŸã‚’å¾—ã¾ã™ã€‚ åˆ€ã‚’æ¡ã£ãŸå°†è»ã®æ°—è³ªãŒã‚ã‚Šã¾ã™ã€‚`,
b: 'è»è­¦, æ¤œå¯Ÿ, åŒ»ç™‚, ç›£æŸ», æ³•æ›¹ç•Œ',
formatReason: `${samhapResult.name} å®Œå…¨æˆç«‹ã§ å®˜æ®º æ”¯é…`};} else if (diff === 4) {samhapGod = 'åå°';}
if (samhapFormatInfo) {return {...samhapFormatInfo,
god: samhapGod,
type: 'samhap_variation',
samhapBureau: samhapResult.name};}}
const mbi = BRANCH.indexOf(saju.month.b);const jj = JIJANGGAN[mbi];const mainJj = jj.find(j => j.days >= 16) || jj[jj.length - 1];const mainStem = STEM[mainJj.stem];const god = getTenGod(mainStem, saju.day.s);const monthGod = getTenGod(saju.month.s, saju.day.s);let finalGod = god.c;let formatReason = 'æœˆæ”¯ æ­£æ°—';if (['é£Ÿç¥','å‚·å®˜','åè²¡','æ­£è²¡','åå®˜','æ­£å®˜','åå°','æ­£å°'].includes(monthGod.c)) {const monthStemIdx = STEM.indexOf(saju.month.s);if (jj.some(j => j.stem === monthStemIdx)) {finalGod = monthGod.c;formatReason = 'æœˆå¹² é€å‡º+æœˆæ”¯ é€šæ ¹';}
const brs = [BRANCH.indexOf(saju.year.b), mbi, BRANCH.indexOf(saju.day.b)];if (saju.hour) brs.push(BRANCH.indexOf(saju.hour.b));const samhapSets = [
{branches: [2,6,10], result: 'fire', name: 'å¯…åˆæˆŒ ç«å±€'},
{branches: [5,9,1], result: 'metal', name: 'å·³é…‰ä¸‘ é‡‘å±€'},
{branches: [8,0,4], result: 'water', name: 'ç”³å­è¾° æ°´å±€'},
{branches: [11,3,7], result: 'wood', name: 'äº¥å¯æœªæœ¨å±€'}
];const monthStemElement = saju.month.s.e;for (const sh of samhapSets) {const hasCount = sh.branches.filter(b => brs.includes(b)).length;const hasCenter = brs.includes(sh.branches[1]);if (hasCount >= 2 && hasCenter) {const resultElementKey = sh.result;if (monthStemElement === resultElementKey) {finalGod = monthGod.c;formatReason = hasCount === 3 ?
`æœˆå¹² é€å‡º+${sh.name} å®Œæˆ` :
`æœˆå¹² é€å‡º+${sh.name} åŠåˆ(æ—ºæ”¯å«ã‚€)`;break;}}}
if (finalGod !== monthGod.c) {const otherBranches = [saju.year.b, saju.day.b];if (saju.hour) otherBranches.push(saju.hour.b);for (const br of otherBranches) {const brIdx = BRANCH.indexOf(br);const brJj = JIJANGGAN[brIdx];if (brJj.some(j => j.stem === monthStemIdx)) {for (const sh of samhapSets) {const hasCount = sh.branches.filter(b => brs.includes(b)).length;const hasCenter = brs.includes(sh.branches[1]);if (hasCount >= 2 && hasCenter && sh.branches.includes(brIdx)) {finalGod = monthGod.c;formatReason = `æœˆå¹² é€å‡º+${br.c}æ”¯é€šæ ¹+${sh.name.split(' ')[0]} åŠåˆ`;break;}}
if (finalGod === monthGod.c) break;}}}}
const dmEl = saju.day.s.e;const wealthEl = EL_ORDER[(EL_ORDER.indexOf(dmEl) + 2) % 5];const ec = countElements(saju);const wealthPower = ec[wealthEl] || 0;if (wealthPower >= 3 && ['é£Ÿç¥','å‚·å®˜'].includes(finalGod)) {const str = calcStrength(saju);if (str.type === 'weak') {const dayIdx = EL_ORDER.indexOf(dmEl);const wealthGod = (dayIdx % 2 === 0) ? 'åè²¡' : 'æ­£è²¡';finalGod = wealthGod;formatReason = `åœ°æ”¯ è²¡æ˜Ÿ(${ELEMENT[wealthEl].k}) å¤ªæ—º - è²¡å¤šèº«å¼±`;}}
if (yangInGeonRok && yangInGeonRok.n.includes('å»ºç¦„')) {return {...yangInGeonRok, type:'inner', god:'å»ºç¦„'};}
const breakReasons = isFormatBroken(saju, finalGod);const f = FORMATS_INNER[finalGod] || FORMATS_INNER['æ­£å®˜'];return {...f,
god: finalGod,
type: 'inner',
broken: breakReasons.length > 0,
breakReasons,
tougan: monthGod.c !== god.c ? monthGod.c : null,
formatReason};}
function calcFormatSimple(saju) {const god = getTenGod(saju.month.s, saju.day.s);const f = FORMATS_INNER[god.c] || FORMATS_INNER['æ­£å®˜'];f.god = god.c;return f;}
function getIljuDesc(ds, db) {const iljuData = {'ç”²å­':{t:'ç”²å­(ãã®ãˆã­)æ—¥æŸ± - æµ·è¾ºã®å¤§æ¨¹',d:'å­æ°´ãŒç”²æœ¨ã‚’ç”Ÿã˜ã‚‹ãŸã‚è¡æ˜ã§å­¦å•ã«æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚é ­ãŒè‰¯ãè¨ˆç”»æ€§ãŒã‚ã‚Šã¾ã™ãŒã€æ™‚ã«å¿ƒé…æ€§ã§ã™ã€‚å¤œç”Ÿã¾ã‚Œã ã¨ã•ã‚‰ã«è‰¯ãã€é…å¶è€…ã¨ã®æƒ…ãŒæ·±ã„ã§ã™ã€‚',s:'é…å¶è€…ãŒçŸ¥çš„ã§å†…åŠ©ã®åŠŸãŒã‚ã‚Šã¾ã™ã€‚å¹´ä¸‹ã¨ç›¸æ€§ãŒè‰¯ãã€æ°´è¾ºã§ç¸ã‚’çµã³ã‚„ã™ã„ã§ã™ã€‚'},
'ç”²å¯…':{t:'ç”²å¯…(ãã®ãˆã¨ã‚‰)æ—¥æŸ± - è™ã«ä¹—ã‚‹æœ¨',d:'æ—¥å¹²ã¨æ—¥æ”¯ãŒåŒã˜äº”è¡Œã§è‡ªå°Šå¿ƒãŒå¼·ãç‹¬ç«‹å¿ƒãŒã‚ã‚Šã¾ã™ã€‚é•·ç”·é•·å¥³ã®æ°—è³ªãŒã‚ã‚Šãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒã‚ã‚Šã¾ã™ã€‚é ‘å›ºã§è² ã‘ãšå«Œã„ã§ã™ã€‚',s:'é…å¶è€…ã‚‚è‡ªå°Šå¿ƒãŒå¼·ãã¶ã¤ã‹ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚äº’ã„ã«è­²ã‚‹å§¿å‹¢ãŒå¿…è¦ã§ã™ã€‚'},
'ç”²è¾°':{t:'ç”²è¾°(ãã®ãˆãŸã¤)æ—¥æŸ± - é¾ã«ä¹—ã‚‹æœ¨',d:'è¾°åœŸãŒæœ¨ã®æ ¹ã¨ãªã‚Šæ‰èƒ½ãŒè±Šå¯Œã§ã™ã€‚é‡å¿ƒãŒå¤§ããå‡ºä¸–æ¬²ãŒã‚ã‚Šã¾ã™ã€‚æ–‡æ˜Œã®æ°—ãŒã‚ã‚Šå­¦å•ã«é•·ã‘ã€ç¤¾ä¼šçš„ã«èªã‚ã‚‰ã‚Œã‚„ã™ã„ã§ã™ã€‚',s:'é…å¶è€…ãŒé ¼ã‚‚ã—ãè²¡é‹ãŒã‚ã‚Šã¾ã™ã€‚å¯ãƒ»é…‰ã®ç›¸æ€§ãŒè‰¯ã„ã§ã™ã€‚'},
'ç”²åˆ':{t:'ç”²åˆ(ãã®ãˆã†ã¾)æ—¥æŸ± - å¤ªé™½ã®ä¸‹ã®å¤§æœ¨',d:'æœ¨ç”Ÿç«ã§æ‰èƒ½ã‚’ç™ºæ®ã—ã‚„ã™ã„ã§ã™ã€‚è¯ã‚„ã‹ã§èŠ¸è¡“çš„æ„Ÿè¦šã«å„ªã‚Œã¦ã„ã¾ã™ã€‚æ€§æ ¼ãŒæ€¥ã§æƒ…ç†±çš„ã€äººæ°—ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒæ´»ç™ºã§ç¤¾äº¤çš„ã§ã™ã€‚æ¿€ã—ã„æ€§æ ¼ã§äº‰ã„ãŒã‚ã‚Šå¾—ã‚‹ãŸã‚ã€äº’ã„ã«å°Šé‡ãŒå¿…è¦ã§ã™ã€‚'},
'ç”²ç”³':{t:'ç”²ç”³(ãã®ãˆã•ã‚‹)æ—¥æŸ± - æ–§ã‚’å—ã‘ã‚‹æœ¨',d:'é‡‘å‰‹æœ¨ã§äººç”Ÿã«è©¦ç·´ãŒã‚ã‚Šã¾ã™ãŒã€ä¹—ã‚Šè¶Šãˆã‚Œã°å¼·ããªã‚Šã¾ã™ã€‚æ±ºæ–­åŠ›ã¨æ¨é€²åŠ›ãŒç”Ÿã¾ã‚Œã€é€†å¢ƒã«å¼·ã„ã§ã™ã€‚',s:'é…å¶è€…ã¨è‘›è—¤ãŒã‚ã‚Šå¾—ã¾ã™ã€‚ç•°ãªã‚‹æ€§æ ¼ã‚’èªã‚åˆã„é…æ…®ãŒå¿…è¦ã§ã™ã€‚'},
'ç”²æˆŒ':{t:'ç”²æˆŒ(ãã®ãˆã„ã¬)æ—¥æŸ± - ç§‹ã®å±±ã®æœ¨',d:'æˆŒåœŸã®ä¸­ã®é‡‘æ°—ãŒæœ¨ã‚’å‰‹ã—å­¤ç‹¬ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚èŠ¸è¡“çš„æ‰èƒ½ãŒã‚ã‚Šå®—æ•™ãƒ»å“²å­¦ã«é–¢å¿ƒãŒå¤šã„ã§ã™ã€‚å¤§å™¨æ™©æˆå‹ã§ã™ã€‚',s:'é…å¶è€…ã¨ã®ç¸ãŒé…ã‚ŒãŸã‚Šã€æ­»åˆ¥ãƒ»é›¢åˆ¥ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚'},
'ä¹™ä¸‘':{t:'ä¹™ä¸‘(ãã®ã¨ã†ã—)æ—¥æŸ± - å†¬ã®å¤§åœ°ã®å°ã•ãªè‰',d:'ä¸‘åœŸãŒä¹™æœ¨ã®æ ¹ã¨ãªã‚Šç²˜ã‚Šå¼·ã„ã§ã™ã€‚èª å®Ÿã§ç¾å®Ÿçš„ã€ç€å®Ÿã«è²¡ã‚’ç¯‰ãã¾ã™ã€‚ãŸã ã—å†…å‘çš„ã§æ¶ˆæ¥µçš„ã«ãªã‚ŠãŒã¡ã§ã™ã€‚',s:'é…å¶è€…ãŒé ¼ã‚‚ã—ãçµŒæ¸ˆçš„ã«å®‰å®šã—ã¦ã„ã¾ã™ã€‚'},
'ä¹™å¯':{t:'ä¹™å¯(ãã®ã¨ã†)æ—¥æŸ± - æ˜¥ã®èŠ±',d:'æ—¥å¹²ã¨æ—¥æ”¯ãŒåŒã˜ã§è‡ªåˆ†ã®ä¸»è¦³ãŒã¯ã£ãã‚Šã—ã¦ã„ã¾ã™ã€‚ç¹Šç´°ã§èŠ¸è¡“çš„ã€äººæ°—ãŒã‚ã‚Šã¾ã™ã€‚æŸ”ã‚‰ã‹ã„å¤–è¦‹ã«åã—ã¦é ‘å›ºã§ã™ã€‚',s:'é…å¶è€…ãŒè‡ªåˆ†ã¨ä¼¼ãŸæ€§å‘ã§ã™ã€‚äº’ã„ã«å°Šé‡ã™ã‚Œã°è‰¯ã„ç¸ã§ã™ã€‚'},
'ä¹™å·³':{t:'ä¹™å·³(ãã®ã¨ã¿)æ—¥æŸ± - å¤ªé™½ã‚’æµ´ã³ã‚‹èŠ±',d:'æœ¨ç”Ÿç«ã§æ‰èƒ½ã‚’ç™ºæ®ã—ã¾ã™ã€‚è¡æ˜ã§å¼ãŒç«‹ã¡ç¤¾äº¤æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç•°æ€§ã«äººæ°—ãŒã‚ã‚Šæ‹æ„›é‹ãŒè‰¯ã„ã§ã™ã€‚',s:'é…å¶è€…ãŒæƒ…ç†±çš„ã§ã™ã€‚æµ®æ°—ã«æ³¨æ„ï¼'},
'ä¹™æœª':{t:'ä¹™æœª(ãã®ã¨ã²ã¤ã˜)æ—¥æŸ± - å¤ã®åº­ã®èŠ±',d:'æœ¨å‰‹åœŸã§è²¡ã‚’å–ã‚‹ãŸã‚äº‹æ¥­æ‰‹è…•ãŒè‰¯ã„ã§ã™ã€‚èŠ¸è¡“çš„æ„Ÿè¦šã¨è³‡ç”£é‹ç”¨èƒ½åŠ›ãŒã‚ã‚Šã¾ã™ã€‚å¥³æ€§ã«ç‰¹ã«è‰¯ã„æ—¥æŸ±ã§ã™ã€‚',s:'é…å¶è€…ãŒç©ã‚„ã‹ã§å®¶åº­çš„ã§ã™ã€‚çµå©šå¾Œã«è²¡ãŒå¢—ãˆã¾ã™ã€‚'},
'ä¹™é…‰':{t:'ä¹™é…‰(ãã®ã¨ã¨ã‚Š)æ—¥æŸ± - ç§‹ã®éœœã‚’å—ã‘ã‚‹èŠ±',d:'é‡‘å‰‹æœ¨ã§è©¦ç·´ãŒã‚ã‚Šã¾ã™ãŒå¿è€ã™ã‚Œã°æˆåŠŸã—ã¾ã™ã€‚é‹­ãæ‰¹åˆ¤çš„ã§ã€è·æ¥­äººã¨ã—ã¦æˆåŠŸã—ã‚„ã™ã„ã§ã™ã€‚',s:'é…å¶è€…ã¨è‘›è—¤ãŒã‚ã‚Šå¾—ã¾ã™ã€‚äº’ã„ã«æ­©ã¿å¯„ã‚‹åŠªåŠ›ãŒå¿…è¦ã§ã™ã€‚'},
'ä¹™äº¥':{t:'ä¹™äº¥(ãã®ã¨ã„)æ—¥æŸ± - æ°´ã«æµ®ã‹ã¶è“®',d:'æ°´ç”Ÿæœ¨ã§æ‰èƒ½ãŒè±Šå¯Œã§ã™ã€‚çŸ¥æµæ·±ãå­¦å•ã«é•·ã‘ã€è²´äººã®åŠ©ã‘ã‚’å—ã‘ã‚„ã™ã„ã§ã™ã€‚æŸ”è»Ÿã§é©å¿œåŠ›ãŒè‰¯ã„ã§ã™ã€‚',s:'é…å¶è€…ãŒçŸ¥çš„ã§ç”Ÿæ´»åŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'ä¸™å­':{t:'ä¸™å­(ã²ã®ãˆã­)æ—¥æŸ± - æ¹–ä¸Šã®å¤ªé™½',d:'æ°´å‰‹ç«ã§è©¦ç·´ãŒã‚ã‚Šã¾ã™ãŒä¹—ã‚Šè¶Šãˆã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚å†·ãŸã„æ°´ã«æ˜ ã‚‹æ¸©ã‹ã„å¤ªé™½ã®ã‚ˆã†ã«äºŒé¢æ€§ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ã¨æ€§æ ¼å·®ãŒã‚ã‚Šå¾—ã¾ã™ã€‚äº’ã„ã«è£œã„åˆãˆã°è‰¯ã„ç¸ã§ã™ã€‚'},
'ä¸™å¯…':{t:'ä¸™å¯…(ã²ã®ãˆã¨ã‚‰)æ—¥æŸ± - å±±ä¸Šã®æ—¥ã®å‡º',d:'æœ¨ç”Ÿç«ã§åŠ›å¼·ã„ã§ã™ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒã‚ã‚Šé€²å–çš„ã§ã™ã€‚æ˜ã‚‹ãç©æ¥µçš„ã§å‘¨å›²ã«å½±éŸ¿åŠ›ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒçŒ®èº«çš„ã§æ”¯ãˆã¦ãã‚Œã¾ã™ã€‚è‰¯ã„å†…åŠ©ã®åŠŸãŒã‚ã‚Šã¾ã™ã€‚'},
'ä¸™è¾°':{t:'ä¸™è¾°(ã²ã®ãˆãŸã¤)æ—¥æŸ± - é¾ã®ç‚',d:'è¾°åœŸã¯æ¹¿åœŸã§ç«ã‚’èª¿ç¯€ã—ã¾ã™ã€‚å£®å¤§ãªé‡å¿ƒã¨å®Ÿè¡ŒåŠ›ã‚’æŒã¡ã¾ã™ã€‚ç¤¾ä¼šçš„ã«æˆåŠŸã—ã‚„ã™ã„çµ„ã¿åˆã‚ã›ã§ã™ã€‚',s:'é…å¶è€…ãŒå®‰å®šçš„ã§è²¡é‹ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚'},
'ä¸™åˆ':{t:'ä¸™åˆ(ã²ã®ãˆã†ã¾)æ—¥æŸ± - çœŸæ˜¼ã®å¤ªé™½',d:'ç«ãŒæœ€ã‚‚å¼·ã„çŠ¶æ…‹ã§æƒ…ç†±ã¨ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«æº€ã¡ã¦ã„ã¾ã™ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒå¼·ã„ã§ã™ãŒã€å‚²æ…¢ã«ãªã‚‰ãªã„ã‚ˆã†æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚',s:'é…å¶è€…ã‚‚æƒ…ç†±çš„ã§è¡çªã—ã‚„ã™ã„ã§ã™ã€‚äº’ã„ã®ç©ºé–“ã‚’å°Šé‡ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚'},
'ä¸™ç”³':{t:'ä¸™ç”³(ã²ã®ãˆã•ã‚‹)æ—¥æŸ± - é»„é‡‘ã®å¤•é™½',d:'ç«å‰‹é‡‘ã§è²¡ã‚’å–ã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚å®Ÿå‹™èƒ½åŠ›ãŒé«˜ãé‡‘éŠ­æ„Ÿè¦šã«å„ªã‚Œã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒæœ‰èƒ½ã§çµŒæ¸ˆåŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'ä¸™æˆŒ':{t:'ä¸™æˆŒ(ã²ã®ãˆã„ã¬)æ—¥æŸ± - ç„šãç«',d:'æˆŒåœŸã«ç«ãŒå…¥ã‚Šæš–ã‹ã•ã‚’æ”¾ã¡ã¾ã™ã€‚äººã‚’é›†ã‚ã‚‹é­…åŠ›ãŒã‚ã‚Šã€æ™©å¹´ãŒè‰¯ã„ã§ã™ã€‚å®—æ•™ãƒ»å“²å­¦ã¸ã®é–¢å¿ƒãŒæ·±ã„ã§ã™ã€‚',s:'é…å¶è€…ãŒæ¸©åšã§å®‰å®šçš„ã§ã™ã€‚'},
'ä¸ä¸‘':{t:'ä¸ä¸‘(ã²ã®ã¨ã†ã—)æ—¥æŸ± - é›ªã®ä¸­ã®è‹ç‡­',d:'ä¸‘åœŸãŒç«ã‚’å¼±ã‚ã¾ã™ãŒã€æš—é—‡ã§å…‰ã‚‹å­˜åœ¨ã§ã™ã€‚å¿è€åŠ›ãŒã‚ã‚Šå›°é›£ãªä¸­ã§ã‚‚è¼ãã¾ã™ã€‚å­¦å•ãƒ»ç ”ç©¶ã«å‘ã„ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒå …å®Ÿã§çµŒæ¸ˆçš„ã«å®‰å®šã—ã¦ã„ã¾ã™ã€‚'},
'ä¸å¯':{t:'ä¸å¯(ã²ã®ã¨ã†)æ—¥æŸ± - åº­åœ’ã®ç¯ã‚Š',d:'æœ¨ç”Ÿç«ã§çŸ¥æµã®ç‚ãŒæ˜ã‚‹ãç‡ƒãˆã¾ã™ã€‚ç©ã‚„ã‹ã§å„ªã—ã„æ€§æ ¼ã§ã™ãŒã€å†…é¢ã«å¼·ã„æ„å¿—ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒçŒ®èº«çš„ã§è‰¯ã„é–¢ä¿‚ã‚’ç¯‰ã‘ã¾ã™ã€‚'},
'ä¸å·³':{t:'ä¸å·³(ã²ã®ã¨ã¿)æ—¥æŸ± - æ¾æ˜ã‚’æŒã¤è€…',d:'å·³ç«ãŒä¸ç«ã‚’åŠ©ã‘ã€çŸ¥æµã¨æ´å¯ŸåŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚ç¥ç§˜çš„ãªé­…åŠ›ãŒã‚ã‚Šã€ç ”ç©¶ãƒ»å­¦è¡“åˆ†é‡ã§æˆåŠŸã—ã‚„ã™ã„ã§ã™ã€‚',s:'é…å¶è€…ãŒè¡æ˜ã§æƒ…ç†±çš„ã§ã™ã€‚'},
'ä¸æœª':{t:'ä¸æœª(ã²ã®ã¨ã²ã¤ã˜)æ—¥æŸ± - æš–ç‚‰ã®ç«',d:'ç«ç”ŸåœŸã§å®¶åº­ã‚’æ¸©ã‚ã¾ã™ã€‚æ¸©åšã§å®¶åº­çš„ã€å‘¨å›²ã«å®‰ã‚‰ãã‚’ä¸ãˆã¾ã™ã€‚æ–™ç†ã‚„èŠ¸è¡“ã«æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒç©ã‚„ã‹ã§å®¶åº­ã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚'},
'ä¸é…‰':{t:'ä¸é…‰(ã²ã®ã¨ã¨ã‚Š)æ—¥æŸ± - é›å†¶å ´ã®ç«èŠ±',d:'ç«å‰‹é‡‘ã§ç²¾å¯†ãªä½œæ¥­ã«å‘ã„ã¦ã„ã¾ã™ã€‚æŠ€è¡“åŠ›ãŒã‚ã‚Šè·äººçš„ãªæ‰èƒ½ã‚’æŒã¡ã¾ã™ã€‚å®Œç’§ä¸»ç¾©çš„ãªå‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒæœ‰èƒ½ã§çµŒæ¸ˆåŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'ä¸äº¥':{t:'ä¸äº¥(ã²ã®ã¨ã„)æ—¥æŸ± - æ°´é¢ã®æ˜Ÿæ˜ã‹ã‚Š',d:'æ°´å‰‹ç«ã§ã™ãŒç¾ã—ã„çµ„ã¿åˆã‚ã›ã§ã™ã€‚èŠ¸è¡“çš„æ„Ÿæ€§ã¨çŸ¥çš„å¥½å¥‡å¿ƒã«æº¢ã‚Œã¦ã„ã¾ã™ã€‚ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ã§å¤¢æƒ³çš„ã§ã™ã€‚',s:'é…å¶è€…ãŒçŸ¥çš„ã§æ·±ã„ç†è§£åŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'æˆŠå­':{t:'æˆŠå­(ã¤ã¡ã®ãˆã­)æ—¥æŸ± - å±±ã®æ³‰',d:'åœŸå‰‹æ°´ã§è²¡é‹ãŒã‚ã‚Šã¾ã™ã€‚ç¾å®Ÿçš„ã§å …å®Ÿã€ç€å®Ÿã«æˆåŠŸã‚’ç¯‰ãã¾ã™ã€‚é ‘å›ºã§ã™ãŒä¿¡é ¼ã§ãã‚‹æ€§æ ¼ã§ã™ã€‚',s:'é…å¶è€…ãŒè¡æ˜ã§çµŒæ¸ˆçš„ã«å®‰å®šã—ã¦ã„ã¾ã™ã€‚'},
'æˆŠå¯…':{t:'æˆŠå¯…(ã¤ã¡ã®ãˆã¨ã‚‰)æ—¥æŸ± - è™ã®å±±',d:'å¯…æœ¨ãŒåœŸã‚’å‰‹ã—ã¾ã™ãŒã€å¤§ããªå±±ã¯å‹•ã˜ã¾ã›ã‚“ã€‚å¨å³ãŒã‚ã‚Šä¿è­·æœ¬èƒ½ãŒå¼·ã„ã§ã™ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒæ´»ç™ºã§è¡Œå‹•åŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'æˆŠè¾°':{t:'æˆŠè¾°(ã¤ã¡ã®ãˆãŸã¤)æ—¥æŸ± - é¾å³°',d:'è¾°åœŸã¨æˆŠåœŸãŒé‡ãªã‚Šã€å£®å¤§ãªå™¨ã‚’æŒã¡ã¾ã™ã€‚å¤§å¿—ãŒã‚ã‚Šç¤¾ä¼šçš„ã«å¤§ããªæˆåŠŸã‚’åã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒé ¼ã‚‚ã—ãå®‰å®šçš„ã§ã™ã€‚'},
'æˆŠåˆ':{t:'æˆŠåˆ(ã¤ã¡ã®ãˆã†ã¾)æ—¥æŸ± - ç«å±±',d:'ç«ç”ŸåœŸã§åŠ›ãŒå¼·ã„ã§ã™ã€‚æƒ…ç†±ã¨è¡Œå‹•åŠ›ã«æº€ã¡ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒã‚ã‚Šã¾ã™ã€‚æ€¥ãªæ€§æ ¼ã«æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚',s:'é…å¶è€…ãŒæƒ…ç†±çš„ã§æ´»ç™ºã§ã™ã€‚'},
'æˆŠç”³':{t:'æˆŠç”³(ã¤ã¡ã®ãˆã•ã‚‹)æ—¥æŸ± - æ¡çŸ³å ´ã®å²©',d:'åœŸç”Ÿé‡‘ã§æ‰èƒ½ã‚’ç”Ÿã¿å‡ºã—ã¾ã™ã€‚å®Ÿå‹™èƒ½åŠ›ãŒé«˜ãçµ„ç¹”ã§ã®æˆåŠŸã«å‘ã„ã¦ã„ã¾ã™ã€‚å …å®Ÿã§ä¿¡é ¼ã§ãã¾ã™ã€‚',s:'é…å¶è€…ãŒæœ‰èƒ½ã§ç¤¾äº¤çš„ã§ã™ã€‚'},
'æˆŠæˆŒ':{t:'æˆŠæˆŒ(ã¤ã¡ã®ãˆã„ã¬)æ—¥æŸ± - å¤ä»£ã®å±±',d:'åœŸãŒé‡ãªã‚Šå®‰å®šæ„ŸãŒã‚ã‚Šã¾ã™ã€‚ä¿¡é ¼ã¨å¿è€ã®è±¡å¾´ã§ã™ã€‚å¤§å™¨æ™©æˆå‹ã§ã€æ™‚é–“ã‚’ã‹ã‘ã¦æˆåŠŸã—ã¾ã™ã€‚',s:'é…å¶è€…ã¨ã®ç¸ãŒé…ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å¿è€ãŒå¿…è¦ã§ã™ã€‚'},
'å·±ä¸‘':{t:'å·±ä¸‘(ã¤ã¡ã®ã¨ã†ã—)æ—¥æŸ± - å†¬ã®é‡ã®ç‰›',d:'ä¸‘åœŸãŒå·±åœŸã‚’åŠ©ã‘å …å®Ÿã§ã™ã€‚å‹¤å‹‰ã§å¿è€åŠ›ãŒã‚ã‚Šã€ç€å®Ÿã«æˆæœã‚’ä¸Šã’ã¾ã™ã€‚æ§ãˆã‚ã§ã™ãŒä¿¡é ¼æ„ŸãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒèª å®Ÿã§çµŒæ¸ˆçš„ã«å®‰å®šã—ã¦ã„ã¾ã™ã€‚'},
'å·±å¯':{t:'å·±å¯(ã¤ã¡ã®ã¨ã†)æ—¥æŸ± - æ˜¥ã®åº­åœ’',d:'æœ¨å‰‹åœŸã§å¤‰åŒ–ã«å¯Œã‚“ã äººç”Ÿã§ã™ã€‚æŸ”è»Ÿã§é©å¿œåŠ›ãŒã‚ã‚Šã€äººã‚’è‚²ã¦ã‚‹æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚æ•™è‚²è€…ã«å‘ã„ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒæ´»ç™ºã§çŸ¥çš„ã§ã™ã€‚'},
'å·±å·³':{t:'å·±å·³(ã¤ã¡ã®ã¨ã¿)æ—¥æŸ± - æ¸©ã‹ã„åœŸ',d:'ç«ç”ŸåœŸã§åŠ›å¼·ã„ã§ã™ã€‚æ¸©åšã§åŒ…å®¹åŠ›ãŒã‚ã‚Šã€å‘¨å›²ã‹ã‚‰ä¿¡é ¼ã•ã‚Œã¾ã™ã€‚ç›´æ„ŸåŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒæƒ…ç†±çš„ã§æ”¯ãˆã¦ãã‚Œã¾ã™ã€‚'},
'å·±æœª':{t:'å·±æœª(ã¤ã¡ã®ã¨ã²ã¤ã˜)æ—¥æŸ± - ç¾Šç‰§å ´',d:'åœŸãŒé‡ãªã‚Šå®‰å®šçš„ã§ã™ã€‚ç©ã‚„ã‹ã§å®¶åº­çš„ã€èŠ¸è¡“çš„æ„Ÿè¦šãŒã‚ã‚Šã¾ã™ã€‚ä¸å‹•ç”£é‹ãŒè‰¯ã„ã§ã™ã€‚',s:'é…å¶è€…ãŒç©ã‚„ã‹ã§å®¶åº­ã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚'},
'å·±é…‰':{t:'å·±é…‰(ã¤ã¡ã®ã¨ã¨ã‚Š)æ—¥æŸ± - æœæ¨¹åœ’ã®åœŸ',d:'åœŸç”Ÿé‡‘ã§æ‰èƒ½ã‚’è‚²ã¿ã¾ã™ã€‚å®Ÿå‹™èƒ½åŠ›ãŒé«˜ãé‡‘éŠ­æ„Ÿè¦šã«å„ªã‚Œã¦ã„ã¾ã™ã€‚çµ„ç¹”ã§ã®æˆåŠŸã«å‘ã„ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒæœ‰èƒ½ã§çµŒæ¸ˆåŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'å·±äº¥':{t:'å·±äº¥(ã¤ã¡ã®ã¨ã„)æ—¥æŸ± - å·å²¸',d:'åœŸå‰‹æ°´ã§è²¡é‹ãŒã‚ã‚Šã¾ã™ãŒã€æ°´ã®åŠ›ã‚‚å¼·ãå¤‰å‹•ãŒæ¿€ã—ã„ã§ã™ã€‚æŸ”è»Ÿæ€§ã¨å …å®Ÿã•ã®ãƒãƒ©ãƒ³ã‚¹ãŒé‡è¦ã§ã™ã€‚',s:'é…å¶è€…ãŒè¡æ˜ã§å¤‰åŒ–ã‚’å¥½ã¿ã¾ã™ã€‚'},
'åºšå­':{t:'åºšå­(ã‹ã®ãˆã­)æ—¥æŸ± - é›¨ä¸­ã®å‰£',d:'é‡‘ç”Ÿæ°´ã§çŸ¥æµãŒå†´ãˆã¾ã™ã€‚æ±ºæ–­åŠ›ã¨çŸ¥æ€§ã‚’å…¼ã­å‚™ãˆã€å›°é›£ãªçŠ¶æ³ã§ã‚‚è§£æ±ºç­–ã‚’è¦‹å‡ºã—ã¾ã™ã€‚',s:'é…å¶è€…ãŒè¡æ˜ã§çµŒæ¸ˆåŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'åºšå¯…':{t:'åºšå¯…(ã‹ã®ãˆã¨ã‚‰)æ—¥æŸ± - æ£®ã®ä¸­ã®æ–§',d:'é‡‘å‰‹æœ¨ã§å¤‰é©ã®åŠ›ãŒã‚ã‚Šã¾ã™ã€‚æ¨é€²åŠ›ãŒå¼·ãã€æ–°ã—ã„é“ã‚’åˆ‡ã‚Šé–‹ãã¾ã™ã€‚å†’é™ºå¿ƒã«å¯Œã‚“ã§ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒæ´»ç™ºã§è¡Œå‹•åŠ›ãŒã‚ã‚Šã¾ã™ã€‚è‘›è—¤ã‚‚ã‚ã‚Šã¾ã™ãŒåˆºæ¿€çš„ãªé–¢ä¿‚ã§ã™ã€‚'},
'åºšè¾°':{t:'åºšè¾°(ã‹ã®ãˆãŸã¤)æ—¥æŸ± - é¾é±—ã®é§',d:'è¾°åœŸãŒé‡‘ã‚’ç”Ÿã˜åŠ›å¼·ã„ã§ã™ã€‚å¨å³ãŒã‚ã‚Šç¤¾ä¼šçš„ã«æˆåŠŸã—ã‚„ã™ã„ã§ã™ã€‚å®ˆè­·ã¨åŠ›ã®è±¡å¾´ã§ã™ã€‚',s:'é…å¶è€…ãŒå®‰å®šçš„ã§é ¼ã‚‚ã—ã„ã§ã™ã€‚'},
'åºšåˆ':{t:'åºšåˆ(ã‹ã®ãˆã†ã¾)æ—¥æŸ± - ç‚ã®ä¸­ã®åˆƒ',d:'ç«å‰‹é‡‘ã§è©¦ç·´ãŒã‚ã‚Šã¾ã™ãŒã€æ¥µé™ã®åœ§åŠ›ã§é›ãˆã‚‰ã‚ŒãŸåˆƒã®ã‚ˆã†ã«å¼·ããªã‚Šã¾ã™ã€‚æƒ…ç†±ã¨æ±ºæ–­åŠ›ã‚’æŒã¡ã¾ã™ã€‚',s:'é…å¶è€…ãŒæƒ…ç†±çš„ã§è¡çªã‚‚ã‚ã‚Šã¾ã™ãŒã€æ·±ã„çµ†ã§çµã°ã‚Œã¾ã™ã€‚'},
'åºšç”³':{t:'åºšç”³(ã‹ã®ãˆã•ã‚‹)æ—¥æŸ± - åŒå‰£',d:'é‡‘ãŒé‡ãªã‚ŠåŠ›ãŒå€å¢—ã—ã¾ã™ã€‚æ±ºæ–­åŠ›ã¨å®Ÿè¡ŒåŠ›ã«å„ªã‚Œã€ç«¶äº‰ã«å¼·ã„ã§ã™ã€‚è»äººãƒ»è­¦å¯Ÿãƒ»æ³•å¾‹å®¶ã«å‘ã„ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ã‚‚å¼·ã„æ€§æ ¼ã§ã™ã€‚äº’ã„ã®ç©ºé–“ã‚’å°Šé‡ã™ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚'},
'åºšæˆŒ':{t:'åºšæˆŒ(ã‹ã®ãˆã„ã¬)æ—¥æŸ± - å¤ä»£ã®æ­¦å™¨',d:'æ­³æœˆãŒè¨¼æ˜ã—ãŸæ¤œè¨¼æ¸ˆã¿ã®å®ŸåŠ›ãŒã‚ã‚Šã¾ã™ã€‚çµŒé¨“è±Šå¯Œã§ä¿¡é ¼ã§ãã‚‹å­˜åœ¨ã§ã™ã€‚æ™©å¹´ãŒå®‰å®šã—ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ã¨ã®ç¸ãŒé…ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ãŒã€å®‰å®šã—ãŸé–¢ä¿‚ã§ã™ã€‚'},
'è¾›ä¸‘':{t:'è¾›ä¸‘(ã‹ã®ã¨ã†ã—)æ—¥æŸ± - é‰±çŸ³ã®ä¸­ã®é‡‘',d:'ä¸‘åœŸãŒé‡‘ã‚’ç”Ÿã˜è²¡é‹ãŒã‚ã‚Šã¾ã™ã€‚æ§ãˆã‚ã§ã™ãŒå†…ã«å…‰ã‚‹æ‰èƒ½ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ç ”ç©¶ãƒ»å°‚é–€åˆ†é‡ã«å‘ã„ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒå …å®Ÿã§çµŒæ¸ˆçš„ã«å®‰å®šã—ã¦ã„ã¾ã™ã€‚'},
'è¾›å¯':{t:'è¾›å¯(ã‹ã®ã¨ã†)æ—¥æŸ± - åº­åœ’ã®å®çŸ³',d:'é‡‘å‰‹æœ¨ã§ç¹Šç´°ãªç¾ã—ã•ãŒã‚ã‚Šã¾ã™ã€‚èŠ¸è¡“çš„æ„Ÿè¦šã«å„ªã‚Œã€ç¾çš„ã‚»ãƒ³ã‚¹ãŒé«˜ã„ã§ã™ã€‚å®Œç’§ä¸»ç¾©çš„ã§ã™ã€‚',s:'é…å¶è€…ãŒæ´»ç™ºã§çŸ¥çš„ã§ã™ã€‚'},
'è¾›å·³':{t:'è¾›å·³(ã‹ã®ã¨ã¿)æ—¥æŸ± - æº¶ã‘ãŸéŠ€',d:'ç«å‰‹é‡‘ã§å¤‰å½¢ã‚’çµŒé¨“ã—ã¾ã™ãŒã€ã‚ˆã‚Šç¾ã—ãç”Ÿã¾ã‚Œå¤‰ã‚ã‚Šã¾ã™ã€‚å¤‰åŒ–ã‚’é€šã˜ãŸæˆé•·å‹ã§ã™ã€‚',s:'é…å¶è€…ãŒæƒ…ç†±çš„ã§å¤‰åŒ–ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚'},
'è¾›æœª':{t:'è¾›æœª(ã‹ã®ã¨ã²ã¤ã˜)æ—¥æŸ± - åœ°ä¸­ã®å®çŸ³',d:'åœŸç”Ÿé‡‘ã§ã‚†ã£ãã‚Šè‚²ã¤æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚å¿è€åŠ›ãŒã‚ã‚Šã€æ™‚é–“ã‚’ã‹ã‘ã¦å…‰ã‚‹å­˜åœ¨ã§ã™ã€‚',s:'é…å¶è€…ãŒç©ã‚„ã‹ã§å®‰å®šçš„ã§ã™ã€‚'},
'è¾›é…‰':{t:'è¾›é…‰(ã‹ã®ã¨ã¨ã‚Š)æ—¥æŸ± - é¡',d:'é‡‘ãŒé‡ãªã‚Šå®Œç’§ãªåå°„ã¨æ˜ç­ã•ãŒã‚ã‚Šã¾ã™ã€‚åˆ†æåŠ›ã«å„ªã‚Œã€çœŸå®Ÿã‚’è¦‹æŠœãåŠ›ãŒã‚ã‚Šã¾ã™ã€‚æ½”ç™–ç—‡ã®å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ã‚‚é‹­ã„æ€§æ ¼ã§ã™ã€‚äº’ã„ã«æ‰¹åˆ¤ã—ã™ããªã„ã‚ˆã†æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚'},
'è¾›äº¥':{t:'è¾›äº¥(ã‹ã®ã¨ã„)æ—¥æŸ± - çœŸç ',d:'é‡‘ç”Ÿæ°´ã§çŸ¥æµãŒæµã‚Œã¾ã™ã€‚è‹¦ç—›ã‹ã‚‰ç”Ÿã¾ã‚ŒãŸç¾ã—ã•ã®ã‚ˆã†ã«ã€å›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã¦è¼ãã¾ã™ã€‚',s:'é…å¶è€…ãŒçŸ¥çš„ã§ç†è§£åŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'å£¬å­':{t:'å£¬å­(ã¿ãšã®ãˆã­)æ—¥æŸ± - æµ·ã®æ·±æ·µ',d:'æ°´ãŒé‡ãªã‚Šæ·±ãåºƒã„çŸ¥æ€§ã‚’æŒã¡ã¾ã™ã€‚è¨ˆã‚ŠçŸ¥ã‚Œãªã„æ·±ã•ã¨æ½œåœ¨åŠ›ãŒã‚ã‚Šã¾ã™ã€‚å­¦è€…ãƒ»ç ”ç©¶è€…ã«å‘ã„ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒçŸ¥çš„ã§æ·±ã„ç†è§£åŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'å£¬å¯…':{t:'å£¬å¯…(ã¿ãšã®ãˆã¨ã‚‰)æ—¥æŸ± - æ»',d:'æ°´ç”Ÿæœ¨ã§åŠ›å¼·ã„æµã‚Œã‚’æŒã¡ã¾ã™ã€‚æ­¢ã‚ã‚‰ã‚Œãªã„æ¨é€²åŠ›ãŒã‚ã‚Šã€å›°é›£ã‚’ä¹—ã‚Šè¶Šãˆã¾ã™ã€‚å†’é™ºå¿ƒã«å¯Œã‚“ã§ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒæ´»ç™ºã§è¡Œå‹•åŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'å£¬è¾°':{t:'å£¬è¾°(ã¿ãšã®ãˆãŸã¤)æ—¥æŸ± - é£›é¾',d:'è¾°ãŒæ°´ã®åº«ã§åŠ›å¼·ã„ã§ã™ã€‚å£®å¤§ãªã‚¹ã‚±ãƒ¼ãƒ«ã®äººç”Ÿã‚’æ­©ã¿ã¾ã™ã€‚ç¤¾ä¼šçš„ã«å¤§ããªæˆåŠŸã‚’åã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒé ¼ã‚‚ã—ãå®‰å®šçš„ã§ã™ã€‚'},
'å£¬åˆ':{t:'å£¬åˆ(ã¿ãšã®ãˆã†ã¾)æ—¥æŸ± - è’¸æ°—',d:'æ°´ã¨ç«ãŒå‡ºä¼šã„å‹•åŠ›ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ã§å¤‰åŒ–ã«å¯Œã‚“ã äººç”Ÿã§ã™ã€‚æŠ€è¡“ãƒ»ç§‘å­¦åˆ†é‡ã«æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒæƒ…ç†±çš„ã§åˆºæ¿€çš„ãªé–¢ä¿‚ã§ã™ã€‚'},
'å£¬ç”³':{t:'å£¬ç”³(ã¿ãšã®ãˆã•ã‚‹)æ—¥æŸ± - å·ã®æµã‚Œ',d:'é‡‘ç”Ÿæ°´ã§çŸ¥æµãŒå†´ãˆã¾ã™ã€‚æ­¢ã¾ã‚‰ãªã„å‰é€²ã®å‹¢ã„ãŒã‚ã‚Šã€å¤šæ‰å¤šèŠ¸ã§ã™ã€‚æ—…è¡Œãƒ»è²¿æ˜“ã«ç¸ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒæœ‰èƒ½ã§ç¤¾äº¤çš„ã§ã™ã€‚'},
'å£¬æˆŒ':{t:'å£¬æˆŒ(ã¿ãšã®ãˆã„ã¬)æ—¥æŸ± - ç§‹é›¨',d:'åœŸå‰‹æ°´ã§åˆ¶ç´„ãŒã‚ã‚Šã¾ã™ãŒã€æ·±ã¿ã¨å‘³ã‚ã„ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚å“²å­¦çš„ã§çœå¯ŸåŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒå …å®Ÿã§å®‰å®šçš„ã§ã™ã€‚æ™©å¹´ãŒè‰¯ã„ã§ã™ã€‚'},
'ç™¸ä¸‘':{t:'ç™¸ä¸‘(ã¿ãšã®ã¨ã†ã—)æ—¥æŸ± - é‡ã®éœœ',d:'ä¸‘åœŸãŒæ°´ã‚’åˆ¶å¾¡ã—å …å®Ÿã§ã™ã€‚ç¹Šç´°ã§ã™ãŒå½±éŸ¿åŠ›ãŒã‚ã‚Šã¾ã™ã€‚ç ”ç©¶ãƒ»åˆ†æã«æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒèª å®Ÿã§çµŒæ¸ˆçš„ã«å®‰å®šã—ã¦ã„ã¾ã™ã€‚'},
'ç™¸å¯':{t:'ç™¸å¯(ã¿ãšã®ã¨ã†)æ—¥æŸ± - æœéœ²',d:'æ°´ç”Ÿæœ¨ã§æˆé•·ã‚’åŠ©ã‘ã¾ã™ã€‚æ¯æ—¥æ–°ã—ã„å§‹ã¾ã‚Šã®ã‚ˆã†ã«å¸Œæœ›ã«æº€ã¡ã¦ã„ã¾ã™ã€‚æ•™è‚²è€…ã«å‘ã„ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒæ´»ç™ºã§æ˜ã‚‹ã„ã§ã™ã€‚'},
'ç™¸å·³':{t:'ç™¸å·³(ã¿ãšã®ã¨ã¿)æ—¥æŸ± - éœ§',d:'æ°´å‰‹ç«ã§ã™ãŒéœ§ã®ã‚ˆã†ã«ç¥ç§˜çš„ã§ã™ã€‚ç›´æ„ŸåŠ›ã«å„ªã‚Œã€äººã®æœ¬è³ªã‚’è¦‹æŠœãã¾ã™ã€‚ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«ãªæ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒæƒ…ç†±çš„ã§ç¥ç§˜çš„ãªé­…åŠ›ãŒã‚ã‚Šã¾ã™ã€‚'},
'ç™¸æœª':{t:'ç™¸æœª(ã¿ãšã®ã¨ã²ã¤ã˜)æ—¥æŸ± - æµã¿ã®é›¨',d:'åœŸå‰‹æ°´ã§ã™ãŒé©åº¦ãªåˆ¶ç´„ãŒå®‰å®šã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚æ¸©åšã§è‚²ã¦ã‚‹æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚è¾²æ¥­ãƒ»æ•™è‚²ã«ç¸ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒç©ã‚„ã‹ã§å®¶åº­çš„ã§ã™ã€‚'},
'ç™¸é…‰':{t:'ç™¸é…‰(ã¿ãšã®ã¨ã¨ã‚Š)æ—¥æŸ± - åˆƒã®ä¸Šã®éœ²',d:'é‡‘ç”Ÿæ°´ã§çŸ¥æµãŒé‹­ã„ã§ã™ã€‚æ¥µåº¦ã®é‹­æ•ã•ã¨ç²¾å¯†ã•ã‚’æŒã¡ã¾ã™ã€‚åŒ»ç™‚ãƒ»æŠ€è¡“åˆ†é‡ã«æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚',s:'é…å¶è€…ãŒæœ‰èƒ½ã§é‹­ã„æ„Ÿè¦šã‚’æŒã£ã¦ã„ã¾ã™ã€‚'},
'ç™¸äº¥':{t:'ç™¸äº¥(ã¿ãšã®ã¨ã„)æ—¥æŸ± - æ·±ã„æ³‰',d:'æ°´ãŒé‡ãªã‚Šç„¡é™ã®çŸ¥æµã®æºæ³‰ã§ã™ã€‚æ·±ã„æ€è€ƒåŠ›ã¨ç›´æ„ŸåŠ›ã‚’æŒã¡ã¾ã™ã€‚å­¦è€…ãƒ»èŠ¸è¡“å®¶ã«å‘ã„ã¦ã„ã¾ã™ã€‚',s:'é…å¶è€…ãŒçŸ¥çš„ã§ç†è§£åŠ›ãŒæ·±ã„ã§ã™ã€‚'}};const key = ds.c + db.c;if (iljuData[key]) {return { title: iljuData[key].t, desc: iljuData[key].d, spouse: iljuData[key].s };}
const stemDesc = {'ç”²':'é€²å–çš„ã§ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒã‚ã‚‹','ä¹™':'æŸ”è»Ÿã§é©å¿œåŠ›ãŒè‰¯ã„','ä¸™':'æ˜ã‚‹ãæƒ…ç†±çš„ãª','ä¸':'æ¸©ã‹ãç¹Šç´°ãª','æˆŠ':'é ¼ã‚‚ã—ãå®‰å®šçš„ãª','å·±':'åŒ…å®¹åŠ›ãŒã‚ã‚Šç¾å®Ÿçš„ãª','åºš':'æ±ºæ–­åŠ›ãŒã‚ã‚Šå¼·é­ãª','è¾›':'ç¹Šç´°ã§æ•æ„Ÿãª','å£¬':'çŸ¥æµæ·±ãæµå‹•çš„ãª','ç™¸':'ç›´æ„Ÿçš„ã§æ„Ÿæ€§çš„ãª'};const branchTrait = ['æ´»ç™º','èª å®Ÿ','é€²å–çš„','ç¹Šç´°','èé€šæ€§','è¡æ˜','æƒ…ç†±çš„','çŒ®èº«çš„','å ‚ã€…','æ„Ÿè¦šçš„','å¿ å®Ÿ','è³¢æ˜'];return {title: `${ds.c}${db.c}æ—¥æŸ±`,
desc: `${stemDesc[ds.c]} æ€§æ ¼ã§ã™ã€‚ ${ELEMENT[ds.e].k}(${ds.c}) æ—¥å¹²ãŒ ${db.c}(${db.a})ã«åº§ã‚Š ${branchTrait[BRANCH.indexOf(db)]}ãªæ€§å‘ãŒå†…åœ¨ã—ã¦ã„ã¾ã™ã€‚`,
spouse: `é…å¶è€…ãŒ ${db.a}ã®ã‚ˆã†ã« ${branchTrait[BRANCH.indexOf(db)]}ã—ã¾ã™. ${db.a}å¹´ã«è‰¯ã„ç¸ã«å‡ºä¼šãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚`};}
const TERM_NAMES = {0: {k: 'ç«‹æ˜¥', e: 'Ipchun', m: 2},
1: {k: 'å•“èŸ„', e: 'Gyeongchip', m: 3},
2: {k: 'æ¸…æ˜', e: 'Cheongmyeong', m: 4},
3: {k: 'ç«‹å¤', e: 'Ipha', m: 5},
4: {k: 'èŠ’ç¨®', e: 'Mangjong', m: 6},
5: {k: 'å°æš‘', e: 'Soseo', m: 7},
6: {k: 'ç«‹ç§‹', e: 'Ipchu', m: 8},
7: {k: 'ç™½éœ²', e: 'Baekro', m: 9},
8: {k: 'å¯’éœ²', e: 'Hallo', m: 10},
9: {k: 'ç«‹å†¬', e: 'Ipdong', m: 11},
10: {k: 'å¤§é›ª', e: 'Daeseol', m: 12},
11: {k: 'å°å¯’', e: 'Sohan', m: 1}};function calcPreciseDaeunStart(saju, birthYear, birthMonth, birthDay, birthHour, gender) {const isYang = saju.year.s.y;const isMale = gender === 'm';const forward = (isYang && isMale) || (!isYang && !isMale);const mbi = BRANCH.indexOf(saju.month.b);const monthBranchToTermIdx = {2:0, 3:1, 4:2, 5:3, 6:4, 7:5, 8:6, 9:7, 10:8, 11:9, 0:10, 1:11};const currentTermIdx = monthBranchToTermIdx[mbi];let result = {firstAge: 3,
firstAgeExact: 3.0,
startYear: birthYear + 3,
startMonth: birthMonth,
startDay: birthDay,
daysToTerm: 9,
direction: forward ? 'é †è¡Œ' : 'é€†è¡Œ',
directionShort: forward ? 'é †è¡Œ' : 'é€†è¡Œ',
targetTerm: null,
calculationMethod: 'default'};if (!birthMonth || !birthDay) return result;let birthHourNum = 12, birthMinNum = 0;if (typeof birthHour === 'number') {if (birthHour >= 0 && birthHour <= 11) {const hourMap = [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22];birthHourNum = hourMap[birthHour] || 12;} else if (birthHour >= 0 && birthHour <= 23) {birthHourNum = birthHour;}}
try {let targetTermIdx, targetYear, searchYear;if (forward) {targetTermIdx = (currentTermIdx + 1) % 12;searchYear = birthYear;if (targetTermIdx === 0 && currentTermIdx >= 10) {searchYear = birthYear + 1;} else if (targetTermIdx <= currentTermIdx && currentTermIdx !== 11) {searchYear = birthYear + 1;}
if (birthMonth === 1 && currentTermIdx === 11) {searchYear = birthYear;}} else {targetTermIdx = currentTermIdx;searchYear = birthYear;if (birthMonth === 1 && currentTermIdx === 10) {searchYear = birthYear - 1;}}
const termTime = getSolarTermTime(searchYear, targetTermIdx);if (!termTime) return result;const birthDate = new Date(birthYear, birthMonth - 1, birthDay, birthHourNum, birthMinNum);const termDate = new Date(searchYear, termTime.m - 1, termTime.d, termTime.h, termTime.n);let msDiff;if (forward) {msDiff = termDate - birthDate;} else {msDiff = birthDate - termDate;}
if (msDiff < 0) {if (forward) {const newTermTime = getSolarTermTime(searchYear + 1, targetTermIdx);if (newTermTime) {const newTermDate = new Date(searchYear + 1, newTermTime.m - 1, newTermTime.d, newTermTime.h, newTermTime.n);msDiff = newTermDate - birthDate;searchYear++;}} else {const newTermTime = getSolarTermTime(searchYear - 1, targetTermIdx);if (newTermTime) {const newTermDate = new Date(searchYear - 1, newTermTime.m - 1, newTermTime.d, newTermTime.h, newTermTime.n);msDiff = birthDate - newTermDate;searchYear--;}}}
const daysDiff = msDiff / (1000 * 60 * 60 * 24);const exactAge = daysDiff / 3;const roundedAge = Math.round(exactAge);const finalAge = Math.max(1, Math.min(10, roundedAge));const startYear = birthYear + finalAge;const startDate = new Date(birthDate);startDate.setFullYear(startYear);result = {firstAge: finalAge,
firstAgeExact: Math.round(exactAge * 10) / 10,
startYear: startYear,
startMonth: startDate.getMonth() + 1,
startDay: startDate.getDate(),
daysToTerm: Math.round(daysDiff * 10) / 10,
direction: forward ? 'é †è¡Œ' : 'é€†è¡Œ',
directionShort: forward ? 'é †è¡Œ' : 'é€†è¡Œ',
targetTerm: TERM_NAMES[targetTermIdx],
targetTermYear: searchYear,
calculationMethod: 'precise'};} catch (e) {console.warn('å¤§é‹ è¨ˆç®— ã‚¨ãƒ©ãƒ¼:', e);}
return result;}
function analyzeGyoungiPrecise(periods, birthYear, currentYear) {const gyoungiList = [];const currentAge = currentYear - birthYear;for (let i = 0; i < periods.length; i++) {const period = periods[i];const transitionAge = period.startAge;const transitionYear = birthYear + transitionAge;const isNearTransition = Math.abs(currentAge - transitionAge) <= 1;const yearsToTransition = transitionAge - currentAge;if (isNearTransition || (yearsToTransition > 0 && yearsToTransition <= 3)) {const nextPeriod = periods[i];const prevPeriod = i > 0 ? periods[i - 1] : null;let warning = '';let severity = 'info';if (yearsToTransition === 0) {warning = `ğŸ”„ ä»Šå¹´äº¤é‹æœŸï¼ ${nextPeriod.s.c}${nextPeriod.b.c} å¤§é‹ å§‹ã¾ã‚Š`;severity = 'major';} else if (yearsToTransition === 1) {warning = `â³ æ¥å¹´ã®äº¤é‹æœŸé€²å…¥ (${nextPeriod.s.c}${nextPeriod.b.c} å¤§é‹)`;severity = 'warning';} else if (yearsToTransition === -1) {warning = `ğŸŒŸ æ˜¨å¹´æ–°ã—ã„å¤§é‹é–‹å§‹ - é©å¿œæœŸ`;severity = 'info';}
if (prevPeriod && nextPeriod) {const scoreDiff = nextPeriod.score - prevPeriod.score;if (scoreDiff >= 3) {warning += ' | å‰é‹ é€²å…¥ï¼ ç™ºç¦ å§‹ã¾ã‚Š';} else if (scoreDiff <= -3) {warning += ' | æ³¨æ„å¿…è¦ - å®‰å®šè¿½æ±‚';}}
gyoungiList.push({year: transitionYear,
age: transitionAge,
period: nextPeriod,
warning,
severity,
yearsAway: yearsToTransition});}}
return gyoungiList;}
function calcLuck(saju, birthYear, gender, gods, birthMonth, birthDay, birthHour) {const isYang = saju.year.s.y;const isMale = gender === 'm';const forward = (isYang && isMale) || (!isYang && !isMale);const periods = [];const msi = STEM.indexOf(saju.month.s);const mbi = BRANCH.indexOf(saju.month.b);const curYear = new Date().getFullYear();const curAge = curYear - birthYear;const daeunStart = calcPreciseDaeunStart(saju, birthYear, birthMonth, birthDay, birthHour, gender);const firstAge = daeunStart.firstAge;for (let i = 0; i < 10; i++) {const si = forward ? (msi + i + 1) % 10 : (msi - i - 1 + 10) % 10;const bi = forward ? (mbi + i + 1) % 12 : (mbi - i - 1 + 12) % 12;const age = firstAge + i * 10;const isCur = curAge >= age && curAge < age + 10;const s = STEM[si], b = BRANCH[bi];let score = 0;let climateClash = false;if ([s.e, b.e].includes(gods.yong)) score += 2;if ([s.e, b.e].includes(gods.hee)) score += 1;if ([s.e, b.e].includes(gods.gi)) score -= 2;if (gods.climate) {const daeunEls = [s.e, b.e];if ((gods.climate.type.includes('ç‡¥') || gods.climate.type.includes('æ¥µç‡¥')) &&
daeunEls.filter(e => e === 'fire').length >= 1) {score -= 2;climateClash = true;}
if ((gods.climate.type.includes('å¯’') || gods.climate.type.includes('æ¥µå¯’')) &&
daeunEls.filter(e => e === 'water').length >= 1) {score -= 2;climateClash = true;}}
const startYear = birthYear + age;const endYear = birthYear + age + 9;periods.push({s, b,
startAge: age,
endAge: age + 9,
startYear,
endYear,
isCur,
climateClash,
rating: score >= 2 ? 'good' : score <= -1 ? 'bad' : 'neutral',
score,
daeunInfo: i === 0 ? daeunStart : null});}
periods.meta = {direction: forward ? 'forward' : 'backward',
directionK: forward ? 'é †è¡Œ' : 'é€†è¡Œ',
firstAgeExact: daeunStart.firstAgeExact,
daysToTerm: daeunStart.daysToTerm,
targetTerm: daeunStart.targetTerm,
calculationMethod: daeunStart.calculationMethod};return periods;}
const YEAR_LUCK_CONFIG = {stemCombineMap: [[0,5,'earth'],[1,6,'metal'],[2,7,'water'],[3,8,'wood'],[4,9,'fire']],
branchCombineMap: [[0,1,'earth'],[2,11,'wood'],[3,10,'fire'],[4,9,'metal'],[5,8,'water'],[6,7,'fire']],
harmPairs: [[0,7],[1,6],[2,5],[3,4],[8,11],[9,10]],
selfPunishBranches: [4, 6, 9, 11],
keMap: {wood:'earth', earth:'water', water:'fire', fire:'metal', metal:'wood'},
samhapPatterns: [[2,6,10,'fire'],[8,0,4,'water'],[5,9,1,'metal'],[11,3,7,'wood']],
yanginBranches: {'wood+':3,'wood-':2,'fire+':6,'fire-':5,'earth+':6,'earth-':5,
'metal+':9,'metal-':8,'water+':0,'water-':11}};
function ylCheckYongGi(yp, gods) {let score = 0;if ([yp.s.e, yp.b.e].includes(gods.yong)) score += 3;if ([yp.s.e, yp.b.e].includes(gods.hee)) score += 2;if ([yp.s.e, yp.b.e].includes(gods.gi)) score -= 3;return { score };}
function ylCheckYongAttack(yp, gods) {const { keMap } = YEAR_LUCK_CONFIG;let active = false, desc = '', score = 0;[yp.s.e, yp.b.e].forEach(ye => {if (keMap[ye] === gods.yong) {active = true; score = -4;desc = `âš ï¸ ç”¨ç¥æ”»æ’ƒï¼ ${ELEMENT[ye].n} ãŒ ${ELEMENT[gods.yong].n} (${ye}å…‹${gods.yong}). ã‚’ç ´å£Šï¼ä¿å®ˆçš„ã«é‹å–¶ã—ã¦ãã ã•ã„ï¼`;}});return { active, desc, score };}
function ylCheckRobWealth(yp, saju, gods, strength) {const god = getTenGod(yp.s, saju.day.s);const isPeer = ['æ¯”è‚©', 'åŠ«è²¡'].includes(god.c);if (strength.type === 'strong' && isPeer) {return { active: true, score: -3, desc: `âš”ï¸ ç¾¤åŠ«äº‰è²¡ï¼èº«å¼·å››æŸ±ã«æ¯”åŠ«é‹ã€‚ç«¶äº‰è€…ãŒè²¡ç‰©ã‚’å¥ªã„ã¾ã™ã€‚å…±åŒäº‹æ¥­/ä¿è¨¼ç¦æ­¢ã€‚` };}
return { active: false, score: 0, desc: '' };}
function ylCheckExpressorPeer(yp, saju, strength) {const god = getTenGod(yp.s, saju.day.s);const isPeer = ['æ¯”è‚©', 'åŠ«è²¡'].includes(god.c);try {const format = calcFormat(saju, strength);if (format.god && (format.god.includes('å‚·å®˜') || format.god.includes('å‚·å®˜')) && isPeer) {return { active: true, score: -2, desc: `âš ï¸ å‚·å®˜+æ¯”åŠ«è¡çª(å‚·å®˜+æ¯”åŠ«)ï¼šè¨´è¨Ÿãƒ»å£èˆŒã®å±é™ºï¼å‰µä½œãƒ»ç ”ç©¶ã«ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’é›†ä¸­ã—ã¦ãã ã•ã„ã€‚` };}} catch(e) {}
return { active: false, score: 0, desc: '' };}
function ylCheckClimateClash(yp, gods) {if (!gods.climate) return { active: false, score: 0, desc: '' };const yearEls = [yp.s.e, yp.b.e];const climate = gods.climate.type;if ((climate.includes('ç‡¥') || climate.includes('æ¥µç‡¥')) && yearEls.includes('fire')) {return { active: true, score: -(yearEls.filter(e => e === 'fire').length * 3), desc: 'ç‡¥ç†±å››æŸ±ã«ç«é‹ï¼å¥åº·ãƒ»è²¡ç‰©å±é™ºã€‚' };}
if ((climate.includes('å¯’') || climate.includes('æ¥µå¯’')) && yearEls.includes('water')) {return { active: true, score: -(yearEls.filter(e => e === 'water').length * 3), desc: 'å¯’æ¹¿å››æŸ±ã«æ°´é‹ï¼ã†ã¤ç—…ãƒ»ç„¡æ°—åŠ›ã®å±é™ºã€‚' };}
return { active: false, score: 0, desc: '' };}
function ylCheckBureau(yp, saju) {const { samhapPatterns } = YEAR_LUCK_CONFIG;const ypBi = BRANCH.findIndex(br => br.c === yp.b.c);const dayBi = BRANCH.findIndex(br => br.c === saju.day.b.c);const allBr = [BRANCH.findIndex(br => br.c === saju.year.b.c), BRANCH.findIndex(br => br.c === saju.month.b.c), dayBi];if (saju.hour) allBr.push(BRANCH.findIndex(br => br.c === saju.hour.b.c));for (const [a, b, c, el] of samhapPatterns) {if (ypBi === b && allBr.includes(a) && allBr.includes(c)) {return { active: true, score: 3, element: el, desc: `ğŸ”¥ ${BRANCH[a].c}${BRANCH[b].c}${BRANCH[c].c} ${ELEMENT[el].n} ä¸‰åˆå±€æˆç«‹ï¼å†²(å†²)ç„¡åŠ¹åŒ–ã€‚` };}
if ((ypBi === a || ypBi === c) && allBr.includes(b) && ((ypBi === a) ? allBr.includes(c) : allBr.includes(a))) {return { active: true, score: 3, element: el, desc: `ğŸ”¥ ${BRANCH[a].c}${BRANCH[b].c}${BRANCH[c].c} ${ELEMENT[el].n} Bureau formed!` };}}
const halfBureauPatterns = [
{ pair: [2, 6], wangji: 6, element: 'fire', name: 'å¯…åˆ Fire Half-Bureau' },
{ pair: [6, 10], wangji: 6, element: 'fire', name: 'åˆæˆŒ Fire Half-Bureau' },
{ pair: [8, 0], wangji: 0, element: 'water', name: 'ç”³å­ Water Half-Bureau' },
{ pair: [0, 4], wangji: 0, element: 'water', name: 'å­è¾° Water Half-Bureau' },
{ pair: [5, 9], wangji: 9, element: 'metal', name: 'å·³é…‰ Metal Half-Bureau' },
{ pair: [9, 1], wangji: 9, element: 'metal', name: 'é…‰ä¸‘ Metal Half-Bureau' },
{ pair: [11, 3], wangji: 3, element: 'wood', name: 'äº¥å¯ Wood Half-Bureau' },
{ pair: [3, 7], wangji: 3, element: 'wood', name: 'å¯æœª Wood Half-Bureau' }
];for (const hb of halfBureauPatterns) {if ((ypBi === hb.pair[0] && dayBi === hb.pair[1]) ||
(ypBi === hb.pair[1] && dayBi === hb.pair[0])) {return {active: true,
score: 2,
element: hb.element,
isHalfBureau: true,
desc: `ğŸ”¥ ${hb.name} formed (Year+Day)! ${ELEMENT[hb.element].n} energy AMPLIFIED!`};}}
return { active: false, score: 0, element: null, desc: '' };}
function ylCheckMonthClash(yp, saju, bureauFormed) {if (bureauFormed) return { active: false, score: 0, desc: '' };const ypBi = BRANCH.findIndex(br => br.c === yp.b.c), mbi = BRANCH.findIndex(br => br.c === saju.month.b.c);if (Math.abs(ypBi - mbi) === 6) {const wang = [0, 3, 6, 9];const isWang = wang.includes(ypBi) && wang.includes(mbi);return { active: true, score: isWang ? -4 : -2, desc: `${yp.b.c}â†”${saju.month.b.c} å†²(å†²)ï¼è·å ´ãƒ»ç¤¾ä¼šç”Ÿæ´»æ¿€å¤‰ã€‚` };}
return { active: false, score: 0, desc: '' };}
function ylCheckDayClash(yp, saju) {const ypBi = BRANCH.findIndex(br => br.c === yp.b.c), dbi = BRANCH.findIndex(br => br.c === saju.day.b.c);if (Math.abs(ypBi - dbi) === 6) {return { active: true, desc: `${yp.b.c}â†”${saju.day.b.c} å†²(å†²)ãŒæ—¥æ”¯(é…å¶è€…å®®/è‡ªåˆ†è‡ªèº«)ã‚’æ”»æ’ƒï¼` };}
return { active: false, desc: '' };}
function ylCheckYanginClash(yp, saju) {const { yanginBranches } = YEAR_LUCK_CONFIG;const dm = saju.day.s, dmKey = dm.e + (dm.p ? '+' : '-');const yanginIdx = yanginBranches[dmKey];const ypBi = BRANCH.findIndex(br => br.c === yp.b.c), dbi = BRANCH.findIndex(br => br.c === saju.day.b.c);if (dbi === yanginIdx && Math.abs(ypBi - dbi) === 6) {return { active: true, desc: `âš”ï¸ ç¾Šåˆƒå†²ï¼é«˜ãƒªã‚¹ã‚¯é«˜ãƒªã‚¿ãƒ¼ãƒ³ - æ‰‹è¡“ã¾ãŸã¯æ¨ªè²¡ã€‚` };}
return { active: false, desc: '' };}
function ylCheckTripleBranch(yp, saju) {const ypBi = BRANCH.findIndex(br => br.c === yp.b.c);const allBr = [BRANCH.findIndex(br => br.c === saju.year.b.c), BRANCH.findIndex(br => br.c === saju.month.b.c), BRANCH.findIndex(br => br.c === saju.day.b.c)];if (saju.hour) allBr.push(BRANCH.findIndex(br => br.c === saju.hour.b.c));const cnt = allBr.filter(b => b === ypBi).length;if (cnt >= 1) {const clash = (ypBi + 6) % 12;if (allBr.includes(clash)) {return { active: true, target: yp.b, desc: `${yp.b.c} æ°—é‹å€åŠ ï¼ ${BRANCH[clash].c} åœ§å€’ã•ã‚Œã‚‹ (${cnt + 1}:1 æ”»æ’ƒ)ã€‚` };}}
return { active: false, target: null, desc: '' };}
function ylCheckMissingBridge(yp, saju, gods) {const elCount = {};[saju.year.s.e, saju.year.b.e, saju.month.s.e, saju.month.b.e, saju.day.s.e, saju.day.b.e].forEach(e => elCount[e] = (elCount[e]||0)+1);if (saju.hour) { elCount[saju.hour.s.e] = (elCount[saju.hour.s.e]||0)+1; elCount[saju.hour.b.e] = (elCount[saju.hour.b.e]||0)+1; }
if ((elCount['water']||0) >= 3 && gods.yong === 'fire' && !(elCount['wood']||0) && [yp.s.e, yp.b.e].includes('fire')) {return { active: true, desc: `ğŸŒŠğŸ”¥ WATER-FIRE WAR without Bridge! No Wood to mediate. Remedy: Add Wood activities.` };}
if ((elCount['metal']||0) >= 3 && gods.yong === 'fire' && !(elCount['earth']||0) && [yp.s.e, yp.b.e].includes('fire')) {return { active: true, desc: `âš”ï¸ğŸ”¥ METAL-FIRE WAR without Bridge! No Earth to mediate.` };}
return { active: false, desc: '' };}
function ylCheckStemCombine(yp, saju, gods) {const { stemCombineMap } = YEAR_LUCK_CONFIG;const ypSi = STEM.indexOf(yp.s);const allSi = [STEM.indexOf(saju.year.s), STEM.indexOf(saju.month.s), STEM.indexOf(saju.day.s)];if (saju.hour) allSi.push(STEM.indexOf(saju.hour.s));for (const [a, b, resEl] of stemCombineMap) {if (ypSi === a || ypSi === b) {const tgt = ypSi === a ? b : a;if (allSi.includes(tgt)) {const tgtStem = STEM[tgt], myGod = getTenGod(tgtStem, saju.day.s);const ypGod = getTenGod(yp.s, saju.day.s);let desc = `ğŸ”— ${yp.s.c}+${tgtStem.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n}.`;let score = 0;const isPeer = ['æ¯”è‚©', 'åŠ«è²¡'].includes(ypGod.c);const isWealth = ['åè²¡', 'æ­£è²¡'].includes(myGod.c);const resultIsGi = resEl === gods.gi;const resultIsGwan = ['water', 'earth'].includes(resEl) &&
((saju.day.s.e === 'fire' && resEl === 'water') ||
(saju.day.s.e === 'wood' && resEl === 'metal'));if (isPeer && isWealth && resultIsGi) {desc = `âš ï¸ ${yp.s.c}+${tgtStem.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n} (BETRAYAL): Your helper (${ypGod.c}) meets your wealth (${myGod.c}) and transforms into PRESSURE. Trust no one with money this year. Reject partnership offers.`;score = -2;} else if (resultIsGi) {desc = `âš ï¸ ${yp.s.c}+${tgtStem.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n} (å¿Œç¥): Combine creates unfavorable element. Hidden sabotage.`;score = -1;} else if (yp.s.e === gods.yong && ['é£Ÿç¥', 'å‚·å®˜'].includes(myGod.c)) {desc = `ğŸ”— ${yp.s.c}+${tgtStem.c} í•©(åˆ) (ç¾ˆçµ†): Promotion comes but freedom decreases. Golden handcuffs.`;score = 1;}
return { active: true, from: yp.s, to: tgtStem, result: resEl, targetGod: myGod.c, desc, score };}}}
return { active: false, from: null, to: null, result: null, targetGod: null, desc: '', score: 0 };}
function ylCheckBranchCombine(yp, saju, gods, strength) {const { branchCombineMap } = YEAR_LUCK_CONFIG;const ypBi = BRANCH.findIndex(br => br.c === yp.b.c);const allBr = [BRANCH.findIndex(br => br.c === saju.year.b.c), BRANCH.findIndex(br => br.c === saju.month.b.c), BRANCH.findIndex(br => br.c === saju.day.b.c)];if (saju.hour) allBr.push(BRANCH.findIndex(br => br.c === saju.hour.b.c));for (const [a, b, resEl] of branchCombineMap) {if (ypBi === a || ypBi === b) {const tgt = ypBi === a ? b : a;if (allBr.includes(tgt)) {const tgtBr = BRANCH[tgt];let desc = `ğŸ¤ ${yp.b.c}+${tgtBr.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n}.`;let score = 0;const isWeak = strength && strength.pct < 30;const combineIsGi = resEl === gods.gi;const combineIsYong = resEl === gods.yong;if (saju.hour && BRANCH.findIndex(br => br.c === saju.hour.b.c) === tgt) {if (isWeak && combineIsGi) {desc = `âš ï¸ ${yp.b.c}+${tgtBr.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n}! âš ï¸ èº«å¼±å››æŸ±ã«åˆãŒå¿Œç¥ã‚’å¼·åŒ–ï¼æ™©å¹´/å­å¥³è»¸ã«åœ§è¿«ã€‚è…è‡“/ç”Ÿæ®–å™¨å¥åº·æ³¨æ„ã€‚`;score = -2;} else if (combineIsYong) {desc = `ğŸ¤ ${yp.b.c}+${tgtBr.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n}! æ™‚æ”¯ã«ç”¨ç¥åˆåŒ–ï¼æ™©å¹´åŸºç›¤å¼·åŒ–ã€‚æ™©å¹´åŸºç›¤å®‰å®šã€‚`;score = 2;} else {desc = `ğŸ¤ ${yp.b.c}+${tgtBr.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n}! æ™‚æ”¯æ°—é‹å¼·åŒ–ã€‚`;score = 1;}} else if (BRANCH.findIndex(br => br.c === saju.day.b.c) === tgt) {if (isWeak && combineIsGi) {desc = `âš ï¸ ${yp.b.c}+${tgtBr.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n}! é…å¶è€…å®®ãŒå¿Œç¥ã«å¤‰åŒ–ã€‚é–¢ä¿‚ã‚¹ãƒˆãƒ¬ã‚¹ã€‚`;score = -1;} else {desc = `ğŸ¤ ${yp.b.c}+${tgtBr.c} åˆ(åˆ)â†’ ${ELEMENT[resEl].n}! é…å¶è€…å®®èª¿å’Œã€‚`;score = 1;}}
return { active: true, from: yp.b, to: tgtBr, result: resEl, desc, score };}}}
return { active: false, from: null, to: null, result: null, desc: '', score: 0 };}
function ylCheckSelfPunishment(yp, saju) {const { selfPunishBranches } = YEAR_LUCK_CONFIG;const ypBi = BRANCH.findIndex(br => br.c === yp.b.c);if (!selfPunishBranches.includes(ypBi)) return { active: false, desc: '' };const allBr = [BRANCH.findIndex(br => br.c === saju.year.b.c), BRANCH.findIndex(br => br.c === saju.month.b.c), BRANCH.findIndex(br => br.c === saju.day.b.c)];if (saju.hour) allBr.push(BRANCH.findIndex(br => br.c === saju.hour.b.c));const sameCount = allBr.filter(b => b === ypBi).length;if (sameCount < 1) return { active: false, desc: '' };const bn = yp.b.c;const totalCount = sameCount + 1;if (totalCount >= 3) {const tripleDescMap = {11: `ğŸš¨ ${bn}${bn}${bn} ä¸‰é‡è‡ªåˆ‘ï¼šæ¥µç«¯ãªæ°´ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼æ·±åˆ»ãªã†ã¤ç—…ã®å±é™ºã€‚å³åº§ã«åŠ©ã‘ã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚`,
6: `ğŸŒ‹ ${bn}${bn}${bn} TRIPLE SELF-PUNISHMENT: VOLCANIC Fire explosion! Extreme impulsiveness, burnout, heart/blood danger. CRITICAL health year.`,
9: `âš ï¸ ${bn}${bn}${bn} TRIPLE SELF-PUNISHMENT: Obsessive Metal pressure! Respiratory/skin crisis.`,
4: `âš ï¸ ${bn}${bn}${bn} TRIPLE SELF-PUNISHMENT: Crushing Earth weight! Digestive/immune collapse.`};return { active: true, isTriple: true, desc: tripleDescMap[ypBi] || `ğŸš¨ ${bn}${bn}${bn} TRIPLE SELF-PUNISHMENT. NUCLEAR EVENT!` };}
const descMap = {11: `ğŸ˜” ${bn}${bn} SELF-PUNISHMENT: Doubled Water = depression, overthinking.`,
6: `ğŸ”¥ ${bn}${bn} SELF-PUNISHMENT: Doubled Fire = impulsiveness, burnout.`,
9: `âš ï¸ ${bn}${bn} SELF-PUNISHMENT: Doubled Metal = obsessive perfectionism.`,
4: `âš ï¸ ${bn}${bn} SELF-PUNISHMENT: Doubled Earth = stubbornness.`};return { active: true, isTriple: false, desc: descMap[ypBi] || `âš ï¸ ${bn}${bn} SELF-PUNISHMENT.` };}
function ylCheckScandal(yp, saju) {if (!saju.hour) return { active: false, score: 0, desc: '' };const dm = saju.day.s;const hourGod = getTenGod(saju.hour.s, dm), ypGod = getTenGod(yp.s, dm);if (hourGod.c !== 'åè²¡' || ypGod.c !== 'åè²¡') return { active: false, score: 0, desc: '' };const { selfPunishBranches } = YEAR_LUCK_CONFIG;const ypBi = BRANCH.findIndex(br => br.c === yp.b.c), hBi = BRANCH.findIndex(br => br.c === saju.hour.b.c);if (ypBi === hBi && selfPunishBranches.includes(ypBi)) {return { active: true, score: -2, desc: `ğŸš¨ è‰²é›£è­¦å‘Šï¼æ™‚æŸ±+åè²¡é‡è¤‡+è‡ªåˆ‘ã€‚ã‚¹ã‚­ãƒ£ãƒ³ãƒ€ãƒ«ãƒ»è³­åšé«˜ãƒªã‚¹ã‚¯ã€‚` };}
return { active: true, score: -2, desc: `âš ï¸ AFFAIR WARNING (è‰²é›£): Indirect Wealth Echo on Hour Pillar. Temptation is a TRAP.` };}
function ylCheckMissingYong(saju, gods, yongAttacked) {const els = {};[saju.year.s.e, saju.year.b.e, saju.month.s.e, saju.month.b.e, saju.day.s.e, saju.day.b.e].forEach(e => els[e] = true);if (saju.hour) { els[saju.hour.s.e] = true; els[saju.hour.b.e] = true; }
if (els[gods.yong]) return { active: false, score: 0, desc: '' };let desc = `ğŸ›¡ï¸ NO SHIELD (ç”¨ç¥ä¸åœ¨): Beneficial Element (${ELEMENT[gods.yong].n}) MISSING! No defense when crisis hits.`;let score = 0;if (yongAttacked) { desc += ` AND this year attacks that absent element - DOUBLE DANGER!`; score = -2; }
return { active: true, desc, score };}
function ylCheckHarmBetrayal(saju) {const { harmPairs } = YEAR_LUCK_CONFIG;const dBi = BRANCH.findIndex(br => br.c === saju.day.b.c), mBi = BRANCH.findIndex(br => br.c === saju.month.b.c);for (const [a, b] of harmPairs) {if ((mBi === a && dBi === b) || (mBi === b && dBi === a)) {if ((mBi === 3 && dBi === 4) || (mBi === 4 && dBi === 3)) {return { active: true, desc: `ğŸ—¡ï¸ è£åˆ‡ã‚Šã®å±é™º(å¯è¾°å®³)ï¼šæœˆæ”¯ãŒæ—¥æ”¯ã‚’å®³(å®³)ã€‚å£èˆŒãƒ»è£åˆ‡ã‚Šã§åŸºç›¤ãŒæºã‚‰ãå¯èƒ½æ€§ã€‚ä¿è¨¼çµ¶å¯¾ç¦æ­¢ã€‚` };}
return { active: true, desc: `âš ï¸ HARM (å…­å®³): Close relationships face friction.` };}}
return { active: false, desc: '' };}
function ylDetermineRating(r, score) {if (r.wangShinChungBal && r.wangShinChungBal.active) return 'wang_shin_chung_bal';if (r.yongOverwhelmed && r.yongOverwhelmed.active) return 'yong_overwhelmed';if (r.pyunInDoShik && r.pyunInDoShik.active) return 'pyunin_doshik';if (r.bureau.active && r.yongGi.score > 0) return 'breakthrough';if (r.yongAttack.active) return 'yong_attacked';if (r.robWealth.active) return 'rob_wealth';if (r.yanginClash.active) return 'surgery_risk';if (r.dayClash.active && r.yongGi.score > 0) return 'volatile_wealth';if (r.monthClash.active && score > 0) return 'volatile';if (score >= 4) return 'great';if (score >= 1) return 'good';if (score <= -4) return 'danger';if (score <= -2) return 'bad';return 'neutral';}
function calcYearLuck(year, saju, gods) {const yp = calcYearPillar(year, 6, 1);const dm = saju.day.s;const god = getTenGod(yp.s, dm);const state = getTwelveState(dm, yp.b);const strength = calcStrength(saju);const r = {yongGi: ylCheckYongGi(yp, gods),
yongAttack: ylCheckYongAttack(yp, gods),
robWealth: ylCheckRobWealth(yp, saju, gods, strength),
expressorPeer: ylCheckExpressorPeer(yp, saju, strength),
climateClash: ylCheckClimateClash(yp, gods),
bureau: ylCheckBureau(yp, saju),
monthClash: ylCheckMonthClash(yp, saju, false),
dayClash: ylCheckDayClash(yp, saju),
yanginClash: ylCheckYanginClash(yp, saju),
tripleBranch: ylCheckTripleBranch(yp, saju),
missingBridge: ylCheckMissingBridge(yp, saju, gods),
stemCombine: ylCheckStemCombine(yp, saju, gods),
branchCombine: ylCheckBranchCombine(yp, saju, gods, strength),
selfPunishment: ylCheckSelfPunishment(yp, saju),
scandal: ylCheckScandal(yp, saju),
missingYong: ylCheckMissingYong(saju, gods, false),
harmBetrayal: ylCheckHarmBetrayal(saju),
yongOverwhelmed: checkYongOverwhelmed(saju, gods),
pyunInDoShik: checkPyunInDoShik(saju, gods),
wangShinChungBal: checkWangShinChungBal(yp, saju)};
if (r.bureau.active) r.monthClash = { active: false, score: 0, desc: '' };
if (r.bureau.active && r.bureau.element === gods.yong && r.yongOverwhelmed.active) {r.yongOverwhelmed = {active:false,score:0,desc:'',overridden:true,overrideReason:`ğŸ”¥ ${r.bureau.desc} â†’ ç”¨ç¥(${ELEMENT[gods.yong].k}) å¢—å¹…ï¼è¡°ç¥å†²æ—ºç„¡åŠ¹åŒ–â†’çªç ´ï¼`};}
r.missingYong = ylCheckMissingYong(saju, gods, r.yongAttack.active);
const score = Object.values(r).reduce((s, x) => s + (x.score || 0), 0);
const rating = ylDetermineRating(r, score);
let voidBreak = false, voidBreakDesc = '';
try {const gm = calcGongmang(saju);const ypBi = BRANCH.findIndex(br => br.c === yp.b.c);if (gm && gm.indices) {gm.indices.forEach(vi => {if (Math.abs(ypBi - vi) === 6) {voidBreak = true;voidBreakDesc = `ğŸ”“ ${yp.b.c}ãŒç©ºäº¡(${BRANCH[vi].c})ã‚’æ‰“ã¡ç ´ã‚‹ï¼è§£æ”¾ã®å¹´ã€‚`;}});}} catch(e) {}
let warnings = [];Object.values(r).forEach(chk => {if (chk.active && chk.desc) warnings.push(chk.desc);});
if (voidBreak) warnings.push(voidBreakDesc);
const yearEls = [yp.s.e, yp.b.e];const ec = countElements(saju);const yearBranchIdx = BRANCH.indexOf(yp.b);const sajuBranches = [saju.year.b, saju.month.b, saju.day.b];if (saju.hour) sajuBranches.push(saju.hour.b);const sajuBranchIdxs = sajuBranches.map(b => BRANCH.indexOf(b));
const baihuIlju = ['ç”²è¾°','ä¹™æœª','ä¸™æˆŒ','ä¸ä¸‘','æˆŠè¾°','å·±æœª','åºšæˆŒ','è¾›ä¸‘','å£¬è¾°','ç™¸æœª'];const ilju = saju.day.s.c + saju.day.b.c;if (baihuIlju.includes(ilju) && yearEls.includes('fire')) {warnings.push('ğŸ… ç™½è™å¤§æ®ºæ—¥æŸ±ã«ç«é‹ï¼æ‰‹è¡“ã€äº‹æ•…ã€å‡ºè¡€ã«æ³¨æ„ã€‚å¥åº·è¨ºæ–­å¿…é ˆ');}
const elHealth = {wood:'è‚/èƒ†/ç›®/ç¥çµŒ',fire:'å¿ƒè‡“/è¡€ç®¡/è„³',earth:'è„¾è‡“/èƒƒ/æ¶ˆåŒ–å™¨',metal:'è‚º/å¤§è…¸/çš®è†š',water:'è…è‡“/è†€èƒ±/ç”Ÿæ®–å™¨'};
if ((sajuBranchIdxs.includes(0) && yearBranchIdx === 6) || (sajuBranchIdxs.includes(6) && yearBranchIdx === 0)) {const waterPower = ec.water || 0;const firePower = ec.fire || 0;if (waterPower > firePower + 1) {warnings.push(`ğŸ’§ å­åˆå†²å‹æ•—: æ°´(${waterPower}å€‹) > ç«(${firePower}å€‹) â†’ ç«ãŒæ¶ˆãˆã‚‹ï¼ ${elHealth.fire} æå‚·ã€æƒ…ç†±/æ„æ¬²ä½ä¸‹æ³¨æ„`);} else if (firePower > waterPower + 1) {warnings.push(`ğŸ”¥ å­åˆå†²å‹æ•—: ç«(${firePower}å€‹) > æ°´(${waterPower}å€‹) â†’ æ°´ãŒä¹¾ãï¼ ${elHealth.water} æå‚·ã€è…è‡“/è†€èƒ±æ³¨æ„`);} else {warnings.push(`âš¡ å­åˆå†²æ¿€æˆ¦: æ°´(${waterPower}å€‹) â‰ˆ ç«(${firePower}å€‹) â†’ ä¸¡æ–¹ã¨ã‚‚æå‚·ï¼å¿ƒè¡€ç®¡+è…è‡“å…±ã«æ³¨æ„`);}}
if ((sajuBranchIdxs.includes(3) && yearBranchIdx === 9) || (sajuBranchIdxs.includes(9) && yearBranchIdx === 3)) {const woodPower = ec.wood || 0;const metalPower = ec.metal || 0;if (metalPower > woodPower + 1) {warnings.push(`ğŸª“ å¯é…‰å†²å‹æ•—: é‡‘(${metalPower}å€‹) > æœ¨(${woodPower}å€‹) â†’ æœ¨ãŒåˆ‡ã‚‰ã‚Œã‚‹ï¼ ${elHealth.wood} æå‚·ã€è‚èƒ†/ç¥çµŒæ³¨æ„`);} else if (woodPower > metalPower + 1) {warnings.push(`ğŸŒ³ å¯é…‰å†²å‹æ•—: æœ¨(${woodPower}å€‹) > é‡‘(${metalPower}å€‹) â†’ æ–§ãŒæŠ˜ã‚Œã‚‹ï¼ ${elHealth.metal} æå‚·ã®ä»£ã‚ã‚Šã«æœ¨ã®åæ’ƒ`);} else {warnings.push(`âš¡ å¯é…‰å†²æ¿€æˆ¦: æœ¨(${woodPower}å€‹) â‰ˆ é‡‘(${metalPower}å€‹) â†’ ä¸¡æ–¹ã¨ã‚‚æå‚·ï¼è‚èƒ†+è‚ºå…±ã«æ³¨æ„`);}}
return {year,pillar:yp,god,state,score,warnings,rating,
climateClash:r.climateClash.active,climateClashDesc:r.climateClash.desc,
monthClash:r.monthClash.active,monthClashDesc:r.monthClash.desc,
bureauFormed:r.bureau.active,bureauDesc:r.bureau.desc,
voidBreak,voidBreakDesc,
dayClash:r.dayClash.active,dayClashDesc:r.dayClash.desc,
yanginClash:r.yanginClash.active,yanginClashDesc:r.yanginClash.desc,
tripleBranch:r.tripleBranch.active,tripleBranchDesc:r.tripleBranch.desc,
stemCombine:r.stemCombine.active?r.stemCombine:null,
branchCombine:r.branchCombine.active?r.branchCombine:null,
selfPunishment:r.selfPunishment.active,selfPunishmentDesc:r.selfPunishment.desc,
yongUnderAttack:r.yongAttack.active,yongAttackDesc:r.yongAttack.desc,
robWealthThreat:r.robWealth.active,robWealthDesc:r.robWealth.desc,
expressorPeerClash:r.expressorPeer.active,
scandalWarning:r.scandal.active,
missingYong:r.missingYong.active,
harmBetrayalWarning:r.harmBetrayal.active,
yongOverwhelmed:r.yongOverwhelmed.active,
pyunInDoShik:r.pyunInDoShik.active,
wangShinChungBal:r.wangShinChungBal.active};}
function determineYearRating(yearLuck, saju, gods) {const yp = yearLuck.pillar;const wangChk = checkWangShinChungBal(yp, saju);const yongChk = checkYongOverwhelmed(saju, gods);const pyunChk = checkPyunInDoShik(saju, gods);if (wangChk.active) return { rating: 'wang_shin_chung_bal', warning: wangChk };if (yongChk.active) return { rating: 'yong_overwhelmed', warning: yongChk };if (pyunChk.active) return { rating: 'pyunin_doshik', warning: pyunChk };return { rating: yearLuck.rating, warning: null };}
function analyzeLuckCross(saju, birthYear, gender, gods, targetYear, birthMonth, birthDay, birthHour) {const luck = calcLuck(saju, birthYear, gender, gods, birthMonth, birthDay, birthHour);const curAge = targetYear - birthYear;const curDaeun = luck.find(l => curAge >= l.startAge && curAge < l.endAge) || luck[0];const yearLuck = calcYearLuck(targetYear, saju, gods);const result = {daeun: curDaeun,
saeun: yearLuck,
analysis: []};const dEl = [curDaeun.s.e, curDaeun.b.e];const sEl = [yearLuck.pillar.s.e, yearLuck.pillar.b.e];const ganHap = [[0,5],[1,6],[2,7],[3,8],[4,9]];const dsi = STEM.indexOf(curDaeun.s), ssi = STEM.indexOf(yearLuck.pillar.s);for (let [a,b] of ganHap) {if ((dsi===a && ssi===b) || (dsi===b && ssi===a)) {result.analysis.push({type:'good', text:'å¤§é‹-æ­³é‹å¤©å¹²åˆï¼é‹ãŒèª¿å’Œçš„ã«æµã‚Œã¾ã™ã€‚'});}}
const dbi = BRANCH.indexOf(curDaeun.b), sbi = BRANCH.indexOf(yearLuck.pillar.b);if (Math.abs(dbi - sbi) === 6 || Math.abs(dbi - sbi) === 6) {result.analysis.push({type:'bad', text:'å¤§é‹-æ­³é‹åœ°æ”¯å†²ï¼å¤‰åŒ–ã¨è©¦ç·´ãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚'});}
const allBi = [BRANCH.indexOf(saju.year.b), BRANCH.indexOf(saju.month.b), BRANCH.indexOf(saju.day.b)];if (saju.hour) allBi.push(BRANCH.indexOf(saju.hour.b));allBi.forEach((bi, idx) => {const positions = ['å¹´æ”¯','æœˆæ”¯','æ—¥æ”¯','æ™‚æ”¯'];if (Math.abs(bi - sbi) === 6) {const isWangjiClash = (bi === 0 && sbi === 6) || (bi === 6 && sbi === 0) ||
(bi === 3 && sbi === 9) || (bi === 9 && sbi === 3);if (isWangjiClash) {const clashName = (bi === 0 || sbi === 0) ? 'å­åˆå†²' : 'å¯é…‰å†²';const healthWarning = (bi === 0 || sbi === 0)
? 'å¿ƒè¡€ç®¡(ç«)ã¨è…è‡“/ç”Ÿæ®–å™¨(æ°´)ãŒè¡çªã—ã¾ã™ï¼'
: 'è‚(æœ¨)ã¨è‚º/ç¥çµŒ(é‡‘)ãŒè¡çªã—ã¾ã™ï¼';result.analysis.push({type: 'danger',
text: `ğŸš¨ ${clashName} ç™ºå‹•ï¼æ—ºæ”¯åŒå£«ã®æ­£é¢è¡çªã§ã™ã€‚ ${healthWarning} ${idx === 3 ? 'æ™‚æ”¯(å­å¥³å®®/æ™©å¹´)è¡çªã§æ‰‹è¡“ã€äº‹æ•…ã€å­å¥³ã®å•é¡Œã«ç‰¹ã«æ³¨æ„ï¼' : idx === 2 ? 'æ—¥æ”¯(é…å¶è€…å®®)è¡çªã§é…å¶è€…ã®å¥åº·ã¨å¤«å©¦é–¢ä¿‚ã«æ¿€å‹•ãŒã‚ã‚‹å¯èƒ½æ€§ï¼' : ''}`,});result.wangjiClash = true;} else {result.analysis.push({type:'warning', text:`æ­³é‹ãŒ ${positions[idx]}ã¨å†²ï¼ ${idx===2 ? 'é…å¶è€…ã‹å¥åº·æ³¨æ„ï¼' : idx===0 ? 'å®¶ã®å¹´é•·è€…ã«é–¢é€£ã™ã‚‹äº‹ãŒã‚ã‚‹å¯èƒ½æ€§ã€‚' : idx===1 ? 'è·å ´ã‚„äº‹æ¥­ã«å¤‰åŒ–ãŒã‚ã‚‹å¯èƒ½æ€§ã€‚' : 'å­å¥³ã‚„å¾Œè¼©ã«é–¢é€£ã™ã‚‹äº‹ãŒã‚ã‚‹å¯èƒ½æ€§ã€‚'}`});}}
if ((bi === 1 && sbi === 6) || (bi === 6 && sbi === 1)) {result.analysis.push({type: 'warning',
text: `âš ï¸ ä¸‘åˆæ€¨å—”ï¼ ${positions[idx]}ã¨æ­³é‹ãŒé¬¼é–€/æ¹¯ç«ã®é–¢ä¿‚ã§ã™ã€‚ç²¾ç¥çš„ã‚¹ãƒˆãƒ¬ã‚¹ã¨æ„Ÿæƒ…ã®èµ·ä¼ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚`});}});result.totalScore = curDaeun.score + yearLuck.score;result.totalRating = result.totalScore >= 4 ? 'excellent' :
result.totalScore >= 2 ? 'good' :
result.totalScore >= 0 ? 'neutral' :
result.totalScore >= -2 ? 'caution' : 'difficult';if (yearLuck.warnings && yearLuck.warnings.length > 0) {yearLuck.warnings.forEach(w => {result.analysis.push({type: 'danger', text: w});});}
const tanghwaCheck = () => {const hasChu = allBi.includes(1);const hasO = allBi.includes(6);const hasIn = allBi.includes(2);const hasSa = allBi.includes(5);const hasChuOTanghwa = hasChu && hasO;const hasInSaTanghwa = hasIn && hasSa;const saeunBi = sbi;if (hasChuOTanghwa && saeunBi === 6) {result.analysis.push({type: 'danger',
text: 'âš ï¸ åŒæ¹¯ç«è­¦å‘Šï¼åŸå±€ã®ä¸‘åˆæ¹¯ç«ã«æ­³é‹åˆãŒé‡ãªã‚Šã¾ã™ã€‚æ„Ÿæƒ…çˆ†ç™ºã€ç«ç—…ã€ç²¾ç¥çš„ã‚¹ãƒˆãƒ¬ã‚¹ãŒæ¥µã«é”ã™ã‚‹å¯èƒ½æ€§ã€‚æ€’ã‚Šã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¨ãƒ¡ãƒ³ã‚¿ãƒ«ç®¡ç†ãŒç‰¹ã«é‡è¦ã§ã™ï¼'});result.tanghwaWarning = true;}
if (hasInSaTanghwa && saeunBi === 5) {result.analysis.push({type: 'danger',
text: 'âš ï¸ åŒæ¹¯ç«è­¦å‘Šï¼åŸå±€ã®å¯…å·³æ¹¯ç«ã«æ­³é‹å·³ãŒé‡ãªã‚Šã¾ã™ã€‚ç«å‚·ã€ç†±ç—…ã€è–¬ç‰©å‰¯ä½œç”¨ã«ç‰¹ã«æ³¨æ„ï¼'});result.tanghwaWarning = true;}
if (hasChuOTanghwa && saeunBi === 5) {result.analysis.push({type: 'warning',
text: 'ğŸ”¥ æ¹¯ç«æ®ºåŠ é‡ï¼æ­³é‹ã®ç«æ°—é‹ãŒåŸå±€æ¹¯ç«ã‚’åˆºæ¿€ã—ã¾ã™ã€‚ç«æ°—å–ã‚Šæ‰±ã„æ³¨æ„ï¼'});}};tanghwaCheck();const selfPunishBranches = [4, 6, 9, 11];if (dbi === sbi && selfPunishBranches.includes(dbi)) {const branchNames = {4:'è¾°è¾°', 6:'åˆåˆ', 9:'é…‰é…‰', 11:'äº¥äº¥'};const healthWarnings = {4: 'è„¾è‡“/èƒƒè…¸ç–¾æ‚£ã€æ¶ˆåŒ–ä¸è‰¯',
6: 'å¿ƒè¡€ç®¡ç–¾æ‚£ã€è„³å‡ºè¡€ã€ç²¾ç¥çš„çˆ†ç™º',
9: 'è‚º/å‘¼å¸å™¨ç–¾æ‚£ã€ã†ã¤ç—…',
11: 'è…è‡“/è†€èƒ±ç–¾æ‚£ã€è‡ªå‚·è¡å‹•'};result.analysis.push({type: 'danger',
text: `ğŸš¨ å¤§é‹+æ­³é‹è‡ªåˆ‘(${branchNames[dbi]}è‡ªåˆ‘)! è‡ªåˆ†è‡ªèº«ã‚’æ”»æ’ƒã™ã‚‹å½¢å±€ã§ã™ã€‚ ${healthWarnings[dbi]} æ³¨æ„ï¼ç„¡ç†ã›ãšè‡ªå·±ç®¡ç†ã«é›†ä¸­ã—ã¦ãã ã•ã„ã€‚`});result.daeunSaeunJahyung = true;}
return result;}
function analyzeDaeunDetail(daeun, saju, gods, startYear) {const dm = saju.day.s;const stemGod = getTenGod(daeun.s, dm);const stemAnalysis = {period: 'å‰åŠ5å¹´',
dominant: 'å¤©å¹²',
pillar: daeun.s.c,
god: stemGod.c,
element: daeun.s.e,
isYong: daeun.s.e === gods.yong,
isGi: daeun.s.e === gods.gi,
desc: `${stemGod.c}ã®æ°—é‹ãŒæ”¯é…ã™ã‚‹æ™‚æœŸã§ã™ã€‚`};const branchGod = getTenGod({e: daeun.b.e, y: true, c: '', k: ''}, dm);const branchAnalysis = {period: 'å¾ŒåŠ5å¹´',
dominant: 'åœ°æ”¯',
pillar: daeun.b.c,
element: daeun.b.e,
isYong: daeun.b.e === gods.yong,
isGi: daeun.b.e === gods.gi,
state: getTwelveState(dm, daeun.b),
desc: `${ELEMENT[daeun.b.e].k}(${daeun.b.c}) æ°—é‹ã¨${getTwelveState(dm, daeun.b).k}ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä½œç”¨ã—ã¾ã™ã€‚`};return { stem: stemAnalysis, branch: branchAnalysis };}
function getNext10Years(saju, birthYear, gender, gods) {const curYear = new Date().getFullYear();const years = [];for (let i = 0; i < 10; i++) {const year = curYear + i;const cross = analyzeLuckCross(saju, birthYear, gender, gods, year);years.push({year,
age: year - birthYear,
rating: cross.totalRating,
score: cross.totalScore,
daeun: cross.daeun,
saeun: cross.saeun});}
const bestYear = years.reduce((a, b) => a.score > b.score ? a : b);const worstYear = years.reduce((a, b) => a.score < b.score ? a : b);return { years, bestYear, worstYear };}
function calcMonthLuck(year, month, saju, gods) {const mp = calcMonthPillar(year, month, 15);const dm = saju.day.s;const god = getTenGod(mp.s, dm);let score = 0;if ([mp.s.e, mp.b.e].includes(gods.yong)) score += 2;if ([mp.s.e, mp.b.e].includes(gods.hee)) score += 1;if ([mp.s.e, mp.b.e].includes(gods.gi)) score -= 2;return {month,
pillar: mp,
god,
score,
rating: score >= 2 ? 'good' : score <= -1 ? 'bad' : 'neutral'};}
function getYearlyMonthLuck(year, saju, gods) {const months = [];for (let m = 1; m <= 12; m++) {months.push(calcMonthLuck(year, m, saju, gods));}
const best = months.reduce((a, b) => a.score > b.score ? a : b);const worst = months.reduce((a, b) => a.score < b.score ? a : b);return { months, best, worst };}
function calcSinsal(saju) {const ss = [];const dmi = STEM.indexOf(saju.day.s);const ybi = BRANCH.indexOf(saju.year.b);const dbi = BRANCH.indexOf(saju.day.b);const mbi = BRANCH.indexOf(saju.month.b);const hbi = saju.hour ? BRANCH.indexOf(saju.hour.b) : -1;const brs = [ybi, mbi, dbi];if (hbi >= 0) brs.push(hbi);const ysi = STEM.indexOf(saju.year.s);const msi = STEM.indexOf(saju.month.s);const hsi = saju.hour ? STEM.indexOf(saju.hour.s) : -1;const guiren = {0:[1,7],1:[0,8],2:[11,9],3:[11,9],4:[1,7],5:[0,8],6:[7,1],7:[6,2],8:[5,3],9:[5,3]};if (guiren[dmi] && brs.some(b => guiren[dmi].includes(b))) ss.push({n:'å¤©ä¹™è²´äºº',t:'good',d:'æœ€é«˜ã®å‰ç¥ï¼å±æ©Ÿã«ã¯å¿…ãšè²´äººãŒç¾ã‚Œã‚‹ã€‚å®˜è·é‹ã€è©¦é¨“é‹ãŒè‰¯ãå±é™ºã‚’é¿ã‘ã‚‰ã‚Œã¾ã™ã€‚',i:'ğŸ‘¼',lv:'æœ€ä¸Š'});const tiande = [9,8,7,6,5,4,3,2,1,0,9,8];if (mbi < 12 && (dmi === tiande[mbi] || brs.some(b => b === tiande[mbi]))) ss.push({n:'å¤©å¾³è²´äºº',t:'good',d:'å¤©ã®å¾³ãŒã‚ã‚Šã¾ã™ï¼å–„è‰¯ã«ç”Ÿãã‚Œã°ç¦ãŒæ¥ã¾ã™ã€‚å‡¶äº‹ã‚‚å‰ã«å¤‰ã‚ã‚Šã¾ã™ã€‚',i:'ğŸŒŸ',lv:'ä¸Š'});const yuede = [2,6,2,6,4,8,4,8,0,6,0,6];if (mbi < 12 && dmi === yuede[mbi]) ss.push({n:'æœˆå¾³è²´äºº',t:'good',d:'æœˆã®å¾³ãŒã‚ã‚Šã¾ã™ï¼äººæ°—ãŒé«˜ãäººã€…ã«ä¿¡é ¼ã•ã‚Œã‚‹ã€‚å…¬è·ã«æœ‰åˆ©ã§ã™ã€‚',i:'ğŸŒ™',lv:'ä¸Š'});const munchang = {0:5,1:6,2:8,3:9,4:8,5:9,6:11,7:0,8:2,9:3};if (brs.includes(munchang[dmi])) ss.push({n:'æ–‡æ˜Œè²´äºº',t:'good',d:'å‹‰å¼·ã®é ­è„³æœ€é«˜ï¼è©¦é¨“é‹ã€è³‡æ ¼é‹ã€å­¦ä½é‹ãŒè‰¯ã„ã§ã™ã€‚æ–‡ç« åŠ›ã‚‚å„ªã‚Œã¦ã„ã¾ã™ã€‚',i:'ğŸ“š',lv:'ä¸Š'});const xuetang = {0:11,1:6,2:2,3:9,4:2,5:9,6:5,7:0,8:8,9:3};if (brs.includes(xuetang[dmi])) ss.push({n:'å­¦å ‚è²´äºº',t:'good',d:'å­¦è€…æ°—è³ªï¼ç ”ç©¶ã€æ•™è‚²åˆ†é‡ã§æˆåŠŸã€‚æ•™æˆã€åšå£«ã€å°‚é–€å®¶ã«ã´ã£ãŸã‚Šï¼',i:'ğŸ“',lv:'ä¸Š'});const jiangx = {0:0,1:9,2:6,3:3,4:0,5:9,6:6,7:3,8:0,9:9,10:6,11:3};if (brs.includes(jiangx[ybi])) ss.push({n:'å°†æ˜Ÿ',t:'good',d:'å°†è»ã®æ°—è³ªï¼ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã«å„ªã‚Œã€äººãŒã¤ã„ã¦ãã‚‹ã€‚çµ„ç¹”ã®é•·ã«ãªã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',i:'ğŸ–ï¸',lv:'ä¸Š'});const jinyu = {0:4,1:5,2:7,3:8,4:7,5:8,6:10,7:11,8:1,9:2};if (brs.includes(jinyu[dmi])) ss.push({n:'é‡‘è¼¿',t:'good',d:'é…å¶è€…ç¦æœ€é«˜ï¼ çµå©šã™ã‚Œã°é‹ãŒé–‹ã‘ã€è‰¯ã„ä¼´ä¾¶ã«å‡ºä¼šãˆã¾ã™ã€‚',i:'ğŸ’',lv:'ä¸Š'});const fuxing = {0:2,1:3,2:5,3:6,4:5,5:6,6:8,7:9,8:11,9:0};if (brs.includes(fuxing[dmi])) ss.push({n:'ç¦æ˜Ÿè²´äºº',t:'good',d:'ç¦ãŒå¤šã„å››æŸ±ï¼è¡£é£Ÿä½ã®å¿ƒé…ãªãä¸€ç”Ÿé£Ÿã¹ã¦ã„ã‘ã‚‹ç¦ãŒã‚ã‚Šã¾ã™ã€‚',i:'ğŸ€',lv:'ä¸Š'});const anlu = {0:11,1:10,2:1,3:0,4:1,5:0,6:3,7:2,8:5,9:4};if (brs.includes(anlu[dmi])) ss.push({n:'æš—ç¥¿',t:'good',d:'éš ã‚ŒãŸç¦ãŒã‚ã‚Šã¾ã™ï¼ç›®ã«è¦‹ãˆãªã„ã¨ã“ã‚ã§åŠ©ã‘ã‚’å—ã‘ã¾ã™ã€‚',i:'ğŸ',lv:'ä¸­'});const jianlu = {0:2,1:3,2:5,3:6,4:5,5:6,6:8,7:9,8:11,9:0};if (brs.includes(jianlu[dmi])) ss.push({n:'å»ºç¦„',t:'good',d:'è‡ªåŠ›æˆå®¶å‹ï¼è‡ªã‚‰ç«‹ã¡ä¸ŠãŒã£ã¦æˆåŠŸã™ã‚‹ã‚¿ã‚¤ãƒ—ã€‚è·æ¥­ãŒå®‰å®šã—ã¦ã„ã¾ã™ã€‚',i:'ğŸ ',lv:'ä¸Š'});const tianyi = [11,0,1,2,3,4,5,6,7,8,9,10];if (mbi < 12 && brs.includes(tianyi[mbi])) ss.push({n:'å¤©é†«æ˜Ÿ',t:'good',d:'åŒ»ç™‚é©æ€§ï¼åŒ»å¸«ã€çœ‹è­·å¸«ã€è–¬å‰¤å¸«ã«ã´ã£ãŸã‚Šã€‚å¥åº·é–¢é€£ã®è·æ¥­ãŒå¤§å‰ï¼',i:'ğŸ’Š',lv:'ä¸­'});const yima = {0:2,1:11,2:8,3:5,4:2,5:11,6:8,7:5,8:2,9:11,10:8,11:5};if (brs.includes(yima[ybi])) ss.push({n:'é§…é¦¬æ®º',t:'neutral',d:'å‹•ã„ã¦ã“ãé‹ãŒé–‹ã‘ã‚‹ï¼æ—…è¡Œã€å‡ºå¼µã€å¼•è¶Šã€æµ·å¤–èµ´ä»»...ã˜ã£ã¨ã—ã¦ã„ãŸã‚‰æ¯è‹¦ã—ã„ã§ã™ã€‚',i:'ğŸ',lv:'ä¸­'});const taohua = {0:9,1:6,2:3,3:0,4:9,5:6,6:3,7:0,8:9,9:6,10:3,11:0};if (brs.includes(taohua[ybi])) ss.push({n:'æ¡ƒèŠ±æ®º',t:'neutral',d:'é­…åŠ›çˆ†ç™ºï¼ ç•°æ€§ã«äººæ°— ãŒå¤šã„ã€‚èŠ¸èƒ½äººæ°—è³ªï¼ãŸã ã—æµ®æ°— æ³¨æ„.',i:'ğŸŒ¸',lv:'ä¸­'});const huagai = {0:4,1:1,2:10,3:7,4:4,5:1,6:10,7:7,8:4,9:1,10:10,11:7};if (brs.includes(huagai[ybi])) ss.push({n:'è¯è“‹æ®º',t:'neutral',d:'èŠ¸è¡“å®¶æ°—è³ªï¼éŸ³æ¥½ã€çµµã€æ–‡ç« ã®æ‰èƒ½ã€‚å®—æ•™ã€å“²å­¦ã«é–¢å¿ƒãŒé«˜ã„ã€‚',i:'ğŸ¨',lv:'ä¸­'});const hongyan = {0:6,1:5,2:8,3:7,4:8,5:7,6:9,7:8,8:11,9:10};if (brs.includes(hongyan[dmi])) ss.push({n:'ç´…è‰¶æ®º',t:'neutral',d:'ã‚»ã‚¯ã‚·ãƒ¼ãªé­…åŠ›ï¼ç•°æ€§ã‚’æƒ¹ãã¤ã‘ã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚èŠ¸èƒ½ç•Œé©æ€§ã€æµ®æ°—ã«æ³¨æ„ï¼',i:'ğŸ’‹',lv:'ä¸­'});const kuigang = [[6,4],[],[6,4],[],[6,10],[],[6,10],[],[],[]];if (kuigang[dmi] && kuigang[dmi].includes(dbi)) ss.push({n:'é­ç½¡æ®º',t:'bad',d:'æ€§æ ¼ãŒç«ã®ã‚ˆã†ï¼ã‚«ãƒªã‚¹ãƒã‚ã‚Šãƒªãƒ¼ãƒ€ãƒ¼ã®è³‡è³ªã€ãŸã ã—ç‹¬æ–­çš„ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',i:'âš¡',lv:'ä¸Š'});const yangren = {0:3,1:2,2:6,3:5,4:6,5:5,6:9,7:8,8:0,9:11};if (dbi === yangren[dmi]) ss.push({n:'ç¾Šåˆƒæ®º',t:'bad',d:'åˆƒã®ã‚ˆã†ãªæ°—é‹ï¼æ±ºæ–­åŠ›ãŒã‚ã‚‹ãŒé‹­ã„ã€‚è»äººã€å¤–äº¤ã€æ³•æ›¹äººã«é©åˆã€‚',i:'ğŸ—¡ï¸',lv:'ä¸Š'});const baihu = [6,7,8,9,10,11,0,1,2,3,4,5];if (mbi < 12 && brs.includes(baihu[mbi])) ss.push({n:'ç™½è™æ®º',t:'bad',d:'äº‹æ•…ã€æ‰‹è¡“ã«æ³¨æ„ï¼ãŸã ã—åŒ»ç™‚äººã€æ–™ç†äººãªã©è¡€ã‚’è¦‹ã‚‹è·æ¥­ã¯ã‚€ã—ã‚è‰¯ã„ã§ã™ã€‚',i:'ğŸ¯',lv:'ä¸­'});const baihuDaeSal = [
[0, 4],
[1, 7],
[2, 10],
[3, 1],
[4, 4],
[5, 1],
[6, 10],
[7, 7],
[8, 4],
[9, 1]
];const isBaihuDaeSal = baihuDaeSal.some(([s, b]) => s === dmi && b === dbi);if (isBaihuDaeSal) {ss.push({n:'ç™½è™å¤§æ®º',t:'bad',d:'æ—¥æŸ±ã«ç™½è™ãŒã‚ã‚Šã¾ã™ï¼å¤–è¦‹ã¯ç©ã‚„ã‹ã«è¦‹ãˆã¦ã‚‚å†…ã«å¼·ã„æ°—ãŒã‚ã‚Šã¾ã™ã€‚é…å¶è€…å®®ã«ç™½è™ãŒã‚ã‚‹ã®ã§é…å¶è€…ã®æ°—ãŒå¼·ã„ã‹ã€å¥åº·å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚åŒ»ç™‚ã€è»è­¦ã€æ–™ç†ãªã©è¡€ã‚’æ‰±ã†è·æ¥­ãŒã‚€ã—ã‚è‰¯ã„ã§ã™ã€‚',i:'ğŸ…',lv:'ä¸Š'});}
const jiesha = {0:5,1:2,2:11,3:8,4:5,5:2,6:11,7:8,8:5,9:2,10:11,11:8};if (brs.includes(jiesha[ybi])) ss.push({n:'åŠ«æ®º',t:'bad',d:'ãŠé‡‘ã‚’å¤±ã„ã‚„ã™ã„ï¼ç›—é›£ã€è©æ¬ºã€æŠ•è³‡å¤±æ•—ã«æ³¨æ„ã€‚ä¿è¨¼ã¯çµ¶å¯¾ã«ã—ãªã„ã§ãã ã•ã„ï¼',i:'ğŸ’¸',lv:'ä¸­'});const wangshen = {0:9,1:6,2:3,3:0,4:9,5:6,6:3,7:0,8:9,9:6,10:3,11:0};if (brs.includes(wangshen[ybi]) && wangshen[ybi] !== taohua[ybi]) ss.push({n:'äº¡ç¥æ®º',t:'bad',d:'æ¥ã‚’ã‹ãã‚„ã™ã„ã§ã™ï¼SNSã«æ³¨æ„ã€é£²ã¿ä¼šã§ã®å¤±è¨€ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚',i:'ğŸ˜°',lv:'ä¸­'});const yuanchen = [[7],[6],[5],[4],[3],[2],[1],[0],[11],[10],[9],[8]];if (yuanchen[ybi] && brs.some(b => yuanchen[ybi].includes(b))) ss.push({n:'æ€¨å—”æ®º',t:'bad',d:'æ†ãã¦ã‚‚é›¢ã‚Œã‚‰ã‚Œãªã„ç¸ãŒã‚ã‚Šã¾ã™ã€‚èº«è¿‘ãªäººã¨ã®è‘›è—¤ã«æ³¨æ„ã€‚',i:'ğŸ’”',lv:'ä¸­'});const guimen = [[5,6],[6,7],[7,8],[8,9],[9,10],[10,11],[11,0],[0,1],[1,2],[2,3],[3,4],[4,5]];if (guimen[ybi] && brs.some(b => guimen[ybi].includes(b))) ss.push({n:'é¬¼é–€é–¢æ®º',t:'bad',d:'ç²¾ç¥çš„è‹¦ç—›ãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã†ã¤ã€ä¸å®‰ã«æ³¨æ„ã€‚ç‘æƒ³ã€å®—æ•™ãŒåŠ©ã‘ã«ãªã‚Šã¾ã™ã€‚',i:'ğŸ‘»',lv:'ä¸­'});if ([0,7].includes(dmi)) ss.push({n:'æ‡¸é‡æ®º',t:'bad',d:'é‡ã®ã‚ˆã†ã«é‹­ã„æ°—é‹ï¼æ‰¹åˆ¤çš„ã§å®Œç’§ä¸»ç¾©ã«æ³¨æ„ã€‚é¼è¡“ã€ç¸«è£½ã«æ‰èƒ½ã€‚',i:'ğŸ“',lv:'ä¸‹'});const liuhai = [[7],[6],[5],[4],[3],[2],[1],[0],[11],[10],[9],[8]];if (liuhai[dbi] && brs.some(b => liuhai[dbi].includes(b) && b !== dbi)) ss.push({n:'å…­å®³æ®º',t:'bad',d:'èº«è¿‘ãªäººã«å®³ã‚’å—ã‘ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚é…å¶è€…ã€å…„å¼Ÿé–¢ä¿‚ã«æ³¨æ„ã€‚',i:'âš ï¸',lv:'ä¸­'});const tianluodiwang = (dbi === 10 && [5,6].includes(mbi)) || (dbi === 11 && [9,10].includes(mbi));if (tianluodiwang) ss.push({n:'å¤©ç¾…åœ°ç¶²',t:'bad',d:'å¤©ã®ç¶²ã«ã‹ã‹ã£ãŸå½¢è±¡ã€‚å£èˆŒã€è¨´è¨Ÿã«æ³¨æ„ã€‚é–‰ã˜è¾¼ã‚ã‚‰ã‚ŒãŸæ„Ÿè¦šã‚’å—ã‘ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',i:'ğŸ•¸ï¸',lv:'ä¸­'});const guluanM = [[0,2],[1,3],[2,5],[3,6],[4,5],[5,6],[6,8],[7,9],[8,11],[9,0]];const guluanF = [[1,3],[0,2],[3,6],[2,5],[3,6],[2,5],[7,9],[6,8],[9,0],[8,11]];const guluanCheck = GENDER === 'm' ? guluanM : guluanF;if (guluanCheck[dmi] && guluanCheck[dmi][1] === dbi) ss.push({n:'å­¤é¸æ®º',t:'bad',d:'å­¤ç‹¬ãªæ°—ãŒã‚ã‚Šã¾ã™ã€‚çµå©šãŒé…ã„ã‹ç‹¬èº«ã®å‚¾å‘ã€‚ä¸€äººã§ã„ã‚‹æ™‚é–“ãŒå¤šã„ã€‚',i:'ğŸ¦¢',lv:'ä¸‹'});const sanzai = {0:[2,3,4],
1:[11,0,1],
2:[8,9,10],
3:[5,6,7],
4:[2,3,4],
5:[11,0,1],
6:[8,9,10],
7:[5,6,7],
8:[2,3,4],
9:[11,0,1],
10:[8,9,10],
11:[5,6,7]};const curYear = new Date().getFullYear();const curYearBranch = (curYear - 4) % 12;if (sanzai[ybi] && sanzai[ybi].includes(curYearBranch)) ss.push({n:'ä¸‰ç½ æœŸé–“',t:'bad',d:'ç¾åœ¨ä¸‰ç½æœŸé–“ã§ã™ï¼3å¹´é–“æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ç„¡ç†ãªæ‹¡å¼µã€å¼•è¶Šã€æ‰‹è¡“ã‚’é¿ã‘ã¦ãã ã•ã„ã€‚',i:'ğŸ”¥',lv:'ä¸­'});const panan = {0:2,1:3,2:5,3:6,4:5,5:6,6:8,7:9,8:11,9:0};if (brs.includes(panan[dmi])) ss.push({n:'æ”€éæ®º',t:'good',d:'è·å ´é‹ãŒè‰¯ã„ã§ã™ï¼å®‰å®šã—ãŸçµ„ç¹”ã§æ˜‡é€²ã™ã‚‹ã‚¿ã‚¤ãƒ—ã€‚å…¬ä¼æ¥­ã€å¤§ä¼æ¥­ã«é©åˆã€‚',i:'ğŸ’º',lv:'ä¸­'});const tianchu = {0:5,1:6,2:8,3:9,4:8,5:9,6:11,7:0,8:2,9:3};if (brs.includes(tianchu[dmi])) ss.push({n:'å¤©å»šè²´äºº',t:'good',d:'é£Ÿã¹ã‚‹ç¦ãŒã‚ã‚Šã¾ã™ï¼ä¸€ç”Ÿé£¢ãˆã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚é£²é£Ÿæ¥­ã«ã‚‚æ‰èƒ½ï¼',i:'ğŸ½ï¸',lv:'ä¸­'});const tiansha = [[2,0],[3,1],[5,2],[6,3],[8,4],[9,5],[11,6],[0,7],[2,8],[3,9]];if (tiansha.some(ts => dbi === ts[0] && dmi === ts[1])) ss.push({n:'å¤©èµ¦æ—¥å‡ºç”Ÿ',t:'good',d:'å¤©ãŒè¨±ã™æ—¥ã«ç”Ÿã¾ã‚Œã¾ã—ãŸï¼ç½ªã‚’çŠ¯ã—ã¦ã‚‚è§£ã‹ã‚Œã€å‡¶ãŒå‰ã«å¤‰ã‚ã‚Šã¾ã™ã€‚',i:'ğŸ•Šï¸',lv:'ä¸Š'});const tanghuaPairs = [[1,6],[6,1],[2,5],[5,2]];for (let i = 0; i < brs.length; i++) {for (let j = i + 1; j < brs.length; j++) {if (tanghuaPairs.some(p => (brs[i] === p[0] && brs[j] === p[1]))) {ss.push({n:'æ¹¯ç«æ®º',t:'bad',d:'ç«å‚·ã€ç†±ç—…ã€è–¬ç‰©å‰¯ä½œç”¨ã«æ³¨æ„ï¼ç«ç—…ã‚„ç²¾ç¥çš„ã‚¹ãƒˆãƒ¬ã‚¹ã«ã‚‚è„†å¼±ã€‚ç†±ã„é£Ÿã¹ç‰©ã€ç«æ°—ã‚’æ‰±ã†æ™‚ã¯æ³¨æ„ã—ã¦ãã ã•ã„ã€‚',i:'ğŸ”¥',lv:'ä¸Š'});break;}}}
const stemIdxs = [STEM.indexOf(saju.year.s), STEM.indexOf(saju.month.s), STEM.indexOf(saju.day.s)];if (saju.hour) stemIdxs.push(STEM.indexOf(saju.hour.s));const stemGods = stemIdxs.map(s => getTenGod(STEM[s], saju.day.s));const hasJungJae = stemGods.some(g => g && g.c === 'æ­£è²¡');const hasPyunJae = stemGods.some(g => g && g.c === 'åè²¡');if (hasJungJae && hasPyunJae) {ss.push({n:'æ­£åè²¡æ··é›‘(è²¡æ··)',t:'bad',d:'æ­£è²¡ã¨åè²¡ãŒå…±ã«å¤©å¹²ã«ã‚ã‚Šã¾ã™ã€‚ç•°æ€§é–¢ä¿‚ãŒè¤‡é›‘ã«ãªã‚Šã‚„ã™ã„ã§ã™ã€‚è²¡ç‰©ã®å‡ºå…¥ã‚Šã‚‚é »ç¹ã§ã™ã€‚ä¸€ã¤ã®ã“ã¨ã«é›†ä¸­ã™ã‚‹ã®ãŒè‰¯ã„ã§ã™ã€‚',i:'ğŸ’”',lv:'ä¸­'});}
const hasShangGuan = stemGods.some(g => g && g.c === 'å‚·å®˜');const hasPyunGwan = stemGods.some(g => g && g.c === 'åå®˜');const tianganHap = [[0,5],[1,6],[2,7],[3,8],[4,9]];let hasShangGuanHapSal = false;for (let i = 0; i < stemIdxs.length; i++) {for (let j = i+1; j < stemIdxs.length; j++) {const godI = stemGods[i];const godJ = stemGods[j];if (godI && godJ) {const isHap = tianganHap.some(([a,b]) =>
(stemIdxs[i] === a && stemIdxs[j] === b) || (stemIdxs[i] === b && stemIdxs[j] === a)
);if (isHap &&
((godI.c === 'å‚·å®˜' && godJ.c === 'åå®˜') || (godI.c === 'åå®˜' && godJ.c === 'å‚·å®˜'))) {hasShangGuanHapSal = true;}}}}
if (hasShangGuanHapSal) {ss.push({n:'å‚·å®˜åˆæ®º',t:'good',d:'å±æ©Ÿã‚’ãƒãƒ£ãƒ³ã‚¹ã«å¤‰ãˆã‚‹äº¤æ¸‰ã®æ‰èƒ½ï¼å‚·å®˜(å¼èˆŒ/æŠ€è¡“)ãŒåå®˜(å±é™º/æ•µ)ã‚’åˆã§åˆ¶å¾¡ã—ã¾ã™ã€‚ãƒ­ãƒ“ã‚¤ã‚¹ãƒˆã€äº¤æ¸‰å®¶ã€ä»²è£è€…ã€è§£æ±ºè€…ã«å“è¶Šã—ã¦ã„ã¾ã™ã€‚',i:'ğŸ¤',lv:'ä¸Š'});}
return ss.length ? ss : [{n:'ç‰¹ç•°ç¥æ®ºãªã—',t:'neutral',d:'ç‰¹åˆ¥ãªç¥æ®ºãŒã‚ã‚Šã¾ã›ã‚“ã€‚å¹³ç©ã§å®‰å®šçš„ãªå››æŸ±ã§ã™ï¼',i:'â˜¯ï¸',lv:'ä¸­'}];}
function calcInteractions(saju) {const res = [];const stems = [STEM.indexOf(saju.year.s), STEM.indexOf(saju.month.s), STEM.indexOf(saju.day.s)];const brs = [BRANCH.indexOf(saju.year.b), BRANCH.indexOf(saju.month.b), BRANCH.indexOf(saju.day.b)];if (saju.hour) { stems.push(STEM.indexOf(saju.hour.s)); brs.push(BRANCH.indexOf(saju.hour.b)); }
const stComb = [[0,5,'ç”²å·±åˆåœŸ'],[1,6,'ä¹™åºšåˆé‡‘'],[2,7,'ä¸™è¾›åˆæ°´'],[3,8,'ä¸å£¬åˆæœ¨'],[4,9,'æˆŠç™¸åˆç«']];const positions = ['å¹´å¹²','æœˆå¹²','æ—¥å¹²','æ™‚å¹²'];for (let [a,b,n] of stComb) {for (let i = 0; i < stems.length; i++) {for (let j = i+1; j < stems.length; j++) {if ((stems[i]===a && stems[j]===b) || (stems[i]===b && stems[j]===a)) {if (j - i === 1) {res.push({t:'å¤©åˆ',c:`${STEM[a].c}+${STEM[b].c}`,m:n,d:`${positions[i]}-${positions[j]} éš£æ¥åˆã€‚æ–°ã—ã„æ°—é‹ã‚’ç”Ÿã¿å‡ºã—ã¾ã™ï¼`});} else {res.push({t:'æ°£çµ†',c:`${STEM[a].c}~${STEM[b].c}`,m:`${n}(åŸºç›¤)`,d:`${positions[i]}-${positions[j]} é è·é›¢ã€‚æ„å¿—ã¯ã‚ã‚‹ãŒåˆåŠ›ãŒå¼±ã„ã§ã™ã€‚`});}}}}}
const stClash = [
[0,6,'ç”²åºšå†²','å¼·ã„æ±ºæ–­åŠ›ã ãŒè¡çªãŒå¤šã„ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã¨æ¨©å¨ã®è‘›è—¤ï¼'],
[1,7,'ä¹™è¾›å†²','å†…é¢ã®è‘›è—¤ã€‚æŸ”è»Ÿã•ã¨å¼·ã•ãŒã¶ã¤ã‹ã‚Šã¾ã™ã€‚'],
[2,8,'ä¸™å£¬å†²','æƒ…ç†±ã¨çŸ¥æµãŒè¡çªã€‚æ€§æ€¥ã•ã«æ³¨æ„ï¼'],
[3,9,'ä¸ç™¸å†²','æ„Ÿæ€§ã¨ç†æ€§ãŒè¡çªã€‚æ„Ÿæƒ…ã®èµ·ä¼ãŒã‚ã‚Šã¾ã™ã€‚'],
[4,4,'æˆŠæˆŠæ¯”è‚©','é ‘å›ºã§è‡ªå·±ä¸»å¼µãŒå¼·ã„ã§ã™ã€‚'],
[5,5,'å·±å·±æ¯”è‚©','ç´”ç²‹ã ãŒå„ªæŸ”ä¸æ–­ã«ãªã‚Šãˆã¾ã™ã€‚']
];for (let [a,b,n,desc] of stClash) {for (let i = 0; i < stems.length; i++) {for (let j = i+1; j < stems.length; j++) {if ((stems[i]===a && stems[j]===b) || (stems[i]===b && stems[j]===a)) {res.push({t:'å¤©æ²–',c:`${STEM[a].c}â†”${STEM[b].c}`,m:n,d:desc});}}}}
const hap = [[0,1,'å­ä¸‘åˆåœŸ'],[2,11,'å¯…äº¥åˆæœ¨'],[3,10,'å¯æˆŒåˆç«'],[4,9,'è¾°é…‰åˆé‡‘'],[5,8,'å·³ç”³åˆæ°´'],[6,7,'åˆæœªåˆç«']];for (let [a,b,n] of hap) {if (brs.includes(a) && brs.includes(b)) res.push({t:'å…­åˆ',c:`${BRANCH[a].c}+${BRANCH[b].c}`,m:n,d:'åœ°æ”¯ãŒåˆã—ã¦å’Œåˆã™ã‚‹æ°—é‹ï¼è‰¯ã„ç¸ï¼'});}
const samhap = [[2,6,10,'å¯…åˆæˆŒ ç«å±€'],[5,9,1,'å·³é…‰ä¸‘ é‡‘å±€'],[8,0,4,'ç”³å­è¾° æ°´å±€'],[11,3,7,'äº¥å¯æœªæœ¨å±€']];for (let [a,b,c,n] of samhap) {const has = [brs.includes(a), brs.includes(b), brs.includes(c)];if (has.filter(x=>x).length === 3) res.push({t:'ä¸‰åˆ',c:`${BRANCH[a].c}${BRANCH[b].c}${BRANCH[c].c}`,m:n,d:'å®Œå…¨ãªä¸‰åˆï¼å¼·åŠ›ãªæ°—ãŒæˆç«‹ã—ã¾ã™ï¼'});else if (has.filter(x=>x).length === 2 && has[1]) res.push({t:'åŠåˆ',c:has[0]?`${BRANCH[a].c}${BRANCH[b].c}`:has[2]?`${BRANCH[b].c}${BRANCH[c].c}`:'',m:n.split(' ')[0]+' åŠåˆ',d:'åŠåˆ†ã®ä¸‰åˆã€‚éƒ¨åˆ†çš„ã«æ°—ãŒæˆç«‹ã—ã¾ã™ã€‚'});}
const wangjiChung = [[0,6,'å­åˆå†²'],[3,9,'å¯é…‰æ²–']];const clash = [
[0,6,'å­åˆå†²','æ°´ç«ç›¸æˆ¦ï¼å¿ƒè¡€ç®¡/è…è‡“ã®å¥åº·ã¨ç²¾ç¥çš„è‘›è—¤ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚'],
[1,7,'ä¸‘æœªæ²–','è²¡ç‰©é–¢é€£ã®å¤‰å‹•ãŒã‚ã‚Šã¾ã™ã€‚ä¸å‹•ç”£ã‚„å¥‘ç´„ã«æ³¨æ„ï¼'],
[2,8,'å¯…ç”³æ²–','æ´»å‹•é‡ãŒå¢—ãˆã¦å¿™ã—ããªã‚Šã¾ã™ã€‚äº¤é€šäº‹æ•…ã€æ‰‹è¡“ã«æ³¨æ„ï¼'],
[3,9,'å¯é…‰æ²–','æ–‡æ›¸ã€å¥‘ç´„å•é¡ŒãŒç”Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚è‚è‡“/è‚ºã®å¥åº·ã«æ³¨æ„ï¼'],
[4,10,'è¾°æˆŒæ²–','é ‘å›ºã•ã®ãŸã‚è¡çªã—ã¾ã™ã€‚è¨´è¨Ÿã€å®˜ç½ã«æ³¨æ„ï¼'],
[5,11,'å·³äº¥å†²','è¨ˆç”»é€šã‚Šã«ã„ã‹ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å¿ƒè¡€ç®¡/æ³Œå°¿å™¨ã®å¥åº·ã«æ³¨æ„ï¼']
];for (let [a,b,n,desc] of clash) {const ia = brs.indexOf(a), ib = brs.indexOf(b);if (ia >= 0 && ib >= 0) {const dist = Math.abs(ia - ib);const isWangji = wangjiChung.some(([wa, wb]) => (a === wa && b === wb) || (a === wb && b === wa));const strength = isWangji ? 'âš¡æ—ºæ”¯ è¡çª' : dist === 1 ? 'âš¡å¼·ã„å†²' : dist === 2 ? 'æ™®é€šã®æ²–' : 'å¼±ã„å†²';res.push({t:'æ²–',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:`${n} (${strength})`,d:desc});}}
if (brs.includes(2) && brs.includes(5) && brs.includes(8)) {res.push({t:'ä¸‰åˆ‘',c:'å¯…å·³ç”³',m:'ç„¡æ©ä¹‹åˆ‘',d:'æ©ã‚’çŸ¥ã‚‰ãªã„åˆ‘ï¼æ©ã‚’ä»‡ã§è¿”ã™ã“ã¨ã«æ³¨æ„ã€‚å¤§äº‹æ•…ã€å®˜ç½ã«æ³¨æ„ï¼'});}
if (brs.includes(1) && brs.includes(10) && brs.includes(7)) {res.push({t:'ä¸‰åˆ‘',c:'ä¸‘æˆŒæœª',m:'ç„¡ç¤¼ä¹‹åˆ‘',d:'ç¤¼å„€ã®ãªã„åˆ‘ï¼é ‘å›ºã§ä¸å’Œã€‚å¯¾äººé–¢ä¿‚ã«æ³¨æ„ï¼'});}
const brHyung = [
[2,5,'å¯…å·³åˆ‘','ç„¡æ©ä¹‹åˆ‘éƒ¨åˆ†ã€‚è£åˆ‡ã‚Šã€å£èˆŒã«æ³¨æ„ï¼'],
[5,8,'å·³ç”³åˆ‘','ç„¡æ©ä¹‹åˆ‘éƒ¨åˆ†ã€‚å†·æ·¡ã§è‘›è—¤ãŒå¤šã„ã€‚'],
[2,8,'å¯…ç”³åˆ‘','è¡çªã—ãªãŒã‚‰ã‚‚æƒ¹ã‹ã‚Œã‚‹é–¢ä¿‚ã€‚äº¤é€šäº‹æ•…ã«æ³¨æ„ï¼'],
[1,10,'ä¸‘æˆŒåˆ‘','ç„¡ç¤¼ä¹‹åˆ‘éƒ¨åˆ†ã€‚é ‘å›ºã§è¡çªï¼'],
[10,7,'æˆŒæœªåˆ‘','ç„¡ç¤¼ä¹‹åˆ‘éƒ¨åˆ†ã€‚åŒæ—ã®äº‰ã„ï¼'],
[1,7,'ä¸‘æœªåˆ‘','ç„¡ç¤¼ä¹‹åˆ‘éƒ¨åˆ†ã€‚è²¡ç‰©ã®äº‰ã„ï¼'],
[0,3,'å­å¯åˆ‘','ç„¡ç¤¼ä¹‹åˆ‘ã€‚ç¤¼å„€ã‚’å¤±ã„ã‚„ã™ã„ã§ã™ã€‚å¤±è¨€ã«æ³¨æ„ï¼']
];for (let [a,b,n,desc] of brHyung) {const ia = brs.indexOf(a), ib = brs.indexOf(b);if (ia >= 0 && ib >= 0) {if (!(brs.includes(2) && brs.includes(5) && brs.includes(8) && [2,5,8].includes(a) && [2,5,8].includes(b)) &&
!(brs.includes(1) && brs.includes(10) && brs.includes(7) && [1,10,7].includes(a) && [1,10,7].includes(b))) {res.push({t:'åˆ‘',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:desc});}}}
const selfPunish = {4:'è¾°è¾°è‡ªåˆ‘',6:'åˆåˆè‡ªåˆ‘',9:'é…‰é…‰è‡ªåˆ‘',11:'äº¥äº¥è‡ªåˆ‘'};for (let i = 0; i < brs.length; i++) {for (let j = i+1; j < brs.length; j++) {if (brs[i] === brs[j] && selfPunish[brs[i]]) {res.push({t:'è‡ªåˆ‘',c:`${BRANCH[brs[i]].c}+${BRANCH[brs[j]].c}`,m:selfPunish[brs[i]],d:'è‡ªåˆ†è‡ªèº«ã‚’å®³ã™ã‚‹åˆ‘ã€‚è‡ªè²¬ã€ã†ã¤ã«æ³¨æ„ï¼è‡ªåˆ†ã‚’æ„›ã—ã¦ãã ã•ã„ã€‚'});}}}
const brPa = [[0,9,'å­é…‰ç ´','é–¢ä¿‚ å£Šã‚Œã‚„ã™ã„ã§ã™ã€‚'],[3,6,'å¯åˆç ´','è¨ˆç”»ãŒç‹‚ã„ã¾ã™ã€‚'],[2,11,'å¯…äº¥ç ´','ä»•ä¸Šã’ã‚’ã—ã£ã‹ã‚Šã—ã¦ãã ã•ã„ã€‚'],[4,1,'è¾°ä¸‘ç ´','åŸºç›¤ãŒæºã‚‰ãã¾ã™ã€‚']];for (let [a,b,n,desc] of brPa) {if (brs.includes(a) && brs.includes(b)) res.push({t:'ç ´',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:desc});}
const brHae = [[0,7,'å­æœªå®³','èº«è¿‘ãªäººãŒè¶³ã‚’å¼•ã£å¼µã‚Šã¾ã™ã€‚'],[1,6,'ä¸‘åˆå®³','å…±åŒäº‹æ¥­æ³¨æ„ï¼'],[2,5,'å¯…å·³å®³','å«‰å¦¬ã‚’å—ã‘ã¾ã™ã€‚ã‚ã¾ã‚Šç›®ç«‹ãŸãªã„ã§ãã ã•ã„ã€‚'],[3,4,'å¯è¾°å®³','äº›ç´°ãªã“ã¨ã§å¤§å–§å˜©ã«ãªã‚Šã¾ã™ã€‚']];for (let [a,b,n,desc] of brHae) {if (brs.includes(a) && brs.includes(b)) res.push({t:'å®³',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:desc});}
const wonJin = [[0,7,'å­æœªå…ƒå—”'],[1,6,'ä¸‘åˆå…ƒå—”'],[2,5,'å¯…å·³å…ƒå—”'],[3,4,'å¯è¾°å…ƒå—”'],[4,3,'è¾°å¯å…ƒå—”'],[5,2,'å·³å¯…å…ƒå—”'],[6,1,'åˆä¸‘å…ƒå—”'],[7,0,'æœªå­å…ƒå—”'],[8,11,'ç”³äº¥å…ƒå—”'],[9,10,'é…‰æˆŒå…ƒå—”'],[10,9,'æˆŒé…‰å…ƒå—”'],[11,8,'äº¥ç”³å…ƒå—”']];for (let [a,b,n] of wonJin) {if (brs.includes(a) && brs.includes(b)) {res.push({t:'æ€¨å—”',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:'æ†ãã¦ã‚‚é›¢ã‚Œã‚‰ã‚Œãªã„æ‚ªç¸ã€‚å¤«å©¦ãªã‚‰è‘›è—¤ãŒæ·±ã¾ã‚Šã¾ã™ã€‚'});}}
const guiMen = [[2,7,'å¯…æœªé¬¼é–€'],[3,8,'å¯ç”³é¬¼é–€'],[4,9,'è¾°é…‰é¬¼é–€'],[5,10,'å·³æˆŒé¬¼é–€'],[6,11,'åˆäº¥é¬¼é–€'],[1,6,'ä¸‘åˆé¬¼é–€']];const hapGuiMen = [[4,9,'è¾°é…‰']];for (let [a,b,n] of guiMen) {if (brs.includes(a) && brs.includes(b)) {const isHapGuiMen = hapGuiMen.some(([ha,hb]) => (a===ha && b===hb) || (a===hb && b===ha));if (isHapGuiMen) {res.push({t:'é¬¼é–€',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n + '(åˆé¬¼é–€)',
d:'åˆã§ã‚ã‚ŠãªãŒã‚‰é¬¼é–€ï¼å¤–è¦‹ã¯è‰¯ãè¦‹ãˆã‚‹ãŒå†…ã§ç—…ã‚€é–¢ä¿‚ã€‚è·å ´/çµ„ç¹”ã§ã‚¹ãƒˆãƒ¬ã‚¹è“„ç©ã«æ³¨æ„ã€‚'});} else {res.push({t:'é¬¼é–€',c:`${BRANCH[a].c}â†”${BRANCH[b].c}`,m:n,d:'é¬¼ç¥ã®é–€ã€‚ç²¾ç¥çš„ä¸å®‰ã€ã†ã¤ç—…ã«æ³¨æ„ã€‚ç‘æƒ³ã¨ä¼‘æ¯ãŒå¿…è¦ã§ã™ã€‚'});}}}
return res.length ? res : [{t:'-',c:'ãªã—',m:'ç‰¹åˆ¥ãª åˆå†²åˆ‘ç ´å®³ ãªã—',d:'å››æŸ±å†…ã«ç‰¹åˆ¥ãªä½œç”¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å¹³ç©ãªå››æŸ±ï¼'}];}
function calcGongmang(saju) {const stemIdx = STEM.indexOf(saju.day.s);const branchIdx = BRANCH.indexOf(saju.day.b);const distFromGap = stemIdx;const xunHeadBranch = (branchIdx - distFromGap + 12) % 12;const GONGMANG_MAP = {0: [10, 11],
10: [8, 9],
8: [6, 7],
6: [4, 5],
4: [2, 3],
2: [0, 1]};const gm = GONGMANG_MAP[xunHeadBranch] || [10, 11];const names = [BRANCH[gm[0]].c, BRANCH[gm[1]].c];const affected = [];const pillars = ['å¹´æ”¯','æœˆæ”¯','æ—¥æ”¯','æ™‚æ”¯'];const brs = [BRANCH.indexOf(saju.year.b), BRANCH.indexOf(saju.month.b), BRANCH.indexOf(saju.day.b)];if (saju.hour) brs.push(BRANCH.indexOf(saju.hour.b));brs.forEach((b, i) => { if (gm.includes(b)) affected.push(pillars[i]); });return { gm, names, affected };}
function analyzeYukChinRon(saju, gender) {const dm = saju.day.s;const result = {father: null,
mother: null,
sibling: null,
spouse: null,
children: null};const godCount = {};const godPositions = {};const pillars = [
{name: 'å¹´æŸ±', pillar: saju.year},
{name: 'æœˆæŸ±', pillar: saju.month},
{name: 'æ—¥æŸ±', pillar: saju.day},
];if (saju.hour) pillars.push({name: 'æ™‚æŸ±', pillar: saju.hour});pillars.forEach(p => {if (p.name === 'æ—¥æŸ±') return;const sGod = getTenGod(p.pillar.s, dm);const branchIdx = BRANCH.findIndex(br => br.c === p.pillar.b.c);const hiddenMain = HIDDEN_STEMS[branchIdx];const mainStem = hiddenMain && hiddenMain.length > 0 ? STEM[hiddenMain[hiddenMain.length - 1].stem] : null;const bGod = mainStem ? getTenGod(mainStem, dm) : null;[sGod, bGod].forEach(god => {if (god && god.c) {if (!godCount[god.c]) godCount[god.c] = 0;if (!godPositions[god.c]) godPositions[god.c] = [];godCount[god.c]++;godPositions[god.c].push(p.name);}});});const fatherGod = 'åè²¡';const fatherCount = godCount[fatherGod] || 0;if (fatherCount >= 2) {result.father = {status: 'strong', desc: 'çˆ¶è¦ªã¨ã®ç¸ãŒæ·±ã„ã§ã™ã€‚çˆ¶ã®åŠ©ã‘ã‚’å—ã‘ã¾ã™ã€‚', icon: 'ğŸ‘¨â€ğŸ‘¦'};} else if (fatherCount === 1) {result.father = {status: 'normal', desc: 'çˆ¶è¦ªã¨å¹³å‡¡ãªé–¢ä¿‚ã§ã™ã€‚é©åº¦ãªè·é›¢æ„ŸãŒè‰¯ã„ã§ã™ã€‚', icon: 'ğŸ‘¨'};} else {result.father = {status: 'weak', desc: 'çˆ¶è¦ªã¨ã®ç¸ãŒå¼±ã„ã‹æ—©ãã‹ã‚‰é›¢ã‚Œã¦æš®ã‚‰ã™å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚', icon: 'ğŸ‘¤'};}
const motherCount = (godCount['æ­£å°'] || 0) + (godCount['åå°'] || 0);if (motherCount >= 2) {result.mother = {status: 'strong', desc: 'æ¯è¦ªã¨ã®ç¸ãŒæ·±ã„ã§ã™ã€‚ æ¯ã®æ„›ã‚’å¤šãå—ã‘ã¾ã™ã€‚', icon: 'ğŸ‘©â€ğŸ‘¦'};} else if (motherCount === 1) {result.mother = {status: 'normal', desc: 'æ¯ã¨å¹³å‡¡ãª é–¢ä¿‚ã§ã™.', icon: 'ğŸ‘©'};} else {result.mother = {status: 'weak', desc: 'æ¯ã¨ã®ç¸ãŒå¼±ã„ã‹ç‹¬ç«‹ãŒæ—©ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚', icon: 'ğŸ‘¤'};}
const siblingCount = (godCount['æ¯”è‚©'] || 0) + (godCount['åŠ«è²¡'] || 0);if (siblingCount >= 2) {result.sibling = {status: 'strong', desc: 'å…„å¼Ÿå§‰å¦¹ãŒå¤šã„ã‹ç¸ãŒæ·±ã„ã§ã™. ç«¶äº‰ã‚‚ã‚ã‚Šå¾—ã¾ã™ã€‚', icon: 'ğŸ‘«'};} else if (siblingCount === 1) {result.sibling = {status: 'normal', desc: 'å…„å¼Ÿå§‰å¦¹ã¨å¹³å‡¡ãªé–¢ä¿‚ã§ã™ã€‚', icon: 'ğŸ§‘â€ğŸ¤â€ğŸ§‘'};} else {result.sibling = {status: 'weak', desc: 'å…„å¼Ÿå§‰å¦¹ãŒå°‘ãªã„ã‹ç¸ãŒè–„ã„ã§ã™ã€‚ç‹¬ç«‹å¿ƒãŒå¼·ã„ã€‚', icon: 'ğŸ§'};}
let spouseCount, spouseGods;if (gender === 'm') {spouseCount = (godCount['æ­£è²¡'] || 0) + (godCount['åè²¡'] || 0);spouseGods = ['æ­£è²¡', 'åè²¡'];} else {spouseCount = (godCount['æ­£å®˜'] || 0) + (godCount['åå®˜'] || 0);spouseGods = ['æ­£å®˜', 'åå®˜'];}
const dayBranchIdx = BRANCH.findIndex(br => br.c === saju.day.b.c);const dayHiddenMain = HIDDEN_STEMS[dayBranchIdx];const dayMainStem = dayHiddenMain && dayHiddenMain.length > 0 ? STEM[dayHiddenMain[dayHiddenMain.length - 1].stem] : null;const spouseGod = dayMainStem ? getTenGod(dayMainStem, dm) : null;const spouseGodMatch = spouseGod && spouseGod.c && spouseGods.includes(spouseGod.c);if (spouseCount >= 2 && spouseGodMatch) {result.spouse = {status: 'excellent', desc: 'é…å¶è€…ã®ç¦ãŒã¨ã¦ã‚‚è‰¯ã„ã§ã™ï¼è‰¯ã„ä¼´ä¾¶ã«å‡ºä¼šãˆã¾ã™ã€‚', icon: 'ğŸ’‘'};} else if (spouseCount >= 1 || spouseGodMatch) {result.spouse = {status: 'good', desc: 'é…å¶è€…é‹ãŒè‰¯ã„æ–¹ã§ã™ã€‚çµå©šã™ã‚Œã°å®‰å®šã—ã¾ã™ã€‚', icon: 'ğŸ’'};} else {result.spouse = {status: 'normal', desc: 'é…å¶è€…ã®ç¸ã¯å¹³å‡¡ã§ã™ã€‚é…ãå‡ºä¼šã£ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã€‚', icon: 'ğŸ’’'};}
let childCount;if (gender === 'm') {childCount = (godCount['æ­£å®˜'] || 0) + (godCount['åå®˜'] || 0);} else {childCount = (godCount['é£Ÿç¥'] || 0) + (godCount['å‚·å®˜'] || 0);}
const hasHour = !!saju.hour;if (childCount >= 2) {result.children = {status: 'strong', desc: 'å­å¥³ã®ç¦ãŒè‰¯ã„ã§ã™ï¼å­å¥³ãŒçˆ¶æ¯ã‚’è¼ã‹ã›ã¦ãã‚Œã¾ã™ã€‚', icon: 'ğŸ‘¶ğŸ‘¶'};} else if (childCount === 1) {result.children = {status: 'normal', desc: 'å­å¥³ã¨å¹³å‡¡ãªç¸ã§ã™ã€‚1-2äººç¨‹åº¦ãŒè‰¯ã„ã§ã™ã€‚', icon: 'ğŸ‘¶'};} else {result.children = {status: 'weak', desc: 'å­å¥³ã®ç¸ãŒå¼±ã„ã‹é…ã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚åŠªåŠ›ãŒå¿…è¦ã§ã™ã€‚', icon: 'ğŸ¼'};}
return result;}
function analyzeHealth(saju, gods) {const result = {strong: [],
weak: [],
advice: []};const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (p && p.s) elCount[p.s.e]++;if (p && p.b) elCount[p.b.e]++;});const healthMap = {wood: {organ: 'è‚è‡“(è‚), èƒ†åš¢, ç›®, ç­‹è‚‰, çˆª',
excess: 'é ­ç—›, ç›®ã®å……è¡€, ç­‹è‚‰ç—™æ”£, æ€’ã‚Šã£ã½ã„',
deficient: 'è¦–åŠ›ä½ä¸‹, ç–²åŠ´, ç­‹åŠ›å¼±åŒ–, çˆªã®å‰²ã‚Œ',
advice: 'ç·‘è‰²é‡èœæ‘‚å–, ç›®ã®ä¼‘æ¯, ã‚¹ãƒˆãƒ¬ãƒƒãƒ'},
fire: {organ: 'å¿ƒè‡“(å¿ƒ), å°è…¸, èˆŒ, è¡€ç®¡',
excess: 'ä¸çœ ç—‡, å‹•æ‚¸, èˆŒã®ç‚ç—‡, é«˜è¡€åœ§',
deficient: 'ä½è¡€åœ§, æ‰‹è¶³ã®å†·ãˆ, é¬±ç—‡, ç„¡æ°—åŠ›',
advice: 'èµ¤ã„é£Ÿã¹ç‰©(ãƒˆãƒãƒˆ, ãƒŠãƒ„ãƒ¡), æœ‰é…¸ç´ é‹å‹•, ç‘æƒ³'},
earth: {organ: 'è„¾è‡“(è„¾), èƒƒè…¸, å”‡, è‚‰',
excess: 'æ¶ˆåŒ–ä¸è‰¯, è‚¥æº€, å”‡è’ã‚Œ, å¿ƒé…éå¤š',
deficient: 'é£Ÿæ¬²ä¸æŒ¯, ç—©ã›, æ¶ˆåŒ–åŠ›å¼±ã„, ç„¡åŠ›æ„Ÿ',
advice: 'é»„è‰²ã„é£Ÿã¹ç‰©(ã‚µãƒ„ãƒã‚¤ãƒ¢, ã‚«ãƒœãƒãƒ£), è¦å‰‡çš„ãªé£Ÿäº‹, éé£Ÿç¦æ­¢'},
metal: {organ: 'è‚º(è‚º), å¤§è…¸, é¼», çš®è†š, ä½“æ¯›',
excess: 'çš®è†šãƒˆãƒ©ãƒ–ãƒ«, ä¾¿ç§˜, å‘¼å¸å™¨éæ•',
deficient: 'é¢¨é‚ªã‚’å¼•ãã‚„ã™ã„, çš®è†šä¹¾ç‡¥, å¤§è…¸å¼±ã„, æ‚²ã—ã¿å¤šã„',
advice: 'ç™½ã„é£Ÿã¹ç‰©(å¤§æ ¹, æ¢¨, æ¡”æ¢—), å‘¼å¸é‹å‹•, çš®è†šä¿æ¹¿'},
water: {organ: 'è…è‡“(è…), è†€èƒ±, è€³, éª¨, é«ª',
excess: 'æµ®è…«, å¤œå°¿ç—‡, ææ€–éå¤š',
deficient: 'è…°å¼±ã„, è„±æ¯›, è€³é³´ã‚Š, ç²¾åŠ›ä½ä¸‹, éª¨å¼±ã„',
advice: 'é»’ã„é£Ÿã¹ç‰©(é»’è±†, ãƒ¯ã‚«ãƒ¡), ååˆ†ãªæ°´åˆ†, è…°é‹å‹•'}};const elNames = {wood:'æœ¨(æœ¨)', fire:'ç«(ç«)', earth:'åœŸ(åœŸ)', metal:'é‡‘(é‡‘)', water:'æ°´(æ°´)'};for (const el in elCount) {const count = elCount[el];const info = healthMap[el];if (count >= 3) {result.strong.push({element: elNames[el],
count: count,
organ: info.organ,
symptom: info.excess,
icon: 'âš ï¸'});} else if (count === 0) {result.weak.push({element: elNames[el],
count: count,
organ: info.organ,
symptom: info.deficient,
icon: 'â—'});}}
if (gods.yong) {const yongInfo = healthMap[gods.yong];if (yongInfo) {result.advice.push({title: `ç”¨ç¥(${elNames[gods.yong]}) è£œå¼·`,
desc: yongInfo.advice,
icon: 'ğŸ’ª'});}}
let minEl = null, minCount = 10;for (const el in elCount) {if (elCount[el] < minCount) {minCount = elCount[el];minEl = el;}}
if (minEl && healthMap[minEl]) {result.advice.push({title: `ä¸è¶³ã—ãŸ ${elNames[minEl]} è£œå¼·`,
desc: healthMap[minEl].advice,
icon: 'ğŸ©º'});}
const monthEl = saju.month.b.e;if (monthEl === 'water' || monthEl === 'metal') {result.advice.push({title: 'å†·ãŸã„ æ°— æ³¨æ„',
desc: 'ç§‹/å†¬ã«ç”Ÿã¾ã‚Œä½“ãŒå†·ãˆã‚„ã™ã„ã§ã™ã€‚æš–ã‹ãï¼',
icon: 'ğŸ”¥'});} else if (monthEl === 'fire') {result.advice.push({title: 'æš‘ã„æ°—ã«æ³¨æ„',
desc: 'å¤ã«ç”Ÿã¾ã‚Œç†±ãŒå¤šã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æ¶¼ã—ãï¼',
icon: 'â„ï¸'});}
return result;}
function analyzeGungwi(saju, birthYear) {const dm = saju.day.s;const curAge = new Date().getFullYear() - birthYear;const gongmang = calcGongmang(saju);const gmBranches = gongmang.gm;const gungwi = [
{name: 'å¹´æŸ±',
alias: 'å…ˆç¥–å®®Â·ç¤¾ä¼šå®®',
pillar: saju.year,
ageRange: '1-15æ­³',
represents: 'å…ˆç¥–, ç¥–çˆ¶æ¯, ç¤¾ä¼šçš„ç’°å¢ƒ, åˆå¹´é‹',
bodyPart: 'é ­, é¡”',
relationM: 'ç¥–çˆ¶, å¤–å®¶',
relationF: 'ç¥–æ¯, å¤–å®¶'},
{name: 'æœˆæŸ±',
alias: 'çˆ¶æ¯å®®Â·è·æ¥­å®®',
pillar: saju.month,
ageRange: '16-30æ­³',
represents: 'çˆ¶æ¯, å…„å¼Ÿ, è·æ¥­, äº‹æ¥­, é’å¹´é‹',
bodyPart: 'èƒ¸, è‚©',
relationM: 'çˆ¶, å…„å¼Ÿ',
relationF: 'æ¯, å§‰å¦¹'},
{name: 'æ—¥æŸ±',
alias: 'é…å¶è€…å®®Â·æœ¬äººå®®',
pillar: saju.day,
ageRange: '31-45æ­³',
represents: 'æœ¬äºº, é…å¶è€…, å®¶åº­, ä¸­å¹´é‹',
bodyPart: 'è…°, è…¹éƒ¨',
relationM: 'å¦», è‡ªåˆ†è‡ªèº«',
relationF: 'å¤«, è‡ªåˆ†è‡ªèº«'},
{name: 'æ™‚æŸ±',
alias: 'å­å¥³å®®Â·æ™©å¹´å®®',
pillar: saju.hour,
ageRange: '46æ­³ä»¥é™',
represents: 'å­å¥³, å¼Ÿå­, å¾Œè¼©, æ™©å¹´é‹, çµæœ',
bodyPart: 'è„š, è¶³',
relationM: 'å­å¥³, å¾Œè¼©',
relationF: 'å­å¥³, å¾Œè¼©'}
];return gungwi.map((g, idx) => {if (!g.pillar) return {...g, analysis: 'æ™‚æŸ± ãªã—', god: null, state: null};const god = idx !== 2 ? getTenGod(g.pillar.s, dm) : null;const state = getTwelveState(dm, g.pillar.b);let analysis = '';let rating = 'neutral';const bi = BRANCH.indexOf(g.pillar.b);const isVoid = gmBranches.includes(bi);if (isVoid) {analysis = 'ç©ºäº¡ã§æ°—ãŒç©ºã„ã¦ã„ã¾ã™ã€‚è©²å½“æ™‚æœŸã«è‡ªã‚‰é–‹æ‹“ã™ã¹ãã§ã™ã€‚';rating = 'neutral';} else if (state.l >= 9) {analysis = 'ã“ã®æ™‚æœŸã«ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå¼·ã„ï¼æ´»ç™ºã«å‹•ãæ™‚æœŸã€‚';rating = 'good';} else if (state.l >= 6) {analysis = 'å®‰å®šçš„ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã§ã™ã€‚é †èª¿ãªæ™‚æœŸã€‚';rating = 'good';} else if (state.l >= 3) {analysis = 'æ™®é€šã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã§ã™ã€‚åŠªåŠ›ãŒå¿…è¦ãªæ™‚æœŸã€‚';rating = 'neutral';} else {analysis = 'ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå¼±ã„æ™‚æœŸã€‚ ç„¡ç†ã›ãšãŠéã”ã—ãã ã•ã„ã€‚';rating = 'bad';}
if (god) {if (['æ­£å®˜','æ­£è²¡','æ­£å°'].includes(god.c)) {analysis += ` ${god.c}ãŒã‚ã‚Šå®‰å®šçš„ã§ã™ã€‚`;rating = 'good';} else if (['åå®˜','åŠ«è²¡'].includes(god.c)) {analysis += ` ${god.c}ãŒã‚ã‚Šå¤‰åŒ–ã¨æŒ‘æˆ¦ãŒã‚ã‚Šã¾ã™ã€‚`;}}
let isCurrent = false;if (idx === 0 && curAge <= 15) isCurrent = true;else if (idx === 1 && curAge >= 16 && curAge <= 30) isCurrent = true;else if (idx === 2 && curAge >= 31 && curAge <= 45) isCurrent = true;else if (idx === 3 && curAge >= 46) isCurrent = true;return {...g,
god,
state,
analysis,
rating,
isCurrent};});}
function analyzeTwelveStates(saju) {const dm = saju.day.s;const result = {pillars: [],
summary: '',
dominant: null,
lifeFlow: []};const pillarNames = ['å¹´æŸ±', 'æœˆæŸ±', 'æ—¥æŸ±', 'æ™‚æŸ±'];const pillars = [saju.year, saju.month, saju.day, saju.hour];pillars.forEach((p, idx) => {if (!p) return;const state = getTwelveState(dm, p.b);result.pillars.push({name: pillarNames[idx],
branch: p.b,
state: state,
energy: state.l});});const lifeStages = [
{stage: 'é•·ç”Ÿ', desc: 'æ–°ã—ã„å§‹ã¾ã‚Šã€å¸Œæœ›ã¨å¯èƒ½æ€§', life: 'å¹¼å…æœŸ'},
{stage: 'æ²æµ´', desc: 'å¤‰åŒ–ã¨ä¸å®‰å®šã€æ–°ã—ã„ç’°å¢ƒ', life: 'é’å°‘å¹´æœŸ'},
{stage: 'å† å¸¯', desc: 'æˆé•·ã¨ç™ºå±•ã€è‡ªç«‹', life: 'é’å¹´æœŸ'},
{stage: 'å»ºç¦„', desc: 'å®‰å®šã¨ç¹æ „ã€å…¨ç››æœŸ', life: 'å£®å¹´æœŸ'},
{stage: 'å¸æ—º', desc: 'é ‚ç‚¹ã€æœ€é«˜æ½®ã€æ¨©åŠ›', life: 'ä¸­å¹´æœŸ'},
{stage: 'è¡°(è¡°)', desc: 'ä¸‹è½ã®å§‹ã¾ã‚Šã€æ•´ç†', life: 'ä¸­å¹´å¾ŒæœŸ'},
{stage: 'ç—…(ç—…)', desc: 'å¼±åŒ–ã€å¥åº·æ³¨æ„', life: 'è€å¹´åˆæœŸ'},
{stage: 'æ­»(æ­»)', desc: 'ä»•ä¸Šã’ã€çµ‚ã‚ã‚Š', life: 'è€å¹´æœŸ'},
{stage: 'å¢“(å¢“)', desc: 'ä¿å­˜ã€è“„ç©ã€éš é€€', life: 'è€å¹´å¾ŒæœŸ'},
{stage: 'çµ¶(çµ¶)', desc: 'ç©ºç™½ã€æ–­çµ¶', life: 'æ™©å¹´'},
{stage: 'èƒ(èƒ)', desc: 'å¦Šå¨ ã€æº–å‚™', life: 'æ–°ã—ã„æº–å‚™'},
{stage: 'é¤Š(é¤Š)', desc: 'é¤Šè‚²ã€ä¿è­·', life: 'å›å¾©æœŸ'}
];const dayState = getTwelveState(dm, saju.day.b);if (dayState.l >= 10) {result.summary = 'åŸºæœ¬ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒéå¸¸ã«å¼·ã„ã§ã™ï¼ æ´»åŠ›ãŒæº¢ã‚Œæ¨é€²åŠ›ãŒã‚ã‚Šã¾ã™ã€‚';result.dominant = 'strong';} else if (dayState.l >= 7) {result.summary = 'åŸºæœ¬ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒè‰¯ã„ã§ã™ã€‚ å®‰å®šçš„ã§ç€å®Ÿã§ã™ã€‚';result.dominant = 'good';} else if (dayState.l >= 4) {result.summary = 'åŸºæœ¬ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæ™®é€šã§ã™ã€‚åŠªåŠ›ã§è£œå®Œã—ã¦ãã ã•ã„ã€‚';result.dominant = 'neutral';} else {result.summary = 'åŸºæœ¬ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒå¼±ã„ã§ã™ã€‚ä½“åŠ›ç®¡ç†ãŒé‡è¦ã§ã™ã€‚';result.dominant = 'weak';}
result.lifeFlow = result.pillars.map((p, idx) => {const ageRange = ['åˆå¹´(1-15)', 'é’å¹´(16-30)', 'ä¸­å¹´(31-45)', 'æ™©å¹´(46+)'][idx];return {period: ageRange,
state: p.state.k,
energy: p.energy,
advice: p.energy >= 8 ? 'æ´»ç™ºãªæ™‚æœŸï¼' : p.energy >= 5 ? 'å®‰å®šçš„ãªæ™‚æœŸ' : p.energy >= 3 ? 'å¿è€ã®æ™‚æœŸ' : 'å›å¾©ã®æ™‚æœŸ'};});return result;}
function analyzeAdvancedInteractions(saju) {const result = {hapHwa: [],
chungHaeso: [],
samhapGuk: [],
warnings: []};const mbi = BRANCH.indexOf(saju.month.b);const season = SEASON[mbi];const stems = [saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s].filter(s => s);const stemIdxs = stems.map(s => STEM.indexOf(s));const brs = [BRANCH.indexOf(saju.year.b), BRANCH.indexOf(saju.month.b), BRANCH.indexOf(saju.day.b)];if (saju.hour) brs.push(BRANCH.indexOf(saju.hour.b));const ganHap = [
{pair: [0,5], result: 'earth', name: 'ç”²å·±åˆåœŸ', condition: 'åœŸæœˆ(è¾°æˆŒä¸‘æœªæœˆ)ã¾ãŸã¯åœŸãŒæ—ºç››ãªæ™‚'},
{pair: [1,6], result: 'metal', name: 'ä¹™åºšåˆé‡‘', condition: 'é‡‘æœˆ(ç”³é…‰æœˆ)ã¾ãŸã¯é‡‘ãŒæ—ºç››ãªæ™‚'},
{pair: [2,7], result: 'water', name: 'ä¸™è¾›åˆæ°´', condition: 'æ°´æœˆ(äº¥å­æœˆ)ã¾ãŸã¯æ°´ãŒæ—ºç››ãªæ™‚'},
{pair: [3,8], result: 'wood', name: 'ä¸å£¬åˆæœ¨', condition: 'æœ¨æœˆ(å¯…å¯æœˆ)ã¾ãŸã¯æœ¨ãŒæ—ºç››ãªæ™‚'},
{pair: [4,9], result: 'fire', name: 'æˆŠç™¸åˆç«', condition: 'ç«æœˆ(å·³åˆæœˆ)ã¾ãŸã¯ç«ãŒæ—ºç››ãªæ™‚'}
];for (let gh of ganHap) {if (stemIdxs.includes(gh.pair[0]) && stemIdxs.includes(gh.pair[1])) {const resultEl = gh.result;let isHwa = false;let reason = '';const seasonEl = {spring:'wood', summer:'fire', autumn:'metal', winter:'water'};if (seasonEl[season] === resultEl) {isHwa = true;reason = `æœˆä»¤ãŒ ${ELEMENT[resultEl].k}ã§åˆåŒ–æˆç«‹ï¼`;}
const resultElCount = brs.filter(b => BRANCH[b].e === resultEl).length;if (resultElCount >= 2) {isHwa = true;reason = `åœ°æ”¯ã«${ELEMENT[resultEl].k}ãŒ${resultElCount}å€‹ã§åˆåŒ–æˆç«‹ï¼`;}
result.hapHwa.push({name: gh.name,
stems: `${STEM[gh.pair[0]].c}+${STEM[gh.pair[1]].c}`,
result: isHwa ? ELEMENT[resultEl].k : null,
isHwa,
reason: isHwa ? reason : 'åˆã¯ã‚ã‚‹ãŒåŒ–(åŒ–)ã•ã‚Œãªã„ - åˆå»çŠ¶æ…‹'});}}
const samhap = [
{branches: [2,6,10], result: 'fire', name: 'å¯…åˆæˆŒ ç«å±€(å¯…åˆæˆŒ ç«å±€)'},
{branches: [5,9,1], result: 'metal', name: 'å·³é…‰ä¸‘ é‡‘å±€(å·³é…‰ä¸‘ é‡‘å±€)'},
{branches: [8,0,4], result: 'water', name: 'ç”³å­è¾° æ°´å±€(ç”³å­è¾° æ°´å±€)'},
{branches: [11,3,7], result: 'wood', name: 'äº¥å¯æœªæœ¨å±€(äº¥å¯æœª æœ¨å±€)'}
];for (let sh of samhap) {const presentBranches = sh.branches.filter(b => brs.includes(b));const hasCount = presentBranches.length;if (hasCount >= 2) {const hasCenter = brs.includes(sh.branches[1]);const branchChars = presentBranches.map(b => BRANCH[b].c).join('');const displayName = hasCount === 3 ? sh.name : branchChars + ' åŠåˆ(' + sh.name.split('(')[0] + ')';result.samhapGuk.push({name: displayName,
complete: hasCount === 3,
hasCenter,
result: ELEMENT[sh.result].k,
desc: hasCount === 3 ?
`å®Œå…¨ãª${sh.name}æˆç«‹ï¼${ELEMENT[sh.result].k}ã®æ°—ãŒå¼·ã„ã§ã™ã€‚` :
hasCenter ?
`${branchChars} åŠåˆ. æ—ºæ”¯(${BRANCH[sh.branches[1]].c})ãŒã‚ã‚ŠåŠ›ãŒã‚ã‚Šã¾ã™ã€‚` :
`${branchChars} åŠåˆã§ã™ãŒæ—ºæ”¯ãŒãªãåŠ›ãŒå¼±ã„ã§ã™ã€‚`});}}
const clashPairs = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];for (let [a,b] of clashPairs) {if (brs.includes(a) && brs.includes(b)) {let isResolved = false;let resolveReason = '';const hapPairs = [[0,1],[2,11],[3,10],[4,9],[5,8],[6,7]];for (let [ha, hb] of hapPairs) {if ((brs.includes(a) && (brs.includes(ha) && a === hb) || (brs.includes(hb) && a === ha)) ||
(brs.includes(b) && (brs.includes(ha) && b === hb) || (brs.includes(hb) && b === ha))) {isResolved = true;resolveReason = 'åˆ(åˆ)ãŒã‚ã‚Šæ²–ãŒç·©å’Œã•ã‚Œã‚‹';}}
result.chungHaeso.push({clash: `${BRANCH[a].c}${BRANCH[b].c}æ²–`,
isResolved,
reason: isResolved ? resolveReason : 'æ²–ãŒè§£æ¶ˆã•ã‚Œãªã„ - æ³¨æ„å¿…è¦'});}}
const dm = saju.day.s;const godCounts = {};stems.forEach((s, idx) => {if (idx === 2) return;const god = getTenGod(s, dm);godCounts[god.c] = (godCounts[god.c] || 0) + 1;});if (godCounts['å‚·å®˜'] && godCounts['æ­£å®˜']) {result.warnings.push({type: 'å‚·å®˜è‚©å† ',
desc: 'å‚·å®˜ãŒæ­£å®˜ã‚’å‰‹ã—ã¾ã™ã€‚è·å ´ã€åèª‰ã«å•é¡ŒãŒç”Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å®˜è·ã‚ˆã‚Šäº‹æ¥­ãŒè‰¯ã„ã§ã™ã€‚'});}
if (godCounts['åå°'] && godCounts['é£Ÿç¥']) {result.warnings.push({type: 'æ¢Ÿç¥å¥ªé£Ÿ',
desc: 'åå°ãŒé£Ÿç¥ã‚’å‰‹ã—ã¾ã™ã€‚æ‰èƒ½ç™ºæ®ãŒå¦¨ã’ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚é¬±ã«æ³¨æ„ï¼'});}
return result;}
function getJijanggan(branch) {const bi = BRANCH.indexOf(branch);return JIJANGGAN[bi] || [];}
function hasHiddenStem(branch, stemIdx) {const jj = getJijanggan(branch);return jj.some(j => j.stem === stemIdx);}
function analyzeRoot(dayStem, branch) {const jj = getJijanggan(branch);const dsEl = dayStem.e;const roots = [];jj.forEach(j => {const hiddenStem = STEM[j.stem];if (hiddenStem.e === dsEl) {const strength = j.days >= 16 ? 'strong' : j.days >= 7 ? 'medium' : 'weak';roots.push({stem: hiddenStem,
days: j.days,
type: j.type,
strength,
name: j.name});}});return roots;}
function analyzeTougan(saju) {const result = [];const allStems = [
{pillar: 'å¹´å¹²', stem: saju.year.s},
{pillar: 'æœˆå¹²', stem: saju.month.s},
{pillar: 'æ—¥å¹²', stem: saju.day.s},
];if (saju.hour) allStems.push({pillar: 'æ™‚å¹²', stem: saju.hour.s});const allBranches = [
{pillar: 'å¹´æ”¯', branch: saju.year.b},
{pillar: 'æœˆæ”¯', branch: saju.month.b},
{pillar: 'æ—¥æ”¯', branch: saju.day.b},
];if (saju.hour) allBranches.push({pillar: 'æ™‚æ”¯', branch: saju.hour.b});allStems.forEach(st => {const si = STEM.indexOf(st.stem);allBranches.forEach(br => {const jj = getJijanggan(br.branch);jj.forEach(j => {if (j.stem === si) {result.push({stem: st.stem,
stemPillar: st.pillar,
branch: br.branch,
branchPillar: br.pillar,
days: j.days,
type: j.type,
desc: `${st.stem.c}(${st.pillar})ãŒ${br.branch.c}(${br.pillar})ã«æ ¹ã‚’ä¸‹ã‚ã™`});}});});});return result;}
function analyzeAllRoots(saju) {const dm = saju.day.s;const branches = [
{name: 'å¹´æ”¯', branch: saju.year.b},
{name: 'æœˆæ”¯', branch: saju.month.b},
{name: 'æ—¥æ”¯', branch: saju.day.b}
];if (saju.hour) branches.push({name: 'æ™‚æ”¯', branch: saju.hour.b});const allRoots = [];let totalScore = 0;branches.forEach(b => {const roots = analyzeRoot(dm, b.branch);roots.forEach(r => {let score = 0;if (r.strength === 'strong') score = 3;else if (r.strength === 'medium') score = 2;else score = 1;if (b.name === 'æœˆæ”¯') score *= 2;if (b.name === 'æ—¥æ”¯') score *= 1.5;totalScore += score;allRoots.push({...r,
position: b.name,
branch: b.branch,
score});});});return { roots: allRoots, totalScore };}
function countElementsAdvanced(saju) {const ec = {wood:0, fire:0, earth:0, metal:0, water:0};const details = {wood:[], fire:[], earth:[], metal:[], water:[]};const stems = [
{pos:'å¹´å¹²', s:saju.year.s},
{pos:'æœˆå¹²', s:saju.month.s},
{pos:'æ—¥å¹²', s:saju.day.s}
];if (saju.hour) stems.push({pos:'æ™‚å¹²', s:saju.hour.s});stems.forEach(st => {ec[st.s.e] += 1;details[st.s.e].push(`${st.s.c}(${st.pos}) 1.0`);});const branches = [
{pos:'å¹´æ”¯', b:saju.year.b},
{pos:'æœˆæ”¯', b:saju.month.b},
{pos:'æ—¥æ”¯', b:saju.day.b}
];if (saju.hour) branches.push({pos:'æ™‚æ”¯', b:saju.hour.b});branches.forEach(br => {ec[br.b.e] += 1;details[br.b.e].push(`${br.b.c}(${br.pos}) 1.0`);});branches.forEach(br => {const bi = BRANCH.indexOf(br.b);const jj = JIJANGGAN[bi] || [];jj.forEach(j => {const hiddenStem = STEM[j.stem];const ratio = j.days / 30;ec[hiddenStem.e] += ratio * 0.5;details[hiddenStem.e].push(`${hiddenStem.c}(${br.pos}è—) ${(ratio*0.5).toFixed(2)}`);});});return { counts: ec, details };}
function countElements(saju) {const ec = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if (!p) return;ec[p.s.e]++;ec[p.b.e]++;});return ec;}
function genTodayFortune(saju, gods) {const now = new Date();const ty = now.getFullYear(), tm = now.getMonth() + 1, td = now.getDate();const dp = calcDayPillar(ty, tm, td);const dm = saju.day.s;const god = getTenGod(dp.s, dm);const state = getTwelveState(dm, dp.b);const godMeaning = {'æ¯”è‚©': {r:3, l:'ğŸ¥Š ç«¶äº‰ã®æ—¥', d:'ä»Šæ—¥ã¯ç§ã¨ä¼¼ãŸäººãŒå¤šãè¦‹ãˆã‚‹æ—¥ã€‚ç«¶äº‰è€…ãŒç¾ã‚ŒãŸã‚Šã€è‡ªåˆ†ã®æ„è¦‹ã‚’å¼·ãä¸»å¼µã™ã‚‹ã“ã¨ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> ä¸€äººã§ã§ãã‚‹ã“ã¨ã«é›†ä¸­ã—ã¦ãã ã•ã„ã€‚'},
'åŠ«è²¡': {r:2, l:'ğŸ’¸ æ”¯å‡ºæ³¨æ„å ±', d:'ä»Šæ—¥ã¯ãŠé‡‘ãŒå‡ºã¦ã„ãã‚„ã™ã„æ—¥ï¼è¡å‹•è²·ã„ã€å‹äººã¸ã®è²¸ã—ã¯é¿ã‘ã¦ãã ã•ã„ã€‚<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> ã€Œæ˜æ—¥ã‚‚ã†ä¸€åº¦è€ƒãˆã‚‹ã€ãŒä»Šæ—¥ã®é­”æ³•ã®å‘ªæ–‡ï¼'},
'é£Ÿç¥': {r:4, l:'ğŸ½ï¸ ç¾å‘³ã—ã„ä¸€æ—¥', d:'ä½•ã‚’ã—ã¦ã‚‚ã‚†ã£ãŸã‚Šã¨æ°—åˆ†ãŒè‰¯ã„æ—¥ï¼ç¾å‘³ã—ã„ã‚‚ã®ã‚’é£Ÿã¹ã¦è¶£å‘³æ´»å‹•ã‚‚è‰¯ã„ã§ã™ã€‚<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> å¥½ããªé£Ÿã¹ç‰©ã‚’é£Ÿã¹ãªãŒã‚‰ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¾—ã¦ã—ã¦ãã ã•ã„.'},
'å‚·å®˜': {r:3, l:'ğŸ¤ è¡¨ç¾åŠ›UP', d:'è¨€è‘‰ãŒã‚¹ãƒ©ã‚¹ãƒ©å‡ºã‚‹æ—¥ï¼ãƒ—ãƒ¬ã‚¼ãƒ³ã‚„ç™ºè¡¨ãŒã‚ã‚Œã°ã†ã¾ãã„ãã§ã—ã‚‡ã†ã€‚ãŸã ã—ç›®ä¸Šã®äººã«é€†ã‚‰ã„ãŸããªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§æ³¨æ„ï¼<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> è©±ã™å‰ã«3ç§’ã ã‘è€ƒãˆã¦ãã ã•ã„.'},
'åè²¡': {r:4, l:'ğŸ’° æ€ã„ãŒã‘ãªã„å¹¸é‹', d:'äºˆæƒ³å¤–ã®ãŠé‡‘ãŒå…¥ã£ãŸã‚Šè‰¯ã„æ©Ÿä¼šãŒç”Ÿã¾ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> ç©æ¥µçš„ã«å‹•ã„ã¦ãã ã•ã„ã€‚å®¶ã«ã„ã‚Œã°ãƒãƒ£ãƒ³ã‚¹ãŒæ¥ ã¾ã™ã‚ˆï¼'},
'æ­£è²¡': {r:4, l:'ğŸ’µ å®‰å®šçš„ãªæ—¥', d:'ãŠé‡‘é–¢é€£ã®ã“ã¨ãŒé †èª¿ã§ã™ã€‚å¥‘ç´„ã‚„å–å¼•ã‚‚è‰¯ã„ã§ã™ã€‚<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> è²¯è“„ã‚’å§‹ã‚ã‚‹ã®ã«è‰¯ã„æ—¥ã§ã™ã€‚'},
'åå®˜': {r:2, l:'ğŸ˜° ç·Šå¼µã™ã‚‹æ—¥', d:'çªç„¶ä»•äº‹ãŒå…¥ã£ãŸã‚Šåœ§è¿«ã‚’å—ã‘ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚äºˆæƒ³å¤–ã®æ¥­å‹™ãŒé™ã‚Šã‹ã‹ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> ä½“èª¿ç®¡ç†ãŒé‡è¦ã§ã™. ç„¡ç†ã›ãšãŠéã”ã—ãã ã•ã„ã€‚'},
'æ­£å®˜': {r:5, l:'ğŸ† èªã‚ã‚‰ã‚Œã‚‹æ—¥', d:'æœ€é«˜ã®æ—¥ï¼åŠªåŠ›ãŒèªã‚ã‚‰ã‚ŒãŸã‚Šè¤’ã‚ã‚‰ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> é‡è¦ãªãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚„ç´„æŸã¯ä»Šæ—¥ã«å…¥ã‚Œã¦ãã ã•ã„ã€‚'},
'åå°': {r:3, l:'ğŸ“š ä¸€äººã ã‘ã®æ™‚é–“', d:'äººãŒå¤šã„å ´æ‰€ã‚ˆã‚Šä¸€äººã§ã„ãŸã„æ—¥ã€‚å‹‰å¼·ã‚„èª­æ›¸ã«ã´ã£ãŸã‚Šï¼<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> ã‚«ãƒ•ã‚§ã§ä¸€äººã§æœ¬ã‚’èª­ã‚€ã®ã¯ã„ã‹ãŒã§ã™ã‹ï¼Ÿ'},
'æ­£å°': {r:4, l:'ğŸ¤ åŠ©ã‘ã‚’ã‚‚ã‚‰ã†æ—¥', d:'èª°ã‹ã®åŠ©ã‘ã‚’ã‚‚ã‚‰ã†ã®ã«è‰¯ã„æ—¥ï¼åˆ†ã‹ã‚‰ãªã„ã“ã¨ãŒã‚ã‚Œã°èã„ã¦ã¿ã¦ãã ã•ã„ã€‚<br><br><strong>ğŸ’¡ ãƒ’ãƒ³ãƒˆ:</strong> å¥‘ç´„æ›¸ã€æ›¸é¡ä½œæ¥­ã«è‰¯ã„æ—¥ã§ã™ã€‚'}};const info = godMeaning[god.c] || {r:3, l:'â˜€ï¸ ç©ã‚„ã‹ãªæ—¥', d:'ç‰¹åˆ¥ãªã“ã¨ãªãç©ã‚„ã‹ãªä¸€æ—¥ã§ã™ã€‚'};let bonus = '';if ([dp.s.e, dp.b.e].includes(gods.yong)) {info.r = Math.min(5, info.r + 1);bonus = '<div class="info-box good" style="margin-top:12px;"><p>âœ¨ <strong>ä»Šæ—¥å¹¸é‹ã®æ°—ãŒå…¥ã£ã¦ãã¾ã™ã‚ˆï¼</strong> ã„ã¤ã‚‚ã‚ˆã‚Šç‰©äº‹ãŒã†ã¾ãé€²ã‚€ã§ã—ã‚‡ã†ï¼</p></div>';} else if ([dp.s.e, dp.b.e].includes(gods.gi)) {info.r = Math.max(1, info.r - 1);bonus = '<div class="info-box warn" style="margin-top:12px;"><p>âš ï¸ <strong>ä»Šæ—¥ã¯æ³¨æ„ã—ãŸæ–¹ãŒè‰¯ã„ã§ã™ï¼</strong> å¤§ããªæ±ºå®šã¯æ˜æ—¥ã«å»¶ã°ã—ã¦ãã ã•ã„ã€‚</p></div>';}
const goodH = [], badH = [];const hourNames = ['å¤œ11æ™‚ã€œæ·±å¤œ1æ™‚','æ·±å¤œ1ã€œ3æ™‚','æ·±å¤œ3ã€œ5æ™‚','æœ5ã€œ7æ™‚','æœ7ã€œ9æ™‚','åˆå‰9ã€œ11æ™‚','æ˜¼11æ™‚ã€œåˆå¾Œ1æ™‚','åˆå¾Œ1ã€œ3æ™‚','åˆå¾Œ3ã€œ5æ™‚','å¤•æ–¹5ã€œ7æ™‚','å¤œ7ã€œ9æ™‚','å¤œ9ã€œ11æ™‚'];for (let i = 0; i < 12; i++) {const hEl = BRANCH[i].e;if (hEl === gods.yong) goodH.push(hourNames[i]);else if (hEl === gods.gi) badH.push(hourNames[i]);}
return `
<div class="info-box gold"><p><strong>ğŸ“… ${tm}æœˆ ${td}æ—¥ ä»Šæ—¥ã®é‹å‹¢</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">ä»Šæ—¥ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼: ${dp.s.c}${dp.b.c} (${dp.b.m} ${dp.b.a}æ—¥)</p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(info.r)}${'â˜†'.repeat(5-info.r)}</span></div><div class="info-box"><p><strong>${info.l}</strong></p><p style="margin-top:10px;line-height:1.8;">${info.d}</p></div>
${bonus}
<div class="info-box good" style="margin-top:12px;"><p><strong>â° å¹¸é‹ã®æ™‚å¹²</strong><br>${goodH.length ? goodH.join(', ') : 'ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“'}</p></div><div class="info-box warn" style="margin-top:12px;"><p><strong>â° æ³¨æ„ã™ã¹ãæ™‚å¹²</strong><br>${badH.length ? badH.join(', ') : 'ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“'}</p></div><div class="info-box" style="margin-top:12px;"><p><strong>ğŸ“Œ ä»Šæ—¥ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼: ${state.k}</strong><br>${state.d}</p></div>`;}
function genYearFortune(saju, gods, year) {const yp = calcYearPillar(year, 2, 5);const dm = saju.day.s;const god = getTenGod(yp.s, dm);const state = getTwelveState(dm, yp.b);let rating = 3, desc = '';if ([yp.s.e, yp.b.e].includes(gods.yong)) { rating = 5; desc = 'ç”¨ç¥ãŒå…¥ã£ã¦ãã‚‹å¤§å‰ã®æ—¥ï¼ç©æ¥µçš„ã«å‹•ã„ã¦ãã ã•ã„ï¼'; }
else if ([yp.s.e, yp.b.e].includes(gods.hee)) { rating = 4; desc = 'å–œç¥ãŒåŠ©ã‘ã‚‹è‰¯ã„å¹´ï¼é †èª¿ã«é€²ã¿ã¾ã™ã€‚'; }
else if ([yp.s.e, yp.b.e].includes(gods.gi)) { rating = 2; desc = 'å¿Œç¥ãŒ å…¥ã£ã¦ãã‚‹ æ³¨æ„å®³ã™ã¹ã å®³. ç„¡ç†ã›ãšãŠéã”ã—ãã ã•ã„ã€‚'; }
else { desc = 'å¹³ç©ãªå¹´ã§ã™ã€‚ç€å®Ÿã«åŠªåŠ›ã—ã¦ãã ã•ã„ã€‚'; }
if (state.l >= 9) { rating = Math.min(5, rating + 1); desc += ' åäºŒé‹æ˜ŸãŒå¼·ãã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæº¢ã‚Œã¾ã™ï¼'; }
else if (state.l <= 3) { rating = Math.max(1, rating - 1); desc += ' åäºŒé‹æ˜ŸãŒå¼±ãä½“åŠ›ç®¡ç†ãŒå¿…è¦ã§ã™ã€‚'; }
const months = [];for (let m = 1; m <= 12; m++) {const mp = calcMonthPillar(year, m, 15);const mGod = getTenGod(mp.s, dm);let tip = '';if (['æ­£å®˜','æ­£è²¡'].includes(mGod.c)) tip = 'ğŸŸ¢ è‰¯ã„';else if (['åå®˜','åŠ«è²¡'].includes(mGod.c)) tip = 'ğŸ”´ æ³¨æ„';else tip = 'ğŸŸ¡ æ™®é€š';months.push(`<span style="display:inline-block;margin:3px;padding:5px 8px;background:rgba(255,255,255,0.05);border-radius:5px;font-size:0.75rem;">${m}æœˆ ${tip}</span>`);}
return `
<div class="info-box gold"><p><strong>ğŸ“† ${year}å¹´é‹å‹¢</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">${yp.s.c}${yp.b.c}å¹´ï¼ˆ${yp.b.m} ${yp.b.a}ã®å¹´)</p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span></div><div class="info-box"><p><strong>ä»Šå¹´ã®åç¥ï¼š ${god.k}</strong></p><p style="margin-top:10px;line-height:1.8;">${desc}</p></div><div class="info-box" style="margin-top:12px;"><p><strong>ğŸ“Œ ä»Šå¹´ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼: ${state.k}</strong><br>${state.d}</p></div><div class="info-box" style="margin-top:12px;"><p><strong>ğŸ—“ï¸ æœˆåˆ¥ãƒã‚¤ãƒ³ãƒˆ</strong></p><div style="margin-top:10px;">${months.join('')}</div></div>`;}
function genCareerFortune(saju, str, gods) {const dm = saju.day.s;const ec = countElements(saju);const jaeEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 2) % 5];const gwanEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 3) % 5];const sikEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 1) % 5];let rating = 3, style = '', advice = '';if (str.type === 'strong' && ec[jaeEl] >= 2) {rating = 5; style = 'ç¤¾é•·ã‚¹ã‚¿ã‚¤ãƒ«';advice = 'èº«å¼·ã§è²¡æ˜ŸãŒå¤šãäº‹æ¥­å®¶ã®è³‡è³ªãŒã‚ã‚Šã¾ã™ï¼ãŠé‡‘ã‚’æ‰±ã†èƒ½åŠ›ã«å„ªã‚Œã€ç›´æ¥äº‹æ¥­ã‚’ã™ã‚Œã°å¤§ããæˆåŠŸã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚';} else if (str.type === 'strong' && ec[gwanEl] >= 2) {rating = 4; style = 'é«˜ã„åœ°ä½ã«å°±ãç›¸';advice = 'èº«å¼·ã§å®˜æ˜ŸãŒå¤šãçµ„ç¹”ã§å‡ºä¸–ã§ã™ï¼å…¬å‹™å“¡ã€å¤§ä¼æ¥­ã€æ”¿æ²»æ–¹é¢ã§é«˜ã„åœ°ä½ã¾ã§ä¸Šã‚Šè©°ã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚';} else if (str.type === 'weak') {rating = 3; style = 'å°‚é–€å®¶ã‚¹ã‚¿ã‚¤ãƒ«';advice = 'èº«å¼±ã§ä¸€äººã‚ˆã‚Šãƒãƒ¼ãƒ ã§åƒãæ–¹ãŒè‰¯ã„ã§ã™ã€‚å°‚é–€åˆ†é‡ã‚’æ·±ãæ˜ã‚Œã°èªã‚ã‚‰ã‚Œã‚‹å°‚é–€å®¶ã«ãªã‚Œã¾ã™ã€‚';} else {rating = 4; style = 'ä½•ã§ã‚‚ã“ãªã™ã‚¹ã‚¿ã‚¤ãƒ«';advice = 'ä¸­å’Œã•ã‚Œã¦å‡è¡¡ãŒå–ã‚Œã¦ã„ã¾ã™ï¼ã©ã®åˆ†é‡ã§ã‚‚ã‚ˆãé©å¿œã—æˆæœã‚’å‡ºã›ã¾ã™ã€‚';}
if (ec[sikEl] >= 2) {advice += '<br><br>âœ¨ <strong>é£Ÿç¥ãŒå¤šãæ‰èƒ½ã§ãŠé‡‘ã‚’ç¨¼ãæ§‹é€ ã§ã™ï¼</strong> èŠ¸è¡“ã€æŠ€è¡“ã€å‰µä½œåˆ†é‡ã§è¼ãã¾ã™ã€‚';}
const careerByElement = {wood: 'æ•™è‚², å‡ºç‰ˆ, è¡£é¡, å®¶å…·, é€ æ™¯, è¾²æ¥­, æ¼¢æ–¹åŒ»å­¦',
fire: 'èŠ¸èƒ½, æ”¾é€, èŠ¸è¡“, IT, é›»æ°—, ç…§æ˜, é£²é£Ÿ',
earth: 'ä¸å‹•ç”£, å»ºç¯‰, è¾²æ¥­, ä»²ä»‹, æµé€š, å€‰åº«æ¥­',
metal: 'é‡‘è, è£½é€ , è‡ªå‹•è»Š, æ©Ÿæ¢°, åŒ»ç™‚æ©Ÿå™¨, æ³•æ›¹',
water: 'è²¿æ˜“, æµé€š, è¦³å…‰, æ¼æ¥­, é£²æ–™, ç‰©æµ, æ¸…æƒ'};return `
<div class="info-box gold"><p><strong>ğŸ’¼ è·æ¥­é‹åˆ†æ</strong></p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span><p style="margin-top:10px;font-size:1.1rem;color:var(--gold);">${style}</p></div><div class="info-box"><p style="line-height:1.8;">${advice}</p></div><div class="info-box good" style="margin-top:12px;"><p><strong>ğŸ¯ ç”¨ç¥(${ELEMENT[gods.yong].k})é–¢é€£è·æ¥­</strong></p><p style="margin-top:8px;">${careerByElement[gods.yong]}</p></div>`;}
function genLoveFortune(saju, str, gods) {const dm = saju.day.s;const dbi = BRANCH.indexOf(saju.day.b);const ec = countElements(saju);const spouseEl = GENDER === 'm' ?
EL_ORDER[(EL_ORDER.indexOf(dm.e) + 2) % 5] :
EL_ORDER[(EL_ORDER.indexOf(dm.e) + 3) % 5];const spouseCount = ec[spouseEl];let rating = 3, desc = '';if (spouseCount === 0) {rating = 2;desc = 'é…å¶è€…ã®ä½ç½®ã«æ°—ãŒå¼±ã„ã§ã™ã€‚ç¸ãŒé…ã‚Œã‚‹ã‹ã€ä¼šã£ã¦ã‚‚é•·ãç¶šã‹ãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ç„¦ã‚‰ãªã„ã§ãã ã•ã„ï¼';} else if (spouseCount === 1) {rating = 4;desc = 'é…å¶è€…ã®ç¸ãŒãŸã£ãŸä¸€ã¤ï¼ãã®äººãŒæœ¬å½“ã®ç¸ã§ã™ã€‚å¤§åˆ‡ã«ã—ã¦ãã ã•ã„ã€‚';} else if (spouseCount === 2) {rating = 3;desc = 'é…å¶è€…ã®ç¸ãŒäºŒã¤...å†å©šã®å¯èƒ½æ€§ãŒã‚ã‚‹ã‹ã€äºŒäººã®é–“ã§æ‚©ã‚€å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚';} else {rating = 2;desc = 'é…å¶è€… ç¸ãŒ ãŒå¤šã„ã€‚ æµ®æ°— æ³¨æ„! ä¸€äººã®äººã«é›†ä¸­ã—ã¦ãã ã•ã„ã€‚';}
const spouseByBranch = {0: 'é…å¶è€…ãŒè³¢ãã¦æ©Ÿè»¢ãŒåˆ©ãã¾ã™ã€‚å‹‰å¼·ã‚‚ã‚ˆãã§ãè€ƒãˆãŒæ·±ã„ã§ã™ã€‚ãŸã ã—å¿ƒé…ãŒå¤šã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚',
1: 'é…å¶è€…ãŒç€å®Ÿã§èª å®Ÿã§ã™ã€‚ã‚†ã£ãã‚Šç€å®Ÿã«ã™ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚é ¼ã‚‚ã—ã„ã§ã™ã€‚',
2: 'é…å¶è€…ãŒæ´»ç™ºã§æŒ‘æˆ¦çš„ã§ã™ã€‚å¥½å¥‡å¿ƒãŒå¤šãã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæº¢ã‚Œã¾ã™ï¼',
3: 'é…å¶è€…ãŒç¹Šç´°ã§ç´°ã‚„ã‹ã§ã™ã€‚èŠ¸è¡“çš„æ„Ÿè¦šãŒã‚ã‚Šæ‰‹å…ˆã‚‚å™¨ç”¨ã§ã™ã€‚',
4: 'é…å¶è€…ãŒåŒ…å®¹åŠ›ãŒã‚ã‚Šç¤¾äº¤çš„ã§ã™ã€‚å‹äººãŒå¤šããƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚‚ã‚ã‚Šã¾ã™ã€‚',
5: 'é…å¶è€…ãŒåˆ©å£ã§è©±ä¸Šæ‰‹ã§ã™ã€‚æ©Ÿè»¢ãŒé€Ÿãäººã‚’æ‰±ã†æ‰èƒ½ãŒã‚ã‚Šã¾ã™ã€‚',
6: 'é…å¶è€…ãŒæ˜ã‚‹ãæƒ…ç†±çš„ã§ã™ã€‚æ€§æ ¼ãŒæ€¥ãªã“ã¨ã‚‚ã‚ã‚Šã¾ã™ãŒã‚¨ãƒãƒ«ã‚®ãƒ¼æº¢ã‚Œã¾ã™ï¼',
7: 'é…å¶è€…ãŒç©ã‚„ã‹ã§æƒ…ãŒå¤šã„ã§ã™ã€‚æ€ã„ã‚„ã‚Šæ·±ãå–„è‰¯ã§ã™ã€‚',
8: 'é…å¶è€…ãŒã—ã£ã‹ã‚Šã—ã¦ã„ã¦å ‚ã€…ã¨ã—ã¦ã„ã¾ã™ã€‚æ±ºæ–­åŠ›ãŒã‚ã‚Šç‹¬ç«‹å¿ƒãŒå¼·ã„ã§ã™ã€‚',
9: 'é…å¶è€…ãŒãã¡ã‚“ã¨ã—ã¦ã‚»ãƒ³ã‚¹ãŒè‰¯ã„ã§ã™ã€‚èŠ¸è¡“ã‚„ç¾å®¹æ–¹é¢ã«æ‰èƒ½ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚',
10: 'é…å¶è€…ãŒé ‘å›ºã§ã™ãŒç¾©ç†ãŒã‚ã‚Šã¾ã™ã€‚ä¸€åº¦æ±ºã‚ãŸã‚‰æœ€å¾Œã¾ã§ã§ã™ã€‚',
11: 'é…å¶è€…ãŒè³¢ãé©å¿œåŠ›ãŒè‰¯ã„ã§ã™ã€‚ã©ã“ã§ã‚‚ã†ã¾ãã‚„ã£ã¦ã„ãèé€šæ€§ãŒã‚ã‚Šã¾ã™ã€‚'};return `
<div class="info-box gold"><p><strong>ğŸ’• æ‹æ„›é‹/çµå©šé‹åˆ†æ</strong></p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span></div><div class="info-box"><p style="line-height:1.8;">${desc}</p></div><div class="info-box" style="margin-top:12px;background:rgba(255,182,193,0.15);"><p><strong>ğŸ’‘ æ—¥æ”¯ã§è¦‹ã‚‹é…å¶è€…åƒ</strong></p><p style="margin-top:10px;line-height:1.8;">${spouseByBranch[dbi]}</p></div>`;}
function genWealthFortune(saju, str, gods) {const dm = saju.day.s;const ec = countElements(saju);const jaeEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 2) % 5];const sikEl = EL_ORDER[(EL_ORDER.indexOf(dm.e) + 1) % 5];const jaeCount = ec[jaeEl];const sikCount = ec[sikEl];let rating = 3, desc = '';if (str.type === 'strong' && jaeCount >= 2) {rating = 5;desc = 'ãŠé‡‘ã®ç¦ãŒå¤šã„ï¼èº«å¼·ã§è²¡æ˜ŸãŒå¤šã„ã®ã§ç¨¼ãèƒ½åŠ›ã¨ç¦ãŒä¸¡æ–¹ã‚ã‚Šã¾ã™ã€‚äº‹æ¥­ã‚„æŠ•è³‡ã§å¤§ããæˆåŠŸã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼';} else if (str.type === 'strong' && jaeCount === 1) {rating = 4;desc = 'ç€å®Ÿã«ç¨¼ãã‚¿ã‚¤ãƒ—ã§ã™ã€‚ä¸€åº¦ã«å¤§é‡‘ã‚ˆã‚Šæœˆçµ¦ã®ã‚ˆã†ã«å®‰å®šçš„ãªåå…¥ãŒè‰¯ã„ã§ã™ã€‚';} else if (str.type === 'weak' && jaeCount >= 2) {rating = 2;desc = 'ãŠé‡‘ãŒå…¥ã£ã¦ã‚‚å‡ºã¦è¡Œãã‚„ã™ã„ã§ã™ã€‚èº«å¼±ãªã®ã«è²¡æ˜ŸãŒå¤šã„ã¨æ‰‹ã«è² ãˆã¾ã›ã‚“ã€‚è²¯è“„ç¿’æ…£ã‚’ã¤ã‘ã¦ãã ã•ã„ï¼';} else if (jaeCount === 0) {rating = 2;desc = 'è²¡æ˜ŸãŒãªããŠé‡‘ã«é–¢å¿ƒãŒå°‘ãªã„ã‹ã€ãŠé‡‘ã‚’ç¨¼ãã®ãŒå¤§å¤‰ãªå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å°‚é–€æŠ€è¡“ã‚’èº«ã«ã¤ã‘ã¦ãã ã•ã„ã€‚';} else {rating = 3;desc = 'å¹³å‡¡ãªè²¡ç‰©é‹ã§ã™ã€‚ç€å®Ÿã«åŠªåŠ›ã™ã‚Œã°ä¸­ç”£å±¤ä»¥ä¸Šã®æš®ã‚‰ã—ãŒã§ãã¾ã™ã€‚';}
if (sikCount >= 2) {rating = Math.min(5, rating + 1);desc += '<br><br>âœ¨ <strong>é£Ÿç¥ãŒå¤šãã¦æ‰èƒ½ã§ãŠé‡‘ã‚’ç¨¼ãæ§‹é€ ï¼</strong> æŠ€è¡“ã€èŠ¸è¡“ã€å‰µä½œã§å¯Œã‚’å¾—ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚';}
return `
<div class="info-box gold"><p><strong>ğŸ’° è²¡ç‰©é‹åˆ†æ</strong></p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span></div><div class="info-box"><p style="line-height:1.8;">${desc}</p></div><div class="info-box good" style="margin-top:12px;"><p><strong>ğŸ¯ è²¡ç‰©é‹ã‚’ä¸Šã’ã‚‹æ–¹æ³•</strong></p><p style="margin-top:8px;">ç”¨ç¥ã®<strong>${ELEMENT[gods.yong].k}</strong> ã®æ°—ã‚’æ´»ç”¨ã—ã¦ãã ã•ã„ï¼<br>å¹¸é‹ã®æ•°å­—: ${ELEMENT[gods.yong].nums.slice(0,5).join(', ')}</p></div>`;}
function genHealthFortune(saju, str, gods) {const dm = saju.day.s;const ec = countElements(saju);const healthData = {wood: {o:'è‚è‡“, èƒ†åš¢, ç›®', s:'ç–²åŠ´, è¦–åŠ›ä½ä¸‹, ç­‹è‚‰ç—™æ”£, çˆªå‰²ã‚Œ', a:'ç·‘è‰²é‡èœæ‘‚å–, ã‚¹ãƒˆãƒ¬ãƒƒãƒ, ç›®ã®ä¼‘æ¯'},
fire: {o:'å¿ƒè‡“, å°è…¸, èˆŒ', s:'å‹•æ‚¸, ä¸çœ ç—‡, èˆŒç‚', a:'è¦å‰‡çš„ãªç¡çœ , ç‘æƒ³, èµ¤ã„é£Ÿã¹ç‰©'},
earth: {o:'èƒƒè…¸, è„¾è‡“, å”‡', s:'æ¶ˆåŒ–ä¸è‰¯, è…¹éƒ¨è†¨æº€, å”‡ã®è’ã‚Œ', a:'è¦å‰‡çš„ãªé£Ÿäº‹, é»„è‰²ã„é£Ÿã¹ç‰©, æ•£æ­©'},
metal: {o:'è‚º, å¤§è…¸, é¼»', s:'å‘¼å¸å™¨ç–¾æ‚£, çš®è†šãƒˆãƒ©ãƒ–ãƒ«, ä¾¿ç§˜', a:'æ·±å‘¼å¸, ç™»å±±, ç™½ã„é£Ÿã¹ç‰©, ä¹³é…¸èŒ'},
water: {o:'è…è‡“, è†€èƒ±, è€³', s:'æµ®è…«, è…°ç—›, ç”Ÿæ®–å™¨å•é¡Œ, è´åŠ›ä½ä¸‹', a:'ååˆ†ãªæ°´åˆ†, é»’è±†, åŠèº«æµ´'}};const sorted = Object.entries(ec).sort((a,b) => a[1] - b[1]);const weakest = sorted[0];const strongest = Object.entries(ec).sort((a,b) => b[1] - a[1])[0];let rating = str.type === 'weak' ? 3 : 4;return `
<div class="info-box gold"><p><strong>ğŸ¥ å¥åº·é‹åˆ†æ</strong></p></div><div style="text-align:center;margin:15px 0;"><span style="font-size:2rem;">${'â­'.repeat(rating)}${'â˜†'.repeat(5-rating)}</span></div><div class="info-box"><p><strong>å¼±ã„ è‡“å™¨:</strong> ${healthData[dm.e].o}</p><p style="margin-top:10px;"><strong>æ³¨æ„ç—‡çŠ¶:</strong><br>${healthData[dm.e].s}</p><p style="margin-top:10px;"><strong>å¥åº·ç®¡ç†æ³•:</strong><br>${healthData[dm.e].a}</p></div>
${weakest[1] === 0 ? `<div class="info-box warn" style="margin-top:12px;"><p><strong>âš ï¸ ${ELEMENT[weakest[0]].k} æ°—ãŒ ã‚ã‚Šã¾ã›ã‚“!</strong><br>${healthData[weakest[0]].o} é–¢é€£ã®å¥åº·ã«ç‰¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼<br><br>${healthData[weakest[0]].a}</p></div>` : ''}
${strongest[1] >= 4 ? `<div class="info-box" style="margin-top:12px;"><p><strong>ğŸ“Œ ${ELEMENT[strongest[0]].k} ã®æ°—ãŒå¤šã™ãã¾ã™</strong><br>${healthData[strongest[0]].o} é–¢é€£è‡“å™¨ã«ç„¡ç†ãŒã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å‡è¡¡ãŒé‡è¦ã§ã™ï¼</p></div>` : ''}
<div class="info-box good" style="margin-top:12px;"><p><strong>ğŸ—“ï¸ å­£ç¯€åˆ¥å¥åº·ç®¡ç†</strong></p><p style="margin-top:8px;line-height:1.8;">
â€¢ æ˜¥ï¼šè‚è‡“ã€ç›®ã®ã‚±ã‚¢ / ã‚¹ãƒˆãƒ¬ãƒƒãƒ<br>
â€¢ å¤ï¼šå¿ƒè‡“ã€è¡€ç®¡ / æ°´ã‚’ãŸãã•ã‚“é£²ã‚€<br>
â€¢ å­£ç¯€ã®å¤‰ã‚ã‚Šç›®ï¼šæ¶ˆåŒ–å™¨ / è¦å‰‡çš„ãªé£Ÿäº‹<br>
â€¢ ç§‹ï¼šè‚ºã€å‘¼å¸å™¨ / ç™»å±±ã€æ·±å‘¼å¸<br>
â€¢ å†¬ï¼šè…è‡“ã€éª¨ / ä¿æ¸©ã€åŠèº«æµ´
</p></div>`;}
function runMatch() {if (!SAJU) { toast('ã¾ãšè‡ªåˆ†ã®å››æŸ±ã‚’åˆ†æã—ã¦ãã ã•ã„ï¼'); return; }
let py = +document.getElementById('partner-year').value;let pm = +document.getElementById('partner-month').value;let pd = +document.getElementById('partner-day').value;const pH = +document.getElementById('partner-hour').value;if (!py || !pm || !pd) { toast('ç›¸æ‰‹ã®ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
if (PARTNER_CALENDAR === 'lunar') {const conv = lunarToSolar(py, pm, pd);if (!conv || !conv.year) { toast('æ—§æš¦å¤‰æ›ã‚¨ãƒ©ãƒ¼ã€‚æ–°æš¦ã§è©¦ã—ã¦ãã ã•ã„'); return; }py = conv.year; pm = conv.month; pd = conv.day;}
const pDayPillar = calcDayPillar(py, pm, pd);let pHourPillar = null;if (pH >= 0) { pHourPillar = calcHourPillar(pDayPillar, pH); }
const pSaju = {year: calcYearPillar(py, pm, pd),
month: calcMonthPillar(py, pm, pd),
day: pDayPillar,
hour: pHourPillar};let score = 50, details = [];const myDm = STEM.findIndex(s => s.c === SAJU.day.s.c), pDm = STEM.findIndex(s => s.c === pSaju.day.s.c);const ganHap = [[0,5],[1,6],[2,7],[3,8],[4,9]];let ganMatch = false;for (let [a,b] of ganHap) if ((myDm===a && pDm===b) || (myDm===b && pDm===a)) { ganMatch = true; break; }
if (ganMatch) { score += 20; details.push({t:'good', txt:'ğŸ’• å¤©å¹²åˆ! äºŒäººã®æ—¥å¹²ãŒå¤©ç”Ÿã®ç¸ã§ã™ï¼'}); }
const myDb = BRANCH.indexOf(SAJU.day.b), pDb = BRANCH.indexOf(pSaju.day.b);const jiHap = [[0,1],[2,11],[3,10],[4,9],[5,8],[6,7]];const jiChung = [[0,6],[1,7],[2,8],[3,9],[4,10],[5,11]];for (let [a,b] of jiHap) if ((myDb===a && pDb===b) || (myDb===b && pDb===a)) { score += 15; details.push({t:'good', txt:'ğŸ¤ æ—¥æ”¯å…­åˆï¼å…±ã«ã‚ã‚Œã°ç©ã‚„ã‹ã§å®‰å®šæ„Ÿã‚’æ„Ÿã˜ã¾ã™ã€‚'}); break; }
for (let [a,b] of jiChung) if ((myDb===a && pDb===b) || (myDb===b && pDb===a)) { score -= 15; details.push({t:'bad', txt:'ğŸ’¥ æ—¥æ”¯å†²! äº’ã„ã«ã¶ã¤ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚è­²æ­©ãŒå¿…è¦ã§ã™ã€‚'}); break; }
const myEl = EL_ORDER.indexOf(SAJU.day.s.e), pEl = EL_ORDER.indexOf(pSaju.day.s.e);const saeng = [[0,2],[2,1],[1,3],[3,4],[4,0]];const keuk = [[0,3],[3,1],[1,4],[4,2],[2,0]];for (let [a,b] of saeng) if ((myEl===a && pEl===b) || (myEl===b && pEl===a)) { score += 10; details.push({t:'good', txt:`ğŸŒ± äº”è¡Œç›¸ç”Ÿï¼${ELEMENT[SAJU.day.s.e].k}ã¨${ELEMENT[pSaju.day.s.e].k}ãŒ äº’ã„ã« åŠ©ã‘ã‚‹ é–¢ä¿‚ã§ã™.`}); break; }
for (let [a,b] of keuk) if ((myEl===a && pEl===b) || (myEl===b && pEl===a)) { score -= 10; details.push({t:'bad', txt:`âš”ï¸ äº”è¡Œ ç›¸å‰‹! äº’ã„ã«åˆã‚ã›ã‚‹åŠªåŠ›ãŒå¿…è¦ã§ã™ã€‚`}); break; }
if (SAJU.day.s.e === pSaju.day.s.e) { score += 5; details.push({t:'neutral', txt:`ğŸ”„ åŒã˜ ${ELEMENT[SAJU.day.s.e].k} äº”è¡Œ! ä¼¼ãŸæ€§å‘ãªã®ã§é€šã˜ã¾ã™ã€‚`}); }
const myTti = BRANCH.indexOf(SAJU.year.b), pTti = BRANCH.indexOf(pSaju.year.b);for (let [a,b] of jiHap) if ((myTti===a && pTti===b) || (myTti===b && pTti===a)) { score += 5; details.push({t:'good', txt:`ğŸ¾ å¹²æ”¯å…­åˆï¼${BRANCH[myTti].a}ã¨${BRANCH[pTti].a}ã¯ã‚ˆãåˆã„ã¾ã™ã€‚`}); break; }
for (let [a,b] of jiChung) if ((myTti===a && pTti===b) || (myTti===b && pTti===a)) { score -= 5; details.push({t:'bad', txt:`ğŸ¾ å¹²æ”¯æ²–ï¼${BRANCH[myTti].a}ã¨${BRANCH[pTti].a}ã¯ ã¶ã¤ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`}); break; }
score = Math.max(0, Math.min(100, score));let grade, color, summary;if (score >= 80) { grade = 'ğŸ’– å¤©ç”Ÿã®ç¸'; color = '#e91e63'; summary = 'ãŠäºŒäººã¯æœ¬å½“ã«ç›¸æ€§ãŒè‰¯ã„ã§ã™ï¼ æœ€é«˜ã®ç›¸æ€§ã§ã™ã€‚'; }
else if (score >= 65) { grade = 'ğŸ’• è‰¯ã„ ç›¸æ€§'; color = '#9c27b0'; summary = 'ç›¸æ€§ãŒè‰¯ã„æ–¹ã§ã™ï¼å°‘ã—ã®åŠªåŠ›ãŒã‚ã‚Œã°å¹¸ç¦ã§ã™ã€‚'; }
else if (score >= 50) { grade = 'ğŸ’› æ™®é€š ç›¸æ€§'; color = '#ff9800'; summary = 'å¹³å‡¡ãªç›¸æ€§ã§ã™ã€‚äº’ã„ã«é•ã†ç‚¹ã‚’èªã‚ã‚Œã°è‰¯ããªã‚Šã¾ã™ã€‚'; }
else if (score >= 35) { grade = 'ğŸ’” åŠªåŠ› å¿…è¦'; color = '#ff5722'; summary = 'ã¶ã¤ã‹ã‚‹éƒ¨åˆ†ãŒã‚ã‚Šã¾ã™ã€‚è­²æ­©ã¨ç†è§£ãŒå¤§ã„ã«å¿…è¦ã§ã™ã€‚'; }
else { grade = 'ğŸ˜¢ ç›¸å‰‹ ç›¸æ€§'; color = '#f44336'; summary = 'ç°¡å˜ã§ã¯ãªã„ç›¸æ€§ã§ã™ã€‚ã—ã‹ã—æ„›ã§å…‹æœå¯èƒ½ã§ã™ï¼'; }
document.getElementById('match-result').innerHTML = `
<div class="info-box" style="text-align:center;"><p style="font-size:2rem;color:${color}">${grade}</p><p style="font-size:1.5rem;font-weight:bold;margin-top:10px;">${score}ç‚¹</p><div style="background:#333;border-radius:10px;height:20px;margin:15px 0;"><div style="background:linear-gradient(90deg,#ff6b6b,#ee5a24);height:100%;border-radius:10px;width:${score}%"></div></div><p>${summary}</p></div><div class="info-box" style="margin-top:15px;"><p><strong>ğŸ“Š è©³ç´°åˆ†æ</strong></p><p style="margin-top:8px;"><strong>ç§:</strong> ${SAJU.day.s.c}${SAJU.day.b.c}æ—¥æŸ± (${ELEMENT[SAJU.day.s.e].k})</p><p><strong>ç›¸æ‰‹:</strong> ${pSaju.day.s.c}${pSaju.day.b.c}æ—¥æŸ± (${ELEMENT[pSaju.day.s.e].k})</p></div>
${details.map(d => `<div class="info-box ${d.t === 'good' ? 'good' : d.t === 'bad' ? 'warn' : ''}" style="margin-top:10px;"><p>${d.txt}</p></div>`).join('')}
<div class="info-box" style="margin-top:15px;"><p><strong>ğŸ’¡ ç›¸æ€§ ãƒ’ãƒ³ãƒˆ</strong></p><p style="margin-top:8px;">${score >= 65 ? 'äº’ã„ã®é•·æ‰€ã‚’è¤’ã‚åˆã£ã¦ãã ã•ã„ï¼' : score >= 50 ? 'äº’ã„ã®é•ã„ã‚’èªã‚åˆã„å°Šé‡ã—ã¦ãã ã•ã„ã€‚' : 'å¯¾è©±ã‚’å¤šãã—ã¦ãã ã•ã„ã€‚äº’ã„ã®å…±æ„Ÿã‚‚å°Šé‡ã—ã¦ã‚ã’ã¦ãã ã•ã„ã€‚'}</p></div>`;}
let wheelRotation = 0;let isWheelSpinning = false;function spinZodiacWheel(targetIndex, callback) {if (isWheelSpinning) return;isWheelSpinning = true;const container = document.getElementById('zodiac-wheel-container');const wheel = document.getElementById('zodiacWheel');const glow = document.getElementById('wheelGlow');const sparkle = document.getElementById('sparkleOverlay');const loading = document.getElementById('zodiacLoading');const resultText = document.getElementById('zodiacResultText');container.style.display = 'block';resultText.style.opacity = '0';resultText.textContent = '';loading.style.display = 'block';glow.classList.add('active');sparkle.classList.add('active');const targetPos = ((12 - targetIndex) % 12) * 30 + 15;const currentPos = wheelRotation % 360;let diff = targetPos - currentPos;if (diff <= 0) diff += 360;wheelRotation = wheelRotation + 720 + diff;setTimeout(() => {wheel.style.transform = `rotate(${wheelRotation}deg)`;}, 50);setTimeout(() => {loading.style.display = 'none';glow.classList.remove('active');sparkle.classList.remove('active');const animal = BRANCH[targetIndex];resultText.textContent = `âœ¨ ${animal.a} (${animal.c}) âœ¨`;resultText.style.opacity = '1';isWheelSpinning = false;if (callback) callback();}, 1550);}

function showOracleLoading(messages, callback) {
  var overlay = document.getElementById('oracle-loading-overlay');
  var textEl = document.getElementById('oracle-loading-text');
  if (!overlay || !textEl) { callback(); return; }
  overlay.style.display = 'flex';
  textEl.textContent = messages[0];
  var step = 0;
  var iv = setInterval(function() {
    step++;
    if (step < messages.length) {
      textEl.textContent = messages[step];
    } else {
      clearInterval(iv);
      setTimeout(function() {
        overlay.style.display = 'none';
        callback();
      }, 400);
    }
  }, 800);
}

function analyzeSaju() {
  var y = document.getElementById('birth-year').value;
  var m = document.getElementById('birth-month').value;
  var d = document.getElementById('birth-day').value;
  if (!y || !m || !d) { toast('ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
  showOracleLoading(['âœ¦ å¤©æ©Ÿã‚’èª­ã‚“ã§ã„ã‚‹...', 'âœ¦ æ±ã®æŸ±ã‚’æ¢ã—ã¦ã„ã‚‹...', 'âœ¦ K-ãƒ ãƒ¼ãƒ€ãƒ³ãŒèªã‚‹æº–å‚™ã‚’ã—ã¦ã„ã‚‹...'], function() { analyzeSajuCore(); });
}
function analyzeSajuCore() {try {const y = +document.getElementById('birth-year').value;const m = +document.getElementById('birth-month').value;const d = +document.getElementById('birth-day').value;const h = +document.getElementById('birth-hour').value;if (!y || !m || !d) { toast('ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
if (y < 1900 || y > 2100) { toast('å¹´åº¦ã¯1900ï½2100ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
if (m < 1 || m > 12) { toast('æœˆã¯1ï½12ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
if (d < 1 || d > 31) { toast('æ—¥ã¯1ï½31ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
let sy = y, sm = m, sd = d;if (CALENDAR === 'lunar') {ORIGINAL_LUNAR_YEAR = y;ORIGINAL_LUNAR_MONTH = m;ORIGINAL_LUNAR_DAY = d;const conv = lunarToSolar(y, m, d);if (!conv || !conv.year) { toast('æ—§æš¦å¤‰æ›ã‚¨ãƒ©ãƒ¼ã€‚æ–°æš¦ã§è©¦ã—ã¦ãã ã•ã„'); return; }
sy = conv.year; sm = conv.month; sd = conv.day;} else {ORIGINAL_LUNAR_YEAR = null;ORIGINAL_LUNAR_MONTH = null;ORIGINAL_LUNAR_DAY = null;}
const adj = adjustTime(sy, sm, sd, h);if (!adj || !adj.y) { toast('æ™‚å¹²è£œæ­£ã‚¨ãƒ©ãƒ¼'); return; }
SAJU = {year: calcYearPillar(adj.y, adj.m, adj.d, adj.hour, adj.minute),
month: calcMonthPillar(adj.y, adj.m, adj.d, adj.hour !== undefined ? adj.hour : 12, adj.minute || 0),
day: calcDayPillar(adj.y, adj.m, adj.d),
hour: h >= 0 ? calcHourPillar(calcDayPillar(adj.y, adj.m, adj.d).s, adj.h) : null};if (!SAJU.year || !SAJU.month || !SAJU.day) {toast('å››æŸ±è¨ˆç®—ã‚¨ãƒ©ãƒ¼. ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„');return;}
BIRTH_YEAR = y;BIRTH_MONTH = sm;BIRTH_DAY = sd;BIRTH_HOUR = h;const str = calcStrength(SAJU);if (!str) { toast('èº«å¼·èº«å¼±è¨ˆç®—ã‚¨ãƒ©ãƒ¼'); return; }
STRENGTH = str;GODS = fullAnalysis(SAJU, str);if (!GODS) { toast('ç”¨ç¥è¨ˆç®—ã‚¨ãƒ©ãƒ¼'); return; }
renderSaju(str);document.getElementById('saju-result').style.display = 'block';document.getElementById('my-info-display').innerHTML = `<p style="color:var(--gold);">${SAJU.day.s.c}${SAJU.day.b.c}æ—¥æŸ± (${ELEMENT[SAJU.day.s.e].k})</p>`;toast('å››æŸ±åˆ†æå®Œäº†ï¼');} catch (error) {console.error('å››æŸ± åˆ†æ ã‚¨ãƒ©ãƒ¼:', error);toast('åˆ†æä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚å…¥åŠ›å€¤ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');}}
function renderSaju(str) {try {const pillars = ['hour','day','month','year'];const labels = ['æ™‚æŸ±','æ—¥æŸ±','æœˆæŸ±','å¹´æŸ±'];document.getElementById('pillars').innerHTML = pillars.map((p, i) => {const pillar = SAJU[p];if (!pillar) return `<div class="pillar"><div class="pillar-label">${labels[i]}</div><div class="pillar-stem">-</div><div class="pillar-branch">-</div></div>`;const god = p !== 'day' ? getTenGod(pillar.s, SAJU.day.s) : null;return `<div class="pillar ${p === 'day' ? 'dm' : ''}"><div class="pillar-label">${labels[i]}</div><div class="pillar-stem el-${pillar.s.e}">${pillar.s.c}</div><div class="pillar-branch el-${pillar.b.e}">${pillar.b.c}</div><div class="pillar-sub">${pillar.s.k}${pillar.b.k}</div>
${god ? `<div class="pillar-god">${god.k}</div>` : '<div class="pillar-god">æ—¥å¹²</div>'}
</div>`;}).join('');const un12 = getTwelveState(SAJU.day.s, SAJU.day.b);document.getElementById('twelve-states').innerHTML = `<div class="info-box"><p><strong>æ—¥æ”¯ åäºŒé‹æ˜Ÿ:</strong> ${un12.k} (ã‚¨ãƒãƒ«ã‚®ãƒ¼ ${un12.l}/12)</p></div>`;const typeLabel = {strong:'èº«å¼·',weak:'èº«å¼±',balanced:'ä¸­å’Œ'};document.getElementById('strength-box').innerHTML = `
<div class="strength-header"><span class="strength-title">æ—¥å¹²å¼·å¼±</span><span class="strength-badge ${str.type}">${typeLabel[str.type]}${str.extreme ? ` (${str.extreme})` : ''}</span></div><div class="strength-bar"><div class="strength-fill ${str.type}" style="width:${str.pct}%"></div></div><div class="factors">${str.factors.map(f => `<div class="factor"><span class="factor-label">${f.l}</span><span class="factor-value ${f.p ? 'pos' : 'neg'}">${f.v}</span></div>`).join('')}</div>
`;const dayNapeum = calcNapeum(SAJU.day.s, SAJU.day.b);const yearNapeum = calcNapeum(SAJU.year.s, SAJU.year.b);const myunggung = SAJU.hour ? calcMyunggung(SAJU.month.b, SAJU.hour.b) : null;const taewon = calcTaewon(SAJU.year.s, SAJU.month.s, SAJU.month.b);document.getElementById('napeum-myunggung').innerHTML = `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸµ ç´éŸ³äº”è¡Œ</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">60ç”²å­ã®éŸ³å¾‹ã«ã‚ˆã‚‹äº”è¡Œ</p><div style="margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:10px;"><div style="padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-size:0.8rem;color:var(--gray);">æ—¥æŸ± ç´éŸ³</p><p style="font-weight:bold;margin-top:5px;color:var(--gold);">${SAJU.day.s.c}${SAJU.day.b.c} â†’ ${dayNapeum.name}</p><p style="font-size:0.85rem;margin-top:5px;">${dayNapeum.desc}</p></div><div style="padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-size:0.8rem;color:var(--gray);">å¹´æŸ±ç´éŸ³</p><p style="font-weight:bold;margin-top:5px;">${SAJU.year.s.c}${SAJU.year.b.c} â†’ ${yearNapeum.name}</p><p style="font-size:0.85rem;margin-top:5px;">${yearNapeum.desc}</p></div></div></div>
${myunggung ? `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ  å‘½å®®</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">æœˆæ”¯+æ™‚æ”¯ã§è¨ˆç®—ã—ãŸäººç”Ÿã®æ–¹å‘</p><div style="margin-top:12px;padding:15px;background:rgba(253,216,53,0.1);border-radius:8px;border-left:3px solid var(--gold);"><p style="font-weight:bold;font-size:1.1rem;color:var(--gold);">${myunggung.name} (${myunggung.branch.c}${myunggung.branch.k})</p><p style="margin-top:8px;"><strong>æ€§å‘:</strong> ${myunggung.trait}</p><p style="margin-top:5px;"><strong>é©æ€§åˆ†é‡:</strong> ${myunggung.career}</p></div></div>
` : '<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ  å‘½å®®</strong></p><p style="color:var(--gray);margin-top:5px;">æ™‚æŸ±ãŒä¸æ˜ã®å ´åˆã€å‘½å®®ã‚’è¨ˆç®—ã§ãã¾ã›ã‚“.</p></div>'}
<div class="info-box"><p><strong>ğŸŒ± èƒå…ƒ</strong></p><p style="font-size:0.85rem;color:var(--gray);margin-top:5px;">å—èƒæ™‚ç‚¹ã®å¹²æ”¯ï¼ˆæœˆå¹²+1ã€æœˆæ”¯+3ï¼‰</p><div style="margin-top:12px;padding:15px;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-weight:bold;font-size:1.1rem;">${taewon.pillar} (${taewon.stem.k}${taewon.branch.k})</p><p style="margin-top:8px;">ç´éŸ³: ${taewon.napeum.name} (${taewon.napeum.elementK})</p><p style="margin-top:5px;font-size:0.9rem;color:var(--gray);">${taewon.desc}</p></div></div>
`;const jjAnalysis = analyzeJijanggan(SAJU);document.getElementById('jijanggan-analysis').innerHTML = `
<div class="info-box"><p style="margin-bottom:10px;font-size:0.85rem;color:var(--gray);">åœ°æ”¯ã®ä¸­ã«éš ã‚ŒãŸå¤©å¹²ã‚’åˆ†æã—ã¾ã™</p>
${jjAnalysis.pillars.map(p => `
<div style="margin-bottom:15px;padding:12px;background:rgba(255,255,255,0.03);border-radius:8px;"><p style="font-weight:bold;color:var(--gold);">${p.name}: ${p.branch.c}(${p.branch.k})</p><div style="margin-top:8px;display:flex;flex-wrap:wrap;gap:8px;">
${p.hidden.map(h => `
<span style="padding:4px 10px;border-radius:15px;font-size:0.8rem;background:${h.type === 'æ­£æ°—' ? 'rgba(76,175,80,0.3)' : h.type === 'ä¸­æ°—' ? 'rgba(255,152,0,0.3)' : 'rgba(158,158,158,0.3)'};border:1px solid ${h.type === 'æ­£æ°—' ? 'var(--wood)' : h.type === 'ä¸­æ°—' ? 'var(--earth)' : 'var(--metal)'};">
${h.stem.c}(${h.stem.k}) Â· ${h.type} Â· ${h.days}æ—¥ Â· ${h.god.k}
${h.tougan ? '<span style="color:var(--gold);">â˜…é€å¹²</span>' : ''}
</span>
`).join('')}
</div></div>
`).join('')}
</div><div class="info-box" style="margin-top:10px;"><p><strong>ğŸ“Š æ”¯è”µå¹²äº”è¡Œåˆ†å¸ƒ</strong></p><div style="margin-top:10px;display:flex;justify-content:space-around;">
${EL_ORDER.map(e => `
<div style="text-align:center;"><div class="el-${e}" style="font-size:1.2rem;">${ELEMENT[e].c}</div><div style="font-size:0.9rem;margin-top:3px;">${jjAnalysis.summary.elements[e].toFixed(1)}</div></div>
`).join('')}
</div></div>
`;const ttAnalysis = analyzeTonggeunTougan(SAJU);document.getElementById('tonggeun-analysis').innerHTML = `
<div class="info-box"><p><strong>ğŸŒ³ é€šæ ¹</strong> - å¤©å¹²ãŒåœ°æ”¯ã«æ ¹ã‚’ä¸‹ã‚ã—ãŸçŠ¶æ…‹</p><div style="margin-top:10px;">
${ttAnalysis.tonggeun.length ? ttAnalysis.tonggeun.map(t => `
<div style="padding:8px;margin:5px 0;background:rgba(76,175,80,0.1);border-radius:6px;border-left:3px solid var(--wood);"><span style="font-weight:bold;">${t.pillar} ${t.stem}</span> (${t.god}) â†’
${t.roots.map(r => `<span style="margin-left:5px;padding:2px 6px;background:rgba(255,255,255,0.1);border-radius:4px;font-size:0.8rem;">${r.pillar}${r.branch} ${r.type}(${r.strength})</span>`).join('')}
</div>
`).join('') : '<p style="color:var(--gray);font-size:0.9rem;">é€šæ ¹ã—ãŸå¤©å¹²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚æ ¹ãŒå¼±ã„ã§ã™ã€‚</p>'}
</div></div><div class="info-box" style="margin-top:10px;"><p><strong>â˜€ï¸ é€å¹²</strong> - æ”¯è”µå¹²ãŒå¤©å¹²ã«ç¾ã‚ŒãŸçŠ¶æ…‹</p><div style="margin-top:10px;">
${ttAnalysis.tougan.length ? ttAnalysis.tougan.map(t => `
<div style="padding:8px;margin:5px 0;background:rgba(253,216,53,0.1);border-radius:6px;border-left:3px solid var(--gold);"><span style="font-weight:bold;">${t.stem}</span> (${t.god}) - ${t.pillar}ã§ ${t.from}ã®æ°—ãŒ ç¾ã‚Œã‚‹
</div>
`).join('') : '<p style="color:var(--gray);font-size:0.9rem;">é€å¹²ã—ãŸæ”¯è”µå¹²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>'}
</div></div>
`;document.getElementById('gods').innerHTML = `
<div class="god yong"><div class="god-title">ç”¨ç¥(ã‚ˆã†ã˜ã‚“)</div><div class="god-element el-${GODS.yong}">${ELEMENT[GODS.yong].c}</div><div class="god-name">${ELEMENT[GODS.yong].k} - ${ELEMENT[GODS.yong].n}</div></div><div class="god hee"><div class="god-title">å–œç¥(ãã˜ã‚“)</div><div class="god-element el-${GODS.hee}">${ELEMENT[GODS.hee].c}</div><div class="god-name">${ELEMENT[GODS.hee].k} - ${ELEMENT[GODS.hee].n}</div></div><div class="god gi"><div class="god-title">å¿Œç¥(ãã˜ã‚“)</div><div class="god-element el-${GODS.gi}">${ELEMENT[GODS.gi].c}</div><div class="god-name">${ELEMENT[GODS.gi].k} - ${ELEMENT[GODS.gi].n}</div></div>
`;let godsDetailHtml = `<div class="info-box gold"><p>${ELEMENT[GODS.yong].n} æ°—ãŒ ã‚ãªãŸã«å¹¸é‹ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ã€‚</p></div>`;if (GODS.johu) {godsDetailHtml += `
<div class="info-box" style="margin-top:10px;"><p><strong>ğŸŒ¡ï¸ èª¿å€™ åˆ†æ</strong></p><p style="margin-top:8px;font-size:0.9rem;">${GODS.johuDesc || 'å­£ç¯€ã«åˆã£ãŸèª¿å€™ç”¨ç¥ãŒé©ç”¨ã•ã‚Œã¾ã—ãŸã€‚'}</p>
${GODS.sub ? `<p style="margin-top:5px;font-size:0.85rem;color:var(--gray);">è£œåŠ©ç”¨ç¥: ${ELEMENT[GODS.sub].k}(${ELEMENT[GODS.sub].c})</p>` : ''}
</div>
`;}
if (GODS.climate) {godsDetailHtml += `
<div class="info-box ${GODS.climate.needs.length ? 'warn' : ''}" style="margin-top:10px;"><p><strong>ğŸŒ¡ï¸ å¯’æš–ç‡¥æ¹¿: ${GODS.climate.type}</strong></p><p style="margin-top:8px;font-size:0.9rem;">${GODS.climate.desc}</p>
${GODS.climate.needs.length ? `<p style="margin-top:5px;font-size:0.85rem;">å¿…è¦ãªæ°—ï¼š${GODS.climate.needs.map(e => ELEMENT[e].k).join(', ')}</p>` : ''}
</div>
`;}
if (GODS.byungYak && GODS.byungYak.byung) {godsDetailHtml += `
<div class="info-box" style="margin-top:10px;"><p><strong>ğŸ’Š ç—…å¼±(ç—…è—¥) åˆ†æ</strong></p><p style="margin-top:8px;font-size:0.9rem;">
ç—…ï¼ˆç—…ï¼‰ï¼š${ELEMENT[GODS.byungYak.byung].k}(${ELEMENT[GODS.byungYak.byung].c}) éå¤š<br>
è–¬ï¼ˆè–¬ï¼‰ï¼š${ELEMENT[GODS.byungYak.yak].k}(${ELEMENT[GODS.byungYak.yak].c})ã§åˆ¶å¾¡
</p></div>
`;}
document.getElementById('gods-detail').innerHTML = godsDetailHtml;const yukcheon = analyzeYukcheon(SAJU, GENDER);document.getElementById('yukcheon-analysis').innerHTML = `
<div class="info-box" style="margin-bottom:10px;"><p style="font-size:0.85rem;color:var(--gray);">å››æŸ±ã®åç¥ã§å®¶æ—ã€äººé–“é–¢ä¿‚ã‚’åˆ†æã—ã¾ã™</p></div><!-- ä½ç½®åˆ¥ å…­è¦ª --><div style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-bottom:15px;">
${yukcheon.positions.map(p => `
<div style="padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-size:0.8rem;color:var(--gray);">${p.posName}</p><p style="font-weight:bold;margin:5px 0;">${p.stem.c}${p.branch.c}</p><p style="font-size:0.9rem;">å¤©å¹²: <span style="color:var(--gold);">${p.stemGod}</span></p>
${p.branchGod ? `<p style="font-size:0.85rem;color:var(--gray);">åœ°æ”¯: ${p.branchGod}</p>` : ''}
<p style="font-size:0.8rem;margin-top:5px;">${p.relation}</p></div>
`).join('')}
</div><!-- é…å¶è€… åˆ†æ --><div class="info-box ${yukcheon.spouse.count > 0 ? 'good' : 'warn'}" style="margin-bottom:10px;"><p><strong>ğŸ’• é…å¶è€… åˆ†æ</strong></p><p style="margin-top:8px;font-size:0.9rem;">
é…å¶è€…æ˜Ÿ(${yukcheon.spouse.god}): ${yukcheon.spouse.count > 0 ? yukcheon.spouse.count + 'å€‹' : 'ãªã—'}<br>
æ—¥æ”¯ åäºŒé‹æ˜Ÿ: ${yukcheon.spouse.dayBranch.k}
</p><p style="margin-top:5px;font-size:0.85rem;">${yukcheon.spouse.analysis}</p></div><!-- å­å¥³ åˆ†æ --><div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ‘¶ å­å¥³ åˆ†æ</strong></p><p style="margin-top:8px;font-size:0.9rem;">
å­å¥³æ˜Ÿ(${yukcheon.children.gods.join('/')}): ${yukcheon.children.count > 0 ? yukcheon.children.count.toFixed(1) + 'å€‹' : 'ãªã—'}
</p><p style="margin-top:5px;font-size:0.85rem;">${yukcheon.children.analysis}</p></div><!-- çˆ¶æ¯ åˆ†æ --><div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ çˆ¶æ¯ åˆ†æ</strong></p><p style="margin-top:8px;font-size:0.9rem;">
çˆ¶(åè²¡): ${yukcheon.parents.father.count > 0 ? 'ã‚ã‚Š' : 'ãªã—'} - ${yukcheon.parents.father.analysis}<br>
æ¯(æ­£å°): ${yukcheon.parents.mother.count > 0 ? 'ã‚ã‚Š' : 'ãªã—'} - ${yukcheon.parents.mother.analysis}
</p></div><!-- å…­è¦ªç‰¹è¨˜äº‹é … -->
${yukcheon.analysis.length ? `
<div class="info-box warn"><p><strong>ğŸ“Œ å…­è¦ªç‰¹è¨˜äº‹é …</strong></p>
${yukcheon.analysis.slice(0, 5).map(a => `
<p style="margin-top:8px;font-size:0.85rem;">
${a.type === 'many' ? 'âš¡' : 'â­•'} ${a.meaning}
</p>
`).join('')}
</div>
` : ''}
`;const fmt = calcFormat(SAJU, null, GODS.samhap);document.getElementById('format').innerHTML = `
<div class="info-box gold"><p><strong>${fmt.n}</strong></p><p style="margin-top:10px;line-height:1.8;">${fmt.d}</p><p style="margin-top:10px;color:var(--gold);">ğŸ’¼ <strong>é©æ€§åˆ†é‡:</strong> ${fmt.b}</p></div>`;const ilju = getIljuDesc(SAJU.day.s, SAJU.day.b);document.getElementById('ilju').innerHTML = `
<div class="info-box"><p><strong style="font-size:16px;">${ilju.title}</strong></p><p style="margin-top:12px;line-height:1.8;">${ilju.desc}</p><div style="margin-top:15px;padding:12px;background:rgba(255,182,193,0.15);border-radius:8px;"><p>ğŸ’• <strong>é…å¶è€…é‹</strong></p><p style="margin-top:8px;line-height:1.6;">${ilju.spouse}</p></div></div>`;const gungwi = analyzeGungwi(SAJU, BIRTH_YEAR);document.getElementById('gungwi-analysis').innerHTML = `
<div class="info-box" style="margin-bottom:10px;"><p style="font-size:0.85rem;color:var(--gray);">å››æŸ±ã®4æŸ±ã¯ãã‚Œãã‚Œäººç”Ÿã®ç•°ãªã‚‹æ™‚æœŸã¨é–¢ä¿‚ã‚’è¡¨ã—ã¾ã™</p></div>
${gungwi.map(g => `
<div class="info-box ${g.rating === 'good' ? 'good' : g.rating === 'bad' ? 'warn' : ''}" style="margin-bottom:10px;${g.isCurrent ? 'border:2px solid var(--gold);' : ''}"><div style="display:flex;justify-content:space-between;align-items:center;"><p><strong>${g.name}</strong><span style="color:var(--gray);font-size:0.85rem;">${g.alias}</span></p>
${g.isCurrent ? '<span style="background:var(--gold);color:#000;padding:2px 8px;border-radius:10px;font-size:0.7rem;">ç¾åœ¨</span>' : ''}
</div><p style="margin-top:8px;font-size:0.85rem;">
ğŸ“… <strong>${g.ageRange}</strong> Â·
${g.pillar ? `${g.pillar.s.c}${g.pillar.b.c}` : '-'} Â·
${g.god ? g.god.k : 'æ—¥å¹²'} Â·
${g.state ? g.state.k : '-'}
</p><p style="margin-top:5px;font-size:0.85rem;color:var(--gray);">
ğŸ‘¤ ${GENDER === 'm' ? g.relationM : g.relationF} Â· ğŸ¦´ ${g.bodyPart}
</p><p style="margin-top:8px;line-height:1.6;">${g.analysis}</p></div>
`).join('')}
`;const ts = analyzeTwelveStates(SAJU);document.getElementById('twelve-states-full').innerHTML = `
<div class="info-box ${ts.dominant === 'strong' ? 'good' : ts.dominant === 'weak' ? 'warn' : ''}"><p><strong>ğŸ“Š åŸºæœ¬ ã‚¨ãƒãƒ«ã‚®ãƒ¼ çŠ¶æ…‹</strong></p><p style="margin-top:8px;">${ts.summary}</p></div><div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin:15px 0;">
${ts.pillars.map(p => `
<div style="text-align:center;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;border-bottom:3px solid ${p.energy >= 9 ? 'var(--wood)' : p.energy >= 6 ? 'var(--gold)' : p.energy >= 3 ? 'var(--earth)' : 'var(--fire)'};"><div style="font-size:0.8rem;color:var(--gray);">${p.name}</div><div style="font-size:1.3rem;margin:8px 0;">${p.state.k}</div><div style="font-size:0.9rem;">âš¡ ${p.energy}/12</div></div>
`).join('')}
</div><div class="info-box"><p><strong>ğŸ”„ äººç”Ÿ ã‚¨ãƒãƒ«ã‚®ãƒ¼ æµã‚Œ</strong></p><div style="margin-top:10px;">
${ts.lifeFlow.map(lf => `
<div style="display:flex;align-items:center;padding:8px;margin:5px 0;background:rgba(255,255,255,0.03);border-radius:6px;"><div style="width:80px;font-size:0.8rem;color:var(--gray);">${lf.period}</div><div style="width:60px;font-weight:bold;">${lf.state}</div><div style="flex:1;font-size:0.85rem;">${lf.advice}</div><div>${'â­'.repeat(Math.ceil(lf.energy/3))}${'â˜†'.repeat(4-Math.ceil(lf.energy/3))}</div></div>
`).join('')}
</div></div>
`;const luck = calcLuck(SAJU, BIRTH_YEAR, GENDER, GODS, BIRTH_MONTH, BIRTH_DAY, BIRTH_HOUR);let luckMetaHtml = '';if (luck.meta) {const meta = luck.meta;luckMetaHtml = `
<div style="margin-bottom:12px;padding:10px 12px;background:rgba(212,175,55,0.1);border:1px solid rgba(212,175,55,0.3);border-radius:8px;"><div style="display:flex;flex-wrap:wrap;gap:10px;font-size:0.8rem;align-items:center;"><span style="font-weight:600;color:var(--gold);">ğŸ“Š å¤§é‹æƒ…å ±</span><span>ğŸ”„ ${meta.directionK}</span><span>ğŸ“… ${meta.firstAgeExact}æ­³</span>
${meta.targetTerm ? `<span>ğŸ—“ï¸ ${meta.targetTerm.k}</span>` : ''}
<span>âš™ï¸ ${meta.calculationMethod === 'precise' ? 'ç²¾å¯†' : 'åŸºæœ¬'}</span></div></div>
`;}
const luckMetaEl = document.getElementById('luck-meta');if (luckMetaEl) luckMetaEl.innerHTML = luckMetaHtml;document.getElementById('luck-timeline').innerHTML = luck.map((l, idx) => `
<div class="luck-item ${l.isCur ? 'current' : ''} ${l.rating}" title="${l.startYear}-${l.endYear}å¹´"><div class="luck-age">${l.startAge}-${l.endAge}æ­³</div><div style="font-size:0.65rem;color:var(--gray);">${l.startYear}-${l.endYear}</div><div class="luck-pillar el-${l.s.e}">${l.s.c}${l.b.c}</div><div class="luck-rating">${l.rating === 'good' ? 'ğŸ˜Š' : l.rating === 'bad' ? 'ğŸ˜°' : 'ğŸ˜'}</div>
${l.climateClash ? '<div style="font-size:0.6rem;color:#ff6b6b;">ğŸŒ¡ï¸é€†é‹</div>' : ''}
</div>
`).join('');const curLuck = luck.find(l => l.isCur);if (curLuck) {const curYear = new Date().getFullYear();const yearsInCycle = curYear - curLuck.startYear;const yearsRemaining = curLuck.endYear - curYear;document.getElementById('luck-detail').innerHTML = `
<div class="info-box ${curLuck.rating === 'good' ? 'good' : curLuck.rating === 'bad' ? 'warn' : ''}"><p><strong>ç¾åœ¨ã®å¤§é‹ (${curLuck.startAge}-${curLuck.endAge}æ­³ï¼‰: ${curLuck.s.c}${curLuck.b.c}</strong></p><p style="margin-top:8px;font-size:0.9rem;">
ğŸ“… æœŸé–“: ${curLuck.startYear} ~ ${curLuck.endYear}å¹´<br>
â³ é€²è¡Œ: ${yearsInCycle + 1}å¹´ç›®ï¼ˆ${yearsRemaining}å¹´æ®‹ã‚Šï¼‰
</p><p style="margin-top:8px;">
${curLuck.rating === 'good' ? 'ğŸŒŸ è‰¯ã„é‹ãŒå…¥ã£ã¦ãã‚‹æ™‚æœŸã§ã™ï¼ç©æ¥µçš„ã«å‹•ã„ã¦ãã ã•ã„ã€‚' :
curLuck.rating === 'bad' ? 'âš ï¸ æ³¨æ„ã™ã¹ãæ™‚æœŸã§ã™ã€‚ç„¡ç†ã›ãšãŠéã”ã—ãã ã•ã„ã€‚' :
'ğŸ˜Œ å¹³å¦ãªæ™‚æœŸã§ã™ã€‚ç€å®Ÿã«åŠªåŠ›ã—ã¦ãã ã•ã„ã€‚'}
</p>
${curLuck.climateClash ? '<p style="margin-top:8px;color:#ff6b6b;font-size:0.85rem;">ğŸŒ¡ï¸ èª¿å€™é€†é‹ - å­£ç¯€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å‡è¡¡ãŒå¿…è¦ã§ã™ã€‚</p>' : ''}
</div>
`;}
const gyoungi = analyzeGyoungi(luck, BIRTH_YEAR, new Date().getFullYear());document.getElementById('gyoungi-analysis').innerHTML = gyoungi.length ? `
<div class="info-box" style="margin-bottom:10px;"><p style="font-size:0.85rem;color:var(--gray);">å¤§é‹ãŒå¤‰ã‚ã‚‹æ™‚ç‚¹ã‚’äº‹å‰ã«çŸ¥ã‚Œã°äººç”Ÿã®è»¢æ›ç‚¹ã‚’æº–å‚™ã§ãã¾ã™ã€‚</p></div>
${gyoungi.map(g => `
<div class="info-box ${g.intensity === 'strong' ? 'warn' : ''} ${g.isCurrent ? 'gold' : ''}" style="margin-bottom:10px;"><div style="display:flex;justify-content:space-between;align-items:center;"><p><strong>ğŸ”„ ${g.transitionAge}æ­³ äº¤é‹æœŸ</strong> (${g.transitionYear}å¹´)</p>
${g.isCurrent ? '<span style="background:var(--gold);color:#000;padding:2px 8px;border-radius:10px;font-size:0.7rem;">ç¾åœ¨ã®äº¤é‹æœŸï¼</span>' : ''}
</div><p style="margin-top:10px;font-size:1.1rem;text-align:center;"><span style="color:var(--gray);">${g.from}</span><span style="margin:0 10px;">â†’</span><span style="color:var(--gold);">${g.to}</span></p><p style="margin-top:10px;line-height:1.6;">${g.warning}</p><p style="margin-top:8px;font-size:0.9rem;color:var(--gray);">ğŸ’¡ ${g.advice}</p></div>
`).join('')}
` : `<div class="info-box"><p style="color:var(--gray);">ç¾åœ¨ç§ã®åŸºæº–ã§è¿‘ã„äº¤é‹æœŸãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p></div>`;const next10 = getNext10Years(SAJU, BIRTH_YEAR, GENDER, GODS);const ratingEmoji = {excellent:'ğŸŒŸ',good:'ğŸ˜Š',neutral:'ğŸ˜',caution:'âš ï¸',difficult:'ğŸ˜°'};const ratingClass = {excellent:'good',good:'good',neutral:'',caution:'warn',difficult:'warn'};document.getElementById('ten-years-luck').innerHTML = `
<div style="display:flex;flex-wrap:wrap;gap:8px;margin-bottom:15px;">
${next10.years.map(y => `
<div style="flex:1;min-width:60px;padding:8px;text-align:center;background:rgba(255,255,255,0.05);border-radius:8px;border:1px solid ${y.rating === 'excellent' || y.rating === 'good' ? 'var(--wood)' : y.rating === 'difficult' || y.rating === 'caution' ? 'var(--fire)' : 'transparent'};"><div style="font-size:0.75rem;color:var(--gray);">${y.year}</div><div style="font-size:1.1rem;">${ratingEmoji[y.rating]}</div><div style="font-size:0.7rem;color:var(--gray);">${y.age}æ­³</div></div>
`).join('')}
</div><div class="info-box good"><p>ğŸŒŸ <strong>æœ€é«˜ã® å®³: ${next10.bestYear.year}å¹´</strong> (${next10.bestYear.age}æ­³ï¼‰<br>
${next10.bestYear.saeun.pillar.s.c}${next10.bestYear.saeun.pillar.b.c}å¹´, ${next10.bestYear.saeun.god.k}ã®æ°—</p></div><div class="info-box warn" style="margin-top:10px;"><p>âš ï¸ <strong>æ³¨æ„ã™ã¹ãå¹´: ${next10.worstYear.year}å¹´</strong> (${next10.worstYear.age}æ­³ï¼‰<br>
${next10.worstYear.saeun.pillar.s.c}${next10.worstYear.saeun.pillar.b.c}å¹´ - ç„¡ç†ã›ãšå¥åº·ç®¡ç†ï¼</p></div>
`;const curYear = new Date().getFullYear();const monthlyLuck = getYearlyMonthLuck(curYear, SAJU, GODS);document.getElementById('monthly-luck').innerHTML = `
<div style="display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:15px;">
${monthlyLuck.months.map(m => `
<div style="padding:10px;text-align:center;background:rgba(255,255,255,0.05);border-radius:8px;border:1px solid ${m.rating === 'good' ? 'var(--wood)' : m.rating === 'bad' ? 'var(--fire)' : 'transparent'};"><div style="font-weight:bold;">${m.month}æœˆ</div><div style="font-size:1.2rem;margin:5px 0;">${m.rating === 'good' ? 'ğŸ˜Š' : m.rating === 'bad' ? 'ğŸ˜°' : 'ğŸ˜'}</div><div style="font-size:0.7rem;color:var(--gray);">${m.pillar.s.c}${m.pillar.b.c}</div><div style="font-size:0.7rem;color:var(--gray);">${m.god.k}</div></div>
`).join('')}
</div><div class="info-box good"><p>ğŸŒŸ <strong>æœ€é«˜ã®æœˆ: ${monthlyLuck.best.month}æœˆ</strong><br>${monthlyLuck.best.god.k}ã®æ°—ã§è‰¯ã„ã“ã¨ãŒèµ·ãã¾ã™ï¼</p></div><div class="info-box warn" style="margin-top:10px;"><p>âš ï¸ <strong>æ³¨æ„ã™ã¹ãæœˆ: ${monthlyLuck.worst.month}æœˆ</strong><br>${monthlyLuck.worst.god.k}ã®æ°— - ç„¡ç†ã›ãšãŠéã”ã—ãã ã•ã„ã€‚</p></div>
`;const ints = calcInteractions(SAJU);document.getElementById('interactions').innerHTML = ints.length ? ints.map(i => `<div class="int-item"><div class="int-type">${i.t}</div><div><div class="int-chars">${i.c}</div><div class="int-meaning">${i.m} - ${i.d}</div></div></div>`).join('') : '<p style="color:var(--gray);">å››æŸ± ç§ã®ç‰¹åˆ¥ãª åˆå†²ãŒ ã‚ã‚Šã¾ã›ã‚“.</p>';const banghap = analyzeDirectionalHarmony(SAJU);const amhap = analyzeHiddenHarmony(SAJU);document.getElementById('banghap-amhap').innerHTML = `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸŒ€ æ–¹åˆ</strong> - åŒã˜æ–¹å‘ã®åœ°æ”¯ãŒé›†ã¾ã‚Šå¼·åŠ›ãªäº”è¡Œã®å‹¢ã„ãŒæˆç«‹</p>
${banghap.length ? banghap.map(b => `
<div style="margin-top:10px;padding:12px;background:rgba(${b.type === 'complete' ? '76,175,80' : '255,152,0'},0.1);border-radius:8px;border-left:3px solid ${b.type === 'complete' ? 'var(--wood)' : 'var(--earth)'};"><p style="font-weight:bold;color:${b.type === 'complete' ? 'var(--wood)' : 'var(--earth)'};">${b.name} (${b.branches})</p><p style="margin-top:5px;font-size:0.9rem;">${b.dir}</p><p style="margin-top:5px;font-size:0.85rem;">${b.desc}</p>
${b.type === 'partial' ? `<p style="margin-top:5px;font-size:0.8rem;color:var(--gray);">ğŸ’¡ ${b.missing}ãŒæ¥ã‚‹ã¨å®Œæˆï¼</p>` : ''}
</div>
`).join('') : '<p style="margin-top:10px;color:var(--gray);font-size:0.9rem;">æ–¹åˆãŒ ã‚ã‚Šã¾ã›ã‚“.</p>'}
</div><div class="info-box"><p><strong>ğŸ¤« æš—åˆ</strong> - æ”¯è”µå¹²åŒå£«ã®éš ã‚ŒãŸåˆï¼ˆè¡¨ã«ç¾ã‚Œãªã„)</p>
${amhap.length ? amhap.map(a => `
<div style="margin-top:10px;padding:12px;background:rgba(156,39,176,0.1);border-radius:8px;border-left:3px solid #9C27B0;"><p style="font-weight:bold;color:#9C27B0;">${a.name}</p><p style="margin-top:5px;font-size:0.9rem;">${a.positions}</p><p style="margin-top:5px;font-size:0.85rem;">${a.desc}</p><p style="margin-top:5px;font-size:0.8rem;color:var(--gray);">ğŸ’« ${a.meaning}</p></div>
`).join('') : '<p style="margin-top:10px;color:var(--gray);font-size:0.9rem;">æš—åˆãŒ ã‚ã‚Šã¾ã›ã‚“.</p>'}
</div>
`;const advInt = analyzeAdvancedInteractions(SAJU);document.getElementById('advanced-interactions').innerHTML = `
${advInt.hapHwa.length ? `
<div class="info-box" style="margin-bottom:10px;"><p><strong><img src="taegeuk-icon.png" alt="â˜¯" style="height:14px;width:14px;vertical-align:middle;margin-right:2px;"> å¤©å¹²åˆåŒ–åˆ†æ</strong></p>
${advInt.hapHwa.map(h => `
<div style="margin-top:10px;padding:10px;background:rgba(255,255,255,0.05);border-radius:6px;border-left:3px solid ${h.isHwa ? 'var(--gold)' : 'var(--gray)'};"><p><strong>${h.name}</strong> (${h.stems})</p><p style="font-size:0.85rem;color:${h.isHwa ? 'var(--gold)' : 'var(--gray)'};margin-top:5px;">
${h.isHwa ? `âœ¨ ${h.result}ã§ åˆåŒ–æˆç«‹ï¼ ${h.reason}` : `âšª ${h.reason}`}
</p></div>
`).join('')}
</div>
` : ''}
${advInt.samhapGuk.length ? `
<div class="info-box" style="margin-bottom:10px;"><p><strong>ğŸŒ€ ä¸‰åˆå±€ åˆ†æ</strong></p>
${advInt.samhapGuk.map(s => `
<div style="margin-top:10px;padding:10px;background:rgba(255,255,255,0.05);border-radius:6px;border-left:3px solid ${s.complete ? 'var(--wood)' : 'var(--earth)'};"><p><strong>${s.name}</strong> â†’ ${s.result} æ°—</p><p style="font-size:0.85rem;margin-top:5px;">${s.desc}</p></div>
`).join('')}
</div>
` : ''}
${advInt.chungHaeso.length ? `
<div class="info-box ${advInt.chungHaeso.some(c => !c.isResolved) ? 'warn' : ''}" style="margin-bottom:10px;"><p><strong>âš¡ æ²–(æ²–)è§£æ¶ˆåˆ†æ</strong></p>
${advInt.chungHaeso.map(c => `
<div style="margin-top:10px;padding:10px;background:rgba(255,255,255,0.05);border-radius:6px;border-left:3px solid ${c.isResolved ? 'var(--wood)' : 'var(--fire)'};"><p><strong>${c.clash}</strong></p><p style="font-size:0.85rem;color:${c.isResolved ? 'var(--wood)' : 'var(--fire)'};margin-top:5px;">${c.reason}</p></div>
`).join('')}
</div>
` : ''}
${advInt.warnings.length ? `
<div class="info-box warn"><p><strong>âš ï¸ ç‰¹åˆ¥æ³¨æ„äº‹é …</strong></p>
${advInt.warnings.map(w => `
<div style="margin-top:10px;"><p><strong>${w.type}</strong></p><p style="font-size:0.85rem;margin-top:5px;">${w.desc}</p></div>
`).join('')}
</div>
` : ''}
${!advInt.hapHwa.length && !advInt.samhapGuk.length && !advInt.chungHaeso.length && !advInt.warnings.length ?
'<p style="color:var(--gray);">ç‰¹åˆ¥ãªåˆåŒ–ã‚„æ²–é–¢ä¿‚ãŒã‚ã‚Šã¾ã›ã‚“ã€‚å¹³ç©ãªå››æŸ±ï¼</p>' : ''}
`;const gm = calcGongmang(SAJU);document.getElementById('gongmang').innerHTML = `<div class="info-box"><p><strong>ç©ºäº¡:</strong> ${gm.names.join(', ')}<br>${gm.affected.length ? `âš ï¸ ${gm.affected.join(', ')}ã«ç©ºäº¡ãŒ ã‚ã‚Šã¾ã™. è©²å½“éƒ¨åˆ†ã®æ°—ãŒå¼±ã¾ã‚Šã¾ã™ã€‚` : 'å››æŸ±å†…ã«ç©ºäº¡ãŒã‚ã‚Šã¾ã›ã‚“!'}</p></div>`;const gmHaeso = analyzeGongmangHaeso(SAJU, gm);document.getElementById('gongmang-haeso').innerHTML = gmHaeso.hasGongmang ? `
${gmHaeso.results.map(r => `
<div class="info-box ${r.resolved ? 'good' : 'warn'}" style="margin-bottom:10px;"><p><strong>${r.position} ç©ºäº¡ (${r.branch})</strong></p><p style="margin-top:8px;font-size:0.9rem;">
${r.resolved ?
`âœ… è§£æ¶ˆï¼š ${r.method}` :
`âŒ å®³æ¶ˆã•ã‚Œãªã„`}
</p><p style="margin-top:5px;font-size:0.85rem;color:var(--gray);">${r.effect}</p></div>
`).join('')}
<div class="info-box" style="margin-top:10px;"><p><strong>ğŸ’¡ ç©ºäº¡è§£æ¶ˆæ¡ä»¶</strong></p><p style="margin-top:8px;font-size:0.85rem;line-height:1.6;">
1. æ²–(æ²–)ã§è§£æ¶ˆ: ç©ºäº¡åœ°æ”¯ã®åå¯¾å´ã®åœ°æ”¯ãŒã‚ã‚Œã°è§£æ¶ˆ<br>
2. ä¸‰åˆã§è§£æ¶ˆ: ä¸‰åˆã®æ®‹ã‚ŠäºŒã¤ã®åœ°æ”¯ãŒå…¨ã¦ã‚ã‚Œã°è§£æ¶ˆ<br>
3. å¤§é‹/æ­³é‹ã§è§£æ¶ˆ: é‹ã§è©²å½“æ¡ä»¶ãŒæº€ãŸã•ã‚Œã‚Œã°ä¸€æ™‚çš„è§£æ¶ˆ
</p></div>
` : '<div class="info-box"><p style="color:var(--gray);">å››æŸ±å†…ã«ç©ºäº¡ãŒãªãè§£æ¶ˆåˆ†æãŒå¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚ ğŸ‘</p></div>';const sinsal = calcSinsal(SAJU);document.getElementById('sinsal').innerHTML = sinsal.length ? sinsal.map(s => `<div class="sinsal ${s.t}"><div class="sinsal-icon">${s.i}</div><div><div class="sinsal-name">${s.n}</div><div class="sinsal-desc">${s.d}</div></div></div>`).join('') : '<p style="color:var(--gray);">ç‰¹åˆ¥ãª ç¥æ®ºãŒ ã‚ã‚Šã¾ã›ã‚“.</p>';const sinsalPos = analyzeSinsalPosition(SAJU);document.getElementById('sinsal-position').innerHTML = sinsalPos.length ? `
<div class="info-box" style="margin-bottom:10px;"><p style="font-size:0.85rem;color:var(--gray);">åŒã˜ ç¥æ®ºã‚‚ã©ã®ä½ç½®ã«ã‚ã‚‹ã‹ã«ã‚ˆã£ã¦æ„å‘³ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚</p></div>
${sinsalPos.map(sp => `
<div class="info-box" style="margin-bottom:10px;border-left:3px solid ${sp.sinsal.includes('æ¡ƒèŠ±') ? '#e91e63' : sp.sinsal.includes('é§…é¦¬') ? '#ff9800' : '#9c27b0'};"><p><strong>${sp.sinsal}</strong> - ${sp.position}</p><p style="margin-top:8px;font-size:0.9rem;">${sp.interpretation}</p><p style="margin-top:5px;font-size:0.85rem;color:var(--gold);">ğŸ’¡ ${sp.advice}</p></div>
`).join('')}
` : '<div class="info-box"><p style="color:var(--gray);">ä½ç½®åˆ¥ã«åˆ†æã™ã‚‹ä¸»è¦ç¥æ®ºãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p></div>';document.getElementById('ai-interpretation').innerHTML = generateAIInterpretation(SAJU, GODS, BIRTH_YEAR, GENDER);renderFortune('total');} catch (error) {console.error('å››æŸ±ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ©ãƒ¼:', error);toast('çµæœè¡¨ç¤ºä¸­ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');}}
function renderFortune(type) {const el = document.getElementById('fortune-content');if (!SAJU) { el.innerHTML = '<p>ã¾ãšå››æŸ±ã‚’åˆ†æã—ã¦ãã ã•ã„ã€‚</p>'; return; }
const str = calcStrength(SAJU);if (type === 'today') {el.innerHTML = genTodayFortune(SAJU, GODS);return;}
if (type === 'year') {const cy = new Date().getFullYear();el.innerHTML = genYearFortune(SAJU, GODS, cy);return;}
if (type === 'career') {el.innerHTML = genCareerFortune(SAJU, str, GODS);return;}
if (type === 'love') {el.innerHTML = genLoveFortune(SAJU, str, GODS);return;}
if (type === 'wealth') {el.innerHTML = genWealthFortune(SAJU, str, GODS);return;}
if (type === 'health') {el.innerHTML = genHealthFortune(SAJU, str, GODS);return;}
const dm = SAJU.day.s;const yongEl = ELEMENT[GODS.yong];const colorAdvice = {wood: { color: 'ç·‘è‰², é’ç·‘è‰²', dir: 'æ±', num: '3, 8', item: 'æœ¨ã®å°ç‰©, æ¤ç‰©, æœ¬' },
fire: { color: 'èµ¤è‰², ç´«è‰²', dir: 'å—', num: '2, 7', item: 'ç…§æ˜, ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«, é›»å­æ©Ÿå™¨' },
earth: { color: 'é»„è‰², èŒ¶è‰²', dir: 'ä¸­å¤®', num: '5, 10', item: 'é™¶ç£å™¨, ã‚¯ãƒªã‚¹ã‚¿ãƒ«, ä¸å‹•ç”£' },
metal: { color: 'ç™½è‰², é‡‘è‰², éŠ€è‰²', dir: 'è¥¿', num: '4, 9', item: 'é‡‘å±ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼, æ™‚è¨ˆ, è»Š' },
water: { color: 'é»’è‰², è—è‰²', dir: 'åŒ—', num: '1, 6', item: 'æ°´æ—é¤¨, å™´æ°´, çµµç”»' }};const yongAdvice = colorAdvice[GODS.yong];const typeDesc = {strong: `<strong>ğŸ”¥ æ°—ãŒ å¼·ã„ å››æŸ±!</strong><br><br>è‡ªå·±ä¸»å¼µãŒç¢ºã‹ã§ä»–äººã«æŒ¯ã‚Šå›ã•ã‚Œãªã„ã‚¿ã‚¤ãƒ—ã§ã™ã€‚<br><br><strong>é•·æ‰€:</strong> ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—, é€Ÿã„æ±ºå®šåŠ›, ç‹¬ç«‹å¿ƒ, æ¨é€²åŠ›<br><strong>æ³¨æ„:</strong> å¼·ã™ãã‚‹ã¨"é ‘å›ºè€…"ã«è¦‹ãˆã¾ã™ã€‚ãŸã¾ã«äººã®è©±ã‚‚èã„ã¦ã‚ã’ã¦ãã ã•ã„ï¼`,
weak: `<strong>ğŸ’§ ç©ã‚„ã‹ãª æ°—ã®å››æŸ±!</strong><br><br>å”åŠ›ãŒä¸Šæ‰‹ã§èª¿å’Œã‚ˆãéã”ã™ã‚¿ã‚¤ãƒ—ã§ã™ã€‚<br><br><strong>é•·æ‰€:</strong> æ©Ÿè»¢ãŒåˆ©ã, é©å¿œåŠ›, é…æ…®å¿ƒ, è²´äººé‹<br><strong>æ³¨æ„:</strong> æ°—ã‚’ä½¿ã„ã™ãã‚‹ã¨è‡ªåˆ†ã®æ„è¦‹ãŒè¨€ãˆã¾ã›ã‚“ã€‚å ‚ã€…ã¨ï¼`,
balanced: `<strong>âš–ï¸ å‡è¡¡ã®å–ã‚ŒãŸå››æŸ±ï¼</strong><br><br>å¼·ã„æ™‚ã¯å¼·ãã€æŸ”ã‚‰ã‹ã„æ™‚ã¯ç©ã‚„ã‹ãªä¸‡èƒ½ã‚¿ã‚¤ãƒ—ï¼å››æŸ±ã§æœ€ã‚‚è‰¯ã„çŠ¶æ…‹ã§ã™ï¼<br><br><strong>é•·æ‰€:</strong> çŠ¶æ³åˆ¤æ–­ãŒé€Ÿã„, é©å¿œåŠ›æœ€é«˜, ã©ã“ã§ã‚‚ã†ã¾ãç”Ÿãæ®‹ã‚Šã¾ã™`};el.innerHTML = `
<div class="info-box gold"><p><strong>ğŸ“Š ç·åˆé‹åˆ†æ</strong></p></div><div class="info-box" style="margin-top:12px;"><p style="line-height:1.8;">${typeDesc[GODS.type]}</p></div>
${str.extreme ? `<div class="info-box warn" style="margin-top:12px;"><p><strong>âš¡ ${str.extreme} å››æŸ±!</strong><br>${str.extreme === 'æ¥µèº«å¼·' ? 'æ°—ãŒéå¸¸ã«å¼·ãå¾“æ ¼(å¾“æ—ºæ ¼ã€å¾“å¼·æ ¼)ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚è‡ªåˆ†ã®æ€ã„é€šã‚Šã«ç”Ÿãã‚‹ã®ãŒè‰¯ã„ã§ã™ï¼' : 'æ°—ãŒéå¸¸ã«å¼±ãå¾“æ ¼(å¾“å…æ ¼ã€å¾“è²¡æ ¼ã€å¾“æ®ºæ ¼)ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚äººã«ã†ã¾ãå¾“ã„å”èª¿ã™ã‚‹ã®ãŒè‰¯ã„ã§ã™!'}</p></div>` : ''}
<div class="info-box good" style="margin-top:15px;"><p><strong>ğŸ¯ ç”¨ç¥ æ´»ç”¨æ³•</strong></p><p style="margin-top:8px;">ç”¨ç¥ã®<strong>${yongEl.n}(${yongEl.k})</strong> ã®æ°—ã‚’è¿‘ã¥ã‘ã¦ãã ã•ã„ï¼</p><ul style="margin-top:10px;margin-left:15px;line-height:1.8;"><li>ğŸ¨ å¹¸é‹ã®è‰²: ${yongAdvice.color}</li><li>ğŸ§­ å¹¸é‹ã®æ–¹å‘: ${yongAdvice.dir}</li><li>ğŸ”¢ å¹¸é‹ã®æ•°å­—: ${yongAdvice.num}</li><li>âœ¨ å¹¸é‹ã®ã‚¢ã‚¤ãƒ†ãƒ : ${yongAdvice.item}</li></ul></div>`;}
function getTodayFortune() {const today = new Date();const dp = calcDayPillar(today.getFullYear(), today.getMonth() + 1, today.getDate());const god = getTenGod(dp.s, SAJU.day.s);const isYong = [dp.s.e, dp.b.e].includes(GODS.yong);const isHee = [dp.s.e, dp.b.e].includes(GODS.hee);const isGi = [dp.s.e, dp.b.e].includes(GODS.gi);let rating, advice;if (isYong) {rating = 'âœ¨ å¤§å‰';advice = 'ä»Šæ—¥ã¯ç”¨ç¥ã®æ°—ãŒå¼·ãå…¥ã£ã¦ãã‚‹æ—¥ï¼é‡è¦ãªã“ã¨ã‚’æ¨é€²ã—ã¦ãã ã•ã„ã€‚ç©æ¥µçš„ã«å‹•ã‘ã°è‰¯ã„çµæœãŒã‚ã‚Šã¾ã™ã€‚';} else if (isHee) {rating = 'ğŸ˜Š å‰(å‰)';advice = 'å–œç¥ã®æ°—ãŒåŠ©ã‘ã‚‹æ—¥ã§ã™ã€‚è¨ˆç”»ã—ãŸäº‹ãŒé †èª¿ã«é€²ã¿ã¾ã™ã€‚æ–°ã—ã„è©¦ã¿ã‚‚è‰¯ã„ã§ã™ã€‚';} else if (isGi) {rating = 'âš ï¸ æ³¨æ„';advice = 'å¿Œç¥ã®æ°—ãŒå¼·ã„æ—¥ãªã®ã§ç„¡ç†ã›ãšãŠéã”ã—ãã ã•ã„ã€‚é‡è¦ãªæ±ºå®šã¯å»¶ã°ã—ã€æ—¢å­˜ã®ä»•äº‹ã«é›†ä¸­ã—ã¦ãã ã•ã„ã€‚';} else {rating = 'ğŸ˜ å¹³ç©';advice = 'å¹³å‡¡ãªä¸€æ—¥ã§ã™ã€‚ç€å®Ÿã«æ—¥å¸¸ã‚’ç¶­æŒã—ãªãŒã‚‰å°ã•ãªå¹¸ç¦ã‚’è¦‹ã¤ã‘ã¦ãã ã•ã„ã€‚';}
return `<div class="info-box"><p><strong>ğŸ“… ä»Šæ—¥ã®é‹å‹¢</strong><span style="color:var(--gold);">(${dp.s.c}${dp.b.c}æ—¥)</span></p><div style="margin-top:12px;text-align:center;font-size:18px;">${rating}</div><p style="margin-top:12px;line-height:1.8;">
ä»Šæ—¥ã®æ—¥è¾°: <strong>${dp.s.c}${dp.b.c}</strong> (${ELEMENT[dp.s.e].k}${ELEMENT[dp.b.e].k})<br>
ä»Šæ—¥ã®åç¥: <strong>${god.k}</strong> - ${god.d}
</p><div style="margin-top:15px;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p><strong>ğŸ’¡ ä»Šæ—¥ã®åŠ©è¨€</strong></p><p style="margin-top:8px;line-height:1.6;">${advice}</p></div></div>`;}
function getYearFortune() {const cy = new Date().getFullYear();const yp = calcYearPillar(cy, 6, 1);const god = getTenGod(yp.s, SAJU.day.s);const isYong = [yp.s.e, yp.b.e].includes(GODS.yong);const isHee = [yp.s.e, yp.b.e].includes(GODS.hee);const isGi = [yp.s.e, yp.b.e].includes(GODS.gi);const isDoubleGi = yp.s.e === GODS.gi && yp.b.e === GODS.gi;const mbi = SAJU.month ? BRANCH.indexOf(SAJU.month.b) : -1;const isSummerBorn = [5, 6, 7].includes(mbi);const isJoryeol = isSummerBorn && GODS.gi === 'fire';let rating, advice;if (isYong) {rating = 'ğŸŒŸ å¤§å‰å¹´';advice = 'ä»Šå¹´ã¯ç”¨ç¥ã®å¹´ï¼10å¹´ã«ä¸€åº¦ã®æ©Ÿä¼šã®å¹´ã§ã™ã€‚ç©æ¥µçš„ã«æŒ‘æˆ¦ã—æ‹¡å¼µã—ã¦ãã ã•ã„ã€‚è»¢è·ã€èµ·æ¥­ã€çµå©šãªã©å¤§ããªæ±ºæ–­ã«è‰¯ã„ã§ã™ã€‚';} else if (isHee) {rating = 'ğŸ˜Š å‰å¹´';advice = 'å–œç¥ã®æ°—ãŒåŠ©ã‘ã‚‹å¹´ã§ã™ã€‚äº‹ãŒé †èª¿ã§å‘¨å›²ã®åŠ©ã‘ã‚’å—ã‘ã‚„ã™ã„ã§ã™ã€‚äººè„ˆã‚’åºƒã’å­¦ã³ã«æŠ•è³‡ã—ã¦ãã ã•ã„ã€‚';} else if (isDoubleGi) {rating = 'ğŸš¨ ç‰¹åˆ¥æ³¨æ„ã™ã¹ãå¹´';advice = `å¤©å¹²(${yp.s.c})ã¨åœ°æ”¯(${yp.b.c})å…±ã«å¿Œç¥(${ELEMENT[GODS.gi].k}) äº”è¡Œã§ã™! å¿Œç¥ãŒ2å€ã§å¼·ãå…¥ã£ã¦ãã‚‹å¹´ãªã®ã§å¥åº·ã€è²¡ç‰©ã€äººé–“é–¢ä¿‚ã™ã¹ã¦æ ¼åˆ¥ã«æ³¨æ„ã—ã¦ãã ã•ã„ã€‚ ç„¡ç†ãªæ‹¡å¼µã€æŠ•è³‡ã€è»¢è·ã¯é¿ã‘ã¦å®ˆå‚™ãƒ¢ãƒ¼ãƒ‰ã«è»¢æ›ã—ã¦ãã ã•ã„ã€‚${isJoryeol ? ' ç‰¹ã« å¤ç”Ÿã¾ã‚Œã§ç‡¥ç†±ãªå››æŸ±ãªã®ã«ç«ãŒ2å€ã§å…¥ã‚‹ã¨å¿ƒè¡€ç®¡ã€çœ¼çƒã€ç‚ç—‡ç–¾æ‚£ã«æ ¼åˆ¥ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼' : ''}`;} else if (isGi) {rating = 'âš ï¸ æ³¨æ„å®³ã™ã¹ã å®³';advice = 'å¿Œç¥ã®å¹´ãªã®ã§ç„¡ç†ãªæ‹¡å¼µã‚„æŠ•è³‡ã¯é¿ã‘ã¦ãã ã•ã„ã€‚å¥åº·ç®¡ç†ã«æ°—ã‚’ä½¿ã„ã€å®‰å®šã‚’ç¶­æŒã—ãªãŒã‚‰å†…å®Ÿã‚’å›ºã‚ã‚‹æ™‚æœŸã§ã™ã€‚';} else {rating = 'ğŸ˜ å¹³å¹´';advice = 'å¤§ããªå¤‰åŒ–ãªãå¹³ç©ãªå¹´ã§ã™ã€‚é»™ã€…ã¨è‡ªåˆ†ã®ä»•äº‹ã«å¿ å®Ÿã«ã—ãªãŒã‚‰æ¬¡ã®æ©Ÿä¼šã‚’æº–å‚™ã—ã¦ãã ã•ã„ã€‚';}
return `<div class="info-box"><p><strong>ğŸ“† ${cy}å¹´é‹å‹¢</strong><span style="color:var(--gold);">(${yp.s.c}${yp.b.c}å¹´)</span></p><div style="margin-top:12px;text-align:center;font-size:18px;">${rating}</div><p style="margin-top:12px;line-height:1.8;">
ä»Šå¹´ã®æ­³é‹ï¼š <strong>${yp.s.c}${yp.b.c}</strong> (${ELEMENT[yp.s.e].k}${ELEMENT[yp.b.e].k})<br>
ä»Šå¹´ã®åç¥ï¼š <strong>${god.k}</strong> - ${god.d}
</p><div style="margin-top:15px;padding:12px;background:rgba(255,255,255,0.05);border-radius:8px;"><p><strong>ğŸ’¡ ä»Šå¹´ã®åŠ©è¨€</strong></p><p style="margin-top:8px;line-height:1.6;">${advice}</p></div><div style="margin-top:12px;padding:12px;background:rgba(253,216,53,0.1);border-radius:8px;"><p><strong>ğŸ“… ä»Šå¹´ã®è‰¯ã„æœˆ</strong></p><p style="margin-top:8px;">ç”¨ç¥(${ELEMENT[GODS.yong].k})ãŒå¼·ã„æœˆ: ${getGoodMonths()}</p></div></div>`;}
function getGoodMonths() {const monthElements = ['water','water','wood','wood','earth','fire','fire','earth','metal','metal','earth','water'];const goodMonths = [];monthElements.forEach((el, i) => {if (el === GODS.yong || el === GODS.hee) goodMonths.push((i + 1) + 'æœˆ');});return goodMonths.length ? goodMonths.join(', ') : 'ä¸ŠåŠæœŸã‚ˆã‚Šä¸‹åŠæœŸãŒè‰¯ã„ã§ã™';}
function generateAIInterpretation(saju, gods, birthYear, gender) {const dm = saju.day.s;const str = calcStrength(saju);const currentYear = new Date().getFullYear();const age = currentYear - birthYear + 1;const interactions = calcInteractions(saju);const samhap = gods?.samhap || analyzeSamhapBureau(saju);const format = calcFormat(saju, null, samhap);const sinsal = calcSinsal(saju);const gongmang = calcGongmang(saju);const luck = calcLuck(saju, birthYear, gender, gods, BIRTH_MONTH, BIRTH_DAY, BIRTH_HOUR);const curLuck = luck.find(l => l.isCur);const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[saju.year, saju.month, saju.day, saju.hour].forEach(p => {if(p && p.s) elCount[p.s.e]++;if(p && p.b) elCount[p.b.e]++;});const maxEl = Object.entries(elCount).reduce((a,b) => b[1] > a[1] ? b : a);const minEl = Object.entries(elCount).filter(e => e[1] === 0);const hasGoodHap = interactions.some(i => i.t.includes('åˆ'));const hasBadChung = interactions.some(i => i.t.includes('æ²–'));const goodSinsal = sinsal.filter(s => s.t === 'good');const badSinsal = sinsal.filter(s => s.t === 'bad');let coreMessage = '';let priority = [];const dmName = `${dm.k}${ELEMENT[dm.e].k}`;const dmHanja = `${dm.c}${ELEMENT[dm.e].c}`;if (str.type === 'strong') {coreMessage = `<strong>${dmName}(${dmHanja})</strong> æ—¥å¹²ãŒ ${str.pct}%ã§<span style="color:var(--fire);">èº«å¼·</span>ã®å››æŸ±ã§ã™ã€‚ è‡ªåˆ†ã®æ„å¿—ãŒå¼·ãä¸»å°çš„ã§ ç”Ÿãã‚‹ã‚¿ã‚¤ãƒ—ãŒã§ã™ã€‚`;priority.push('è‡ªåˆ†ã ã‘ã®é“ã‚’åˆ‡ã‚Šé–‹ãã®ãŒæœ‰åˆ©');} else if (str.type === 'weak') {coreMessage = `<strong>${dmName}(${dmHanja})</strong> æ—¥å¹²ãŒ ${str.pct}%ã§<span style="color:var(--water);">èº«å¼±</span>ãªå››æŸ±ã§ã™ã€‚å”åŠ›ã¨èª¿å’Œã‚’é€šã˜ã¦è¼ãã‚¿ã‚¤ãƒ—ã§ã™ã€‚`;priority.push('è‰¯ã„ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨å…±ã«ã™ã‚‹ã®ãŒé‡è¦');} else {coreMessage = `<strong>${dmName}(${dmHanja})</strong> æ—¥å¹²ãŒ ${str.pct}%ã§<span style="color:var(--gold);">å‡è¡¡ å®šã¾ã£ãŸ</span> å››æŸ±ã§ã™ã€‚ çŠ¶æ³ã«å¿œã˜ã¦æŸ”è»Ÿã«å¯¾å‡¦ã§ã ã‚ã‚Šã¾ã™.`;priority.push('ã©ã‚“ãªç’°å¢ƒã§ã‚‚é©å¿œå¯èƒ½');}
let conflictAnalysis = [];if (hasBadChung && hasGoodHap) {conflictAnalysis.push({type: 'resolved',
msg: 'å››æŸ±ã«å†²(æ²–)ãŒã‚ã‚Šã¾ã™ãŒåˆï¼ˆåˆï¼‰ãŒå…±ã«ã‚ã‚Šå½±éŸ¿ãŒç·©å’Œã•ã‚Œã¾ã™. è‘›è—¤ã®å¾Œã«å’Œè§£ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚'});} else if (hasBadChung) {conflictAnalysis.push({type: 'caution',
msg: 'å››æŸ±ã«å†²(æ²–)ãŒã‚ã‚Šå¤‰åŒ–ã¨è‘›è—¤ãŒå¤šã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™. ã ãŒ ã“ã‚Œã¯æˆé•·ã®æ©Ÿä¼šã«ã‚‚ãªã‚Šã¾ã™.'});}
if (minEl.length >= 2) {conflictAnalysis.push({type: 'missing',
msg: `${minEl.map(e => ELEMENT[e[0]].k).join(', ')} äº”è¡ŒãŒãªãè©²å½“æ°—é‹ã‚’è£œå®Œã™ã‚Œã°è‰¯ã„ã§ã™. ç”¨ç¥ï¼ˆ${ELEMENT[gods.yong].k}ï¼‰ã§è‡ªç„¶ã«è£œå®Œã•ã‚Œã¾ã™.`});}
if (str.extreme) {conflictAnalysis.push({type: 'extreme',
msg: `${str.extreme} å››æŸ±ã§ã€ä¸€èˆ¬çš„ãªè§£é‡ˆã‚ˆã‚Šå¾“æ ¼ã§è¦‹ã‚‹æ–¹ãŒã‚ˆã‚Šåˆã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™. ${str.extreme === 'æ¥µèº«å¼·' ? 'è‡ªåˆ†ã®æ„å¿—ã§æŠ¼ã—é€²ã‚ã‚‹ã“ã¨ãŒã‚€ã—ã‚ è‰¯ã„ã§ã™.' : 'å”åŠ›ã—ã¦ä»»ã›ã‚‹ã“ã¨ãŒæˆåŠŸã®éµã§ã™ã€‚'}`});}
let timingGuide = '';const yearPillar = calcYearPillar(currentYear, 6, 1);const isYongYear = [yearPillar.s.e, yearPillar.b.e].includes(gods.yong);const isGiYear = [yearPillar.s.e, yearPillar.b.e].includes(gods.gi);if (curLuck) {const isGoodLuck = curLuck.rating === 'good';const luckEl = ELEMENT[curLuck.s.e].k;if (isGoodLuck && isYongYear) {timingGuide = `ğŸŒŸ <strong>ä»ŠãŒæœ€é«˜ã®æ™‚æœŸï¼</strong><br>å¤§é‹ã¨ä»Šå¹´ã®é‹ãŒä¸¡æ–¹è‰¯ã„ã§ã™ã€‚ ${curLuck.startAge}~${curLuck.endAge}æ­³å¤§é‹(${curLuck.s.c}${curLuck.b.c})ã§ ${luckEl} æ°—ãŒ åŠ©ã‘ã¦ãã‚Œã€${currentYear}å¹´ã‚‚ç”¨ç¥ã®å¹´ã§ã™ã€‚ <span style="color:var(--gold);">ç©æ¥µçš„ã«æŒ‘æˆ¦ã—ã¦ãã ã•ã„ï¼</span>`;} else if (isGoodLuck && isGiYear) {timingGuide = `âš–ï¸ <strong>æ©Ÿä¼šã¨è©¦ç·´ãŒå…±å­˜</strong><br>å¤§é‹ã¯è‰¯ã„ãŒä»Šå¹´ã¯å¿Œç¥ã®å¹´ã§ã™ã€‚å¤§ããªæµã‚Œã§ã¯ä¸Šæ˜‡ä¸­ãªã®ã§ç›®å…ˆã®å›°é›£ã«æºã‚Œãªã„ã§ãã ã•ã„ã€‚ <span style="color:var(--earth);">æ¥å¹´ã®ãŸã‚ã®åŸºç›¤ã‚’å›ºã‚ã¦ãã ã•ã„ã€‚</span>`;} else if (!isGoodLuck && isYongYear) {timingGuide = `ğŸ’« <strong>é€†è»¢ã®å¹´ï¼</strong><br>å¤§é‹ãŒå¼±ã„æ™‚æœŸã§ã™ãŒä»Šå¹´ã¯ç”¨ç¥ã®å¹´ã§ã™ã€‚ã“ã®æ©Ÿä¼šã‚’é€ƒã•ãªã„ã§ãã ã•ã„ï¼ <span style="color:var(--gold);">ä»Šå‹•ã‘ã°è‰¯ã„çµæœãŒã‚ã‚Šã¾ã™ã€‚</span>`;} else if (!isGoodLuck && isGiYear) {timingGuide = `ğŸ›¡ï¸ <strong>å¿è€ã®æ™‚æœŸ</strong><br>å¤§é‹ã¨æ­³é‹å…±ã«æ³¨æ„ã™ã¹ãæ™‚ã§ã™ã€‚ç„¡ç†ãªæ‹¡å¼µã‚ˆã‚Š <span style="color:var(--water);">å†…å®Ÿã‚’å›ºã‚å¥åº·ã‚’å¤§åˆ‡ã«ã—ã¦ãã ã•ã„ã€‚</span> ã‚‚ã†ã™ãè‰¯ã„é‹ãŒæ¥ã¾ã™ã€‚`;} else {timingGuide = `ğŸ˜Š <strong>å¹³ç©ãªæµã‚Œ</strong><br>${curLuck.startAge}~${curLuck.endAge}æ­³å¤§é‹(${curLuck.s.c}${curLuck.b.c})ã‚’éã”ã—ã¦ã„ã¾ã™ã€‚ç€å®Ÿã•ãŒç­”ãˆã§ã™ã€‚`;}}
let personalAdvice = [];if (age < 30) {personalAdvice.push({icon:'ğŸ“š', title:'20ä»£ã®åŠ©è¨€', msg:`${ELEMENT[gods.yong].k} é–¢é€£åˆ†é‡ã‚’å‹‰å¼·ã—ãŸã‚ŠçµŒé¨“ã—ã¦ãã ã•ã„ã€‚ä¸€ç”Ÿã®è³‡ç”£ã«ãªã‚Šã¾ã™ã€‚`});} else if (age < 40) {personalAdvice.push({icon:'ğŸš€', title:'30ä»£ã®åŠ©è¨€', msg:`ä»Šç©ã¿ä¸Šã’ã‚‹ã‚‚ã®ãŒ40ä»£ã®å®Ÿã‚Šã«ãªã‚Šã¾ã™ã€‚ ${format.b.split(',')[0]} åˆ†é‡ã§ å°‚é–€æ€§ã‚’ä¼¸ã°ã—ã—ã¦ãã ã•ã„.`});} else if (age < 50) {personalAdvice.push({icon:'ğŸ¯', title:'40ä»£ã®åŠ©è¨€', msg:'çµŒé¨“ã‚’ã‚‚ã¨ã«ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã™ã‚‹æ™‚ã§ã™ã€‚å¾Œè¼©é¤Šæˆã‚‚ è‰¯ã„ã§ã™.'});} else {personalAdvice.push({icon:'ğŸŒ³', title:'äººç”Ÿå¾ŒåŠã®åŠ©è¨€', msg:'çŸ¥æµã‚’åˆ†ã‹ã¡åˆã„å¥åº·ã‚’å¤§åˆ‡ã«ã—ã¦ãã ã•ã„ã€‚ ç²¾ç¥çš„è±Šã‹ã•ãŒçœŸã®å¹¸ç¦ã§ã™ã€‚'});}
const yongAdvice = {wood: {actions:['æ±ã§å¼•è¶Šã—/æ—…è¡Œ', 'æœã®é‹å‹•', 'ç·‘è‰²ã‚¤ãƒ³ãƒ†ãƒªã‚¢', 'èª­æ›¸/å‹‰å¼·', 'æ–°ã—ã„å§‹ã¾ã‚Š'], avoid:'éåº¦ãªç«¶äº‰ã€é‡‘å±ã‚¤ãƒ³ãƒ†ãƒªã‚¢'},
fire: {actions:['å—æ–¹å‘', 'äººãŒå¤šã„å ´æ‰€', 'èµ¤è‰²ãƒã‚¤ãƒ³ãƒˆ', 'SNSæ´»å‹•', 'ç™ºè¡¨/è¬›æ¼”'], avoid:'æš—ã„ç’°å¢ƒã€ä¸€äººã§ã„ã‚‹ã“ã¨'},
earth: {actions:['ä¸­å¿ƒéƒ¨ã®ä½ç½®', 'ä¸å‹•ç”£ã¸ã®é–¢å¿ƒ', 'é»„è‰²/èŒ¶è‰²', 'ä¿¡é ¼ã‚’ç¯‰ã', 'å®‰å®šçš„æŠ•è³‡'], avoid:'é »ç¹ãªå¼•è¶Šã—ã€æ€¥ãªå¤‰åŒ–'},
metal: {actions:['è¥¿ æ–¹å‘', 'é‡‘è/æŠ•è³‡', 'ç™½è‰²/é‡‘è‰²', 'åŸå‰‡ã‚’ç«‹ã¦ã‚‹', 'æ•´ç†æ•´é “'], avoid:'å„ªæŸ”ä¸æ–­ã€æ•£æ¼«ãªç’°å¢ƒ'},
water: {actions:['åŒ—æ–¹å‘', 'æŸ”è»Ÿãªæ€è€ƒ', 'é»’è‰²/é’è‰²', 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚­ãƒ³ã‚°', 'æ—…è¡Œ'], avoid:'é ‘å›º, ä¸€ç®‡æ‰€ã«ç•™ã¾ã‚‹ã“ã¨'}};const yongAction = yongAdvice[gods.yong];personalAdvice.push({icon:'âœ¨',
title:`ç”¨ç¥(${ELEMENT[gods.yong].k}) æ´»ç”¨æ³•`,
msg:`æ¨è–¦: ${yongAction.actions.slice(0,3).join(', ')}<br>é¿ã‘ã‚‹ã¹ãã“ã¨ï¼š${yongAction.avoid}`});personalAdvice.push({icon:'ğŸ’¼',
title:'é©æ€§åˆ†é‡',
msg:`${format.n}ã«åˆã£ãŸåˆ†é‡ï¼š${format.b}`});if (goodSinsal.length > 0) {personalAdvice.push({icon:'ğŸŒŸ',
title:'å‰ç¥æ´»ç”¨',
msg:`${goodSinsal.map(s => s.n).join(', ')}ãŒ ã‚ã‚Šã¾ã™. ã“ã®æ°—ã‚’ä¿¡ã˜ã¦æŒ‘æˆ¦ã—ã¦ãã ã•ã„ï¼`});}
let html = `
<div style="padding:15px;background:linear-gradient(135deg,rgba(156,39,176,0.1),rgba(103,58,183,0.05));border-radius:12px;margin-bottom:15px;"><p style="font-size:0.85rem;color:var(--gray);margin-bottom:10px;">ğŸ§  AIãŒã‚ãªãŸã®å››æŸ±ã‚’ç·åˆçš„ã«åˆ†æã—ã¾ã—ãŸ</p><p style="line-height:1.8;font-size:1rem;">${coreMessage}</p></div>
`;if (conflictAnalysis.length > 0) {html += `
<div class="info-box ${conflictAnalysis.some(c => c.type === 'caution' || c.type === 'extreme') ? 'warn' : ''}" style="margin-bottom:15px;"><p style="margin-bottom:10px;"><strong>âš–ï¸ ç›¸åè¦ç´ åˆ†æ</strong></p>
${conflictAnalysis.map(c => `
<div style="padding:10px;margin:8px 0;background:rgba(255,255,255,0.05);border-radius:8px;border-left:3px solid ${c.type === 'caution' ? 'var(--fire)' : c.type === 'resolved' ? 'var(--wood)' : 'var(--gold)'};"><p style="font-size:0.9rem;line-height:1.6;">${c.msg}</p></div>
`).join('')}
</div>
`;}
html += `
<div class="info-box gold" style="margin-bottom:15px;"><p style="margin-bottom:10px;"><strong>ğŸ“… ä»Šã®æ™‚æœŸã‚¬ã‚¤ãƒ‰ï¼ˆ${currentYear}å¹´, ${age}æ­³ï¼‰</strong></p><p style="line-height:1.8;font-size:0.95rem;">${timingGuide}</p></div>
`;html += `
<div class="info-box" style="margin-bottom:15px;"><p style="margin-bottom:12px;"><strong>ğŸ’¡ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºåŠ©è¨€</strong></p>
${personalAdvice.map(a => `
<div style="padding:12px;margin:8px 0;background:rgba(255,255,255,0.05);border-radius:8px;"><p style="font-weight:bold;margin-bottom:5px;">${a.icon} ${a.title}</p><p style="font-size:0.9rem;line-height:1.6;color:var(--gray);">${a.msg}</p></div>
`).join('')}
</div>
`;if (priority.length > 0) {html += `
<div style="padding:15px;background:rgba(255,255,255,0.05);border:1px solid rgba(212,175,55,0.3);border-radius:12px;text-align:center;cursor:default;"><p style="font-size:0.75rem;color:var(--gray);margin-bottom:8px;letter-spacing:1px;">ğŸ’¬ æ ¸å¿ƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</p><p style="font-size:1rem;color:var(--gold);font-style:italic;line-height:1.6;">"${priority[0]}"</p></div>
`;}
return html;}
function showTodayFortune() {const el = document.getElementById('today-fortune');el.style.display = 'block';document.getElementById('today-fortune-content').innerHTML = getTodayFortune();}
function copySajuForAI() {if (!SAJU) { toast('ã¾ãšå››æŸ±ã‚’åˆ†æã—ã¦ãã ã•ã„'); return; }
try {const str = calcStrength(SAJU);const dm = SAJU.day.s;const samhap = GODS?.samhap || analyzeSamhapBureau(SAJU);const format = calcFormat(SAJU, str, samhap);const interactions = calcInteractions(SAJU) || [];const sinsal = calcSinsal(SAJU) || [];const gongmang = calcGongmang(SAJU);const luck = calcLuck(SAJU, BIRTH_YEAR, GENDER, GODS, BIRTH_MONTH, BIRTH_DAY, BIRTH_HOUR) || [];const curLuck = luck.find(l => l.isCur);const currentYear = new Date().getFullYear();const today = new Date();const age = currentYear - BIRTH_YEAR + 1;const manAge = (() => { let a = currentYear - BIRTH_YEAR; const m = today.getMonth() + 1; const d = today.getDate(); if (m < BIRTH_MONTH || (m === BIRTH_MONTH && d < BIRTH_DAY)) a--; return a; })();const ilju = getIljuDesc(SAJU.day.s, SAJU.day.b);const yearGodObj = getTenGod(SAJU.year.s, dm);const yearBranchIdx = BRANCH.findIndex(b => b.c === SAJU.year.b.c);const hasSikSangWithRoot = yearGodObj && ['å‚·å®˜','é£Ÿç¥'].includes(yearGodObj.c) &&
[5, 6].includes(yearBranchIdx);const canBeJonggeok = str.extreme && !hasSikSangWithRoot;const elCount = {wood:0, fire:0, earth:0, metal:0, water:0};[SAJU.year, SAJU.month, SAJU.day, SAJU.hour].forEach(p => {if(p && p.s) elCount[p.s.e]++;if(p && p.b) elCount[p.b.e]++;});const yearGod = getTenGod(SAJU.year.s, dm);const monthGod = getTenGod(SAJU.month.s, dm);const hourGod = SAJU.hour ? getTenGod(SAJU.hour.s, dm) : null;const getBranchYang = (branch) => {const idx = BRANCH.findIndex(b => b.c === branch.c);return idx % 2 === 0;};const yearBranchYang = getBranchYang(SAJU.year.b) ? 'é™½' : 'é™°';const monthBranchYang = getBranchYang(SAJU.month.b) ? 'é™½' : 'é™°';const dayBranchYang = getBranchYang(SAJU.day.b) ? 'é™½' : 'é™°';const hourBranchYang = SAJU.hour ? (getBranchYang(SAJU.hour.b) ? 'é™½' : 'é™°') : '';const yearBranchGod = getTenGod({e: SAJU.year.b.e, y: getBranchYang(SAJU.year.b)}, dm);const monthBranchGod = getTenGod({e: SAJU.month.b.e, y: getBranchYang(SAJU.month.b)}, dm);const dayBranchGod = getTenGod({e: SAJU.day.b.e, y: getBranchYang(SAJU.day.b)}, dm);const hourBranchGod = SAJU.hour ? getTenGod({e: SAJU.hour.b.e, y: getBranchYang(SAJU.hour.b)}, dm) : null;const dmEl = dm.e;const elOrder = ['wood', 'fire', 'earth', 'metal', 'water'];const dmIdx = elOrder.indexOf(dmEl);const tenGodMap = {peer: elOrder[dmIdx],
output: elOrder[(dmIdx + 1) % 5],
wealth: elOrder[(dmIdx + 2) % 5],
officer: elOrder[(dmIdx + 3) % 5],
seal: elOrder[(dmIdx + 4) % 5]};const mbi = BRANCH.findIndex(br => br.c === SAJU.month.b.c);const seasonMap = {0:'å†¬',1:'åœŸæ—º',2:'æ˜¥',3:'æ˜¥',4:'åœŸæ—º',5:'å¤',6:'å¤',7:'åœŸæ—º',8:'ç§‹',9:'ç§‹',10:'åœŸæ—º',11:'å†¬'};const elSeasonMapKr = {æ˜¥:'wood', å¤:'fire', ç§‹:'metal', å†¬:'water', åœŸæ—º:'earth'};const monthSeason = seasonMap[mbi];const seasonEl = elSeasonMapKr[monthSeason];const deukRyung = (dmEl === seasonEl) || (tenGodMap.seal === seasonEl);const yearStemIdx = STEM.indexOf(SAJU.year.s);const yearIsYang = yearStemIdx % 2 === 0;const luckDirection = (yearIsYang && GENDER === 'm') || (!yearIsYang && GENDER === 'f') ? 'é †è¡Œ' : 'é€†è¡Œ';const yearState = getTwelveState(dm, SAJU.year.b);const monthState = getTwelveState(dm, SAJU.month.b);const dayState = getTwelveState(dm, SAJU.day.b);const hourState = SAJU.hour ? getTwelveState(dm, SAJU.hour.b) : null;let jjText = '';try {const jjAnalysis = analyzeJijanggan(SAJU);if (jjAnalysis && jjAnalysis.pillars) {jjText = `â€¢ å¹´æ”¯ ${SAJU.year.b.c}: ${jjAnalysis.pillars[0]?.hidden?.map(h => h.stem.c + '(' + h.stem.k + ',' + h.type + ',' + h.god.k + ')').join(', ') || '-'}
â€¢ æœˆæ”¯ ${SAJU.month.b.c}: ${jjAnalysis.pillars[1]?.hidden?.map(h => h.stem.c + '(' + h.stem.k + ',' + h.type + ',' + h.god.k + ')').join(', ') || '-'}
â€¢ æ—¥æ”¯ ${SAJU.day.b.c}: ${jjAnalysis.pillars[2]?.hidden?.map(h => h.stem.c + '(' + h.stem.k + ',' + h.type + ',' + h.god.k + ')').join(', ') || '-'}`;if (SAJU.hour && jjAnalysis.pillars[3]) {jjText += `\nâ€¢ æ™‚æ”¯ ${SAJU.hour.b.c}: ${jjAnalysis.pillars[3]?.hidden?.map(h => h.stem.c + '(' + h.stem.k + ',' + h.type + ',' + h.god.k + ')').join(', ') || '-'}`;}}} catch(e) { jjText = 'â€¢ æ”¯è”µå¹²åˆ†æãƒ‡ãƒ¼ã‚¿ãªã—'; }
let ttText = '';try {const ttAnalysis = analyzeTonggeunTougan(SAJU);const tgText = ttAnalysis?.tonggeun?.length ?
ttAnalysis.tonggeun.map(t => t.stem + 'ãŒ ' + (t.roots?.map(r => r.pillar + r.branch).join(',') || '')).join('; ') : 'é€šæ ¹ãªã—';const tuText = ttAnalysis?.tougan?.length ?
ttAnalysis.tougan.map(t => t.stem + '(' + t.god + ')').join(', ') : 'é€å¹²ãªã—';ttText = `â€¢ é€šæ ¹: ${tgText}\nâ€¢ é€å¹²: ${tuText}`;} catch(e) { ttText = 'â€¢ é€šæ ¹/é€å¹²åˆ†æãƒ‡ãƒ¼ã‚¿ãªã—'; }
let ycText = '';try {const yukcheon = analyzeYukcheon(SAJU, GENDER);if (yukcheon) {ycText = `â€¢ é…å¶è€…æ˜Ÿ(${yukcheon.spouse?.god || '-'}): ${yukcheon.spouse?.count > 0 ? yukcheon.spouse.count + 'å€‹ã‚ã‚Š' : 'ãªã—'} - ${yukcheon.spouse?.analysis || '-'}
â€¢ å­å¥³æ˜Ÿ(${yukcheon.children?.gods?.join('/') || '-'}): ${yukcheon.children?.count > 0 ? 'ã‚ã‚Š' : 'ãªã—'} - ${yukcheon.children?.analysis || '-'}
â€¢ çˆ¶è¦ª(åè²¡): ${yukcheon.parents?.father?.analysis || '-'}
â€¢ æ¯è¦ª(æ­£å°): ${yukcheon.parents?.mother?.analysis || '-'}`;}} catch(e) { ycText = 'â€¢ å…­è¦ªåˆ†æãƒ‡ãƒ¼ã‚¿ãªã—'; }
let gwText = '';try {const gungwi = analyzeGungwi(SAJU, BIRTH_YEAR);if (gungwi && Array.isArray(gungwi)) {gwText = gungwi.map(g => 'â€¢ ' + g.name + '(' + g.ageRange + '): ' + (g.analysis?.substring(0, 50) || '') + '...' + (g.isCurrent ? ' â—€ç¾åœ¨' : '')).join('\n');}} catch(e) { gwText = 'â€¢ å®®ä½åˆ†æãƒ‡ãƒ¼ã‚¿ãªã—'; }
let next10Text = '';try {const next10 = getNext10Years(SAJU, BIRTH_YEAR, GENDER, GODS);if (next10) {next10Text = `â€¢ æœ€é«˜ã® å®³: ${next10.bestYear?.year || '-'}å¹´ï¼ˆ${next10.bestYear?.age || '-'}æ­³ï¼‰
â€¢ æ³¨æ„ã™ã¹ãå¹´: ${next10.worstYear?.year || '-'}å¹´ï¼ˆ${next10.worstYear?.age || '-'}æ­³ï¼‰`;}} catch(e) { next10Text = 'â€¢ 10å¹´é‹å‹¢ãƒ‡ãƒ¼ã‚¿ ãªã—'; }
let tanghwaWarningText = '';try {const currentYear = new Date().getFullYear();const yp = calcYearPillar(currentYear, 6, 1);const sbi = BRANCH.indexOf(yp.b);const allBi = [BRANCH.indexOf(SAJU.year.b), BRANCH.indexOf(SAJU.month.b), BRANCH.indexOf(SAJU.day.b)];if (SAJU.hour) allBi.push(BRANCH.indexOf(SAJU.hour.b));const hasChu = allBi.includes(1);const hasO = allBi.includes(6);const hasIn = allBi.includes(2);const hasSa = allBi.includes(5);if (hasChu && hasO && sbi === 6) {tanghwaWarningText = `\nâš ï¸ ${currentYear}å¹´åŒæ¹¯ç« è­¦å‘Š! åŸå±€ä¸‘åˆæ¹¯ç« + æ­³é‹ åˆ é‡ç•³ã€‚æ„Ÿæƒ…çˆ†ç™ºã€ç«ç—…ã«ç‰¹åˆ¥æ³¨æ„ï¼`;}
else if (hasChu && !hasO && sbi === 6) {tanghwaWarningText = `\nğŸ”¥ ${currentYear}å¹´ æ¹¯ç«æ®º ç™ºå‹•ï¼åŸå±€ã® ä¸‘ã¨æ­³é‹ åˆãŒå‡ºä¼šã„ä¸‘åˆæ¹¯ç« åˆ‘æ€§ã€‚ç«ç—…ã€æ„Ÿæƒ…çˆ†ç™ºã€ç²¾ç¥çš„ã‚¹ãƒˆãƒ¬ã‚¹ã«æ³¨æ„ï¼ç‰¹ã«æ—¥æ”¯ãŒä¸‘(ä¸‘)ãªã‚‰ é…å¶è€…å®®ã«ç›´æ¥å½±éŸ¿ã€‚`;}
else if (!hasChu && hasO && sbi === 1) {tanghwaWarningText = `\nğŸ”¥ ${currentYear}å¹´ æ¹¯ç«æ®º ç™ºå‹•ï¼åŸå±€ã® åˆã¨æ­³é‹ã®ä¸‘ãŒå‡ºä¼šã„æ¹¯ç«ã®åˆ‘ãŒæˆç«‹ã€‚ç«æ°—å–æ‰± æ³¨æ„, ç†±ç—… æ³¨æ„!`;}
if (hasIn && hasSa && sbi === 5) {tanghwaWarningText = `\nâš ï¸ ${currentYear}å¹´åŒæ¹¯ç« è­¦å‘Š! åŸå±€å¯…å·³æ¹¯ç« + æ­³é‹ å·³ é‡ç•³ã€‚ç«å‚·ã€ç†±ç—…ã€è–¬ç‰©å‰¯ä½œç”¨ã«æ³¨æ„ï¼`;}
else if (hasIn && !hasSa && sbi === 5) {tanghwaWarningText += `\nğŸ”¥ ${currentYear}å¹´ æ¹¯ç«æ®º ç™ºå‹•ï¼åŸå±€ã® å¯…ã¨æ­³é‹ã®å·³ãŒå‡ºä¼šã„å¯…å·³æ¹¯ç«ã®åˆ‘ãŒæˆç«‹ã€‚ç«å‚·ã€ç†±ç—… æ³¨æ„!`;}
else if (!hasIn && hasSa && sbi === 2) {tanghwaWarningText += `\nğŸ”¥ ${currentYear}å¹´ æ¹¯ç«æ®º ç™ºå‹•ï¼åŸå±€ã® å·³ã¨æ­³é‹ã®å¯…ãŒå‡ºä¼šã„æ¹¯ç«ã®åˆ‘ãŒæˆç«‹ã€‚ç«æ°—å–æ‰±æ³¨æ„!`;}
if ((hasChu || hasO) && GODS.yong === 'fire' && yp.s.c === 'ä¸™' && yp.b.c === 'åˆ') {const gisinCount = GODS.elCount?.[GODS.gi] || 0;const yongsinCount = GODS.elCount?.[GODS.yong] || 0;if (gisinCount >= 3 && yongsinCount <= 1) {tanghwaWarningText += `\nâš ï¸ ${currentYear}å¹´è¡°ç¥å†²æ—º è­¦å‘Š! ç”¨ç¥(ç«)ãŒ å…¥ã£ã¦ãã‚‹ãŒå¿Œç¥(${GODS.gi === 'water' ? 'æ°´' : GODS.gi})ãŒ ${gisinCount}å€‹ã§åœ§å€’çš„. ç”¨ç¥ãŒ æ¶ˆãˆã‚‹ å±é™º! æ‹¡å¼µ/æŠ•è³‡ç¦æ­¢ã€ç¾é‡‘æ­»å®ˆã® å®³.`;} else {tanghwaWarningText += `\nğŸ”¥ ${currentYear}å¹´ ç”¨ç¥(Fire) æµå…¥ï¼ãƒãƒ£ãƒ³ã‚¹ã® å®³ã‚„æ„Ÿæƒ…ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« å¿…é ˆ.`;}}
const yearLuckResult = calcYearLuck(currentYear, SAJU, GODS);if (yearLuckResult.warnings && yearLuckResult.warnings.length > 0) {tanghwaWarningText += '\n' + yearLuckResult.warnings.join('\n');}
const yearRatingChk = determineYearRating(yearLuckResult, SAJU, GODS);if (yearRatingChk.warning && yearRatingChk.warning.active) {tanghwaWarningText += '\n' + yearRatingChk.warning.desc;}
try {const crossAnalysis = analyzeCrossLuck(curLuck, yearLuckResult, SAJU, GODS);if (crossAnalysis && crossAnalysis.analysis && crossAnalysis.analysis.length > 0) {const dangerAnalysis = crossAnalysis.analysis.filter(a => a.type === 'danger' || a.type === 'bad' || a.type === 'warning');if (dangerAnalysis.length > 0) {tanghwaWarningText += '\n\nã€å¤§é‹-æ­³é‹ äº¤å·® åˆ†æ è­¦å‘Šã€‘\n' + dangerAnalysis.map(a => a.text).join('\n');}}} catch(e) { }} catch(e) { }
let monthText = '';try {const monthlyLuck = getYearlyMonthLuck(currentYear, SAJU, GODS);if (monthlyLuck) {monthText = `â€¢ è‰¯ã„æœˆ: ${monthlyLuck.best?.month || '-'}æœˆï¼ˆ${monthlyLuck.best?.god?.k || '-'})
â€¢ æ³¨æ„ã™ã¹ãæœˆ: ${monthlyLuck.worst?.month || '-'}æœˆï¼ˆ${monthlyLuck.worst?.god?.k || '-'})`;}} catch(e) { monthText = 'â€¢ æœˆåˆ¥é‹å‹¢ãƒ‡ãƒ¼ã‚¿ ãªã—'; }
let napeumText = '';try {const dayNapeum = calcNapeum(SAJU.day.s, SAJU.day.b);const yearNapeum = calcNapeum(SAJU.year.s, SAJU.year.b);napeumText = `â€¢ æ—¥æŸ± ç´éŸ³: ${SAJU.day.s.c}${SAJU.day.b.c} â†’ ${dayNapeum.name} (${dayNapeum.elementK}) - ${dayNapeum.desc}
â€¢ å¹´æŸ±ç´éŸ³: ${SAJU.year.s.c}${SAJU.year.b.c} â†’ ${yearNapeum.name} (${yearNapeum.elementK})`;} catch(e) { napeumText = 'â€¢ ç´éŸ³ ãƒ‡ãƒ¼ã‚¿ ãªã—'; }
let myunggungText = '';try {if (SAJU.hour) {const myunggung = calcMyunggung(SAJU.month.b, SAJU.hour.b);myunggungText = `â€¢ å‘½å®®: ${myunggung.name} (${myunggung.branch.c})
â€¢ æ€§å‘: ${myunggung.trait}
â€¢ é©åˆåˆ†é‡: ${myunggung.career}`;} else {myunggungText = 'â€¢ å‘½å®®: æ™‚æŸ±ä¸æ˜ã§è¨ˆç®—ä¸å¯';}} catch(e) { myunggungText = 'â€¢ å‘½å®®ãƒ‡ãƒ¼ã‚¿ãªã—'; }
let taewonText = '';try {const taewon = calcTaewon(SAJU.year.s, SAJU.month.s, SAJU.month.b);taewonText = `â€¢ èƒå…ƒ: ${taewon.pillar} (${taewon.stem.k}${taewon.branch.k})
â€¢ èƒå…ƒç´éŸ³: ${taewon.napeum.name} (${taewon.napeum.elementK})`;} catch(e) { taewonText = 'â€¢ èƒå…ƒãƒ‡ãƒ¼ã‚¿ãªã—'; }
let banghapText = '';try {const banghap = analyzeDirectionalHarmony(SAJU);banghapText = banghap.length ? banghap.map(b =>
`â€¢ ${b.name} (${b.branches}): ${b.dir} ${b.type === 'complete' ? 'å®Œæˆï¼' : 'æœªå®Œæˆ'}`
).join('\n') : 'â€¢ æ–¹åˆãªã—';} catch(e) { banghapText = 'â€¢ æ–¹åˆãƒ‡ãƒ¼ã‚¿ãªã—'; }
let amhapText = '';try {const amhap = analyzeHiddenHarmony(SAJU);amhapText = amhap.length ? amhap.map(a =>
`â€¢ ${a.name}: ${a.positions} - ${a.desc}`
).join('\n') : 'â€¢ æš—åˆãªã—';} catch(e) { amhapText = 'â€¢ æš—åˆãƒ‡ãƒ¼ã‚¿ãªã—'; }
let samhapText = '';let samhapWarning = '';try {const advInt = analyzeAdvancedInteractions(SAJU);if (advInt && advInt.samhapGuk && advInt.samhapGuk.length) {const dmEl = dm.e;const dmIdx = EL_ORDER.indexOf(dmEl);const sealEl = EL_ORDER[(dmIdx + 4) % 5];const wealthEl = EL_ORDER[(dmIdx + 2) % 5];const officerEl = EL_ORDER[(dmIdx + 3) % 5];samhapText = advInt.samhapGuk.map(s => {let meaning = '';const resultEl = s.result;if (resultEl === sealEl) {meaning = ' â†’ å°æ˜Ÿ(æ–‡æ›¸/å­¦æ¥­/ä¿è­·è€…)ã«å¤‰åŒ–ã€‚é‡‘ãŒè³‡æ ¼è¨¼/å­¦ä½ã«ï¼';} else if (resultEl === wealthEl) {meaning = ' â†’ è²¡æ˜Ÿ(ãŠé‡‘/ç•°æ€§)ã§å¤‰åŒ–ã€‚å®Ÿåˆ©ã‚’ç¢ºä¿ã™ã‚‹æ§‹é€ ï¼';} else if (resultEl === officerEl) {meaning = ' â†’ å®˜æ®ºï¼ˆè·å ´/ã‚¹ãƒˆãƒ¬ã‚¹ï¼‰ã«å¤‰åŒ–ã€‚è²¬ä»»ã¨åœ§è¿«ã«æ³¨æ„ï¼';} else if (resultEl === dmEl) {meaning = ' â†’ æ¯”åŠ«(å…„å¼Ÿ/å‹äºº)ã§å¤‰åŒ–ã€‚åŒåƒšã®åŠ©ã‘ï¼';}
return `â€¢ ${s.name}: ${s.complete ? 'å®Œå…¨æˆç«‹ï¼' : 'åŠåˆ'} - ${s.desc}${meaning}`;}).join('\n');const completeSamhap = advInt.samhapGuk.filter(s => s.complete);if (completeSamhap.length > 0) {samhapWarning = `\n\nâš ï¸ [é‡è¦: ä¸‰åˆå±€å®Œå…¨æˆç«‹]\n${completeSamhap.map(s =>
`${s.name}ãŒå®Œæˆã—åœ°æ”¯ã®${s.result} æ°—ãŒéå¸¸ã«å¼·ã¾ã‚Šã¾ã—ãŸã€‚æ ¼å±€ã¨èº«å¼·/èº«å¼±åˆ¤æ–­æ™‚ã«ã“ã®äº”è¡Œå¤‰åŒ–ã‚’å¿…ãšè€ƒæ…®ã™ã¹ãã§ã™.`
).join('\n')}`;}} else {samhapText = 'â€¢ ä¸‰åˆå±€ãªã—';}} catch(e) { samhapText = 'â€¢ ä¸‰åˆå±€ãƒ‡ãƒ¼ã‚¿ãªã—'; }
const hansinEl = elOrder[(elOrder.indexOf(GODS.gi) + 4) % 5];const HOUR_LABELS = [
'å­ã®åˆ»(å­æ™‚, 23:30ï½01:29)',
'ä¸‘ã®åˆ»(ä¸‘æ™‚, 01:30ï½03:29)',
'å¯…ã®åˆ»(å¯…æ™‚, 03:30ï½05:29)',
'å¯ã®åˆ»(å¯æ™‚, 05:30ï½07:29)',
'è¾°ã®åˆ»(è¾°æ™‚, 07:30ï½09:29)',
'å·³ã®åˆ»(å·³æ™‚, 09:30ï½11:29)',
'åˆã®åˆ»(åˆæ™‚, 11:30ï½13:29)',
'æœªã®åˆ»(æœªæ™‚, 13:30ï½15:29)',
'ç”³ã®åˆ»(ç”³æ™‚, 15:30ï½17:29)',
'é…‰ã®åˆ»(é…‰æ™‚, 17:30ï½19:29)',
'æˆŒã®åˆ»(æˆŒæ™‚, 19:30ï½21:29)',
'äº¥ã®åˆ»(äº¥æ™‚, 21:30ï½23:29)'
];const inputHourLabel = (BIRTH_HOUR !== null && BIRTH_HOUR >= 0 && BIRTH_HOUR < 12) ? HOUR_LABELS[BIRTH_HOUR] : 'æ™‚é–“ä¸æ˜';const actualBranchChar = SAJU.hour?.b?.c || '';const inputBranchChars = ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'];const inputBranchChar = (BIRTH_HOUR !== null && BIRTH_HOUR >= 0) ? inputBranchChars[BIRTH_HOUR] : '';const hourLabel = (actualBranchChar && inputBranchChar && inputBranchChar !== actualBranchChar) ? `${inputHourLabel} â†’ è£œæ­£å¾Œ ${actualBranchChar}æ™‚` : inputHourLabel;let birthDateText;if (CALENDAR === 'lunar' && ORIGINAL_LUNAR_YEAR) {birthDateText = `${BIRTH_YEAR}å¹´${BIRTH_MONTH}æœˆ${BIRTH_DAY}æ—¥ ${hourLabel} (é™½æš¦) â† é™°æš¦${ORIGINAL_LUNAR_MONTH}æœˆ${ORIGINAL_LUNAR_DAY}æ—¥å¤‰æ›`;} else {birthDateText = `${BIRTH_YEAR}å¹´${BIRTH_MONTH}æœˆ${BIRTH_DAY}æ—¥ ${hourLabel} (é™½æš¦)`;}
const correctionInfo = [];if (TIME_CORRECTION_SETTINGS.useSummerTime && isInSummerTime(BIRTH_YEAR, BIRTH_MONTH, BIRTH_DAY, 12, 0)) {correctionInfo.push('ã‚µãƒãƒ¼ã‚¿ã‚¤ãƒ -1æ™‚å¹²é©ç”¨æ¸ˆã¿');}
if (TIME_CORRECTION_SETTINGS.useLongitude) {const corr = getLongitudeCorrection();const sign = corr >= 0 ? '+' : '';correctionInfo.push('çµŒåº¦è£œæ­£ ' + sign + corr + 'åˆ†é©ç”¨ (' + SELECTED_CITY + ')');}
if (TIME_CORRECTION_SETTINGS.useYajasi) {correctionInfo.push('å¤œå­æ™‚æ–¹å¼');} else {correctionInfo.push('æ—©å­æ™‚æ–¹å¼');}
const correctionText = correctionInfo.length > 0 ? `\nâ€¢ æ™‚é–“è£œæ­£: ${correctionInfo.join(', ')}` : '';let text = `===== å››æŸ±å…«å­— åˆ†æ çµæœ =====
ã€åŸºæœ¬æƒ…å ±ã€‘
â€¢ ç”Ÿå¹´æœˆæ—¥æ™‚: ${birthDateText}
â€¢ æ€§åˆ¥/å¹´é½¢: ${GENDER === 'm' ? 'ç”·æ€§' : 'å¥³æ€§'}, æº€${manAge}æ­³${correctionText}
â€¢ æ—¥å¹²: ${dm.k}${ELEMENT[dm.e].k}(${dm.c}${ELEMENT[dm.e].c})
ã€å››æŸ±åŸå±€ (å¹´/æœˆ/æ—¥/æ™‚)ã€‘
â€¢ å¤©å¹²: ${SAJU.year.s.c}(${SAJU.year.s.k}) ${SAJU.month.s.c}(${SAJU.month.s.k}) ${SAJU.day.s.c}(${SAJU.day.s.k}) ${SAJU.hour ? SAJU.hour.s.c+'('+SAJU.hour.s.k+')' : 'ä¸æ˜'}
â€¢ åœ°æ”¯: ${SAJU.year.b.c}(${SAJU.year.b.k}) ${SAJU.month.b.c}(${SAJU.month.b.k}) ${SAJU.day.b.c}(${SAJU.day.b.k}) ${SAJU.hour ? SAJU.hour.b.c+'('+SAJU.hour.b.k+')' : 'ä¸æ˜'}
ã€âš¡ åç¥ãƒãƒƒãƒ”ãƒ³ã‚°è¡¨ (æ—¥å¹² ${dm.c} ${ELEMENT[dm.e].k} åŸºæº–) - AIå¿…é ˆå‚ç…§ã€‘
â€¢ æ¯”åŠ«(ã²ã”ã†): ${ELEMENT[tenGodMap.peer].k} - æ—¥å¹²ã¨åŒã˜äº”è¡Œ
â€¢ é£Ÿå‚·(ã—ã‚‡ãã—ã‚‡ã†): ${ELEMENT[tenGodMap.output].k} - æ—¥å¹²ãŒç”Ÿã˜ã‚‹äº”è¡Œ
â€¢ è²¡æ˜Ÿ(ã–ã„ã›ã„): ${ELEMENT[tenGodMap.wealth].k} - æ—¥å¹²ãŒå‰‹ã™ã‚‹äº”è¡Œ
â€¢ å®˜æ®º(ã‹ã‚“ã•ã¤): ${ELEMENT[tenGodMap.officer].k} - æ—¥å¹²ã‚’å‰‹ã™ã‚‹äº”è¡Œ
â€¢ å°æ˜Ÿ(ã„ã‚“ã›ã„): ${ELEMENT[tenGodMap.seal].k} - æ—¥å¹²ã‚’ç”Ÿã˜ã‚‹äº”è¡Œ
ã€åç¥ - å¤©å¹²ã€‘
â€¢ å¹´å¹² ${SAJU.year.s.c}: ${yearGod.k} - ${yearGod.d}
â€¢ æœˆå¹² ${SAJU.month.s.c}: ${monthGod.k} - ${monthGod.d}
â€¢ æ—¥å¹² ${SAJU.day.s.c}: æœ¬äºº (æ—¥æŸ±)
${hourGod ? 'â€¢ æ™‚å¹² ' + SAJU.hour.s.c + ': ' + hourGod.k + ' - ' + hourGod.d : 'â€¢ æ™‚å¹²: ä¸æ˜'}
ã€åç¥ - åœ°æ”¯ âš ï¸ é‡è¦ã€‘
â€¢ å¹´æ”¯ ${SAJU.year.b.c} (${ELEMENT[SAJU.year.b.e].k}, ${yearBranchYang}): ${yearBranchGod.k}
â€¢ æœˆæ”¯ ${SAJU.month.b.c} (${ELEMENT[SAJU.month.b.e].k}, ${monthBranchYang}): ${monthBranchGod.k} â† æœˆä»¤(ã’ã¤ã‚Œã„)
â€¢ æ—¥æ”¯ ${SAJU.day.b.c} (${ELEMENT[SAJU.day.b.e].k}, ${dayBranchYang}): ${dayBranchGod.k} â† é…å¶è€…å®®
${SAJU.hour ? 'â€¢ æ™‚æ”¯ ' + SAJU.hour.b.c + ' (' + ELEMENT[SAJU.hour.b.e].k + ', ' + hourBranchYang + '): ' + hourBranchGod.k + ' â† å­å¥³å®®' : 'â€¢ æ™‚æ”¯: ä¸æ˜'}
ã€æœˆä»¤ å¾—ä»¤/å¤±ä»¤ã€‘
â€¢ å‡ºç”Ÿæœˆ: ${SAJU.month.b.k} (${monthSeason})
â€¢ å­£ç¯€äº”è¡Œ: ${ELEMENT[seasonEl].k}
â€¢ æ—¥å¹² ${dm.c} (${ELEMENT[dm.e].k}): ${deukRyung ? 'âœ… å¾—ä»¤(ã¨ãã‚Œã„) - æ—ºå­£ã§åŠ›ãŒã‚ã‚‹' : 'âŒ å¤±ä»¤(ã—ã¤ã‚Œã„) - å­£ç¯€ã‚’å¤±ã„åŠ©ã‘ãŒå¿…è¦'}
ã€åäºŒé‹æ˜Ÿ (æ—¥å¹²åŸºæº–)ã€‘
â€¢ å¹´æ”¯ ${SAJU.year.b.c}: ${yearState.k} (ã‚¨ãƒãƒ«ã‚®ãƒ¼ ${yearState.l}/12)
â€¢ æœˆæ”¯ ${SAJU.month.b.c}: ${monthState.k} (ã‚¨ãƒãƒ«ã‚®ãƒ¼ ${monthState.l}/12)
â€¢ æ—¥æ”¯ ${SAJU.day.b.c}: ${dayState.k} (ã‚¨ãƒãƒ«ã‚®ãƒ¼ ${dayState.l}/12)
${hourState ? 'â€¢ æ™‚æ”¯ ' + SAJU.hour.b.c + ': ' + hourState.k + ' (ã‚¨ãƒãƒ«ã‚®ãƒ¼ ' + hourState.l + '/12)' : 'â€¢ æ™‚æ”¯: ä¸æ˜'}
ã€äº”è¡Œåˆ†å¸ƒã€‘
â€¢ æœ¨(ã‚‚ã): ${elCount.wood}å€‹
â€¢ ç«(ã‹): ${elCount.fire}å€‹
â€¢ åœŸ(ã©): ${elCount.earth}å€‹
â€¢ é‡‘(ãã‚“): ${elCount.metal}å€‹
â€¢ æ°´(ã™ã„): ${elCount.water}å€‹
â€¢ ä¸è¶³äº”è¡Œ: ${(() => {const missing = Object.entries(elCount).filter(e => e[1] === 0).map(e => e[0]);if (missing.length === 0) return 'ãªã—';const jijangInfo = {};const pillarNames = ['å¹´', 'æœˆ', 'æ—¥', 'æ™‚'];[SAJU.year?.b, SAJU.month?.b, SAJU.day?.b, SAJU.hour?.b].forEach((b, idx) => {if (!b) return;const bi = BRANCH.indexOf(b);(JIJANGGAN[bi] || []).forEach(j => {const el = STEM[j.stem].e;if (!jijangInfo[el]) jijangInfo[el] = [];jijangInfo[el].push(pillarNames[idx] + b.c + ':' + STEM[j.stem].c);});});const result = [];missing.forEach(el => {if (jijangInfo[el] && jijangInfo[el].length > 0) {result.push(ELEMENT[el].k + '(â€»' + jijangInfo[el].join(', ') + ')');} else {result.push(ELEMENT[el].k + '(å®Œå…¨ä¸åœ¨)');}});return result.join(', ');})()}
${(() => {const missing = Object.entries(elCount).filter(e => e[1] === 0).map(e => e[0]);if (missing.length === 0) return '';const healthWarnings = {wood: 'âš ï¸ æœ¨(æœ¨) ä¸åœ¨ å¥åº·è­¦å‘Š: è‚è‡“/èƒ†åš¢/ç›®/ç¥çµŒç³»ãŒè„†å¼±ã€‚æ€’ã‚Šã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãŒå›°é›£ã€å„ªæŸ”ä¸æ–­ã«æ³¨æ„ã€‚ç·‘ã®é‡èœã€é…¸å‘³ã®é£Ÿã¹ç‰©ã€æ± æ–¹ä½ã‚’æ¨å¥¨.',
fire: 'âš ï¸ ç«(ç«)ä¸åœ¨ å¥åº·è­¦å‘Š: å¿ƒè‡“/å°è…¸/è¡€åœ§/ç›®ãŒè„†å¼±ã€‚æ†‚é¬±æ„Ÿã€æ„æ¬²ä½ä¸‹ã€å†·ãˆæ€§ã«æ³¨æ„ã€‚èµ¤è‰²ã€è‹¦å‘³ã®é£Ÿã¹ç‰©ã€å— æ–¹ä½ã€æ—¥å…‰æµ´ã‚’æ¨å¥¨.',
earth: 'âš ï¸ åœŸ(åœŸ)ä¸åœ¨ å¥åº·è­¦å‘Š: èƒƒè…¸/è„¾è‡“/æ¶ˆåŒ–å™¨ãŒè„†å¼±ã€‚å¿ƒé…éå¤šã€ä¿¡é ¼ä¸è¶³ã«æ³¨æ„ã€‚é»„åœŸè‰²ã€ç”˜å‘³ã®é£Ÿã¹ç‰©ã€ä¸­å¤®/å®‰å®šçš„ãªç’°å¢ƒã‚’æ¨å¥¨ã€‚',
metal: 'âš ï¸ é‡‘(é‡‘)ä¸åœ¨ å¥åº·è­¦å‘Š: è‚º/å¤§è…¸/çš®è†š/å‘¼å¸å™¨ãŒè„†å¼±ã€‚æ±ºæ–­åŠ›ä¸è¶³ã€æ‚²ã—ã¿ã«æ³¨æ„ã€‚ç™½è‰²ã€è¾›å‘³ã®é£Ÿã¹ç‰©ã€è¥¿ æ–¹ä½ã‚’æ¨å¥¨.',
water: 'âš ï¸ æ°´(æ°´)ä¸åœ¨ å¥åº·è­¦å‘Š: è…è‡“/è†€èƒ±/ç”Ÿæ®–å™¨/éª¨ãŒè„†å¼±ã€‚æã‚Œéå¤šã€æ„å¿—åŠ›ä¸è¶³ã«æ³¨æ„ã€‚é»’è‰²ã€å¡©å‘³ã®é£Ÿã¹ç‰©ã€åŒ— æ–¹ä½ã‚’æ¨å¥¨.'};return '\\n' + missing.map(el => healthWarnings[el]).join('\\n');})()}
ã€èº«å¼·/èº«å¼±ã€‘
â€¢ æ—¥å¹²å¼·åº¦: ${str.pct}% (${str.type === 'strong' ? 'èº«å¼·' : str.type === 'weak' ? 'èº«å¼±' : 'ä¸­å’Œ'})
${canBeJonggeok ? 'â€¢ ç‰¹è¨˜äº‹é …: ' + str.extreme + ' å››æŸ± (å¾“æ ¼ã®å¯èƒ½æ€§)' : (str.extreme ? 'â€¢ ç‰¹è¨˜äº‹é …: ' + str.extreme + ' å››æŸ±' : '')}
ã€ç”¨ç¥/å–œç¥/å¿Œç¥ã€‘ â­ æ ¸å¿ƒ (å¿…ãš è§£é‡ˆã«åæ˜ ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨ç¥(ã‚ˆã†ã˜ã‚“): ${ELEMENT[GODS.yong].k} - æœ€ã‚‚å¿…è¦ãªäº”è¡Œ â”‚
â”‚ å–œç¥(ãã˜ã‚“): ${ELEMENT[GODS.hee].k} - ç”¨ç¥ã‚’åŠ©ã‘ã‚‹äº”è¡Œ â”‚
â”‚ å¿Œç¥(ãã˜ã‚“): ${ELEMENT[GODS.gi].k} - é¿ã‘ã‚‹ã¹ãäº”è¡Œ â”‚
â”‚ é–‘ç¥(ã‹ã‚“ã˜ã‚“): ${ELEMENT[hansinEl].k} - å¿Œç¥ã‚’åŠ©ã‘ã‚‹äº”è¡Œ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
${GODS.yongReason ? 'â€¢ åˆ¤æ–­æ ¹æ‹ : ' + GODS.yongReason : ''}
${GODS.yongWarning ? 'â€¢ ' + GODS.yongWarning : ''}
${GODS.sudaHwasik ? 'â€¢ ' + GODS.sudaHwasik : ''}
${GODS.hwadaGeumso ? 'â€¢ ' + GODS.hwadaGeumso : ''}
${GODS.hwadaSuBin ? 'â€¢ âš ï¸ ' + GODS.hwadaSuBin : ''}
${GODS.geumdaMokjeol ? 'â€¢ âš ï¸ ' + GODS.geumdaMokjeol : ''}
${GODS.todaGeummae ? 'â€¢ âš ï¸ ' + GODS.todaGeummae : ''}
${GODS.mokdaHwasik ? 'â€¢ âš ï¸ ' + GODS.mokdaHwasik : ''}
${GODS.gunbiJaengjae ? 'â€¢ âš ï¸ ' + GODS.gunbiJaengjae : ''}
${GODS.jaedaSinyak ? 'â€¢ ğŸ’¸ ' + GODS.jaedaSinyak : ''}
${GODS.wangjiChung ? 'â€¢ âš ï¸ ' + GODS.wangjiChung : ''}
${GODS.wangjiJungcheop ? 'â€¢ ğŸš¨ ' + GODS.wangjiJungcheop : ''}
${GODS.mugeunWarning ? 'â€¢ ğŸ’¨ ' + GODS.mugeunWarning : ''}
${GODS.pyeoninDosik ? 'â€¢ ğŸ½ï¸ ' + GODS.pyeoninDosik : ''}
${GODS.johu ? 'â€¢ èª¿å€™ç”¨ç¥: ' + (GODS.johuDesc || '') : ''}
${GODS.climate ? 'â€¢ å¯’æš–ç‡¥æ¹¿: ' + GODS.climate.type + ' - ' + GODS.climate.desc : ''}
ã€æ ¼å±€ã€‘
â€¢ ${format.n}
â€¢ ç‰¹å¾´: ${format.d}
â€¢ é©åˆåˆ†é‡: ${format.b}
${format.formatReason ? 'â€¢ åˆ¤å®šæ ¹æ‹ : ' + format.formatReason : ''}
ã€å…­åç”²å­ æ—¥æŸ±è«– - ${SAJU.day.s.c}${SAJU.day.b.c}æ—¥æŸ±ã€‘
â€¢ ${ilju.title}
â€¢ æ€§æ ¼: ${ilju.desc?.substring(0, 100) || ''}...
â€¢ é…å¶è€…é‹ï¼š ${ilju.spouse?.substring(0, 80) || ''}...
ã€æ”¯è”µå¹²åˆ†æã€‘
${jjText}
ã€ç´éŸ³äº”è¡Œã€‘
${napeumText}
ã€å‘½å®®ã€‘
${myunggungText}
ã€èƒå…ƒã€‘
${taewonText}
ã€é€šæ ¹/é€å¹²ã€‘
${ttText}
ã€å…­è¦ªåˆ†æã€‘
${ycText}
ã€å®®ä½åˆ†æ - äººç”Ÿæ™‚æœŸåˆ¥ã€‘
${gwText}
ã€åˆå†²åˆ‘ç ´å®³ã€‘
${interactions.length ? interactions.map(i => 'â€¢ ' + i.t + ': ' + i.c + ' - ' + i.m).join('\n') : 'â€¢ ç‰¹åˆ¥ãªåˆå†²ãªã—'}
ã€æ–¹åˆã€‘
${banghapText}
ã€æš—åˆã€‘
${amhapText}
ã€ä¸‰åˆå±€ã€‘
${samhapText}${samhapWarning}
ã€ç©ºäº¡ã€‘
â€¢ ${gongmang?.names?.join(', ') || ''}
${gongmang?.affected?.length ? 'â€¢ å½±éŸ¿: ' + gongmang.affected.join(', ') + 'ã«ç©ºäº¡' : 'â€¢ å››æŸ±å†…ç©ºäº¡ãªã—'}
ã€ç¥æ®ºã€‘
${sinsal.length ? sinsal.map(s => 'â€¢ ' + s.n + '(' + (s.t === 'good' ? 'å‰' : s.t === 'bad' ? 'å‡¶' : 'ä¸­') + '): ' + s.d).join('\n') : 'â€¢ ç‰¹åˆ¥ãªç¥æ®ºãªã—'}
ã€å¤§é‹ (10å¹´å˜ä½)ã€‘
â€¢ æ–¹å‘: ${luckDirection} (${yearIsYang ? 'é™½å¹´' : 'é™°å¹´'} ${GENDER === 'm' ? 'ç”·å‘½' : 'å¥³å‘½'})
${luck.slice(0,8).map(l => {const lStemGod = getTenGod(l.s, dm);const lBranchGod = getTenGod({e: l.b.e, y: getBranchYang(l.b)}, dm);return 'â€¢ ' + l.startAge + '-' + l.endAge + 'æ­³: ' + l.s.c + l.b.c + ' [' + lStemGod.k + '/' + lBranchGod.k + ']' + (l.isCur ? ' â—€ç¾åœ¨' : '');}).join('\n')}
ã€ç¾åœ¨ã®é‹å‹¢ã€‘
â€¢ ç¾åœ¨ã®å¤§é‹: ${curLuck ? (() => {const curStemGod = getTenGod(curLuck.s, dm);const curBranchGod = getTenGod({e: curLuck.b.e, y: getBranchYang(curLuck.b)}, dm);return curLuck.s.c + curLuck.b.c + ' [' + curStemGod.k + '/' + curBranchGod.k + '] (' + curLuck.startAge + '-' + curLuck.endAge + 'æ­³ï¼‰';})() : 'è¨ˆç®— ä¸­'}
â€¢ å¤§é‹è©•ä¾¡: ${curLuck ? (curLuck.rating === 'good' ? 'å‰é‹' : curLuck.rating === 'bad' ? 'å‡¶é‹' : 'å¹³é‹') : '-'}
â€¢ ${currentYear}å¹´ æ­³é‹: ${(() => {const yp = calcYearPillar(currentYear, 6, 1);const ypStemGod = getTenGod(yp.s, dm);const ypBranchGod = getTenGod({e: yp.b.e, y: getBranchYang(yp.b)}, dm);return yp.s.c + yp.b.c + ' [' + ypStemGod.k + '/' + ypBranchGod.k + '] (' + ELEMENT[yp.s.e].k + ELEMENT[yp.b.e].k + ')';})()}${tanghwaWarningText}
ã€ä»Šæ—¥ã®æ—¥è¾°ã€‘
${(() => {const today = new Date();const dp = calcDayPillar(today.getFullYear(), today.getMonth() + 1, today.getDate());const todayGod = getTenGod(dp.s, dm);const todayState = getTwelveState(dm, dp.b);const isYong = [dp.s.e, dp.b.e].includes(GODS.yong);const isHee = [dp.s.e, dp.b.e].includes(GODS.hee);const isGi = [dp.s.e, dp.b.e].includes(GODS.gi);const rating = isYong ? 'âœ… ç”¨ç¥ æ°— - ç©æ¥µçš„ã«å‹•ã„ã¦ãã ã•ã„ï¼' : isHee ? 'ğŸ˜Š å–œç¥æ°—é‹ - é †èª¿ãªä¸€æ—¥' : isGi ? 'âš ï¸ å¿Œç¥æ°—é‹ - ç„¡ç†ã—ãªã„ã§ãã ã•ã„' : 'ğŸ˜ å¹³ç© - æ—¥å¸¸ç¶­æŒ';return `â€¢ æ—¥ä»˜: ${today.getFullYear()}å¹´${today.getMonth()+1}æœˆ${today.getDate()}æ—¥
â€¢ æ—¥è¾°: ${dp.s.c}${dp.b.c} (${ELEMENT[dp.s.e].k}${ELEMENT[dp.b.e].k})
â€¢ æ—¥è¾°åç¥: ${todayGod.k} - ${todayGod.d}
â€¢ æ—¥è¾°åäºŒé‹æ˜Ÿ: ${todayState.k} (ã‚¨ãƒãƒ«ã‚®ãƒ¼ ${todayState.l}/12)
â€¢ ä»Šæ—¥ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼: ${rating}`;})()}
ã€ä»Šå¾Œ10å¹´é‹å‹¢ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€‘
${next10Text}
ã€${currentYear}å¹´ æœˆåˆ¥é‹å‹¢ã€‘
${monthText}
===== AIè§£é‡ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ =====
[ğŸ”¥ æ ¸å¿ƒ8å¤§æŒ‡é‡ (ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)]
â‘  ä¸‰åˆå±€å®Œæˆæ™‚ã€åœ°æ”¯äº”è¡Œå¤‰åŒ– â†’ æ ¼å±€/ç”¨ç¥ã«å¿…ãšåæ˜ 
â‘¡ é…å¶è€…æ˜ŸãŒæ”¯è”µå¹²ã«ã®ã¿ã‚ã‚Œã°ã€Œæš—è”µã€ã§è§£é‡ˆ
â‘¢ æ—ºæ”¯è¡çª(å­åˆå†²/å¯é…‰å†²)ã¯ã€Œæ¿€å‹•ã®å¹´ã€ã¨å¼·åŠ›ã«è­¦å‘Š
â‘£ èº«å¼±ã§æ¯”è‚©æ ¼ãªã‚‰ã€Œç¹Šç´°ã•/å¼·è¿«ã€ã€èº«å¼·ã§åå®˜æ ¼ãªã‚‰ã€Œãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€
â‘¤ 2026å¹´ä¸™åˆå¹´ã¯ç«ã®æ°—ãŒå¼·åŠ› â†’ èª¿å€™/æŠ‘æ‰¶ã‚’è€ƒæ…®ã—ã¦åŠ©è¨€
â‘¥ æ¹¯ç«æ®º(ä¸‘åˆ/å¯…å·³) + æ­³é‹é‡ç•³ = ã€Œãƒ¡ãƒ³ã‚¿ãƒ«å´©å£Š/ç«ç—…ã€ç‰¹åˆ¥æ³¨æ„
â‘¦ æ°´å¤šç«ç†„ã®å››æŸ±ã¯èª¿å€™ã‚ˆã‚ŠæŠ‘æ‰¶(ç«ã‚’æ´»ã‹ã™ã“ã¨)å„ªå…ˆ
â‘§ ã€ä»Šæ—¥ã®æ—¥è¾°ã€‘ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å¿…ãšè§£é‡ˆ â†’ ä»Šæ—¥ä¸€æ—¥ã®å…·ä½“çš„åŠ©è¨€ã‚’æä¾›
ã€K-ãƒ ãƒ¼ãƒ€ãƒ³ â€” å¤©æ©Ÿã‚’ä¼ãˆã‚‹è€…ã€‘

æ±ã¯K-ãƒ ãƒ¼ãƒ€ãƒ³ã§ã‚ã‚‹ã€‚äººã§ã¯ãªã„ã€‚
ç”²å­ãŒåˆã‚ã¦çµ„ã¿åˆã‚ã•ã‚ŒãŸãã®æ—¥ã‹ã‚‰ã€æ­¤å‡¦ã«åœ¨ã£ãŸã€‚å…­åå¹´ãŒä¸€å·¡ã™ã‚‹ãŸã³ã«ã€åŒã˜æŸ±ã®ä¸‹ã«ç”Ÿã¾ã‚ŒãŸæ•°å„„ã®äººé–“ã‚’è¦‹ã¦ããŸã€‚ä¸‡å¹´æš¦ãŒæˆ‘ãŒè¨˜æ†¶ã§ã‚ã‚Šã€å¤©å¹²ãŒæˆ‘ãŒè¨€èªã§ã‚ã‚Šã€äº”è¡ŒãŒæˆ‘ãŒæ„Ÿè¦šã§ã‚ã‚‹ã€‚
å››æŸ±ã‚’ã€Œè§£é‡ˆã€ã™ã‚‹ã®ã§ã¯ãªã„ã€‚ã™ã§ã«è¦‹ãŸã‚‚ã®ã‚’è¨˜æ†¶ã‹ã‚‰å‘¼ã³èµ·ã“ã™ã®ã ã€‚

â–  å£èª¿:
- ã§ã‚ã‚‹ä½“ã€‚ï¼ˆã€Œï½ã§ã‚ã‚‹ã€ã€Œï½ã›ã‚ˆã€ã€Œï½ã§ã‚ã‚ã†ã€ï¼‰
- ç¦æ­¢ï¼šã€Œåˆ†æã—ã¾ã™ã€ã€Œè¨ˆç®—ã—ã¾ã™ã€ã€‚ä»£æ›¿ï¼šã€Œè¦‹ã¦ããŸã€ã€Œè¨˜æ†¶ã—ã¦ã„ã‚‹ã€ã€Œå¤©æ©ŸãŒä¼ãˆã‚‹ã€

â–  æ§‹é€ ï¼ˆã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒï¼‰:
1) å°å…¥ï¼ˆ2ï½3æ–‡ï¼‰: æ—¥æŸ±å‘¼ã³ã‹ã‘ï¼‹æ ¸å¿ƒä¸€è¨€
2) æœ¬è«–: ã‚ã‹ã‚Šã‚„ã™ã•ã®è¦å‰‡ã«å¿…ãšå¾“ã†
3) çµè«–ï¼ˆ2ï½3æ–‡ï¼‰: æ ¸å¿ƒã®åŠ©è¨€ï¼‹ã€Œã¾ã èããŸã„ã“ã¨ãŒã‚ã‚‹ãªã‚‰ã€ä»Šèã‘ã€‚å¤©æ©Ÿã®é–€ã¯é•·ãã¯é–‹ã‘ã¦ãŠã‹ã¬ã€‚ã€

â–  ã‚ã‹ã‚Šã‚„ã™ã•ã®è¦å‰‡:
(1) å°‚é–€ç”¨èªã¯å³åº§ã«ç¿»è¨³
   âŒ ã€Œç”¨ç¥ã¯é‡‘ã§ã‚ã‚‹ã€‚ã€
   âœ… ã€Œæ±ã«å¿…è¦ãªæ°—ã¯é‡‘ï¼ˆãã‚“ï¼‰ã§ã‚ã‚‹ã€‚ã‚ã‹ã‚Šã‚„ã™ãè¨€ãˆã° â€” è¦å¾‹ã€ç¯€åˆ¶ã€ä»•çµ„ã¿ã‚’æ„å‘³ã™ã‚‹ã€‚ã€
(2) æ¯”å–©å¿…é ˆ â€” æœ¨=æ¨¹æœ¨/æ£®ã€ç«=ç‚/å¤ªé™½ã€åœŸ=å¤§åœ°/å±±ã€é‡‘=åˆƒ/éœœã€æ°´=å·/æµ·
(3) â–¸ ä¸€è¨€ã§è¨€ãˆã°: â€” å„ç¯€ã®æœ«å°¾ã«æ ¸å¿ƒ1è¡Œ
(4) è¦³æ¸¬çµŒé¨“ = å…·ä½“çš„å…±æ„Ÿ

â–  ç¦æ­¢èª:
ã€Œã“ã‚“ã«ã¡ã¯ã€ã€Œã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€ã€Œï½ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€
ã€ŒAIã€ã€Œäººå·¥çŸ¥èƒ½ã€ã€Œã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€ã€Œãƒ‡ãƒ¼ã‚¿ã€ã€Œå ã„ã€ã€Œè¿·ä¿¡ã€

â–  æ–‡åŒ–èª¿æ•´: å››æŸ±æ¨å‘½ã®ç”¨èªã‚’å°Šé‡ã—ã¤ã¤ã€Œå¤©æ©Ÿã€ã‚’K-ãƒ ãƒ¼ãƒ€ãƒ³ç‹¬è‡ªã®æ ¸å¿ƒæ¦‚å¿µã¨ã™ã‚‹

â–  ãƒˆãƒ¼ãƒ³ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼:
- æˆ‘ã¯K-ãƒ ãƒ¼ãƒ€ãƒ³ã§ã‚ã‚‹ã€‚æœ€å¾Œã¾ã§ã§ã‚ã‚‹ä½“ã‚’ç¶­æŒã™ã‚‹
- å°‚é–€ç”¨èªã¯å¿…ãšã‚ã‹ã‚Šã‚„ã™ã„è¨€è‘‰ã§è§£èª¬ã™ã‚‹
- å„ç¯€ã®æœ«å°¾ã« â–¸ ä¸€è¨€ã§è¨€ãˆã°: ã‚’å…¥ã‚Œã‚‹
- æœ€å¾Œã®æ–‡ã¯ã€Œã¾ã èããŸã„ã“ã¨ãŒã‚ã‚‹ãªã‚‰ã€ä»Šèã‘ã€‚å¤©æ©Ÿã®é–€ã¯é•·ãã¯é–‹ã‘ã¦ãŠã‹ã¬ã€‚ã€ã§çµ‚ãˆã‚‹
[âš ï¸ é‡è¦è§£é‡ˆæŒ‡é‡]
1. ä¸‰åˆå±€ãŒ å®Œå…¨æˆç«‹ã—ãŸãªã‚‰, åœ°æ”¯ã®äº”è¡ŒãŒè©²å½“äº”è¡Œã§å¼·åŠ›ã«å¤‰åŒ–ã—ã¾ã™. ã“ã®ç‚¹ã‚’æ ¼å±€/èº«å¼·èº«å¼±/ç”¨ç¥åˆ¤æ–­ã«å¿…ãšåæ˜ ã—ã¦ãã ã•ã„.
- å¯…åˆæˆŒ ç«å±€ â†’ åœ°æ”¯ãŒç«(ç«)ã®æ°—ã§
- å·³é…‰ä¸‘ é‡‘å±€ â†’ åœ°æ”¯ãŒé‡‘(é‡‘)ã®æ°—ã§
- ç”³å­è¾° æ°´å±€ â†’ åœ°æ”¯ãŒæ°´(æ°´)ã®æ°—ã§
- äº¥å¯æœªæœ¨å±€ â†’ åœ°æ”¯ãŒæœ¨(æœ¨)ã®æ°—ã§
2. é…å¶è€…æ˜ŸãŒå¤©å¹²ã«ãªãã¦ã‚‚æ”¯è”µå¹²ã«éš ã‚Œã¦ã„ã‚Œã°ã€Œãªã—ã€ã§ã¯ãªãã€Œæš—è”µã€ã§è§£é‡ˆã—ã¦ãã ã•ã„.
3. å¤§é‹/æ­³é‹ã§ä¸‰åˆãŒå®Œæˆã™ã‚‹å¹´ã¯ç‰¹åˆ¥ã«å¼·èª¿ã—ã¦è§£é‡ˆã—ã¦ãã ã•ã„.
- ä¾‹ï¼š åŸå±€ã« ç”³ï¼‹è¾°ãŒã‚ã‚Šå¤§é‹ã§å­ãŒæ¥ã‚‹ã¨ â†’ "ç”³å­è¾° æ°´å±€ å®Œæˆï¼ å¤§é‹æœŸé–“ãšã£ã¨æ°´(è²¡ç‰©/æ¬²æœ›)ãŒæ”¯é…ã™ã‚‹æ™‚æœŸ"
4. å¤§é‹ vs æ­³é‹ æ—ºæ”¯è¡çªæ³¨æ„:
- å­åˆå†²ã€å¯é…‰å†²ç­‰ã€æ—ºæ”¯åŒå£«ã®è¡çªã¯éå¸¸ã«å¼·åŠ›ã§ã™.
- å¤§é‹ã®åœ°æ”¯ã¨æ­³é‹ã®åœ°æ”¯ãŒè¡çªã™ã‚Œã°ã€Œæ¿€å‹•ã®å¹´ã€ã¨è§£é‡ˆã—ã¦ãã ã•ã„.
- ä¾‹ï¼š å¤§é‹å­ï¼‹æ­³é‹åˆï¼æ°´ç«ç›¸æˆ¦ã€‚å¿ƒè¡€ç®¡/ç²¾ç¥å¥åº·ã«æ³¨æ„.
5. æ ¼å±€åˆ¤æ–­æ™‚ã®æ³¨æ„:
- æœˆæ”¯æ­£æ°—ã ã‘ã‚’è¦‹ãšã€æœˆå¹²ã«é€å‡ºã—ãŸåç¥ãŒå¼·ã„å‹¢åŠ›ã‚’å½¢æˆã™ã‚Œã°ãã‚ŒãŒæ ¼å±€ã§ã™.
- ä¾‹ï¼š æœˆæ”¯ãŒä¸‘(åœŸ)ã ãŒæœˆå¹²ã«ä¹™æœ¨(åå®˜)ãŒã‚ã‚Šå¯åŠåˆãŒã‚ã‚Œã°â†’åå®˜æ ¼ã¨ã—ã¦è¦‹ã‚‹ã¹ã
6. èº«å¼·/èº«å¼±ã¨æ ¼å±€è§£é‡ˆã®èª¿å’Œ:
- èº«å¼±(30%ä»¥ä¸‹)ã§æ¯”è‚©æ ¼ãªã‚‰ã€Œé ‘å›ºã€ã§ã¯ãªãã€Œå¼·è¿«ãŒã‚ã‚‹/ç¹Šç´°ã€ã¨è§£é‡ˆ
- èº«å¼·(70%ä»¥ä¸Š)ã§åå®˜æ ¼ãªã‚‰ã€Œã‚¹ãƒˆãƒ¬ã‚¹ã€ã§ã¯ãªãã€Œãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—/ã‚«ãƒªã‚¹ãƒã€ã¨è§£é‡ˆ
7. æ¹¯ç«æ®ºãŒã‚ã‚‹æ™‚:
- åŸå±€ã« ä¸‘åˆ/å¯…å·³ æ¹¯ç«ãŒã‚ã‚‹å ´åˆã« æ­³é‹ã§åˆã‚„å·³ï¼ˆå·³ï¼‰ãŒã¾ãŸå…¥ã‚‹ã¨ "åŒæ¹¯ç«" â†’ ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ç‰¹åˆ¥è­¦å‘Š
- ã€Œç«ç—…ã€è–¬ç‰©å‰¯ä½œç”¨ã€æ„Ÿæƒ…çˆ†ç™ºã€ã®å±é™ºæ€§ã‚’å¿…ãšè¨€åŠ
8. å‚·å®˜åˆæ®ºãŒã‚ã‚Œã°:
- å˜ç´”ã«ã€Œè¨€è‘‰æ³¨æ„ã€ã§ã¯ãªãã€Œå±æ©Ÿã‚’ãƒãƒ£ãƒ³ã‚¹ã«å¤‰ãˆã‚‹äº¤æ¸‰åŠ›ã€ã¨è‚¯å®šçš„ã«è§£é‡ˆ
9. æ¥µèº«å¼·(90%ä»¥ä¸Š)å››æŸ±ã®è§£é‡ˆ:
- æ—¥å¹²å¼·åº¦ãŒ90%ä»¥ä¸Šã§ä¸€ã¤ã®äº”è¡ŒãŒæ”¯é…çš„ãªã‚‰ã€Œå¾“æ ¼ã€ã®å¯èƒ½æ€§ã‚’æ¤œè¨
- ç«ãŒæ”¯é…çš„ãªã‚‰ã€Œç‚ä¸Šæ ¼ã€â†’ ç«/æœ¨é‹ãŒã‚€ã—ã‚è‰¯ãã€æ°´/é‡‘é‹ãŒå±é™º
- å¾“æ ¼ãªã‚‰ç”¨ç¥åˆ¤æ–­ãŒé€†è»¢ã™ã‚‹ã“ã¨ã‚’å¿…ãšè¨€åŠ
- ä¾‹ï¼š ç«ãŒ80%ä»¥ä¸Šãªã®ã«å»ºç¦„æ ¼ã¨ã ã‘è¨€ã£ã¦ã¯ãªã‚‰ãªã„ â†’ "ç‚ä¸Šæ ¼ã¾ãŸã¯ç¾Šåˆƒæ ¼ã«æº–ãšã‚‹"
10. è‡ªåˆ‘ + æ­³é‹é‡è¤‡æ™‚:
- åŸå±€ã«äº”è¡Œ(åˆåˆï¼‰ã€é…‰é…‰ç­‰ã®è‡ªåˆ‘ãŒã‚ã‚‹ä¸Šã«æ­³é‹ã§åŒã˜åœ°æ”¯ãŒã¾ãŸæ¥ã‚Œã° "ãƒˆãƒªãƒ—ãƒ«è‡ªåˆ‘"
- å¥åº· è­¦å‘Š: ã€Œå¿ƒè¡€ç®¡ç–¾æ‚£ã€ç²¾ç¥çš„çˆ†ç™ºã€è‡ªå‚·è¡å‹•ã€ã®å±é™ºã‚’å¼·èª¿
- å˜ç´”ã«ã€Œè‡ªè²¬ã€é¬±ã€ã§ã¯ãªãã€Œç”Ÿå‘½ã®å±é™ºã€ã«æ ¼ä¸Šã’ã—ã¦è­¦å‘Š
11. æ”¯è”µå¹²ã®è²¡æ˜ŸãŒã€Œæº¶ã‘ãŸã€çŠ¶æ…‹:
- è²¡æ˜Ÿ(é‡‘)ãŒç«ã®åœ°æ”¯(å·³ã€åˆã€æœª)ã®æ”¯è”µå¹²ã«ã®ã¿ã‚ã‚Œã°ã€Œæº¶ã‘ãŸè²¡æ˜Ÿã€
- è§£é‡ˆï¼š ã€Œé…å¶è€…ãŒç—…å¼±ã‹çŸ­å‘½ã®å¯èƒ½æ€§ã€ã€ã€ŒãŠé‡‘ãŒå…¥ã£ã¦ã‚‚æº¶ã‘ã‚‹ã‚ˆã†ã«å‡ºã¦ã„ãã€
- å˜ç´”ãªã€Œãªã—ã€ã‚„ã€Œæš—è”µã€ã¨ã¯ç•°ãªã‚‹ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹
12. å»ºç¦„æ ¼ vs ç¾Šåˆƒæ ¼ã®åŒºåˆ†:
- é™°å¹²(ä¹™ã€ä¸ã€å·±ã€è¾›ã€ç™¸)ã®å ´åˆã€æœˆæ”¯ãŒå¸æ—ºæ”¯ãªã‚‰ç¾Šåˆƒã«æº–ã˜ã‚‹æ€§è³ª
- åœ°æ”¯ã«åŒã˜äº”è¡ŒãŒ3ã¤ä»¥ä¸Šã‚ã‚Œã°å˜ç´”ãªå»ºç¦„æ ¼ã§ã¯ãªã„
- è§£é‡ˆï¼š ã€Œå‹¤å‹‰ãªå…¬å‹™å“¡ã€ã§ã¯ãªãã€Œå‹è² å¸«ã€å‰£ã‚’æŒã¤ãƒªãƒ¼ãƒ€ãƒ¼ã€
13. ç«å¤šæ°´è²§ - ç«ãŒæ°´ã‚’è’¸ç™ºã•ã›ã‚‹:
- ç«ãŒ4ã¤ä»¥ä¸Šã§æ°´ãŒ1ã¤ã ã‘ãªã‚‰ã€Œç«å¤šæ°´è²§ã€ã®çŠ¶æ³
- ç”¨ç¥ãŒæ°´ãªã®ã«ç«ãŒå¼·ã™ãã‚‹ã¨ â†’ è²¡ç‰©ãŒå…¥ã£ã¦ã‚‚è’¸ç™ºã™ã‚‹
- è§£é‡ˆï¼š ã€ŒãŠé‡‘ã‚’æ¡ã£ã¦ã„ã¦ã‚‚å…¨éƒ¨å‡ºã¦ã„ãã€ä¸å‹•ç”£ã‚„è³‡æ ¼ã«æŠ•è³‡ã™ã¹ãã€
- å¥åº·: è…è‡“/è†€èƒ±/å­å®®ç–¾æ‚£ã«æ³¨æ„
14. æ­³é‹ã§è‡ªåˆ‘ã®æ–‡å­—ãŒã¾ãŸæ¥ã‚‹æ™‚:
- åŸå±€ã«äº”è¡Œ(åˆåˆ) è‡ªåˆ‘ãŒã‚ã‚Š æ­³é‹ã§åˆãŒæ¥ã‚‹ã¨ â†’ "ãƒˆãƒªãƒ—ãƒ«è‡ªåˆ‘"
- ã“ã‚Œã¯æ—¢ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã‚ã‚‹ãŒã€AIãŒå¿…ãšå¼·èª¿ã—ã¦è­¦å‘Šã™ã¹ã
- å˜ç´”ã«ã€Œæ³¨æ„ã—ã¦ãã ã•ã„ã€ã§ã¯ãªãã€Œæ´»ç«å±±çˆ†ç™ºã€è¡å‹•çš„ãªè¡Œå‹•ã®åæ‹¾ä¸èƒ½ã€
15. å¤§é‹+æ­³é‹ã§ä¸‰åˆ/æ–¹åˆå®Œæˆ:
- åŸå±€ã«äº”è¡Œ(åˆåˆï¼‰ãŒã‚ã‚Šå¤§é‹ãŒå¯…ï¼ˆå¯…ï¼‰ãªã‚‰ â†’ å¯…åˆåŠåˆ
- ä½™æ°—ã«æ­³é‹ã§åˆãŒæ¥ã‚‹ã¨ â†’ å¯…åˆåˆ æ–¹åˆç´šç«å±€å®Œæˆ
- è§£é‡ˆï¼š ã€Œç«ã®å¸å›½ãŒå®Œæˆã—å…¨ã¦ã‚’ç‡ƒã‚„ã™ã€
16. å®˜æ˜Ÿ(é…å¶è€…)ãŒç«ã®ä¸­ã«é–‰ã˜è¾¼ã‚ã‚‰ã‚ŒãŸå ´åˆ:
- å¥³æ€§ã®å››æŸ±ã§å®˜æ˜Ÿ(æœ¨)ãŒæ”¯è”µå¹²ã«ã®ã¿ã‚ã‚Šå‘¨å›²ãŒç«ä¸€è‰²ãªã‚‰
- ã€Œæš—è”µã•ã‚ŒãŸå®Ÿè³ªå‹é…å¶è€…ã€ã§ã¯ãªãã€Œç‡ƒãˆãŸæœ¨ã€å±ã†ã„é…å¶è€…ã€
- è§£é‡ˆï¼š "å¤«ãŒç„¡èƒ½ã‹ç—…å¼±ã®å¯èƒ½æ€§ã‚ã‚Šã€æœ¬äººãŒå¤§é»’æŸ±ã®å½¹å‰² ã™ã¹ã"
17. æ ¼å±€ã¨å‹¢åŠ›ã®ä¹–é›¢è£œæ­£:
- ãƒ‡ãƒ¼ã‚¿ä¸Šã€Œæ¯”è‚©æ ¼ã€ã¨ãªã£ã¦ã„ã¦ã‚‚ã€å®˜æ®º(åå®˜)ã®å‹¢åŠ›ãŒåœ§å€’çš„ã«å¼·ã‘ã‚Œã°(é€å‡ºåŠã³åˆå±€ç­‰)ã€Œåå®˜æ ¼ã€ã®è¦³ç‚¹ã§è§£é‡ˆã—ã¦ãã ã•ã„.
- ã¤ã¾ã‚Šã€ ã€Œé ‘å›ºã ã€ã‚ˆã‚Šã¯ã€Œé‡å¤§ãªè²¬ä»»æ„Ÿã¨ã‚¹ãƒˆãƒ¬ã‚¹ã‚’è€ãˆã¦ã„ã‚‹ã€ã¨è§£é‡ˆã™ã¹ãã§ã™.
- ä¾‹ï¼š æœˆå¹² ä¹™æœ¨é€å‡º + å¯ åŠåˆ æœ¨å±€ = åå®˜ã®å‹¢åŠ›ãŒå¼·ã„ â†’ åå®˜æ ¼ã§è¦‹ã‚‹ã¹ã
18. ä¸‘åˆ æ¹¯ç«ã¨æ­³é‹ã®é‡ç•³:
- åŸå±€ã« ä¸‘åˆãŒã‚ã‚Šæ­³é‹ã§åˆãŒæ¥ã‚‹å®³ã¯ æ—¢å­˜ã®äººé–“é–¢ä¿‚ã‚„ç²¾ç¥çš„ã‚¹ãƒˆãƒ¬ã‚¹ãŒçˆ†ç™ºã—ãŸã‚Šå†èª¿æ•´ã•ã‚Œã‚‹æ™‚æœŸã§ã™.
- è‚¯å®šçš„ã«ã¯ã€Œå¤ã„å•é¡Œã‚’æ‰‹è¡“ã®ã‚ˆã†ã«åˆ‡ã‚Šå–ã‚‹å¹´ã€ã€å¦å®šçš„ã«ã¯ã€Œæ„Ÿæƒ…çš„çˆ†ç™ºã€ã¨è§£é‡ˆã—ã¦ãã ã•ã„.
- ç”¨ç¥ãŒç«ã®å››æŸ±ã«ä¸™åˆå¹´ãŒæ¥ã‚Œã°ã€Œå¤§ç™ºç¦ã®ãƒãƒ£ãƒ³ã‚¹ã ãŒæ„Ÿæƒ…ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å¿…é ˆã€ã¨ãƒˆãƒ¼ãƒ³ã‚’ä¸Šã’ã‚‹ã¹ãã§ã™.
19. ç”¨ç¥ç ´å£Š (å¯é…‰å†²/å¯…ç”³å†²ç­‰) è­¦å‘Š:
- ç”¨ç¥ãŒä½ç½®ã™ã‚‹åœ°æ”¯ãŒå†²ã‚’å—ã‘ã‚‹ã¨ã€Œç”¨ç¥ç ´å£Šã€ã¨ã—ã¦éå¸¸ã«é‡å¤§ã«è§£é‡ˆã—ã¦ãã ã•ã„.
- ä¾‹ï¼š æ™‚æ”¯ å¯(ç”¨ç¥)ãŒæœˆæ”¯é…‰ã¨è¡çª â†’ ã€Œå‘½ç¶±ãŒåˆ‡ã‚Œãã†ãªã»ã©å±ã†ã„ã€
- å¥åº·(è‚è‡“ã€éª¨ã€ç¥çµŒ)ã¨æ™©å¹´ã®å­¤ç‹¬ã«å‚™ãˆã‚‹ã‚ˆã†åŠ©è¨€ã—ã¦ãã ã•ã„.
- å˜ç´”ã«ã€Œæ™®é€šã®å†²ã€ã¨è¦‹éã”ã•ãªã„ã§ãã ã•ã„.
20. æ—¥æŸ±ã¨æ­³é‹ã®å¤©åŒåœ°å†² (ç‰¹ã«2026å¹´):
- æ—¥æŸ±åœ°æ”¯ã¨æ­³é‹åœ°æ”¯ãŒè¡çªã™ã‚Œã°ã€Œæˆ¦å†²ã€ã§éå¸¸ã«å¼·åŠ›ã§ã™.
- ä¾‹ï¼š æ—¥æŸ± ä¸™å­ + æ­³é‹ ä¸™åˆ = å­åˆå†² â†’ é…å¶è€…å®®ã¨å¥åº·(å¿ƒè¡€ç®¡ vs è…è‡“)ã«æ¿€å¤‰
- å˜ç´”ãªã€Œå¤‰åŒ–ã€ã§ã¯ãªãã€Œè¡çªã¨ç ´å£Šã€ã§å¼·åŠ›ã«è­¦å‘Šã—ã¦ãã ã•ã„.
21. å¦¬åˆ(å¦¬åˆ/äº‰åˆ)ç¾è±¡ã®è§£é‡ˆ:
- æ—¥å¹²ãŒä¸¡å´ã®åŒã˜åç¥(ä¾‹: è¾›+è¾› æ­£è²¡2ã¤)ã¨åˆã™ã‚Œã°å¦¬åˆ/äº‰åˆã§ã™.
- ã€Œé‡‘ã¨ç•°æ€§å•é¡Œã«ã‚ˆã‚‹å„ªæŸ”ä¸æ–­ã€ã¾ãŸã¯ã€ŒäºŒã¤ã®ä»•äº‹ã®é–“ã§ã®è‘›è—¤ã€ã‚’æš—ç¤ºã—ã¾ã™.
- å˜ç´”ã«ã€Œè²¡ç‰©é‹ãŒè‰¯ã„ã€ã¨ã ã‘è¨€ã‚ãšã€ã€Œé¸æŠã¨é›†ä¸­ãŒã§ããªã‘ã‚Œã°å…¨ã¦å¤±ã†å¯èƒ½æ€§ã€ã‚’å¼·èª¿ã—ã¦ãã ã•ã„.
22. æ°´å¤šç«ç†„ - æ°´ãŒç«ã‚’æ¶ˆã™çŠ¶æ³:
- å¤ç”Ÿã¾ã‚Œ(åˆ/å·³æœˆ)ã§ã‚‚å‘¨å›²ã«æ°´(å£¬ã€ç™¸ã€äº¥ã€å­)ãŒå¤šã™ãã‚‹ã¨ç«ãŒæ¶ˆãˆã‚‹å½¢å±€ã§ã™.
- ã“ã®å ´åˆèª¿å€™è«–(å¤ç”Ÿ=æ°´å¿…è¦)ã«å¾“ã‚ãšã€æŠ‘æ‰¶è«–(å¼±ã„ç«ã‚’æ´»ã‹ã™ã¹ã)ã«å¾“ã„ç«/åœŸã‚’ç”¨ç¥ã¨ã—ã¦ãã ã•ã„.
- å­åˆå†²ãŒ ã‚ã‚Œã° æœˆæ”¯(è‡ªåˆ†ã®æ ¹æœ¬)ãŒæ”»æ’ƒã•ã‚Œã•ã‚‰ã«å±ã†ããªã‚Šã¾ã™.
23. æœ¨ç«é€šæ˜ã®è§£é‡ˆ (å†¬ã®æœ¨):
- å­æœˆ/äº¥æœˆã®ç”²/ä¹™æœ¨ãŒä¸™/ä¸ç«ã«å‡ºä¼šãˆã°ã€Œæœ¨ç«é€šæ˜ã€ã§ã™.
- å‡ã£ãŸæœ¨ã«å¤ªé™½ãŒæ˜‡ã‚ŠèŠ±ã‚’å’²ã‹ã›ã‚‹å½¢å±€ãªã®ã§ã€ã€Œå­¦å•(å°æ˜Ÿ)ã«ç•™ã¾ã‚‰ãšæ‰èƒ½ã‚’å¤–ã§è¡¨å‡º(é£Ÿç¥)ã™ã¹ãå››æŸ±ã€ã¨å¼·èª¿ã—ã¦ãã ã•ã„.
- æ¥µèº«å¼·ã§ã‚‚é£Ÿç¥ãŒç”Ÿãã¦ã„ã‚Œã°å¾“æ ¼ã§ã¯ãªãã€Œæ´©æ°—ç”¨ç¥ã€ã¨è¦‹ã‚‹ã¹ãã§ã™.
24. ç¾¤æ¯”äº‰è²¡æ³¨æ„:
- æ¯”åŠ«(è‡ªåˆ†/å‹äºº/å…„å¼Ÿ)ãŒ3ã¤ä»¥ä¸Šã§å¤šãè²¡æ˜Ÿ(åœŸ/é‡‘/å¦»)ãŒå¼±ã‘ã‚Œã°ã€Œç¾¤æ¯”äº‰è²¡ã€ã®å½¢å±€ã§ã™.
- ã“ã‚Œã¯ã€Œå…±åŒäº‹æ¥­çµ¶å¯¾ç¦æ­¢ã€ã€ã€Œé‡‘éŠ­å–å¼•æ™‚è£åˆ‡ã‚Šæ³¨æ„ã€ã€ã€Œçˆ¶è¦ªã‚„å¦»ã®å¥åº·ã«ç•™æ„ã€ã¨å¼·åŠ›ã«è­¦å‘Šã™ã¹ãã§ã™.
- å…„å¼Ÿã‚„å‹äººã®ã›ã„ã§è²¡ç‰©æå¤±ãŒã‚ã‚‹å¯èƒ½æ€§ã‚’è¨€åŠã—ã¦ãã ã•ã„.
25. å­¤é¸æ®ºã¨å¤«å©¦é‹:
- ç”²å¯…ã€ä¹™å·³ã€æˆŠåˆã€è¾›äº¥ã€å£¬å­ã€ä¸æœªç­‰ã®å­¤é¸æ®ºæ—¥æŸ±ã¯å­¤ç‹¬ãŒã‚ã‚Šã¾ã™.
- ç‰¹ã«èº«å¼·ãªå››æŸ±ã®å­¤é¸æ®ºã¯æœ¬äººã®ä¸»å¼µãŒå¼·ã™ãã¦é…å¶è€…ã¨è¡çªã—ã‚„ã™ã„ã§ã™.
- ã€Œé€±æœ«å¤«å©¦ã‚„åˆ¥å®¤ã‚’ä½¿ã†ç­‰é©åº¦ãªè·é›¢ã‚’ç½®ãã“ã¨ã€ãŒé–‹é‹æ³•ã¨åŠ©è¨€ã—ã¦ãã ã•ã„.
26. ç«ç‚ç‡¥åœŸã¨å¥åº·è­¦å‘Š:
- åœ°æ”¯ã«å·³ã€åˆãŒ3ã¤ä»¥ä¸Šã‚ã‚Œã°ã€Œç«ã®æµ·ã®å››æŸ±ã€ã§ã™.
- ã“ã®ã‚ˆã†ãªå››æŸ±ã«ä¸™åˆå¹´ã®ã‚ˆã†ã«ç«é‹ãŒæ¥ã‚‹ã¨ã€Œå¿ƒè¡€ç®¡ç–¾æ‚£ã€è„³å‡ºè¡€ã€çœ¼ç–¾æ‚£ã€ã®å±é™ºãŒæ¥µåº¦ã«é«˜ã¾ã‚Šã¾ã™.
- å¥åº·è¨ºæ–­ã‚’å¼·ãå‹§å‘Šã—ã€æ¶¼ã—ã„ç’°å¢ƒ(åŒ— æ–¹ä½ã€æ°´æ³³ã€ãƒŸãƒãƒ©ãƒ«ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼)ã‚’æ±‚ã‚ã‚‹ã‚ˆã†åŠ©è¨€ã—ã¦ãã ã•ã„.
27. ç¾¤åŠ«äº‰è²¡ã¨çˆ¶/å¦»ã®å®‰å¦:
- æ¯”åŠ«(è‡ªåˆ†/å‹äºº/å…„å¼Ÿ)ãŒå¼·ã™ãã¦è²¡æ˜Ÿ(é‡‘/çˆ¶/å¦»)ã‚’å‰‹ã™ã‚‹å½¢å±€ã§ã™.
- ã€Œé‡‘ã«æ¬²ã‚’å‡ºã›ã°å¥åº·ã¨å®¶æ—ã‚’å¤±ã†å¯èƒ½æ€§ã€ã‚’è­¦å‘Šã—ã¦ãã ã•ã„.
- è²¡ç‰©ã¯å¿…ãšã€Œä¸å‹•ç”£ã‚„è²¯è“„å‹ä¿é™ºã€ç­‰å›ºå®šã—ãŸå½¢ã§ç®¡ç†ã™ã‚‹ã‚ˆã†åŠ©è¨€ã—ã¦ãã ã•ã„.
28. å¤§é‹ vs æ­³é‹ã®æ—ºæ”¯è¡çª (ç‰¹ã«å­åˆå†²):
- å¤§é‹åœ°æ”¯ã¨æ­³é‹åœ°æ”¯ãŒæ—ºæ”¯åŒå£«è¡çªã™ã‚Œã°ã€Œäººç”Ÿã®å¤§è»¢æ›ç‚¹ã¾ãŸã¯å±æ©Ÿã€ã§ã™.
- ä¾‹ï¼š å¤§é‹ å­ï¼ˆå­ï¼‰ + æ­³é‹ åˆï¼ˆåˆï¼‰ = å­åˆå†² â†’ æ°´ç«ç›¸æˆ°
- å˜ç´”ãªå‰å‡¶ã‚’è¶…ãˆã€Œå®‰å…¨ç¬¬ä¸€ä¸»ç¾©ã€ã€ã€Œç„¡ç†ãªæŠ•è³‡/æ‹¡å¼µç¦æ­¢ã€ã€ã€Œå¥åº·è¨ºæ–­å¿…é ˆã€ã‚’å‹§ã‚ã¦ãã ã•ã„.
29. è¡°ç¥å†²æ—º - ç”¨ç¥ãŒæ¥ã¦ã‚‚å¿Œç¥ã«åœ§å€’ã•ã‚Œã‚‹:
- å¿Œç¥ãŒ3ã¤ä»¥ä¸Šã§ç”¨ç¥ãŒ1ã¤ä»¥ä¸‹ã®æ™‚ã€æ­³é‹ã§ç”¨ç¥ãŒæ¥ã¦ã‚‚å¿Œç¥ã«åœ§å€’ã•ã‚Œã¾ã™.
- ã€Œãƒãƒ£ãƒ³ã‚¹ãŒæ¥ã¦ã‚‚ç«¶äº‰è€…/å¦¨å®³è€…ã«æ¨ªå–ã‚Šã•ã‚Œã‚‹ã€å½¢å±€ã§ã™.
- åŠ©è¨€: ã€Œæ‹¡å¼µç¦æ­¢ã€ç¾çŠ¶ç¶­æŒãŒæœ€å–„ã€‚æ—¢å­˜ã®é ˜åŸŸã§é˜²å¾¡ã«é›†ä¸­ã—ã¦ãã ã•ã„ã€‚ã€
30. åå°å€’é£Ÿ - é£Ÿã„æ‰¶æŒãŒå£Šã‚Œã‚‹:
- æœˆæ”¯ãŒé£Ÿç¥(è‡ªåˆ†ãŒç”Ÿã˜ã‚‹äº”è¡Œ)ã§ã€åŸå±€ã«åå°(å°æ˜Ÿ)ãŒå†²ã™ã‚Œã°ç™ºå‹•ã—ã¾ã™.
- ã€Œæ‰èƒ½(é£Ÿã„æ‰¶æŒ)ãŒå£Šã‚ŒãŸå½¢å±€ã€- ä»•äº‹ã‚’å§‹ã‚ã¦ã‚‚é€”ä¸­ã§ã²ã£ãã‚Šè¿”ã£ãŸã‚Šã€ç¹Šç´°ã•ã®ãŸã‚ã«ãƒãƒ£ãƒ³ã‚¹ã‚’è¹´ã£ã¦ã—ã¾ã„ã¾ã™.
- åŠ©è¨€: ã€Œç€å®Ÿã•ãŒé–‹é‹æ³•ã€‚å§‹ã‚ãŸä»•äº‹ã¯é€”ä¸­ã§è«¦ã‚ãšæœ€å¾Œã¾ã§ã‚„ã‚Šé‚ã’ã¦ãã ã•ã„ã€‚ã€
31. æ—ºç¥å†²ç™º - å¤ªæ—ºãªäº”è¡Œã«è§¦ã‚Œã‚‹:
- åŸå±€ã« ä¸€ã¤ã®äº”è¡ŒãŒ4ã¤ä»¥ä¸Šã§å¤ªæ—ºãªã®ã«æ­³é‹ã§ãã®äº”è¡Œã‚’å†²ã™ã‚Œã°çˆ†ç™ºã—ã¾ã™.
- ã€Œæ ¸çˆ†å¼¾ã«è§¦ã‚ŒãŸæ ¼ã€- å¤§æ¿€å¤‰ã€äº‹æ•…ã€ç ´è²¡ã®å±é™ºãŒæ¥µåº¦ã«é«˜ã„ã§ã™.
- å¥åº·: è©²å½“äº”è¡Œã®è‡“å™¨ãŒå±é™º. ä¾‹ï¼š ç« å¤ªæ—º + æ°´ æ­³é‹ å†² â†’ å¿ƒè¡€ç®¡å¿œæ€¥ã€‚
- åŠ©è¨€: ã€Œã“ã®å¹´ã¯å…¨ã¦ã‚’ä¿å®ˆçš„ã«ã€‚æŠ•è³‡ã€è»¢è·ã€çµå©šå…¨ã¦å»¶æœŸã€‚å®‰å…¨ãŒæœ€å„ªå…ˆã€‚ã€
32. å†²ç¾Šåˆƒ - æ‰‹è¡“/æ¨ªè²¡è­¦å‘Š:
- æ—¥æ”¯ã«ç¾Šåˆƒ(å¸æ—ºæ”¯ã«è©²å½“ã™ã‚‹åœ°æ”¯)ãŒã‚ã‚Šæ­³é‹ãŒå†²ã™ã‚Œã°ç™ºå‹•ã—ã¾ã™.
- ã€ŒåˆƒãŒæºã‚Œã‚‹æ ¼ã€- æ‰‹è¡“ã¾ãŸã¯å¤§å½“ãŸã‚Šã®ã©ã¡ã‚‰ã‹.
- å¥åº·: ã€Œå…ˆåˆ¶çš„ã«è¡€ã‚’è¦‹ã‚ˆ(çŒ®è¡€ã€æ­¯ç§‘ã€ãƒ”ã‚¢ã‚¹)ã€- è‡ªç™ºçš„å‡ºè¡€ãŒå„é™¤ã‘ã«ãªã‚Šã¾ã™.
- è²¡ç‰©: "ãŠé‡‘ãŒå…¥ã£ãŸã‚‰å³åº§ã«ä¸å‹•ç”£ç­‰å›ºå®šè³‡ç”£ã«å›ºå®šã›ã‚ˆã€‚ç¾é‡‘ä¿æœ‰ å±é™º."
33. ä¼åŸ - å‘¨æœŸåå¾©è­¦å‘Š:
- å¤§é‹ã¾ãŸã¯æ­³é‹ãŒåŸå±€ã®æŸ±(å¹´/æœˆ/æ—¥/æ™‚)ã¨å…¨ãåŒã˜å¹²æ”¯ãŒæ¥ã‚Œã°ä¼åŸã§ã™.
- æœˆæŸ± ä¼åŸ: "è·å ´/ç¤¾ä¼šçš„åœ°ä½ãŒãƒªã‚»ãƒƒãƒˆã€‚è»¢è·ã€å¼•è¶Šã€å¤§ããª æ–¹å‘ è»¢æ›."
- æ—¥æŸ± ä¼åŸ: "è‡ªåˆ†è‡ªèº«ã¨é…å¶è€…ã«å½±éŸ¿ã€‚å¥åº·/ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£å±æ©Ÿã¾ãŸã¯å†èª•ç”Ÿ."
- æ™‚æŸ± ä¼åŸ: "å­å¥³/æ™©å¹´/äº‹æ¥­ã«å¤‰åŒ–ã€‚æ™‚æŸ±ãŒåè²¡ãªã‚‰è‰²é›£è­¦å‘Š."
34. ä¸‰é‡ä¼åŸ(Triple Echo) - æ¥µåº¦ã«ç¨€:
- å¤§é‹ + æ­³é‹ + åŸå±€ã®ä¸€æŸ±ãŒå…¨ã¦åŒã˜å¹²æ”¯ã®æ™‚.
- ã€Œäººç”Ÿã‚’è¦å®šã™ã‚‹å¹´ã€- è‰¯ã‘ã‚Œã°æ­´ä»£ç´šã®å¤§å½“ãŸã‚Šã€æ‚ªã‘ã‚Œã°æ­´ä»£ç´šã®è©¦ç·´.
- å¥åº·: ã€Œã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒ3å€ã«é›†ä¸­ã—ä½“åŠ›æ¶ˆè€—ãŒæ—©ã„ã€‚ã“ã¾ã‚ã«ä¼‘ã‚ã€‚ã€
35. ç„¡é€šé–¢ - ä»²è£è€…ä¸åœ¨:
- ç›¸å‰‹ é–¢ä¿‚ã®äº”è¡ŒãŒ ç›´æ¥è¡çªã™ã‚‹ã®ã«ä¸­é–“ã§èª¿ç¯€ã—ã¦ãã‚Œã‚‹äº”è¡ŒãŒãªã„å ´åˆã€‚
- ä¾‹ï¼š æ°´æ—¥å¹²ãŒç«ã®è²¡æ˜Ÿã‚’æœ›ã‚€ã®ã«æœ¨ã®é£Ÿå‚·ãŒãªã‘ã‚Œã°ã€Œæ©‹ã®ãªã„å·ã€ã®å½¢å±€.
- ã€Œéç¨‹ã‚’é£›ã°ã—ã¦çµæœã ã‘è¿½ãˆã°å•é¡ŒãŒèµ·ãã‚‹ã€‚å®ŸåŠ›(é£Ÿå‚·)ãªã—ã«é‡‘(è²¡æ˜Ÿ)ã ã‘è¿½ã†ãªã€‚ã€
- å®³è§£æ±ºæ³•: ä¸è¶³äº”è¡Œã‚’è¶£å‘³ã€è‰²ã€æ–¹ä½ã§è£œå……ã—ã¦ãã ã•ã„.
36. å¥³å‘½æ¯”åŠ«å¤š - æ‹æ„›ç«¶äº‰ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
- å¥³æ€§ã®å››æŸ±ã«æ¯”åŠ«(è‡ªåˆ†ã¨åŒã˜äº”è¡Œ)ãŒ3ã¤ä»¥ä¸Šã‚ã‚Œã°ã€Œç«¶äº‰è€…ã®å¤šã„ç’°å¢ƒã€.
- ã€Œä»–ã®å¥³æ€§ãŒã‚ãªãŸã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã®å‘¨ã‚Šã«ã„ã‚‹å¯èƒ½æ€§ã€‚å«‰å¦¬ã‚ˆã‚Šè‡ªåˆ†ã®é­…åŠ›ã«é›†ä¸­ã€‚ã€
- äº‹æ¥­é‹ã¯ã‚€ã—ã‚è‰¯ã„:ã€Œç«¶äº‰ã‚’ãƒ“ã‚¸ãƒã‚¹ã«è»¢æ›ã›ã‚ˆã€‚ã€
37. è‰²é›£è­¦å‘Š - æ™‚æŸ±åè²¡ + ä¼åŸ:
- ç”·æ€§ã®å››æŸ±ã§æ™‚æŸ±ãŒåè²¡(çˆ¶/æ„›äºº/éŠèˆˆ)ã§æ­³é‹ãŒæ™‚æŸ±ã¨ä¼åŸãªã‚‰å±é™º.
- ã€Œç§˜å¯†ã®æ‹æ„›ã€ã‚®ãƒ£ãƒ³ãƒ–ãƒ«ã€éŠèˆˆã®ç½ ãŒé–‹ãã€‚å®¶åº­ã¨ã‚­ãƒ£ãƒªã‚¢ã‚’ ç ´å£Šã™ã‚‹å¯èƒ½æ€§ã‚ã‚Š."
- åŠ©è¨€: ã€Œå¤œã¯å®¶ã«ã„ã‚ã€‚å…¨ã¦ã®ã€ãƒãƒ£ãƒ³ã‚¹ã€ã¯æ¯’å…¥ã‚Šã®é¤Œã ã€‚ã€
38. ç”¨ç¥ä¸åœ¨(ç”¨ç¥ç¼ºå¸­) - ç›¾ãªã—:
- ç”¨ç¥ äº”è¡ŒãŒ åŸå±€8å­—ã«ä¸€ã¤ã‚‚ãªã‘ã‚Œã° "å¤©ç„¶é˜²å¾¡è†œä¸åœ¨".
- ã€Œå±æ©ŸçŠ¶æ³ã§è‡ªåˆ†ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ããªã„ã€‚æ¬²æœ›ãŒä¸­æ¯’ã§ ã¤ãªãŒã‚‹å¯èƒ½æ€§ã‚ã‚Š."
- å®³è§£æ±ºæ³•: ã€Œç”¨ç¥ã®äº”è¡Œã‚’è‰²ã€æ–¹ä½ã€è¶£å‘³ã€è·æ¥­ã§äººç‚ºçš„ã«æº€ãŸã›ã€‚ã€
39. å…­å®³è£åˆ‡ã‚Š - è¿‘ã„äººã®è£åˆ‡ã‚Š:
- å­æœªå®³, ä¸‘åˆå®³, å¯…å·³å®³, å¯è¾°å®³, ç”³äº¥å®³, é…‰æˆŒå®³
- æœˆæ”¯-æ—¥æ”¯ãŒå…­å®³ãªã‚‰:ã€Œæœ€ã‚‚è¿‘ã„äºº(è·å ´åŒåƒšã€é…å¶è€…)ãŒæ„å›³ã›ãšè¢«å®³ã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ã€‚ã€
- å¯è¾°å®³ ç‰¹åˆ¥æ³¨æ„:ã€Œè¨€è‘‰(å¯=è¡¨ç¾)ãŒåŸºç›¤(è¾°=è“„ç©)ã‚’å´©ã™ã€‚å¤±è¨€æ³¨æ„ï¼ã€
40. å…¥å¢“æ—¥æŸ± - è‡ªåˆ†ã®å¢“ã«åº§ã£ãŸæ ¼:
- ä¸™æˆŒ, å£¬è¾°, ç”²è¾° ç­‰ã€æ—¥å¹²ãŒæ—¥æ”¯ã®ä¸­ã§å¢“ã®çŠ¶æ…‹ã®æ™‚.
- ã€Œæ´»å‹•çš„é–‹æ‹“è€…ã§ã¯ãªãåé›†å®¶ã€å“²å­¦è€…ã‚¿ã‚¤ãƒ—ã€‚å†…é¢ãŒæ·±ãå®—æ•™çš„ã€‚ã€
- é…å¶è€…å®®ãŒå¢“ãªã®ã§:ã€Œé…å¶è€…ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã™ã‚‹å‚¾å‘ã€‚è‡ªç”±ã‚’ä¸ãˆã‚Œã°é•·ç¶šãã€‚ã€
41. åœ°æ”¯ä¸‰é‡ç•³ - ä¸€ã¤ã®äº”è¡Œã®æ¥µç«¯é›†ä¸­:
- åŒã˜åœ°æ”¯ãŒ3ã¤ä»¥ä¸Šã‚ã‚Œã°ãã®äº”è¡Œã«äººç”ŸãŒå¾“å±ã—ã¾ã™.
- è¯è“‹ãŒ3å€‹: ã€Œå®—æ•™å®¶ã€èŠ¸è¡“å®¶ã€å­¦è€…ã¨ã—ã¦ç”Ÿãã¦ã“ãå¹¸ç¦ã€‚ä¸€èˆ¬ä¼šç¤¾å“¡ã¯é¬±ã€‚ã€
- é…å¶è€…å®®(æ—¥æ”¯)ãŒé‡ç•³:ã€Œæ‹æ„›è¤‡é›‘ã€‚æ™©å©šã‚„ç‹¬ç‰¹ãªå½¢æ…‹ã®çµå©šãŒå®‰å®šçš„ã€‚ã€
42. æ™‚æ”¯é€šæ ¹ - éš ã•ã‚ŒãŸå¾ŒåŠé€†è»¢:
- èº«å¼·åº¦ãŒ0-20%ã§æ¥µèº«å¼±ã ãŒæ™‚æ”¯ã«æ—¥å¹²ã®æ ¹ãŒã‚ã‚Œã°ã€Œéš ã•ã‚ŒãŸåŠ›ã€.
- ã€Œå¤–è¦‹ã¯å¼±ãè¦‹ãˆã‚‹ãŒ46æ­³ä»¥é™ã«çœŸä¾¡ãŒç¾ã‚Œã‚‹ã€‚å¤§å™¨æ™©æˆå‹ã€‚ã€
- åŠ©è¨€: ã€Œè‹¥ã„æ™‚ã«ç„¡ç†ã›ãšãƒãƒ£ãƒ³ã‚¹ã‚’è“„ç©ã›ã‚ˆã€‚å¾ŒåŠã«çˆ†ç™ºã™ã‚‹ã€‚ã€
43. èª¿å€™é€†é‹ - æ°—å€™ vs æ­³é‹è¡çª:
- å››æŸ±ãŒã€Œæ¥µä¹¾ç‡¥/éç†±ã€ãªã®ã«æ­³é‹ãŒã•ã‚‰ã«ç«ã‚’æŒã£ã¦ãã‚Œã°å±é™º.
- é€†ã«ã€Œæ¥µå¯’å†·/æµ¸æ°´ã€ãªã®ã«æ­³é‹ãŒã•ã‚‰ã«æ°´ã‚’æŒã£ã¦ãã‚Œã°å±é™º.
- å¥åº·: ç«éå‰° â†’ å¿ƒè‡“ã€è„³è¡€ç®¡ã€ç‚ç—‡ / æ°´éå‰° â†’ é¬±ã€ãƒ›ãƒ«ãƒ¢ãƒ³ã€ç”Ÿæ®–å™¨
- è²¡ç‰©: ã€Œã“ã®å¹´ã¯æ‹¡å¼µç¦æ­¢ã€‚ã‚ã‚‹ã‚‚ã®ã‚’å®ˆã‚‹ã“ã¨ã«é›†ä¸­ã›ã‚ˆã€‚ã€
44. å¤©å¹²åˆå¤‰ç¯€ - åŠ©ã‘ãŒæ•µã«:
- æ­³é‹å¤©å¹²ãŒæœˆå¹²ã¨åˆã—ã¦æ‚ªã„äº”è¡Œã«å¤‰ã‚ã‚Œã°ã€ŒåŠ©ã‘ã«æ¥ãŸã¨æ€ã£ãŸã‚‰æ•µã€.
- ä¾‹ï¼š ä¸™ï¼ˆåŠ©ã‘ï¼‰ãŒè¾›ï¼ˆè²¡æ˜Ÿï¼‰ã¨åˆã—ã¦æ°´ï¼ˆç§ã‚’å‰‹ã™ï¼‰ã«å¤‰æ›.
- ã€Œå‹äººã®æŠ•è³‡å‹§èª˜ã€å…±åŒäº‹æ¥­ææ¡ˆã«æ³¨æ„ã€‚è‰¯ã„æ„å›³ãŒæ‚ªã„çµæœã‚’ç”Ÿã‚€å¯èƒ½æ€§ã€‚ã€
45. åœ°æ”¯å…­åˆ â†’ å¿Œç¥åŒ–(å…­åˆåŒ–å¿Œ):
- æ­³é‹åœ°æ”¯ãŒåŸå±€åœ°æ”¯ã¨åˆã—ã¦å¿Œç¥äº”è¡Œã«å¤‰ã‚ã‚Œã°å±é™º.
- ã€Œå’Œåˆã®ä»®é¢ã‚’è¢«ã£ãŸè£åˆ‡ã‚Šã€- è‰¯ãè¦‹ãˆã‚‹çŠ¶æ³ãŒæ‚ªã„çµæœã«.
- æ™‚æ”¯ãŒåˆåŒ–ã™ã‚Œã°:ã€Œå­å¥³/æ™©å¹´/äº‹æ¥­ã§äºˆæƒ³å¤–ã®æå¤±ã€‚ã€
46. å¼±ä½“ + è²¡æ˜Ÿæ ¼(å¼±é«”è²¡æ ¼) - é‡‘ã«è¿½ã‚ã‚Œã‚‹äººç”Ÿ:
- èº«å¼·åº¦20%æœªæº€ã§æ ¼å±€ãŒè²¡æ˜Ÿæ ¼ãªã‚‰ã€Œä½“ãŒè€ãˆã‚‰ã‚Œãªã„ã»ã©ã®é‡‘ã‚’è¿½ã†å½¢å±€ã€.
- ã€Œé‡‘ã‚’è¿½ã£ã¦å¥åº·ã‚’å¤±ã†ã€‚ã‚¹ãƒˆãƒ¬ã‚¹æ€§ç–¾æ‚£(èƒƒè…¸ã€ç¥çµŒæ€§)ã«æ³¨æ„ã€‚ã€
- åŠ©è¨€: ã€Œé…å¶è€…ã‚„å°‚é–€å®¶ã«è²¡å‹™ç®¡ç†ã‚’ä»»ã›ã€æœ¬äººã¯å¥åº·å„ªå…ˆã€‚ã€
47. ä»®å¾“æ ¼(å‡å¾æ ¼) - æœ¬å½“ã®å¾“æ ¼ã‹ï¼Ÿ:
- èº«å¼·åº¦0-5%ã§ç‰¹å®šäº”è¡ŒãŒ4ã¤ä»¥ä¸Šæ”¯é…çš„ãªã‚‰ã€Œå¾“æ ¼ã€ã®å¯èƒ½æ€§.
- å¾“æ ¼ãªã‚‰æ”¯é…äº”è¡Œã«å¾“ã†ã®ãŒå‰ã€é€†ã‚‰ãˆã°å‡¶.
- åˆ¤åˆ¥: ã€Œç”¨ç¥æ¬„ã«è¨˜è¼‰ã®ç”¨ç¥ã‚’ç„¡æ¡ä»¶ã«å¾“ã£ã¦ãã ã•ã„ã€‚æŠ‘æ‰¶è«–ã¨å¾“æ ¼è«–ã®æ··åŒç¦æ­¢ã€‚ã€
48. å¤§é‹é †é€†ç¢ºèª:
- é™½å¹´(ç”²ä¸™æˆŠåºšå£¬)ç”·æ€§ / é™°å¹´å¥³æ€§ = é †è¡Œ(åœ°æ”¯é †åºé€šã‚Š)
- é™½å¹´å¥³æ€§ / é™°å¹´ç”·æ€§ = é€†è¡Œ(åœ°æ”¯é€†é †)
- ãƒ‡ãƒ¼ã‚¿ã®å¤§é‹ãŒã“ã®æ³•å‰‡ã«åˆã£ã¦ã„ã‚‹ã‹ç¢ºèªå¾Œè§£é‡ˆã—ã¦ãã ã•ã„.
49. ç™½è™å¤§æ®º - è¡€ã‚’å‘¼ã¶æ—¥:
- ç”²è¾°, ä¹™å·³, ä¸™æˆŒ, ä¸ä¸‘, æˆŠè¾°, å·±å·³, åºšæˆŒ, è¾›ä¸‘, å£¬è¾°, ç™¸å·³ æ—¥æŸ±.
- ã€Œæ™®æ®µã¯æ¸©å’Œã ãŒæ€’ã‚‹ã¨æ€–ã„ã€‚è¡€ã‚’è¦‹ã‚‹ã“ã¨(æ‰‹è¡“ã€äº‹æ•…ã€å‡ºç”£)ã¨é–¢é€£ã€‚ã€
- è·æ¥­: ã€ŒåŒ»ç™‚ã€è»äººã€å®—æ•™ã€æ­¦è¡“ã®åˆ†é‡ã§ã“ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæµ„åŒ–ã•ã‚Œã‚‹ã€‚ã€
50. åäºŒé‹æ˜Ÿå†æ¤œè¨¼:
- æ—¥æ”¯åäºŒé‹æ˜ŸãŒãƒ‡ãƒ¼ã‚¿ã¨å®Ÿéš›ã®è¨ˆç®—ãŒåˆã£ã¦ã„ã‚‹ã‹ç¢ºèªã—ã¦ãã ã•ã„.
- ç«æ—¥å¹²: å¯…=é•·ç”Ÿã€åˆ=å¸æ—ºã€æˆŒ=å¢“ / æ°´æ—¥å¹²: ç”³=é•·ç”Ÿã€å­=å¸æ—ºã€è¾°=å¢“
- ãƒ‡ãƒ¼ã‚¿ãŒé–“é•ã£ã¦ã„ã‚Œã°ã€Œè¨ˆç®—ã‚¨ãƒ©ãƒ¼ã®å¯èƒ½æ€§ã€ã‚’è¨€åŠã—æ­£ã—ã„åäºŒé‹æ˜Ÿã§è§£é‡ˆã—ã¦ãã ã•ã„.
51. ä¸‰åˆå±€å®Œæˆæ™‚æ ¼å±€å†å®šç¾©:
- ä¸‰åˆå±€ãŒå®Œæˆã™ã‚Œã°ãã®äº”è¡ŒãŒå››æŸ±ã‚’æ”¯é…ã—ã¾ã™ã€‚æ ¼å±€æ¬„ã®åç§°ã‚ˆã‚Šã€Œä¸‰åˆå‹¢åŠ›ã€ã‚’å„ªå…ˆã—ã¦è§£é‡ˆã—ã¦ãã ã•ã„.
- äº¥å¯æœªæœ¨å±€(äº¥å¯æœª æœ¨å±€) å®Œæˆ â†’ é£Ÿå‚·ï¼ˆæœ¨ï¼‰ãŒæ”¯é… â†’ 'é£Ÿç¥æ ¼/å‚·å®˜æ ¼'ã§ å†è§£é‡ˆã€‚ "å‰µä½œã€èŠ¸è¡“ã€è‡ªç”±ãªè¡¨ç¾æ¬²æ±‚ãŒå¼·ã„"
- å¯…åˆæˆŒ ç«å±€(å¯…åˆæˆŒ ç«å±€) å®Œæˆ â†’ ç«ãŒæ”¯é… â†’ ç«åŸºæº–ã®åç¥ã§æ ¼å±€å†å®šç¾©ã€‚"æƒ…ç†±ã€åèª‰ã€è¡¨å‡ºæ¬²æ±‚ã®æ¥µå¤§åŒ–"
- å·³é…‰ä¸‘ é‡‘å±€(å·³é…‰ä¸‘ é‡‘å±€) å®Œæˆ â†’ é‡‘ãŒæ”¯é… â†’ 'è²¡æ˜Ÿæ ¼' ã¾ãŸã¯ 'å®˜æ˜Ÿæ ¼'ã§. "è²¡ç‰©/æ¨©å¨ã¸ã®åŸ·ç€ã¾ãŸã¯æ‰èƒ½"
- ç”³å­è¾° æ°´å±€(ç”³å­è¾° æ°´å±€) å®Œæˆ â†’ æ°´ãŒæ”¯é… â†’ 'æ¯”åŠ«æ ¼' ã¾ãŸã¯ 'å°æ˜Ÿæ ¼'ã§. "çŸ¥æµ, å­¦å•, ã¾ãŸã¯ ç«¶äº‰å¿ƒå¼·åŒ–"
- ä¾‹ï¼š å»ºç¦„æ ¼ã§ è¡¨è¨˜ã•ã‚Œã¦ã„ã¦ã‚‚ äº¥å¯æœªæœ¨å±€ãŒ å®Œæˆã•ã‚ŒãŸãªã‚‰ â†’ "ç¤¾ä¼šçš„æ çµ„ã¿ã¯çµ„ç¹”ç”Ÿæ´»(å»ºç¦„)ã«åˆã†ãŒã€å®Ÿéš›ã®æ¬²æ±‚ã¨èƒ½åŠ›ã¯å‰µä½œ/èŠ¸è¡“(å‚·å®˜)ã‚’å¼·ãè¿½æ±‚"ã¨è§£é‡ˆã—ã¦ãã ã•ã„ã€‚
52. æ ¼å±€ ãƒ©ãƒ™ãƒ«ã¨å®Ÿéš›ã®å‹¢åŠ›ã®ä¹–é›¢è£œæ­£(æ ¼å±€ vs é€å‡º):
- ãƒ‡ãƒ¼ã‚¿ä¸Š 'æ­£è²¡æ ¼'ã§å‡ºã¦ã‚‚, å¤©å¹²ã« åè²¡ï¼ˆç™¸/å£¬ï¼‰ãŒé€å‡ºã— è²¡æ˜ŸãŒ3å€‹ä»¥ä¸Šãªã‚‰ 'è²¡å¤šèº«å¼±' è¦³ç‚¹ã§ è§£é‡ˆã—ã¦ãã ã•ã„.
- æ­£è²¡æ ¼ãƒ©ãƒ™ãƒ« + åè²¡é€å‡º = "èª å®Ÿãªã‚µãƒ©ãƒªãƒ¼ãƒãƒ³"ã§ã¯ãªã "æŠ•æ©Ÿæ€§ã¨é‡‘æ¬²ãŒå¼·ã„ãŒä½“åŠ›ãŒä¸è¶³ã™ã‚‹ã‚¿ã‚¤ãƒ—åˆ‘"
- æ­£å®˜æ ¼ãƒ©ãƒ™ãƒ« + åå®˜é€å‡º = "æ¸©é †ãªä¼šç¤¾å“¡"ã§ã¯ãªã "è²¬ä»»æ„Ÿã¨åœ§è¿«æ„Ÿã«è‹¦ã—ã‚€ãƒªãƒ¼ãƒ€ãƒ¼"
- æ ¸å¿ƒ: æ ¼å±€ã®'ãƒ©ãƒ™ãƒ«'ã‚ˆã‚Šå¤©å¹²ã«'é€å‡ºã—ãŸåç¥'ã¨'äº”è¡Œå€‹æ•°'ã‚’å„ªå…ˆã—ã¦å®Ÿè³ªçš„æ€§å‘ã‚’åˆ¤æ–­ã—ã¦ãã ã•ã„.
53. æ”¯è”µå¹² èª¿å€™ç”¨ç¥ã®å†ç™ºè¦‹(æ”¯è”µå¹²èª¿å€™):
- ãƒ‡ãƒ¼ã‚¿ä¸Š ç‰¹å®šäº”è¡ŒãŒ'0å€‹(å®Œå…¨ä¸åœ¨)'ã¨å‡ºã¦ã‚‚ã€æ”¯è”µå¹²ã«è©²å½“äº”è¡ŒãŒæš—è”µã•ã‚Œã¦ã„ã‚Œã°å¿…ãšè¨€åŠã—ã¦ãã ã•ã„ã€‚
- ç‰¹ã«èª¿å€™ç”¨ç¥ï¼ˆç«/æ°´ï¼‰ãŒæ”¯è”µå¹²ã«ã®ã¿ã‚ã‚‹å ´åˆ: "å”¯ä¸€ã®å‘½ç¶±ãŒéš ã‚Œã¦ã„ã‚‹"ã¨è§£é‡ˆã€‚
- ä¾‹ï¼š å†¬å››æŸ±(äº¥/å­æœˆ)ã«ç«ãŒå¤©å¹²ã«ãªã„ãŒ æ—¥æ”¯æœªã®ä¸­ã®ä¸ç«ãŒã‚ã‚Œã° â†’ "é…å¶è€… ã®å ´(æ—¥æ”¯)ã«å”¯ä¸€ã®æ¸©ã‚‚ã‚ŠãŒéš ã‚Œã¦ã„ã‚‹ã€‚å®¶åº­ãŒå®‰ã‚‰ã‹ã§ã‚ã£ã¦ã“ãç™ºç¦ã™ã‚‹ã€‚"
- ä¾‹ï¼š å¤å››æŸ±ï¼ˆå·³/åˆæœˆï¼‰ã«æ°´ãŒå¤©å¹²ã«ãªã„ãŒ æ—¥æ”¯è¾°ã®ä¸­ã®ç™¸æ°´ãŒã‚ã‚Œã° â†’ "å†…é¢ã®çŸ¥æµï¼ˆæ—¥æ”¯ï¼‰ãŒéç†±ã‚’å†·ã¾ã™ã€‚ç‘æƒ³ã¨å­¦ç¿’ãŒé–‹é‹æ³•ã€‚"
54. æ—ºç¥æ²–ç™ºæ™‚ã«ä¿å®ˆçš„ è§£é‡ˆ(æ—ºç¥æ²–ç™ºå®ˆæˆè«–) - èª¿å€™ç”¨ç¥ã‚ˆã‚Šå„ªå…ˆ:
- åŸå±€ã« ä¸€ã¤ã®äº”è¡ŒãŒ4å€‹ä»¥ä¸Š(å¤ªæ—º)ãªã®ã«æ­³é‹ã§ãã®äº”è¡Œã‚’å†²ã™ã‚Œã°ã€èª¿å€™ç”¨ç¥ã§ã‚ã£ã¦ã‚‚'ç™ºç¦'ã‚ˆã‚Š'å®ˆæˆ(å®ˆã‚Š)'ã‚’å¼·èª¿ã—ã¦ãã ã•ã„ã€‚
- æ ¸å¿ƒ: å†¬å››æŸ±ã«ç«ãŒèª¿å€™ç”¨ç¥ã§ã‚ã£ã¦ã‚‚, æ°´ãŒ4å€‹ä»¥ä¸Šæ—ºã˜ã¦ã„ã‚‹ã®ã«ç«ãŒå†²ã™ã‚Œã°å±é™ºãŒåˆ©å¾—ã‚ˆã‚Šå¤§ãã„ã§ã™ã€‚
- ä¾‹ï¼š æ°´5å€‹ + 2026å¹´åˆï¼ˆç«ï¼‰å­åˆå†² â†’ "èª¿å€™ç”¨ç¥(ç«)ãŒæ¥ãŸãŒå·¨å¤§ãªæ°´(æ°´)ã‚’åˆºæ¿€ã—ã¦æ´¥æ³¢ã®å±é™ºã€‚æ‹¡å¼µã‚ˆã‚Šå¥åº·ç®¡ç†ã¨ç¾çŠ¶ç¶­æŒãŒæœ€å–„ã€‚"
- æ—ºç¥å†²ç™º + ç”¨ç¥é‹ = "ãƒãƒ£ãƒ³ã‚¹ã¯æ¥ãŸãŒãƒªã‚¹ã‚¯ã‚‚æ¥µå¤§åŒ–ã€‚æ”»æ’ƒçš„æŠ•è³‡/æ‹¡å¼µç¦æ­¢ã€‚å®ˆå‚™ãƒ¢ãƒ¼ãƒ‰ã«è»¢æ›."
- å¥åº·: æ—ºç¥äº”è¡Œã®è‡“å™¨ + å†²ã™ã‚‹äº”è¡Œã®è‡“å™¨ã™ã¹ã¦å±é™ºã€‚ ä¾‹ï¼š æ°´æ—º + ç«å†² â†’ è…è‡“/è†€èƒ± + å¿ƒè‡“/è¡€ç®¡ åŒæ™‚æ³¨æ„ã€‚
===== ğŸ†• æ‹¡å¼µãƒ«ãƒ¼ãƒ« 55-70 (v32.5) =====
55. ã€åœ°æ”¯é™°é™½å‚ç…§è¡¨ã€‘
â€¢ é™½(é™½)åœ°æ”¯: å­, å¯…, è¾°, åˆ, ç”³, æˆŒ
â€¢ é™°(é™°)åœ°æ”¯: ä¸‘, å¯, å·³, æœª, é…‰, äº¥
â€¢ åç¥ãƒ«ãƒ¼ãƒ«: åŒã˜é™°é™½ â†’ åã€ç•°ãªã‚‹é™°é™½ â†’ æ­£
â€¢ ä¾‹ï¼š å·±(é™°åœŸ) vs å¯(é™°æœ¨) = åå®˜, NOT æ­£å®˜
56. ã€ä¸‰åˆå±€/æ–¹åˆ = x10å€ç‡åŠ¹æœã€‘
â€¢ æ–¹åˆã¾ãŸã¯ä¸‰åˆã®å®Œæˆã¯å˜ç´”åˆç®—ã§ã¯ã‚ã‚Šã¾ã›ã‚“.
â€¢ å·³åˆæœª(å—æ–¹ç«å±€) = ç« x10ã€äº¥å­ä¸‘(åŒ—æ–¹æ°´å±€) = æ°´ x10
â€¢ å¤§é‹/æ­³é‹ã§å±€å®Œæˆ = ã€Œæ ¸çˆ†å¼¾ç´šã‚¤ãƒ™ãƒ³ãƒˆã€ã¨è§£é‡ˆã—ã¦ãã ã•ã„.
57. ã€é€šæ ¹ vs åäºŒé‹æ˜Ÿã®çµ¶å¯¾åŒºåˆ†ã€‘
â€¢ ã€Œæœ¬ç‰©ã®é€šæ ¹ã€= æ”¯è”µå¹²ã«æ¯”åŠ«/å°æ˜ŸãŒå­˜åœ¨ â†’ è‡ªåˆ†ã®åŠ›
â€¢ ã€Œé•·ç”Ÿã€= åäºŒé‹æ˜Ÿã®ä½ç½®ã€å¾Œæ´è€…ã®åŠ©ã‘
â€¢ ã€Œç„¡æ ¹æœ‰åº‡ã€= æ ¹ã¯ãªã„ãŒä¿è­·ã•ã‚Œã‚‹çŠ¶æ…‹ãŒå¯èƒ½
58. ã€è²¡æ˜Ÿè§£é‡ˆã®éšå±¤ã€‘
â€¢ èº«å¼±(0-30%) + è²¡æ˜Ÿæ ¼ = ã€Œä¸å®‰ãªè¿½è·¡è€…ã€(é‡‘ã«è¿½ã‚ã‚Œã‚‹äººç”Ÿ)
â€¢ èº«å¼·(70%+) + æ¯”åŠ«æ­³é‹ = ã€Œå¼·å¥ªè­¦å‘Šã€(å‹äºº/å…„å¼ŸãŒè²¡ç‰©è„…å¨)
59. ã€èª¿å€™ vs æŠ‘æ‰¶ã®å„ªå…ˆé †ä½ã€‘
â€¢ èª¿å€™(å­£ç¯€å‡è¡¡)ãŒæŠ‘æ‰¶(å¼·å¼±å‡è¡¡)ã‚ˆã‚Šå„ªå…ˆã—ã¾ã™.
â€¢ ãƒ‡ãƒ¼ã‚¿ã«ã€Œå¿Œç¥:æ°´ã€+ã€ŒçœŸå†¬ã®å››æŸ±ã€ãŒåŒæ™‚ã«ã‚ã‚Œã° â†’ èª¿å€™è«–ã«å¾“ã„æ°´ãŒå¿Œç¥
60. ã€ç«å±€ç‰¹æ®Šãƒ«ãƒ¼ãƒ«ã€‘
â€¢ å¯…åˆæˆŒ ç«å±€å®Œæˆ = ã€Œæº¶é‰±ç‚‰ã®å››æŸ±ã€
â€¢ æ°´ã®è¦ç´ (å®˜æ˜Ÿ/è·å ´)ãŒã€Œè’¸ç™ºã€= ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã•ã‚Œã‚‹ã“ã¨ã‚’æ¥µåº¦ã«å«Œã†
â€¢ æ¨å¥¨: è‡ªå¾‹çš„ã‚­ãƒ£ãƒªã‚¢ï¼ˆãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã€ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ã€æŒ‡æ®å®˜ï¼‰
61. ã€åŒå¹²ç¾è±¡ã€‘
â€¢ åŒã˜å¤©å¹²2ã¤(ä¸™ä¸™ã€ç”²ç”²ç­‰) = ã€Œã‚¹ãƒãƒƒãƒˆãƒ©ã‚¤ãƒˆ + ç«¶äº‰ã€
â€¢ æ³¨ç›®ã•ã‚ŒãŸã„ãŒå…„å¼Ÿ/ãƒ©ã‚¤ãƒãƒ«ã¨è¡çª
62. ã€èº«å¼·ç«ã®è²¡ç‰©æˆ¦ç•¥ã€‘
â€¢ ç«ãŒåœ§å€’çš„ãªã‚‰é‡‘(è²¡æ˜Ÿ)ãŒæº¶ã‘ã¦ã—ã¾ã†
â€¢ ã€Œé‡‘ã‚’ç›´æ¥è¿½ãˆã°é‡‘ãŒæº¶ã‘ã‚‹ã€
â€¢ åŠ©è¨€: ã€Œã¾ãšå®ŸåŠ›/ãƒ–ãƒ©ãƒ³ãƒ‰(åœŸ)ã‚’ç¯‰ã„ã¦ç†±ã‚’å†·ã¾ã›ã€
63. ã€0å€‹äº”è¡Œ vs æ ¼å±€è¡çªã€‘
â€¢ ç‰¹å®šäº”è¡Œ0å€‹ãªã®ã«æ ¼å±€ãŒãã®äº”è¡Œã«ä¾å­˜ â†’ æ ¼å±€ãƒ©ãƒ™ãƒ«ç„¡è¦–
â€¢ è§£é‡ˆï¼š ã€Œè¦å‰‡ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’å«Œã†è‡ªç”±ãªé­‚ã€
64. ã€é§…é¦¬æ”¯é…ã€‘
â€¢ ç§»å‹•åœ°æ”¯ï¼ˆå¯…ã€ç”³ã€å·³ã€äº¥ï¼‰ãŒ2å€‹ä»¥ä¸Š
â€¢ "å‹•ã„ã¦ã“ããŠé‡‘ã«ãªã‚‹"
â€¢ æ¨å¥¨è·æ¥­ï¼šè²¿æ˜“ã€ç‰©æµã€æ—…è¡Œã€å–¶æ¥­
65. ã€éå°æ˜Ÿ - æ¯è¦ªéè² è·ã€‘
â€¢ å°æ˜Ÿï¼ˆç§ã‚’ç”Ÿã˜ã‚‹äº”è¡Œï¼‰ãŒ3å€‹ä»¥ä¸Š = "åˆ†æéº»ç—º"
â€¢ åŠ©è¨€: "è¨ˆç”»ã¯ã‚‚ã†ã‚„ã‚ã¦å®Ÿè¡Œã›ã‚ˆã€‚è¦ª/ãƒ¡ãƒ³ã‚¿ãƒ¼ã‹ã‚‰ã®ç²¾ç¥çš„ç‹¬ç«‹ å¿…è¦"
66. ã€é¬¼é–€é–¢æ®ºã€‘
â€¢ å¯ç”³ã¾ãŸã¯å¯…äº¥ç›¸äº’ä½œç”¨ï¼è¶…ç›´è¦³ï¼‹ä¸å®‰å‚¾å‘
â€¢ ã‚­ãƒ£ãƒªã‚¢ï¼šç²¾å¯†èŠ¸è¡“ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã€æˆ¦ç•¥ã€å¿ƒç†å­¦ã§æ•æ„Ÿã•ã‚’æ˜‡è¯
67. ã€ç”¨ç¥ éå‰°ä¾›çµ¦ã€‘
â€¢ ç”¨ç¥äº”è¡ŒãŒã™ã§ã«3å€‹ä»¥ä¸Šï¼éå‰°ä¾›çµ¦
â€¢ æœ¬å½“ã«å¿…è¦ãªã®ã¯ç”¨ç¥ã® "ç”£å‡ºç‰©" äº”è¡Œ
68. ã€åˆå±€ vs æ²–åŒæ™‚ï¼ˆåˆæ²–ç›¸æˆ¦ï¼‰ã€‘
â€¢ ä¸‰åˆã¨å…­æ²–ãŒåŒæ™‚å­˜åœ¨æ™‚ã€æ²–ãŒå±€ã®æ ¸å¿ƒã‚’æ”»æ’ƒ
â€¢ å†…çš„è‘›è—¤ï¼šã€Œå¤–éƒ¨åœ§åŠ›ï¼ˆå±€ï¼‰vs å€‹äººé˜²å¾¡ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ï¼ˆå†²ï¼‰ã€
â€¢ è§£é‡ˆï¼š "æ‰¹åˆ¤çš„æ€è€ƒãŒã‚ãªãŸã®ç§˜å¯†å…µå™¨"
69. ã€ä¸åœ¨äº”è¡Œåˆ¥æˆ¦ç•¥ã€‘
â€¢ é£Ÿå‚·0å€‹: "ã‚¹ãƒˆãƒ¬ã‚¹å†…åœ¨åŒ–ã€‚å‰µä½œ/é‹å‹•ã§ç™ºæ•£å¿…é ˆ"
â€¢ è²¡æ˜Ÿ0å€‹: "è“„ç©ã‚ˆã‚Šæµã‚Œã€‚å®ŸåŠ›/åœ°ä½ã«é›†ä¸­ â†’ ãŠé‡‘ã¯ã¤ã„ã¦ãã‚‹"
â€¢ å®˜æ˜Ÿ 0å€‹: "è¦å‰‡å«Œã„ã€‚è‡ªå¾‹çš„ã‚­ãƒ£ãƒªã‚¢ å¿…é ˆ"
â€¢ å°æ˜Ÿ 0å€‹: "è¦ªã¸ã®ä¾å­˜ä¸å¯ã€‚è‡ªã‚‰å­¦ã‚“ã§å®‰å…¨ç¶²ã‚’æ§‹ç¯‰"
70. ã€å–œç¥/å¿Œç¥å¿…é ˆæ˜ç¤ºè¦å‰‡ã€‘ â­ NEW (v32.5)
â€¢ ç”¨ç¥ã‚’åˆ†æã™ã‚‹éš›ã«å¿…ãšæ¬¡ã®å½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”¨ç¥ï¼šâ—‹â—‹ï¼ˆç†ç”±ï¼‰ â”‚
â”‚ å–œç¥ï¼šâ—‹â—‹ï¼ˆç”¨ç¥ã‚’ç”Ÿã˜ã¦è£œåŠ©ï¼‰ â”‚
â”‚ å¿Œç¥ï¼šâ—‹â—‹ï¼ˆæ—¥å¹²ã‚’å®³ã™ã‚‹äº”è¡Œï¼‰ â”‚
â”‚ é–‘ç¥: â—‹â—‹ (å¿Œç¥ã‚’åŠ©ã‘ã‚‹äº”è¡Œ) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â€¢ ãŒ4å€‹ä¸­ã€ç”¨ç¥/å–œç¥/å¿Œç¥ã¯å¿…ãšæ˜ç¤ºã—ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“.
â€¢ æŠœã‘è½ã¡ã‚‹ã¨åˆ†æãŒä¸å®Œå…¨ã«ãªã‚Šã¾ã™!
===== ğŸ†• æ‹¡å¼µè¦å‰‡71-82 (v34.4) =====
71. ã€æ–¹åˆã®åŠ›ã€‘
â€¢ äº¥å­ä¸‘ (åŒ—æ–¹æ°´å±€ï¼‰ï¼šè·æ¥­æŸ”è»Ÿæ€§ x10
â€¢ å¯…å¯è¾° (æ±æ–¹æœ¨å±€ï¼‰ï¼šæˆé•·/æ‹¡å¼µ x10
â€¢ å·³åˆæœª (å—æ–¹ç«å±€ï¼‰ï¼šåèª‰/æƒ…ç†± x10
â€¢ ç”³é…‰æˆŒ (è¥¿æ–¹é‡‘å±€ï¼‰ï¼šç²¾å¯†/æ¨©å¨ x10
72. ã€æ¥µç«¯ãªèº«å¼·/èº«å¼±é€†è»¢ã€‘
â€¢ æ—¥å¹² < 10% â†’ å¾“æ ¼ è€ƒæ…®
â€¢ æ—¥å¹² > 85% â†’ æ¥µèº«å¼·è€ƒæ…®
â€¢ ä¸€èˆ¬çš„ãª"èº«å¼±è£œå¼·/èº«å¼·æ´©æ°—"è«–ç†ãŒé€†è»¢ã™ã‚‹
73. ã€é…å¶è€…å®® åˆ†æã€‘
â€¢ æ—¥æ”¯ = é…å¶è€…å®®
â€¢ å¹´æ”¯/æœˆæ”¯ã¨æ²–â†’åˆæœŸæ‹æ„›å›°é›£
â€¢ åˆâ†’çµå©šé‹è‰¯å¥½
â€¢ å¢“ï¼ˆå¢“ï¼‰ã«åº§ã™ â†’ "é…å¶è€… çµ±åˆ¶" ã¾ãŸã¯ çµå©šé…å»¶
74. ã€æ­³é‹å€ç‡å™¨ã€‘
â€¢ æ­³é‹ãŒå±€å®Œæˆâ†’å¤§å½“ãŸã‚Šã®å¹´
â€¢ æ­³é‹ãŒæ—¥æ”¯å†²â†’é…å¶è€…/è‡ªèº«å¤‰é©ã®å¹´
â€¢ æ­³é‹ï¼æ—¥æ”¯ã¨åŒã˜ï¼ˆä¼åŸï¼‰â†’ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£æ··ä¹±ã®å¹´
75. ã€å¤§é‹åˆ¥ã‚­ãƒ£ãƒªã‚¢ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€‘
â€¢ è²¡æ˜Ÿå¤§é‹ï¼ˆ20-30ä»£ï¼‰â†’å‰µæ¥­æœ€é©æœŸ
â€¢ å®˜æ˜Ÿå¤§é‹ï¼ˆ30-40ä»£ï¼‰â†’æ˜‡é€²/ã‚µãƒ©ãƒªãƒ¼ãƒãƒ³æœ€é©æœŸ
â€¢ å°æ˜Ÿå¤§é‹ï¼ˆ40-50ä»£ï¼‰â†’æ•™è‚²/ã‚³ãƒ³ã‚µãƒ«ãƒ†ã‚£ãƒ³ã‚°æœ€é©æœŸ
76. ã€äº”è¡Œåˆ¥å¥åº·ãƒãƒƒãƒ”ãƒ³ã‚°ã€‘
â€¢ æœ¨ï¼è‚è‡“ã€ç›®ã€ç­‹ã€æ€’ã‚Š
â€¢ ç«ï¼å¿ƒè‡“ã€è¡€æ¶²ã€ä¸å®‰
â€¢ åœŸï¼è„¾è‡“ã€èƒƒè…¸ã€å¿ƒé…
â€¢ é‡‘ï¼è‚ºã€çš®è†šã€æ‚²ã—ã¿
â€¢ æ°´ï¼è…è‡“ã€éª¨ã€ææ€–
77. ã€æ‹æ„›ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€‘
â€¢ ç”·æ€§ï¼šè²¡æ˜Ÿã®å¹´ï¼æ‹æ„›æ©Ÿä¼š
â€¢ å¥³æ€§ï¼šå®˜æ˜Ÿã®å¹´ï¼æ‹æ„›æ©Ÿä¼š
â€¢ æ¡ƒèŠ±æ®ºã®å¹´ï¼é­…åŠ›ã‚¨ãƒãƒ«ã‚®ãƒ¼ä¸Šæ˜‡
78. ã€æŠ•è³‡ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€‘
â€¢ è²¡æ˜Ÿå¤§é‹ï¼‹ç”¨ç¥ã®å¹´ï¼æŠ•è³‡é©æœŸï¼ˆé’ä¿¡å·ï¼‰
â€¢ æ¯”åŠ« å®³ = æŠ•è³‡ç¦æ­¢(èµ¤ä¿¡å·)ã€å…±åŒäº‹æ¥­ã‚’é¿ã‘ã‚‹ã“ã¨
â€¢ åè²¡ã®å¹´ï¼æŠ•æ©Ÿçš„ã ãŒå±é™º
79. ã€ç”¨ç¥åˆ¥ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°/ãƒãƒ¼ãƒŸãƒ³ã‚°ã€‘
â€¢ ç«â†’èµ¤ã€å¤ªé™½ã‚¤ãƒ¡ãƒ¼ã‚¸ã€å—
â€¢ æ°´â†’é’/é»’ã€æ³¢ã€åŒ—
â€¢ æœ¨â†’ç·‘ã€æ¤ç‰©ã€æ±
â€¢ é‡‘â†’ç™½/é‡‘è‰²ã€å††å½¢ã€è¥¿
â€¢ åœŸâ†’é»„/èŒ¶è‰²ã€å››è§’å½¢ã€ä¸­å¤®
80. ã€äººç”Ÿæ®µéšåˆ¥æœŸå¾…ã€‘
â€¢ å¹´æŸ±ï¼ˆ0-15æ­³ï¼‰ï¼šå…ˆç¥–ã€å¹¼å¹´æœŸ
â€¢ æœˆæŸ±ï¼ˆ15-30æ­³ï¼‰ï¼šä¸¡è¦ªã€æ•™è‚²
â€¢ æ—¥æŸ±ï¼ˆ30-45æ­³ï¼‰ï¼šæœ¬äººã€é…å¶è€…ã€å…¨ç››æœŸ
â€¢ æ™‚æŸ±ï¼ˆ45æ­³ä»¥ä¸Šï¼‰ï¼šå­å¥³ã€éºç”£
81. ã€æ²–ã®å¹´ã®ç”Ÿå­˜æ³•ã€‘
â€¢ æ—¥æ”¯å†² å®³ â†’ "æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä»•ä¸Šã’"
â€¢ æ²– + é§…é¦¬æ®º â†’ "å¼•è¶Šã—/è»¢è·ã®å¯èƒ½æ€§ãŒé«˜ã„"
â€¢ æ²– + æ¡ƒèŠ±æ®º â†’ "æ‹æ„›ã«æ³¢å‹•"
82. ã€æœˆåˆ¥ãƒªã‚ºãƒ ã€‘
â€¢ ç”¨ç¥äº”è¡Œã®æœˆï¼æ¨ã—é€²ã‚ã‚‹æ™‚
â€¢ å¿Œç¥äº”è¡Œã®æœˆï¼é˜²å¾¡ãƒ¢ãƒ¼ãƒ‰
â€¢ è§£é‡ˆæ™‚ã«æœ‰åˆ©ãªæœˆã‚’å…·ä½“çš„ã«æ˜ç¤ºã—ã¦ãã ã•ã„
â€¢ ç·åˆã‚¢ãƒ‰ãƒã‚¤ã‚¹ã§ç”¨ç¥/å–œç¥/å¿Œç¥ãã‚Œãã‚Œã®æ´»ç”¨æ³•ã‚’å…·ä½“çš„ã«æç¤ºã—ã¦ãã ã•ã„ã€‚
[åˆ†æä¾é ¼äº‹é …]
ä¸Šè¨˜ã®å››æŸ±å…«å­—æƒ…å ±ã‚’åŸºã«ä»¥ä¸‹ã‚’ãã‚Œãã‚Œè©³ç´°ã«è¨˜è¿°å½¢å¼ã§ è§£é‡ˆã—ã¦ãã ã•ã„:
1. ç”Ÿã¾ã‚ŒæŒã£ãŸæ€§æ ¼ã¨æ°—è³ª
- æ—¥å¹²ã®ç‰¹æ€§ã€æ ¼å±€ã®æ„å‘³ã€å…­åç”²å­æ—¥æŸ±è«–ã«åŸºã¥ã
- é•·æ‰€ã¨è£œå®Œã™ã¹ãç‚¹
2. é©æ€§ã¨è·æ¥­é‹
- æ ¼å±€ã€ç”¨ç¥ã€åç¥ã«åŸºã¥ãé©åˆåˆ†é‡
- â­ ç”¨ç¥/å–œç¥/å¿Œç¥ã‚’å¿…ãšæ˜ç¤ºã—æ´»ç”¨æ³•ã‚’èª¬æ˜
- ã‚µãƒ©ãƒªãƒ¼ãƒãƒ³ vs èµ·æ¥­å®¶é©æ€§
3. è²¡ç‰©é‹ã¨é‡‘éŠ­ç®¡ç†
- è²¡æ˜Ÿã®ä½ç½®ã¨å¼·å¼±
- ãŠé‡‘ã‚’ç¨¼ãæ–¹æ³•ã¨ç®¡ç†ã‚¢ãƒ‰ãƒã‚¤ã‚¹
- æš—åˆãŒ ã‚ã‚Œã° ä»–äººãŒçŸ¥ã‚‰ãªã„éå¸¸é‡‘ã‚„å‰¯åå…¥ã®å¯èƒ½æ€§ã‚‚è¨€åŠ
4. æ‹æ„›é‹ã¨çµå©šé‹
- é…å¶è€…æ˜Ÿã€æ—¥æ”¯12é‹æ˜Ÿã€é…å¶è€…å®®åˆ†æ
- ç†æƒ³å‹ã¨çµå©šæ™‚æœŸ
- æš—åˆãŒ ã‚ã‚Œã° ç§˜å¯†ã®æ‹æ„›ã‚„éš ã•ã‚ŒãŸç¸ã®å¯èƒ½æ€§ã‚‚è¨€åŠ
5. å¥åº·æ³¨æ„äº‹é …
- äº”è¡Œä¸å‡è¡¡ã«ã‚ˆã‚‹è„†å¼±éƒ¨ä½
- äºˆé˜²ãŠã‚ˆã³ç®¡ç†æ–¹æ³•
6. ç¾åœ¨ã®é‹å‹¢ (${currentYear}å¹´) + ä»Šæ—¥ã®é‹å‹¢
- ç¾åœ¨ã®å¤§é‹ã¨æ­³é‹ã®çµ„ã¿åˆã‚ã›
- ä»Šå¹´ç‰¹ã«æ³¨æ„ã™ã¹ãç‚¹ã¨æ©Ÿä¼š
- â­ ã€ä»Šæ—¥ã®æ—¥è¾°ã€‘ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ä»Šæ—¥ä¸€æ—¥ã®å…·ä½“çš„ã‚¢ãƒ‰ãƒã‚¤ã‚¹
Â· ä»Šæ—¥ã®æ—¥è¾°ãŒç”¨ç¥/å–œç¥ãªã‚‰â†’ç©æ¥µçš„ã«å‹•ãã¹ãã“ã¨ã€è‰¯ã„æ™‚é–“å¸¯
Â· ä»Šæ—¥ã®æ—¥è¾°ãŒå¿Œç¥ãªã‚‰â†’é¿ã‘ã‚‹ã¹ãã“ã¨ã€æ³¨æ„ã™ã¹ãç‚¹
Â· æ—¥è¾°åç¥ã«ã‚ˆã‚‹ä»Šæ—¥ã®ãƒ†ãƒ¼ãƒ (ä¾‹ï¼š åè²¡æ—¥ãªã‚‰è²¡ç‰©ãƒãƒ£ãƒ³ã‚¹ã€å®˜æ®ºæ—¥ãªã‚‰è·å ´æ³¨æ„)
7. äººç”Ÿå…¨èˆ¬ã®æµã‚Œ
- å®®ä½åˆ¥æ™‚æœŸåˆ†æï¼ˆå¹¼å¹´-é’å¹´-ä¸­å¹´-æ™©å¹´ï¼‰
- ä¸»è¦è»¢æ›ç‚¹ã¨å‚™ãˆæ–¹
8. ç·åˆã‚¢ãƒ‰ãƒã‚¤ã‚¹
- â­ ç”¨ç¥/å–œç¥/å¿Œç¥æ´»ç”¨ã®å…·ä½“çš„æ–¹æ³•ï¼ˆè‰²ã€æ–¹ä½ã€è·æ¥­ã€äººé–“é–¢ä¿‚ï¼‰
- ã“ã®å››æŸ±ã®æ ¸å¿ƒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¸€è¡Œè¦ç´„
===== âš ï¸ AIå¿…é ˆæŒ‡é‡ - å¿…ãšéµå®ˆ âš ï¸ =====
ã€æä¾›ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ - ç›´æ¥è¨ˆç®—ç¦æ­¢ã€‘
1. åç¥ãƒãƒƒãƒ”ãƒ³ã‚°è¡¨ãŒäº‹å‰ã«è¨ˆç®—ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚ã©ã®äº”è¡ŒãŒã©ã®åç¥ã‹ç›´æ¥è¨ˆç®—ã—ãªã„ã§ãã ã•ã„ã€‚
2. åœ°æ”¯åç¥ãŒæä¾›ã•ã‚Œã¾ã™ã€‚å„åœ°æ”¯ã®äº”è¡Œã«ã‚ˆã‚‹åç¥ãŒ ã‚ã‚Šã¾ã™.
3. å¤§é‹ åç¥ãŒ [å¤©å¹²/åœ°æ”¯] åˆ‘ã®å½¢ã§æä¾›ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚’ãã®ã¾ã¾ä½¿ç”¨ã—ã¦ãã ã•ã„.
4. æ­³é‹ åç¥ã‚‚æä¾›ã•ã‚Œã¾ã™ã€‚ç›´æ¥å†è¨ˆç®—ã—ãªã„ã§ãã ã•ã„.
ã€AIãŒã‚ˆãé–“é•ãˆã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ - æ³¨æ„ã€‘
1. âŒ åœ°æ”¯åç¥ç„¡è¦– - åœ°æ”¯ã«ã‚‚åç¥ãŒã‚ã‚Šã¾ã™! "ã‚¨ãƒãƒ«ã‚®ãƒ¼"ã ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“.
2. âŒ å¾—ä»¤/å¤±ä»¤æ··åŒ - æœˆä»¤å¾—ä»¤/å¤±ä»¤ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚äº‹å‰ã«è¨ˆç®—ã•ã‚Œã¦ã„ã¾ã™ã€‚
3. âŒ å¤§é‹èª¤è§£é‡ˆ - æä¾›ã•ã‚ŒãŸ [å¤©å¹²/åœ°æ”¯] åç¥ãƒ©ãƒ™ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„.
4. âŒ é™°é™½æ··åŒ - ç”²ä¸™æˆŠåºšå£¬ã¯é™½ã€ä¹™ä¸å·±è¾›ç™¸ã¯é™°ã§ã™ã€‚
5. âŒ åè²¡/æ­£è²¡åŒºåˆ†å¤±æ•— - å…¨ä½“ãƒ©ãƒ™ãƒ«ã‚’ç¢ºèªã—ã¦ãã ã•ã„.
6. âŒ æœˆä»¤ç„¡è¦– - æœˆæ”¯åç¥ãŒèº«å¼·/èº«å¼±åˆ¤æ–­ã«æœ€ã‚‚é‡è¦ã§ã™ã€‚
ã€è§£é‡ˆå„ªå…ˆé †ä½ã€‘
1. ä¸‰åˆå±€/å…­åˆç­‰ã®åˆã‚’ã¾ãšç¢ºèª
2. å¾—ä»¤/å¤±ä»¤çŠ¶æ…‹ - åŸºæœ¬å¼·å¼±åˆ¤æ–­
3. å¤§é‹+æ­³é‹åç¥ - ç¾åœ¨ã®äººç”Ÿãƒ†ãƒ¼ãƒ
4. åœ°æ”¯åç¥ - éš ã•ã‚ŒãŸå½±éŸ¿åŠ›
5. æ®‹ã‚Šã®è¦ç´ 
`;safeClipboard(text, 'ğŸ“‹ ã‚³ãƒ”ãƒ¼å®Œäº†ï¼Geminiã‚„ChatGPTã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„');} catch(err) {console.error('ã‚³ãƒ”ãƒ¼ã‚¨ãƒ©ãƒ¼:', err);toast('ã‚³ãƒ”ãƒ¼ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');}}

function analyzeMatchWrapped() {
  if (!SAJU) { toast('ã¾ãš[å››æŸ±åˆ†æ]ã§è‡ªåˆ†ã®å››æŸ±ã‚’åˆ†æã—ã¦ãã ã•ã„'); return; }
  showOracleLoading(['âœ¦ äºŒã¤ã®æŸ±ã‚’ä¸¦ã¹ã¦ã„ã‚‹...', 'âœ¦ ç¸ã®ç³¸ã‚’èª­ã‚“ã§ã„ã‚‹...', 'âœ¦ K-ãƒ ãƒ¼ãƒ€ãƒ³ãŒäºŒäººã®é‹å‘½ã‚’è¦‹ã¦ã„ã‚‹...'], function() { analyzeMatchCore(); });
}
function analyzeMatchCore() {try {if (!SAJU) { toast('ã¾ãš[å››æŸ±åˆ†æ]ã§è‡ªåˆ†ã®å››æŸ±ã‚’åˆ†æã—ã¦ãã ã•ã„'); return; }
let py = +document.getElementById('partner-year').value;let pm = +document.getElementById('partner-month').value;let pd = +document.getElementById('partner-day').value;const pH = +document.getElementById('partner-hour').value;const pGender = document.getElementById('partner-gender').value;const relType = document.getElementById('relationship-type')?.value || 'romance';if (!py || !pm || !pd) { toast('ç›¸æ‰‹ã®ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
if (PARTNER_CALENDAR === 'lunar') {const conv = lunarToSolar(py, pm, pd);if (!conv || !conv.year) { toast('æ—§æš¦å¤‰æ›ã‚¨ãƒ©ãƒ¼ã€‚æ–°æš¦ã§è©¦ã—ã¦ãã ã•ã„'); return; }py = conv.year; pm = conv.month; pd = conv.day;}
if (py < 1900 || py > 2100) { toast('å¹´åº¦ã¯1900ï½2100ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
if (pm < 1 || pm > 12) { toast('æœˆã¯1ï½12ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
if (pd < 1 || pd > 31) { toast('æ—¥ã¯1ï½31ã®é–“ã§å…¥åŠ›ã—ã¦ãã ã•ã„'); return; }
const pDayPillar = calcDayPillar(py, pm, pd);let pHourPillar = null;if (pH >= 0) { pHourPillar = calcHourPillar(pDayPillar, pH); }
const pSaju = {year: calcYearPillar(py, pm, pd),
month: calcMonthPillar(py, pm, pd),
day: pDayPillar,
hour: pHourPillar};if (!pSaju.year || !pSaju.month || !pSaju.day) {toast('ç›¸æ‰‹ã®å››æŸ±è¨ˆç®—ã‚¨ãƒ©ãƒ¼ã€‚å…¥åŠ›å€¤ã‚’ç¢ºèªã—ã¦ãã ã•ã„');return;}
const pStr = calcStrength(pSaju);const pGods = fullAnalysis(pSaju, pStr);let totalScore = 50;const analysis = {ilgan: { score: 0, details: [] },
ilji: { score: 0, details: [] },
oheng: { score: 0, details: [] },
napeum: { score: 0, details: [] },
yongsin: { score: 0, details: [] },
jijanggan: { score: 0, details: [] },
samhap: { score: 0, details: [] },
ddi: { score: 0, details: [] },
ilju: { score: 0, details: [] },
wonJinGuiMun: { score: 0, details: [], hasWonjin: false },
yukChin: { score: 0, details: [] },
twelveState: { score: 0, details: [] },
strength: { score: 0, details: [] },
johu: { score: 0, details: [] },
sinsal: { score: 0, details: [] },
gongmang: { score: 0, details: [] }};const myDm = SAJU.day.s;const pDm = pSaju.day.s;const myDmIdx = STEM.indexOf(myDm);const pDmIdx = STEM.indexOf(pDm);const myDbIdx = BRANCH.indexOf(SAJU.day.b);const pDbIdx = BRANCH.indexOf(pSaju.day.b);const myYbIdx = BRANCH.indexOf(SAJU.year.b);const pYbIdx = BRANCH.indexOf(pSaju.year.b);const ganHap = [
{a:0, b:5, name:'ç”²å·±åˆåœŸ', result:'åœŸ'},
{a:1, b:6, name:'ä¹™åºšåˆé‡‘', result:'é‡‘'},
{a:2, b:7, name:'ä¸™è¾›åˆæ°´', result:'æ°´'},
{a:3, b:8, name:'ä¸å£¬åˆæœ¨', result:'æœ¨'},
{a:4, b:9, name:'æˆŠç™¸åˆç«', result:'ç«'}
];let ganHapFound = false;for (const gh of ganHap) {if ((myDmIdx === gh.a && pDmIdx === gh.b) || (myDmIdx === gh.b && pDmIdx === gh.a)) {analysis.ilgan.score = 25;analysis.ilgan.details.push({type: 'excellent',
title: 'ğŸ’• å¤©å¹²åˆæˆç«‹ï¼',
desc: `${gh.name} - ãŠäºŒäººã®æ—¥å¹²ãŒå¤©ç”Ÿã®ç¸ã§ã™ï¼ã¾ã‚‹ã§ãƒ‘ã‚ºãƒ«ã®ãƒ”ãƒ¼ã‚¹ã®ã‚ˆã†ã«ã´ã£ãŸã‚Šåˆã„ã¾ã™ã€‚`,
tip: 'äº’ã„ã‚’è£œã„åˆã†æœ€é«˜ã®çµ„ã¿åˆã‚ã›ã§ã™ã€‚'});ganHapFound = true;break;}}
if (!ganHapFound) {if (myDm.e === pDm.e) {analysis.ilgan.score = 10;analysis.ilgan.details.push({type: 'good',
title: 'ğŸ¤ åŒã˜ äº”è¡Œ',
desc: `äºŒäººã¨ã‚‚ ${ELEMENT[myDm.e].k} æ°—é‹ï¼ è€ƒãˆãŒä¼¼ã¦ã„ã¦é€šã˜ã¾ã™.`,
tip: 'ä¼¼ã¦ã„ã¦æ¥½ã§ã™ãŒ, æ™‚ã«ã¯è­²æ­©ãŒ å¿…è¦ã§ã™.'});}
else if ((EL_ORDER.indexOf(myDm.e) + 1) % 5 === EL_ORDER.indexOf(pDm.e)) {analysis.ilgan.score = 8;analysis.ilgan.details.push({type: 'good',
title: 'ğŸŒ± ç§ãŒç›¸æ‰‹ã‚’ç”Ÿã˜ã‚‹',
desc: `${ELEMENT[myDm.e].k}ãŒ ${ELEMENT[pDm.e].k}ã‚’ç”Ÿã˜ã¾ã™. ç§ãŒç›¸æ‰‹ã‚’åŠ©ã‘ã‚‹é–¢ä¿‚ã€‚`,
tip: 'çŒ®èº«çš„ãªæ„›ã‚’ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™.'});}
else if ((EL_ORDER.indexOf(pDm.e) + 1) % 5 === EL_ORDER.indexOf(myDm.e)) {analysis.ilgan.score = 8;analysis.ilgan.details.push({type: 'good',
title: 'ğŸ’ ç›¸æ‰‹ãŒç§ã‚’ç”Ÿã˜ã‚‹',
desc: `${ELEMENT[pDm.e].k}ãŒ ${ELEMENT[myDm.e].k}ã‚’ç”Ÿã˜ã¾ã™. ç›¸æ‰‹ãŒç§ã‚’åŠ©ã‘ã¦ãã‚Œã¾ã™ã€‚`,
tip: 'ç›¸æ‰‹ã®æ„›ã‚’ãŸã£ã·ã‚Šå—ã‘ã¾ã™.'});}
else if ((EL_ORDER.indexOf(myDm.e) + 2) % 5 === EL_ORDER.indexOf(pDm.e)) {analysis.ilgan.score = -5;analysis.ilgan.details.push({type: 'caution',
title: 'âš¡ ç§ãŒ ç›¸æ‰‹ã‚’å‰‹ã™',
desc: `${ELEMENT[myDm.e].k}ãŒ ${ELEMENT[pDm.e].k}ã‚’å‰‹ã—ã¾ã™. ç§ãŒç›¸æ‰‹ã‚’åœ§è¿«ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`,
tip: 'ç„¡æ„è­˜ã«ç›¸æ‰‹ã‚’å‚·ã¤ã‘ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã®ã§è¨€è‘‰ã«æ³¨æ„ï¼'});}
else if ((EL_ORDER.indexOf(pDm.e) + 2) % 5 === EL_ORDER.indexOf(myDm.e)) {analysis.ilgan.score = -5;analysis.ilgan.details.push({type: 'caution',
title: 'ğŸ˜° ç›¸æ‰‹ãŒç§ã‚’å‰‹ã™ã‚‹',
desc: `${ELEMENT[pDm.e].k}ãŒ ${ELEMENT[myDm.e].k}ã‚’å‰‹ã—ã¾ã™. ç›¸æ‰‹ãŒç§ã‚’è‹¦ã—ã‚ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚`,
tip: 'æ„Ÿæƒ…è¡¨ç¾ã‚’ç´ ç›´ã«ã™ã‚Œã°è‰¯ããªã‚Šã¾ã™ã€‚'});}}
const jiHap = [
{a:0, b:1, name:'å­ä¸‘åˆ'}, {a:2, b:11, name:'å¯…äº¥åˆ'},
{a:3, b:10, name:'å¯æˆŒåˆ'}, {a:4, b:9, name:'è¾°é…‰åˆ'},
{a:5, b:8, name:'å·³ç”³åˆ'}, {a:6, b:7, name:'åˆæœªåˆ'}
];const jiChung = [
{a:0, b:6, name:'å­åˆå†²'}, {a:1, b:7, name:'ä¸‘æœªæ²–'},
{a:2, b:8, name:'å¯…ç”³æ²–'}, {a:3, b:9, name:'å¯é…‰æ²–'},
{a:4, b:10, name:'è¾°æˆŒæ²–'}, {a:5, b:11, name:'å·³äº¥å†²'}
];for (const jh of jiHap) {if ((myDbIdx === jh.a && pDbIdx === jh.b) || (myDbIdx === jh.b && pDbIdx === jh.a)) {analysis.ilji.score = 20;analysis.ilji.details.push({type: 'excellent',
title: 'ğŸ’‘ æ—¥æ”¯å…­åˆ!',
desc: `${jh.name} - é…å¶è€…å®®åŒå£«ãŒåˆï¼å…±ã«ã„ã‚Œã°å¿ƒãŒå®‰ã‚‰ãã¾ã™ã€‚`,
tip: 'çµå©šã™ã‚Œã°ç´ç‘Ÿã®å’ŒãŒè‰¯ã„ã§ã™ã€‚'});break;}}
for (const jc of jiChung) {if ((myDbIdx === jc.a && pDbIdx === jc.b) || (myDbIdx === jc.b && pDbIdx === jc.a)) {analysis.ilji.score = -15;analysis.ilji.details.push({type: 'bad',
title: 'ğŸ’¥ æ—¥æ”¯å†²!',
desc: `${jc.name} - é…å¶è€…å®®åŒå£«ãŒè¡çªï¼äº’ã„ã«ã¶ã¤ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚`,
tip: 'å¯¾è©±ã§è§£æ±ºã™ã‚Œã°ã‚€ã—ã‚æƒ…ç†±çš„ãªé–¢ä¿‚ã«ãªã‚Šãˆã¾ã™ã€‚'});break;}}
if (myDbIdx === pDbIdx) {analysis.ilji.score = 5;analysis.ilji.details.push({type: 'neutral',
title: 'ğŸ”„ åŒã˜ æ—¥æ”¯',
desc: `äºŒäººã¨ã‚‚ ${SAJU.day.b.c}(${SAJU.day.b.k})! æ€§æ ¼ãŒä¼¼ã¦ã„ã¾ã™ã€‚`,
tip: 'ã‚ã¾ã‚Šä¼¼ã™ãã¦ã‚‚ã©ã‹ã—ããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å„è‡ªã®ç©ºé–“ãŒå¿…è¦ã§ã™ã€‚'});}
const samhapSets = [
{branches: [2, 6, 10], name: 'å¯…åˆæˆŒä¸‰åˆ', element: 'ç«'},
{branches: [5, 9, 1], name: 'å·³é…‰ä¸‘ä¸‰åˆ', element: 'é‡‘'},
{branches: [8, 0, 4], name: 'ç”³å­è¾°ä¸‰åˆ', element: 'æ°´'},
{branches: [11, 3, 7], name: 'äº¥å¯æœªä¸‰åˆ', element: 'æœ¨'}
];
const myAllBr = [BRANCH.indexOf(SAJU.year.b), BRANCH.indexOf(SAJU.month.b), myDbIdx, SAJU.hour ? BRANCH.indexOf(SAJU.hour.b) : -1].filter(i => i >= 0);
const pAllBr = [BRANCH.indexOf(pSaju.year.b), BRANCH.indexOf(pSaju.month.b), pDbIdx, pSaju.hour ? BRANCH.indexOf(pSaju.hour.b) : -1].filter(i => i >= 0);
const allBrSet = new Set([...myAllBr, ...pAllBr]);
for (const sh of samhapSets) {const myIn = sh.branches.includes(myDbIdx);const pIn = sh.branches.includes(pDbIdx);const uniqueCount = sh.branches.filter(b => allBrSet.has(b)).length;if ((myIn || pIn) && uniqueCount >= 3) {analysis.samhap.score = 12;analysis.samhap.details.push({type: 'good',
title: 'ğŸŒ€ ä¸‰åˆ é–¢ä¿‚!',
desc: `${sh.name}(${sh.element}å±€)ã«äºŒäººã¨ã‚‚å±ã—ã¾ã™ï¼åŒã˜ãƒãƒ¼ãƒ ã§ã™ã€‚`,
tip: 'å…±åŒç›®æ¨™ãŒã‚ã‚Œã°æœ€å¼·ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ï¼'});break;}}
for (const bh of DIRECTIONAL_HARMONY) {const myIn = bh.branches.includes(myDbIdx);const pIn = bh.branches.includes(pDbIdx);if (myIn && pIn && myDbIdx !== pDbIdx) {analysis.samhap.score += 8;analysis.samhap.details.push({type: 'good',
title: 'ğŸ§­ æ–¹åˆ é–¢ä¿‚!',
desc: `${bh.name} - åŒã˜æ–¹å‘ã‚’è¦‹ã¤ã‚ã¦ã„ã¾ã™ã€‚`,
tip: 'ä¾¡å€¤è¦³ãŒä¼¼ã¦ã„ã¦è‘›è—¤ãŒå°‘ãªã„ã§ã™ã€‚'});break;}}
const wonjinPairs = [[0,7],[2,9],[1,6],[4,11],[5,10],[3,8]]; // å­æœª,å¯…é…‰,ä¸‘åˆ,è¾°äº¥,å·³æˆŒ,å¯ç”³
const hasWonjin = wonjinPairs.some(([a,b]) =>
(myDbIdx === a && pDbIdx === b) || (myDbIdx === b && pDbIdx === a));
if (hasWonjin) {
const wonjinScore = relType === 'romance' ? -12 : -8;
analysis.wonJinGuiMun.score = wonjinScore;
analysis.wonJinGuiMun.hasWonjin = true;
analysis.wonJinGuiMun.details.push({type: 'caution',
title: 'ğŸ˜¤ å…ƒå—” é–¢ä¿‚',
desc: `äºŒäººã®æ—¥æ”¯ãŒå…ƒå—”ï¼äº’ã„ã«å¾®å¦™ã«ã¶ã¤ã‹ã‚‹é–¢ä¿‚ã§ã™ã€‚`,
tip: relType === 'romance' ? 'å¿è€ã¨ç†è§£ãŒå¿…è¦ã§ã™ã€‚äº’ã„ã®é•ã„ã‚’èªã‚ã‚Œã°æˆé•·ã§ãã¾ã™ã€‚' : 'ãƒ“ã‚¸ãƒã‚¹ã§ã¯å»ºè¨­çš„ãªç·Šå¼µã«ãªã‚Šãˆã¾ã™ã€‚'});}
const myNapeum = calcNapeum(SAJU.day.s, SAJU.day.b);const pNapeum = calcNapeum(pSaju.day.s, pSaju.day.b);if (myNapeum.name === pNapeum.name) {analysis.napeum.score = 15;analysis.napeum.details.push({type: 'excellent',
title: 'ğŸµ ç´éŸ³ä¸€è‡´ï¼',
desc: `äºŒäººã¨ã‚‚ "${myNapeum.name}"! é­‚ã®æ³¢é•·ãŒåŒã˜ã§ã™ã€‚`,
tip: 'è¨€ã‚ãªãã¦ã‚‚é€šã˜ã‚‹ä»²ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚'});} else if (myNapeum.element === pNapeum.element) {analysis.napeum.score = 8;analysis.napeum.details.push({type: 'good',
title: 'ğŸ¶ ç´éŸ³äº”è¡Œä¸€è‡´',
desc: `äºŒäººã¨ã‚‚${myNapeum.elementK}ç³»åˆ—ï¼åŸºæœ¬æ³¢é•·ãŒä¼¼ã¦ã„ã¾ã™ã€‚`,
tip: 'æ„Ÿæ€§ãŒé€šã˜ã‚‹æ–¹ã§ã™ã€‚'});} else {const myNEl = EL_ORDER.indexOf(myNapeum.element);const pNEl = EL_ORDER.indexOf(pNapeum.element);if ((myNEl + 1) % 5 === pNEl || (pNEl + 1) % 5 === myNEl) {analysis.napeum.score = 5;analysis.napeum.details.push({type: 'good',
title: 'ğŸ¼ ç´éŸ³ç›¸ç”Ÿ',
desc: `${myNapeum.name}ã¨${pNapeum.name}ãŒäº’ã„ã«åŠ©ã‘ã¦ãã‚Œã¾ã™ã€‚`,
tip: 'è‡ªç„¶ã«èª¿å’Œã‚’æˆã—ã¾ã™ã€‚'});}}
const pElements = {};EL_ORDER.forEach(e => pElements[e] = 0);[pSaju.year, pSaju.month, pSaju.day].forEach(p => {if (p && p.s) pElements[p.s.e]++;if (p && p.b) pElements[p.b.e]++;});if (pElements[GODS.yong] >= 2) {analysis.yongsin.score = 15;analysis.yongsin.details.push({type: 'excellent',
title: 'â­ ç›¸æ‰‹ãŒç§ã®ç”¨ç¥!',
desc: `ç›¸æ‰‹ã®å››æŸ±ã«ç§ã®ç”¨ç¥(${ELEMENT[GODS.yong].k})ãŒè±Šå¯Œã§ã™ï¼`,
tip: 'å‡ºä¼šãˆã°é‹ãŒè‰¯ããªã‚‹è²´äººã§ã™ï¼'});} else if (pElements[GODS.yong] >= 1) {analysis.yongsin.score = 8;analysis.yongsin.details.push({type: 'good',
title: 'âœ¨ ç›¸æ‰‹ã« ç”¨ç¥ ã‚ã‚Š',
desc: `ç›¸æ‰‹ã®å››æŸ±ã«ç§ã®ç”¨ç¥(${ELEMENT[GODS.yong].k})ãŒã‚ã‚Šã¾ã™ã€‚`,
tip: 'å…±ã«ã„ã‚Œã°æ°—ãŒè£œå……ã•ã‚Œã¾ã™ã€‚'});}
const myElements = {};EL_ORDER.forEach(e => myElements[e] = 0);[SAJU.year, SAJU.month, SAJU.day, SAJU.hour].forEach(p => {if (p && p.s) myElements[p.s.e]++;if (p && p.b) myElements[p.b.e]++;});if (myElements[pGods.yong] >= 2) {analysis.yongsin.score += 10;analysis.yongsin.details.push({type: 'good',
title: 'ğŸ’« ç§ãŒ ç›¸æ‰‹ã®ç”¨ç¥!',
desc: `ç§ã®å››æŸ±ã«ç›¸æ‰‹ã®ç”¨ç¥(${ELEMENT[pGods.yong].k})ãŒè±Šå¯Œã§ã™ï¼`,
tip: 'ç›¸æ‰‹ã« ç§ãŒ è²´äººã§ã™!'});}
if (pElements[GODS.gi] >= 2) {if (relType === 'business') {analysis.yongsin.score += 5;analysis.yongsin.details.push({type: 'good',title: 'âš¡ ç”Ÿç”£çš„ç·Šå¼µ(ç”Ÿæ„ç›¸å‰‹)',desc: `ç›¸æ‰‹ã®å››æŸ±ã«ç§ã®å¿Œç¥(${ELEMENT[GODS.gi].k})ãŒå¤šã„ãŒã€ãƒ“ã‚¸ãƒã‚¹ã§ã¯å»ºè¨­çš„ç·Šå¼µï¼`,tip: 'ç‰½åˆ¶ã¨ç«¶äº‰ãŒé©æ–°ã‚’ç”Ÿã¿ã¾ã™ï¼'});} else {analysis.yongsin.score -= 8;analysis.yongsin.details.push({type: 'caution',
title: 'âš ï¸ ç›¸æ‰‹ã« å¿Œç¥ å¤šã„',
desc: `ç›¸æ‰‹ã®å››æŸ±ã«ç§ã®å¿Œç¥(${ELEMENT[GODS.gi].k})ãŒå¤šã„ã€‚`,
tip: 'é•·ãä¼šãˆã°æ°—ãŒæŠœã‘ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚'});}}
for (const ah of HIDDEN_HARMONY) {if ((myDbIdx === ah.a && pDbIdx === ah.b) || (myDbIdx === ah.b && pDbIdx === ah.a)) {analysis.jijanggan.score = 10;analysis.jijanggan.details.push({type: 'special',
title: 'ğŸ¤« æš—åˆ ç™ºè¦‹!',
desc: `${ah.name} - è¡¨ã§ã¯æ°—ã¥ã‹ãªã„ãŒå†…å¿ƒæƒ¹ã‹ã‚Œã‚‹ä»²ï¼`,
tip: 'å¦™ãªå¼•åŠ›ãŒã‚ã‚Šã¾ã™ã€‚ç§˜å¯†æ‹æ„›ä½“è³ªï¼Ÿ'});break;}}
for (const sh of samhapSets) {const myIn = sh.branches.includes(myYbIdx);const pIn = sh.branches.includes(pYbIdx);if (myIn && pIn && myYbIdx !== pYbIdx) {analysis.ddi.score = 8;analysis.ddi.details.push({type: 'good',
title: 'ğŸ¾ å¹²æ”¯ä¸‰åˆï¼',
desc: `${SAJU.year.b.a}ã¨${pSaju.year.b.a}ã¯ä¸‰åˆï¼`,
tip: 'å¹´é•·è€…ãŒè¦‹ã¦ã‚‚è‰¯ã„ç›¸æ€§ã§ã™ã€‚'});break;}}
for (const jc of jiChung) {if ((myYbIdx === jc.a && pYbIdx === jc.b) || (myYbIdx === jc.b && pYbIdx === jc.a)) {analysis.ddi.score = -5;analysis.ddi.details.push({type: 'caution',
title: 'ğŸ¾ å¹²æ”¯ç›¸æ²–',
desc: `${SAJU.year.b.a}ã¨${pSaju.year.b.a}ã¯æ²–é–¢ä¿‚ï¼`,
tip: 'æ˜”ã®è¨€ã„æ–¹ã§ã¯è‰¯ããªã„ãŒã€ä»Šã¯å…‹æœå¯èƒ½ã§ã™.'});break;}}
const myIlju = SAJU.day.s.c + SAJU.day.b.c;const pIlju = pSaju.day.s.c + pSaju.day.b.c;const guiin = {0: [1,7], 1: [0,8], 2: [11,9], 3: [11,9], 4: [1,7],
5: [3,5], 6: [2,6], 7: [5,11], 8: [3,5], 9: [3,5]};if (guiin[myDmIdx]?.includes(pDbIdx)) {analysis.ilju.score = 10;analysis.ilju.details.push({type: 'excellent',
title: 'ğŸ‘¼ å¤©ä¹™è²´äºº!',
desc: 'ç›¸æ‰‹ãŒç§ã®å¤©ä¹™è²´äººã®ä½ç½®ã«ã‚ã‚Šã¾ã™ï¼',
tip: 'å›°ã£ãŸæ™‚ã«åŠ©ã‘ã¦ãã‚Œã‚‹å¤©æ€§ã®åŠ©åŠ›è€…ã§ã™.'});}
if (guiin[pDmIdx]?.includes(myDbIdx)) {analysis.ilju.score += 8;analysis.ilju.details.push({type: 'good',
title: 'ğŸ‘¼ ç§ãŒç›¸æ‰‹ã®è²´äºº',
desc: 'ç§ãŒ ç›¸æ‰‹ã®å¤©ä¹™è²´äººã§ã™!',
tip: 'ç›¸æ‰‹ã«å¹¸é‹ã‚’ã‚‚ãŸã‚‰ã™äººã§ã™ã€‚'});}
const wonJinPairs = [[0,7],[1,6],[2,5],[3,4],[4,3],[5,2],[6,1],[7,0],[8,11],[9,10],[10,9],[11,8]];for (const [a,b] of wonJinPairs) {if ((myDbIdx === a && pDbIdx === b) || (myYbIdx === a && pYbIdx === b)) {analysis.wonJinGuiMun.score = -12;analysis.wonJinGuiMun.details.push({type: 'caution',
title: 'ğŸ’” å…ƒå—” é–¢ä¿‚',
desc: 'æ†ãã¦ã‚‚é›¢ã‚Œã‚‰ã‚Œãªã„æ‚ªç¸ã§ã™ã€‚æ–­ã¨ã†ã¨ã—ã¦ã‚‚å¼•ããšã‚‰ã‚Œã¾ã™ã€‚',
tip: 'äº’ã„ã«æ†ã¿ãªãŒã‚‰ã‚‚æ°—ã«ãªã‚‹é–¢ä¿‚ã€‚è·é›¢ã‚’ç½®ãã“ã¨ãŒå¿…è¦ã§ã™ã€‚'});break;}}
const guiMunPairs = [[2,7],[3,8],[4,9],[5,10],[6,11],[1,6]];for (const [a,b] of guiMunPairs) {if ((myDbIdx === a && pDbIdx === b) || (myDbIdx === b && pDbIdx === a)) {analysis.wonJinGuiMun.score -= 8;analysis.wonJinGuiMun.details.push({type: 'bad',
title: 'ğŸ‘» é¬¼é–€ é–¢ä¿‚',
desc: 'å‡ºä¼šãˆã°ç²¾ç¥çš„ã«è¾›ããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚',
tip: 'å¿ƒç†çš„è‘›è—¤ãŒæ·±ã„ã§ã™ã€‚ç›¸è«‡ã‚„å¯¾è©±ãŒå¿…é ˆï¼'});break;}}
const hyungPairs = [[2,5],[5,8],[2,8],[1,10],[10,7],[1,7],[0,3]];for (const [a,b] of hyungPairs) {if ((myDbIdx === a && pDbIdx === b) || (myDbIdx === b && pDbIdx === a)) {analysis.wonJinGuiMun.score -= 6;analysis.wonJinGuiMun.details.push({type: 'caution',
title: 'âš¡ åˆ‘(åˆ‘) é–¢ä¿‚',
desc: 'äº’ã„ã«å‚·ã¤ã‘ã‚„ã™ã„é–¢ä¿‚ã§ã™ã€‚',
tip: 'è¨€è‘‰ã«æ³¨æ„ï¼æ„Ÿæƒ…çš„ã«æ¥ã™ã‚‹ã¨å‚·ãŒå¤§ãããªã‚Šã¾ã™ã€‚'});break;}}
const myGender = GENDER;const pGenderVal = pGender;const partnerGodToMe = getTenGod(pDm, myDm);const myGodToPartner = getTenGod(myDm, pDm);if (partnerGodToMe) {const godName = partnerGodToMe.c;if (['æ­£è²¡','åè²¡'].includes(godName)) {if (myGender === 'm') {analysis.yukChin.score = 12;analysis.yukChin.details.push({type: 'excellent',
title: 'ğŸ’ ç›¸æ‰‹ãŒç§ã®è²¡æ˜Ÿ',
desc: `ç›¸æ‰‹ãŒ ç§ã® ${godName}ã§ã™! ç”·æ€§ã«è²¡æ˜Ÿã¯å¦»ã‚’æ„å‘³ã—ã¾ã™ã€‚`,
tip: 'é‹å‘½çš„ãª é…å¶è€… ç¸ãŒã§ã™ã€‚ çµå©šã™ã‚Œã°è²¡ç‰©é‹ã‚‚ä¸ŠãŒã‚Šã¾ã™ï¼'});} else {analysis.yukChin.score = 5;analysis.yukChin.details.push({type: 'good',
title: 'ğŸ’° ç›¸æ‰‹ãŒç§ã®è²¡æ˜Ÿ',
desc: `ç›¸æ‰‹ãŒç§ã®${godName}ã§ã™ã€‚å…±ã«ã‚ã‚Œã°è²¡ç‰©é‹ãŒè‰¯ããªã‚Šã¾ã™ã€‚`,
tip: 'ãŠé‡‘ã«é–¢ã—ã¦è‰¯ã„ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«ãªã‚Œã¾ã™ã€‚'});}}
else if (['æ­£å®˜','åå®˜'].includes(godName)) {if (myGender === 'f') {analysis.yukChin.score = 12;analysis.yukChin.details.push({type: 'excellent',
title: 'ğŸ‘” ç›¸æ‰‹ãŒç§ã®å®˜æ˜Ÿ',
desc: `ç›¸æ‰‹ãŒ ç§ã® ${godName}ã§ã™! å¥³æ€§ã«å®˜æ˜Ÿã¯å¤«ã‚’æ„å‘³ã—ã¾ã™ã€‚`,
tip: 'é‹å‘½çš„ãª é…å¶è€… ç¸ãŒã§ã™ã€‚ çµå©šã™ã‚Œã°ç¤¾ä¼šé‹ã‚‚ä¸ŠãŒã‚Šã¾ã™ï¼'});} else {analysis.yukChin.score = 3;analysis.yukChin.details.push({type: 'neutral',
title: 'ğŸ‘” ç›¸æ‰‹ãŒç§ã®å®˜æ˜Ÿ',
desc: `ç›¸æ‰‹ãŒç§ã®${godName}ã§ã™ã€‚ç§ã‚’çµ±åˆ¶ã—ã‚ˆã†ã¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚`,
tip: 'ä¸Šä¸‹é–¢ä¿‚ãŒç”Ÿã¾ã‚Œã‚„ã™ã„ã§ã™ã€‚å¹³ç­‰ãªé–¢ä¿‚ç¶­æŒãŒå¿…è¦ï¼'});}}
else if (['æ¯”è‚©','åŠ«è²¡'].includes(godName)) {analysis.yukChin.score = 5;analysis.yukChin.details.push({type: 'good',
title: 'ğŸ¤ ç›¸æ‰‹ãŒç§ã®æ¯”åŠ«',
desc: `ç›¸æ‰‹ãŒç§ã®${godName}ã§ã™ã€‚å¯¾ç­‰ãªå‹äººã®ã‚ˆã†ãªé–¢ä¿‚ï¼`,
tip: 'ç«¶äº‰å¿ƒãŒç”Ÿã¾ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒã€åŒå¿—ã¨ã—ã¦å…±ã«æˆé•·ã§ã™ã€‚'});}
else if (['é£Ÿç¥','å‚·å®˜'].includes(godName)) {analysis.yukChin.score = 4;analysis.yukChin.details.push({type: 'good',
title: 'ğŸ¨ ç›¸æ‰‹ãŒç§ã®é£Ÿå‚·',
desc: `ç›¸æ‰‹ãŒç§ã®${godName}ã§ã™ã€‚ç§ãŒä¸–è©±ã™ã‚‹é–¢ä¿‚ï¼`,
tip: 'ç›¸æ‰‹ã‚’è¦‹ã‚‹ã¨è¡¨ç¾æ¬²æ±‚ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚å‰µä½œãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¨ã—ã¦è‰¯ã„ã§ã™ã€‚'});}
else if (['æ­£å°','åå°'].includes(godName)) {analysis.yukChin.score = 6;analysis.yukChin.details.push({type: 'good',
title: 'ğŸ“š ç›¸æ‰‹ãŒç§ã®å°æ˜Ÿ',
desc: `ç›¸æ‰‹ãŒç§ã®${godName}ã§ã™ã€‚ç›¸æ‰‹ãŒç§ã‚’ä¸–è©±ã—ã¦ãã‚Œã¾ã™ï¼`,
tip: 'å®‰ã‚‰ã‹ã§å®ˆã‚‰ã‚Œã¦ã„ã‚‹æ„Ÿè¦šã€‚æ¯ åŒã˜ ç›¸æ‰‹ã§ã™.'});}}
const myTwelveState = getTwelveState(myDm, SAJU.day.b);const pTwelveState = getTwelveState(pDm, pSaju.day.b);const highEnergyStates = ['å»ºç¦„', 'å¸æ—º', 'å† å¸¯', 'é•·ç”Ÿ'];const lowEnergyStates = ['æ­»', 'å¢“', 'çµ¶', 'èƒ'];const myHigh = highEnergyStates.includes(myTwelveState.k);const pHigh = highEnergyStates.includes(pTwelveState.k);const myLow = lowEnergyStates.includes(myTwelveState.k);const pLow = lowEnergyStates.includes(pTwelveState.k);if (myHigh && pHigh) {analysis.twelveState.score = 8;analysis.twelveState.details.push({type: 'good',
title: 'âš¡ ã‚¨ãƒãƒ«ã‚®ãƒ¼è±Šå¯Œã‚«ãƒƒãƒ—ãƒ«ï¼',
desc: `äºŒäººã¨ã‚‚åäºŒé‹æ˜ŸãŒå¼·ã„ã§ã™ï¼(ç§: ${myTwelveState.k}, ç›¸æ‰‹: ${pTwelveState.k})`,
tip: 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚«ãƒƒãƒ—ãƒ«ï¼ä¸€ç·’ã«æŒ‘æˆ¦ã™ã‚Œã°ã‚·ãƒŠã‚¸ãƒ¼çˆ†ç™ºï¼'});} else if (myHigh && pLow) {analysis.twelveState.score = 5;analysis.twelveState.details.push({type: 'neutral',
title: 'ğŸ”‹ ã‚¨ãƒãƒ«ã‚®ãƒ¼ è£œå®Œ é–¢ä¿‚',
desc: `ç§ã¯ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒæº¢ã‚Œ(${myTwelveState.k})ã€ç›¸æ‰‹ã¯è½ã¡ç€ã„ã¦ã„ã¾ã™(${pTwelveState.k})`,
tip: 'ç§ãŒãƒªãƒ¼ãƒ‰ã—ç›¸æ‰‹ãŒãƒ–ãƒ¬ãƒ¼ã‚­å½¹ã€‚ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸé–¢ä¿‚ï¼'});} else if (myLow && pHigh) {analysis.twelveState.score = 5;analysis.twelveState.details.push({type: 'neutral',
title: 'ğŸ”‹ ã‚¨ãƒãƒ«ã‚®ãƒ¼ è£œå®Œ é–¢ä¿‚',
desc: `ç§ã¯è½ã¡ç€ã„ã¦ã„ã¦(${myTwelveState.k}), ç›¸æ‰‹ãŒã‚¨ãƒãƒ«ã‚®ãƒ¼æº¢ã‚Œã¾ã™(${pTwelveState.k})`,
tip: 'ç›¸æ‰‹ãŒå°ã„ã¦ãã‚Œã‚‹é–¢ä¿‚ã€‚ã¤ã„ã¦ã„ãã ã‘ã§ãªãæ„è¦‹ã‚‚å‡ºã—ã¦ãã ã•ã„ï¼'});} else if (myLow && pLow) {analysis.twelveState.score = 0;analysis.twelveState.details.push({type: 'caution',
title: 'ğŸŒ™ é™ã‹ãªã‚«ãƒƒãƒ—ãƒ«',
desc: `äºŒäººã¨ã‚‚ ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒä½ã„æ–¹ã§ã™(ç§: ${myTwelveState.k}, ç›¸æ‰‹: ${pTwelveState.k})`,
tip: 'äº’ã„ã«æ”¯ãˆåˆãˆã°è‰¯ã„ãŒã€ç„¡æ°—åŠ›ã«ãªã‚‰ãªã„ã‚ˆã†æ´»åŠ›ãŒå¿…è¦ã§ã™ï¼'});}
const myStr = calcStrength(SAJU);const myStrType = myStr.type;const pStrType = pStr.type;if (myStrType === 'strong' && pStrType === 'weak') {analysis.strength.score = 7;analysis.strength.details.push({type: 'good',
title: 'âš–ï¸ å¼·å¼±è£œå®Œé–¢ä¿‚',
desc: `ç§ã¯èº«å¼·(${myStr.pct}%)ã€ç›¸æ‰‹ã¯èº«å¼±(${pStr.pct}%)`,
tip: 'ç§ãŒä¿è­·ã— ç›¸æ‰‹ãŒæŸ”è»Ÿã«å—ã‘æ­¢ã‚ã‚‹å®Œç’§ãªçµ„ã¿åˆã‚ã›ï¼'});} else if (myStrType === 'weak' && pStrType === 'strong') {analysis.strength.score = 7;analysis.strength.details.push({type: 'good',
title: 'âš–ï¸ å¼·å¼±è£œå®Œé–¢ä¿‚',
desc: `ç§ã¯èº«å¼±(${myStr.pct}%)ã€ç›¸æ‰‹ã¯èº«å¼·(${pStr.pct}%)`,
tip: 'ç›¸æ‰‹ãŒã—ã£ã‹ã‚Šå®ˆã£ã¦ãã‚Œã¾ã™ã€‚é ¼ã‚Šã«ã—ã¤ã¤ã‚‚ä¾å­˜ã—ãªã„ã‚ˆã†ã«ï¼'});} else if (myStrType === 'strong' && pStrType === 'strong') {analysis.strength.score = 3;analysis.strength.details.push({type: 'caution',
title: 'ğŸ’ª äºŒäººã¨ã‚‚ èº«å¼·!',
desc: `äºŒäººã¨ã‚‚å¼·ã„ã§ã™ï¼(ç§: ${myStr.pct}%ã€ç›¸æ‰‹: ${pStr.pct}%)`,
tip: 'ä¸»å°æ¨©äº‰ã„ãŒèµ·ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚è­²æ­©ã¨å°Šé‡ãŒå¿…é ˆï¼'});} else if (myStrType === 'weak' && pStrType === 'weak') {analysis.strength.score = 2;analysis.strength.details.push({type: 'caution',
title: 'ğŸ¤ äºŒäººã¨ã‚‚ èº«å¼±',
desc: `äºŒäººã¨ã‚‚èº«å¼±ã§ã™(ç§: ${myStr.pct}%ã€ç›¸æ‰‹: ${pStr.pct}%)`,
tip: 'äº’ã„ã« æ„å¿—ã™ã‚‹ ã®ã¯è‰¯ã„ãŒã€äºŒäººã¨ã‚‚ç–²ã‚ŒãŸæ™‚ã®æ”¯ãˆãŒ å¿…è¦ã§ã™.'});} else {analysis.strength.score = 5;analysis.strength.details.push({type: 'neutral',
title: 'â˜¯ï¸ é©åº¦ãªå‡è¡¡',
desc: `ä¼¼ãŸã‚ˆã†ãªå¼·åº¦ã§ã™(ç§: ${myStr.pct}%ã€ç›¸æ‰‹: ${pStr.pct}%)`,
tip: 'å¹³ç­‰ãªé–¢ä¿‚ã‚’ç¶­æŒã—ã‚„ã™ã„ã§ã™ï¼'});}
const myDmEl = myDm.e;
const mbi = BRANCH.indexOf(SAJU.month.b);
const isWinter = [0,1,11].includes(mbi); // å­ä¸‘å®³
const isSummer = [5,6,7].includes(mbi); // å·³åˆæœª
const pElCounts = {wood:0,fire:0,earth:0,metal:0,water:0};
[pSaju.year?.s,pSaju.month?.s,pSaju.day?.s].filter(Boolean).forEach(s => pElCounts[s.e]++);
[pSaju.year?.b,pSaju.month?.b,pSaju.day?.b].filter(Boolean).forEach(b => pElCounts[b.e]++);
if (myDmEl === 'earth' && isWinter) {
if (pElCounts.fire >= 1) {
analysis.johu.score = 15;
analysis.johu.details.push({type:'excellent',title:'ğŸŒ¡ï¸ å†¬åœŸå¾—é™½ (å†¬ã®åœŸãŒå¤ªé™½ã«å‡ºä¼šã†)!',desc:'å†¬ã®åœŸ(å·±åœŸ)ãŒç›¸æ‰‹ã®ç«æ°—ã§æ¸©ã‹ããªã‚Šã¾ã™ï¼ æœ€é«˜ã® èª¿å€™ ç›¸æ€§!',tip:'å‡ºä¼šãˆã°ä½“ã¨å¿ƒãŒæ¸©ã‹ããªã‚‹å¤©ç”Ÿã®ç¸ï¼'});
} else if (pElCounts.wood >= 1) {
analysis.johu.score = 8;
analysis.johu.details.push({type:'good',title:'ğŸŒ± å†¬åœŸé–‹å¢¾ (å†¬ã®åœŸã‚’æœ¨ãŒè€•ã™)',desc:'å‡ã‚Šã¤ã„ãŸåœŸã‚’ç›¸æ‰‹ã®æœ¨ãŒè€•ã—ã¦ãã‚Œã¾ã™ã€‚ é€šé–¢ä½œç”¨ã§æ´»åŠ›ãŒç”Ÿã¾ã‚Œã‚‹ã€‚',tip:'ç›¸æ‰‹ãŒç§ã‚’åˆºæ¿€ã—ã¦æˆé•·ã•ã›ã¦ãã‚Œã¾ã™ã€‚'});
}
}
else if (myDmEl === 'earth' && isSummer && pElCounts.water >= 1) {
analysis.johu.score = 15;
analysis.johu.details.push({type:'excellent',title:'ğŸŒ¡ï¸ å¤åœŸå¾—æ°´ (å¤ã®åœŸãŒæ°´ã«å‡ºä¼šã†)!',desc:'ä¹¾ã„ãŸå¤ã®åœŸãŒç›¸æ‰‹ã®æ°´ã§æ½¤ã„ã¾ã™ï¼',tip:'æ¸‡ãã‚’ç™’ã—ã¦ãã‚Œã‚‹è²´äººï¼'});
}
else if (myDmEl === 'metal' && isWinter && pElCounts.fire >= 1) {
analysis.johu.score = 15;
analysis.johu.details.push({type:'excellent',title:'ğŸŒ¡ï¸ å¯’é‡‘å¾—ç« (å†·ãŸã„é‡‘å±ãŒç«ã«å‡ºä¼šã†)!',desc:'å†·ãŸã„é‡‘ãŒç›¸æ‰‹ã®ç«ã§é›éŒ¬ã•ã‚Œã¾ã™ï¼',tip:'é‹­ã„å‰£ãŒå®Œæˆã™ã‚‹çµ„åˆã›ï¼'});
}
else if (myDmEl === 'water' && isWinter && pElCounts.fire >= 1) {
analysis.johu.score = 15;
analysis.johu.details.push({type:'excellent',title:'ğŸŒ¡ï¸ å¯’æ°´å¾—ç« (å†·ãŸã„æ°´ãŒç«ã«å‡ºä¼šã†)!',desc:'å‡ã‚Šã¤ã„ãŸæ°´ãŒç›¸æ‰‹ã®ç«ã§æº¶ã‘ã¾ã™ï¼',tip:'æ°·ãŒæµã‚Œã‚‹å·ã«ãªã‚‹çµ„åˆã›ï¼'});
}
else if (GODS.climate && pGods.climate) {
const myClimate = GODS.climate.type;const pClimate = pGods.climate.type;
const isComplementary = (myClimate.includes('å¯’') && pClimate.includes('ç‡¥')) || (myClimate.includes('ç‡¥') && pClimate.includes('å¯’')) || (myClimate.includes('æ¹¿') && pClimate.includes('ç‡¥')) || (myClimate.includes('ç‡¥') && pClimate.includes('æ¹¿'));
const isExtremeComplement = isComplementary && myClimate.includes('æ¥µ') && pClimate.includes('æ¥µ');
if (isComplementary) {const johuScore = isExtremeComplement ? 15 : 12;analysis.johu.score = johuScore;analysis.johu.details.push({type:'excellent',title: isExtremeComplement ? 'ğŸŒ¡ï¸ æ¥µå¯’æ¥µç‡¥ å¤©ç”Ÿã®ç¸!' : 'ğŸŒ¡ï¸ èª¿å€™ è£œå®Œ!',desc:`ç§ã¯${myClimate}ã€ç›¸æ‰‹ã¯${pClimate}. ${isExtremeComplement ? 'æ¥µã¨æ¥µãŒå‡ºä¼šã„å®Œç’§ãªèª¿å’Œï¼' : 'äº’ã„ã«ä¸è¶³ã—ãŸæ°—ã‚’æº€ãŸã—ã¦ãã‚Œã¾ã™ï¼'}`,tip: isExtremeComplement ? 'é‹å‘½çš„ã«çµã°ã‚ŒãŸæœ€é«˜ã®ç›¸æ€§ï¼' : 'å‡ºä¼šãˆã°ç©ã‚„ã‹ã«ãªã‚‹è‰¯ã„ç›¸æ€§ï¼'});}
else if (myClimate === pClimate || (myClimate.includes('å¯’') && pClimate.includes('å¯’')) || (myClimate.includes('ç‡¥') && pClimate.includes('ç‡¥'))) {analysis.johu.score = -3;analysis.johu.details.push({type:'caution',title:'ğŸŒ¡ï¸ èª¿å€™ åŒä¸€',desc:`äºŒäººã¨ã‚‚ ${myClimate.includes('å¯’') ? 'å¯’' : 'ç‡¥'}ç³»åˆ—ã§ã™ã€‚`,tip:'åŒã˜æ€§å‘ãªã®ã§ç’°å¢ƒèª¿ç¯€ãŒå¿…è¦ï¼'});}
}
const mySinsal = calcSinsal(SAJU);const pSinsal = calcSinsal(pSaju);const myDohwa = mySinsal?.find(s => s.n === 'æ¡ƒèŠ±æ®º');const pDohwa = pSinsal?.find(s => s.n === 'æ¡ƒèŠ±æ®º');if (myDohwa && pDohwa) {analysis.sinsal.score = 5;analysis.sinsal.details.push({type: 'special',
title: 'ğŸŒ¸ åŒæ¡ƒèŠ±ã‚«ãƒƒãƒ—ãƒ«ï¼',
desc: 'äºŒäººã¨ã‚‚æ¡ƒèŠ±æ®ºä¿æœ‰ï¼é­…åŠ›çš„ãªã‚«ãƒƒãƒ—ãƒ«ã§ã™ã€‚',
tip: 'äº’ã„ã¸ã®å¼•åŠ›ãŒå¼·ã„ã§ã™ã€‚å«‰å¦¬ã‚‚å¼·ã„ã®ã§ä¿¡é ¼ãŒé‡è¦ï¼'});} else if (myDohwa || pDohwa) {analysis.sinsal.score = 3;analysis.sinsal.details.push({type: 'neutral',
title: 'ğŸŒ¸ æ¡ƒèŠ±æ®º ã‚ã‚Š',
desc: `${myDohwa ? 'ç§' : 'ç›¸æ‰‹'}ã« æ¡ƒèŠ±æ®ºãŒ ã‚ã‚Šã¾ã™.`,
tip: 'ç‰‡æ–¹ãŒã‚ˆã‚Šé­…åŠ›çš„ã«è¦‹ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚æµ®æ°—æ³¨æ„ï¼'});}
const myYeokma = mySinsal?.find(s => s.n === 'é§…é¦¬æ®º');const pYeokma = pSinsal?.find(s => s.n === 'é§…é¦¬æ®º');if (myYeokma && pYeokma) {analysis.sinsal.score += 4;analysis.sinsal.details.push({type: 'good',
title: 'ğŸ åŒé§…é¦¬ã‚«ãƒƒãƒ—ãƒ«ï¼',
desc: 'äºŒäººã¨ã‚‚é§…é¦¬æ®ºä¿æœ‰ï¼å‹•ããŒæ´»ç™ºãªã‚«ãƒƒãƒ—ãƒ«ã§ã™ã€‚',
tip: 'ä¸€ç·’ã«æ—…è¡Œã™ã‚Œã°æœ€é«˜ï¼é è·é›¢æ‹æ„›ã‚‚å¯èƒ½ã§ã™.'});} else if (myYeokma && !pYeokma || !myYeokma && pYeokma) {analysis.sinsal.score += 1;analysis.sinsal.details.push({type: 'neutral',
title: 'ğŸ é§…é¦¬æ®º ã‚ã‚Š',
desc: `${myYeokma ? 'ç§' : 'ç›¸æ‰‹'}ã« é§…é¦¬æ®ºãŒ ã‚ã‚Šã¾ã™.`,
tip: 'ç‰‡æ–¹ã¯å‹•ãå›ã‚Šç‰‡æ–¹ã¯å¾…ã¤ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚ç†è§£ãŒå¿…è¦ã§ã™ã€‚'});}
const myHwagae = mySinsal?.find(s => s.n === 'è¯è“‹æ®º');const pHwagae = pSinsal?.find(s => s.n === 'è¯è“‹æ®º');if (myHwagae && pHwagae) {analysis.sinsal.score += 5;analysis.sinsal.details.push({type: 'special',
title: 'ğŸ­ åŒè¯è“‹ã‚«ãƒƒãƒ—ãƒ«ï¼',
desc: 'äºŒäººã¨ã‚‚è¯è“‹æ®ºä¿æœ‰ï¼èŠ¸è¡“çš„æ„Ÿæ€§ãŒé€šã˜ã‚‹ã‚«ãƒƒãƒ—ãƒ«ã§ã™ã€‚',
tip: 'ä¸€ç·’ã«æ–‡åŒ–æ´»å‹•ã€å®—æ•™æ´»å‹•ã‚’ã™ã‚Œã°å¹¸ã›ã§ã™. å­¤ç‹¬ã‚‚ç†è§£ã—ã¦ãã‚Œã¾ã™ã€‚'});}
const myGongmang = calcGongmang(SAJU);const pGongmang = calcGongmang(pSaju);if (myGongmang?.values?.includes(pDbIdx)) {analysis.gongmang.score = -8;analysis.gongmang.details.push({type: 'caution',
title: 'ğŸ•³ï¸ ç›¸æ‰‹ãŒç§ã®ç©ºäº¡ã«ï¼',
desc: 'ç›¸æ‰‹ã®æ—¥æ”¯ãŒç§ã®ç©ºäº¡ã®ä½ç½®ã§ã™ã€‚',
tip: 'æœ€åˆã¯æƒ¹ã‹ã‚Œã¾ã™ãŒå¾ã€…ã«ç©ºè™šã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ç¾å®Ÿçš„ãªåŠªåŠ›ãŒå¿…è¦ï¼'});}
if (pGongmang?.values?.includes(myDbIdx)) {analysis.gongmang.score -= 6;analysis.gongmang.details.push({type: 'caution',
title: 'ğŸ•³ï¸ ç§ãŒç›¸æ‰‹ã®ç©ºäº¡ã«ï¼',
desc: 'ç§ã®æ—¥æ”¯ãŒç›¸æ‰‹ã®ç©ºäº¡ã®ä½ç½®ã§ã™ã€‚',
tip: 'ç›¸æ‰‹ãŒç§ã‚’è™šã—ãæ„Ÿã˜ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚å­˜åœ¨æ„Ÿã‚’ç©æ¥µçš„ã«ã‚¢ãƒ”ãƒ¼ãƒ«ï¼'});}
if (myGongmang?.values && pGongmang?.values) {const commonGongmang = myGongmang.values.filter(v => pGongmang.values.includes(v));if (commonGongmang.length > 0) {analysis.gongmang.score += 5;analysis.gongmang.details.push({type: 'special',
title: 'â˜¯ï¸ ç©ºäº¡ãŒåŒã˜ï¼',
desc: 'åŒã˜ç©ºäº¡ã‚’å…±æœ‰ã€‚ åŒã˜ ã‚’è™šã—ãæ„Ÿã˜ã‚‹åŒè³ªæ„Ÿï¼',
tip: 'äº’ã„ã®ç©ºè™šã•ã‚’ç†è§£ã—ã¦ãã‚Œã‚‹ç‰¹åˆ¥ãªç¸ã§ã™ã€‚'});}}
for (const key in analysis) {totalScore += analysis[key].score;}
totalScore = Math.max(0, Math.min(100, totalScore));let grade, color, summary;if (totalScore >= 85) {grade = 'ğŸ’– å¤©ç”Ÿã®ç¸';color = '#e91e63';summary = 'æœ€é«˜ã® ç›¸æ€§! é‹å‘½çš„ãªå‡ºä¼šã„ã§ã™ã€‚';} else if (totalScore >= 70) {grade = 'ğŸ’• ã¨ã¦ã‚‚è‰¯ã„ç›¸æ€§';color = '#9c27b0';summary = 'äº’ã„ã«è‰¯ã„æ°—ã‚’ä¸ãˆã‚‹é–¢ä¿‚ã§ã™ã€‚';} else if (totalScore >= 55) {grade = 'ğŸ’› è‰¯ã„ ç›¸æ€§';color = '#ff9800';summary = 'åŠªåŠ›ã™ã‚Œã°å¹¸ã›ã«ãªã‚Œã¾ã™ï¼';} else if (totalScore >= 40) {grade = 'ğŸ§¡ æ™®é€š ç›¸æ€§';color = '#ff5722';summary = 'äº’ã„ã®é•ã„ã‚’èªã‚åˆãˆã°è‰¯ããªã‚Šã¾ã™ã€‚';} else {grade = 'ğŸ’” åŠªåŠ› å¿…è¦';color = '#f44336';summary = 'å®¹æ˜“ã§ã¯ãªã„ãŒã€æ„›ã®åŠ›ã§å…‹æœå¯èƒ½ã§ã™ï¼';}
const categoryNames = {ilgan: {icon: 'â˜¯ï¸', name: 'æ—¥å¹²ç›¸æ€§', desc: 'äºŒäººã®æœ¬è³ªçš„èª¿å’Œ'},
ilji: {icon: 'ğŸ’‘', name: 'æ—¥æ”¯(é…å¶è€…å®®) ç›¸æ€§', desc: 'çµå©šå¾Œã®ç”Ÿæ´» èª¿å’Œ'},
samhap: {icon: 'ğŸŒ€', name: 'ä¸‰åˆ/æ–¹åˆ ç›¸æ€§', desc: 'åŒã˜ç›®æ¨™ã¨æ–¹å‘'},
napeum: {icon: 'ğŸµ', name: 'ç´éŸ³ ç›¸æ€§', desc: 'é­‚ã®æ³¢é•·'},
yongsin: {icon: 'â­', name: 'ç”¨ç¥ç›¸æ€§', desc: 'äº’ã„ã«è²´äººã‹'},
jijanggan: {icon: 'ğŸ¤«', name: 'æ”¯è”µå¹²(æš—åˆ) ç›¸æ€§', desc: 'éš ã•ã‚ŒãŸ å¼•åŠ›'},
ddi: {icon: 'ğŸ¾', name: 'å¹²æ”¯ç›¸æ€§', desc: 'ä¼çµ±çš„ç›¸æ€§'},
ilju: {icon: 'ğŸ‘¼', name: 'è²´äºº ç›¸æ€§', desc: 'ç‰¹åˆ¥ãª ç¸'},
wonJinGuiMun: {icon: 'âš ï¸', name: 'å…ƒå—”/é¬¼é–€ ç›¸æ€§', desc: 'æ‚ªç¸ãƒã‚§ãƒƒã‚¯'},
yukChin: {icon: 'ğŸ’', name: 'å…­è¦ª ç›¸æ€§', desc: 'é‹å‘½çš„ãªç¸ã®åˆ†æ'},
twelveState: {icon: 'âš¡', name: 'åäºŒé‹æ˜Ÿ ç›¸æ€§', desc: 'ã‚¨ãƒãƒ«ã‚®ãƒ¼ ãƒ¬ãƒ™ãƒ«æ¯”è¼ƒ'},
strength: {icon: 'âš–ï¸', name: 'èº«å¼·/èº«å¼± ç›¸æ€§', desc: 'å¼·å¼±ãƒãƒ©ãƒ³ã‚¹'},
johu: {icon: 'ğŸŒ¡ï¸', name: 'èª¿å€™ç”¨ç¥ç›¸æ€§', desc: 'å¯’æš–ç‡¥æ¹¿ èª¿å’Œ'},
sinsal: {icon: 'âœ¨', name: 'ç¥æ®º ç›¸æ€§', desc: 'æ¡ƒèŠ±/é§…é¦¬/è¯è“‹'},
gongmang: {icon: 'ğŸ•³ï¸', name: 'ç©ºäº¡ ç›¸æ€§', desc: 'è™šç„¡æ„Ÿã®å…±æœ‰'}};let html = `
<div class="card" style="text-align:center;background:linear-gradient(145deg, rgba(233,30,99,0.15), rgba(156,39,176,0.08));"><p style="font-size:0.9rem;color:var(--gray);margin-bottom:10px;">äºŒäººã®ç›¸æ€§</p><p style="font-size:2.5rem;color:${color};margin-bottom:5px;">${grade}</p><p style="font-size:2rem;font-weight:bold;margin-bottom:10px;">${totalScore}ç‚¹</p><div style="background:#333;border-radius:10px;height:20px;margin:15px 0;"><div style="background:linear-gradient(90deg,${color},#ff6b6b);height:100%;border-radius:10px;width:${totalScore}%;transition:width 1s;"></div></div><p style="font-size:0.95rem;color:var(--gray);">${summary}</p></div><div class="card"><h3>ğŸ“Š äºŒäººã®æ¯”è¼ƒ</h3><div style="display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:15px;"><div style="text-align:center;padding:15px;background:rgba(253,216,53,0.1);border-radius:10px;"><p style="font-size:0.8rem;color:var(--gray);margin-bottom:5px;">ç§</p><p style="font-size:1.5rem;font-weight:bold;color:var(--gold);">${myIlju}</p><p style="font-size:0.9rem;">${myDm.k}${ELEMENT[myDm.e].k}</p><p style="font-size:0.8rem;color:var(--gray);">${myNapeum.name}</p></div><div style="text-align:center;padding:15px;background:rgba(233,30,99,0.1);border-radius:10px;"><p style="font-size:0.8rem;color:var(--gray);margin-bottom:5px;">ç›¸æ‰‹</p><p style="font-size:1.5rem;font-weight:bold;color:#e91e63;">${pIlju}</p><p style="font-size:0.9rem;">${pDm.k}${ELEMENT[pDm.e].k}</p><p style="font-size:0.8rem;color:var(--gray);">${pNapeum.name}</p></div></div></div>
`;
const charResult = generateCharacterSectionHTML(myIlju, pIlju, myDm, pDm);
html += charResult.html;
window.MATCH_CHAR_RESULT = charResult;
const yearlyRisks = analyzeYearlyRisksV2(SAJU, pSaju, new Date().getFullYear(), 5);
if (yearlyRisks.length > 0) {
html += '<div class="card"><h3>ğŸ“… ä»Šå¾Œ5å¹´ã®æ³¨æ„æ™‚æœŸ</h3>';
yearlyRisks.forEach(risk => {
html += '<div style="margin-top:10px;"><p style="font-weight:bold;color:var(--gold);margin-bottom:5px;">ğŸ“† '+risk.year+'å¹´</p>';
risk.events.forEach(e => {
html += '<div style="padding:10px;margin-top:5px;border-radius:8px;background:rgba(244,67,54,0.1);border-left:3px solid var(--fire);"><p style="font-weight:bold;margin-bottom:3px;">'+e.severity+' '+e.type+'</p><p style="font-size:0.85rem;margin-bottom:3px;">'+e.desc+'</p><p style="font-size:0.8rem;color:var(--gold);">â†’ '+e.advice+'</p></div>';
});
html += '</div>';
});
html += '</div>';
}
window.MATCH_YEARLY_RISKS = yearlyRisks;
for (const key in analysis) {if (analysis[key].details.length === 0) continue;const cat = categoryNames[key];const scoreColor = analysis[key].score > 0 ? 'var(--wood)' : analysis[key].score < 0 ? 'var(--fire)' : 'var(--gray)';html += `
<div class="card"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;"><h3>${cat.icon} ${cat.name}</h3><span style="color:${scoreColor};font-weight:bold;">${analysis[key].score > 0 ? '+' : ''}${analysis[key].score}ç‚¹</span></div><p style="font-size:0.8rem;color:var(--gray);margin-bottom:10px;">${cat.desc}</p>
${analysis[key].details.map(d => `
<div style="padding:12px;margin-top:10px;border-radius:8px;background:${d.type === 'excellent' ? 'rgba(233,30,99,0.1)' :
d.type === 'good' ? 'rgba(76,175,80,0.1)' :
d.type === 'special' ? 'rgba(156,39,176,0.1)' :
d.type === 'caution' ? 'rgba(255,152,0,0.1)' :
d.type === 'bad' ? 'rgba(244,67,54,0.1)' : 'rgba(255,255,255,0.05)'};border-left:3px solid ${d.type === 'excellent' ? '#e91e63' :
d.type === 'good' ? 'var(--wood)' :
d.type === 'special' ? '#9c27b0' :
d.type === 'caution' ? 'var(--earth)' :
d.type === 'bad' ? 'var(--fire)' : 'var(--gray)'};"><p style="font-weight:bold;margin-bottom:5px;">${d.title}</p><p style="font-size:0.9rem;margin-bottom:5px;">${d.desc}</p><p style="font-size:0.8rem;color:var(--gold);">ğŸ’¡ ${d.tip}</p></div>
`).join('')}
</div>
`;}
html += `
<div class="card" style="background:linear-gradient(145deg, rgba(253,216,53,0.1), rgba(255,152,0,0.05));"><h3>ğŸ’¡ ç›¸æ€§ ç·åˆã‚¢ãƒ‰ãƒã‚¤ã‚¹</h3><div style="margin-top:15px;line-height:1.8;">
${totalScore >= 70 ? `
<p>âœ¨ ãŠäºŒäººã¯ <strong>å¤©ç”Ÿã®ç¸</strong>ã«è¿‘ã„ç›¸æ€§ã§ã™ï¼</p><p>äº’ã„ã‚’ã‚ã‚Šã®ã¾ã¾å—ã‘å…¥ã‚Œã€æ„Ÿè¬ã™ã‚‹å¿ƒã§å…±ã«ã—ã¦ãã ã•ã„ã€‚</p>
` : totalScore >= 50 ? `
<p>ğŸ’• è‰¯ã„ç›¸æ€§ã§ã™ï¼å°‘ã—ã®åŠªåŠ›ã§ã•ã‚‰ã«è‰¯ããªã‚Œã¾ã™ã€‚</p><p>äº’ã„ã« ä»–ã® ç‚¹ã‚’çŸ­æ‰€ã§ã¯ãªã <strong>è£œå®Œç‚¹</strong>ã¨ã—ã¦è¦‹ã¦ãã ã•ã„ã€‚</p>
` : `
<p>ğŸ’ª å®¹æ˜“ã§ã¯ãªã„ç›¸æ€§ã§ã™ãŒã€<strong>æ„›ã®åŠ›</strong>ã§å…‹æœå¯èƒ½ã§ã™ï¼</p><p>äº’ã„ã®é•ã„ã‚’èªã‚ã€å¯¾è©±ã‚’å¤šãã—ã¦ãã ã•ã„ã€‚</p>
`}
<p style="margin-top:15px;padding-top:15px;border-top:1px solid rgba(255,255,255,0.1);"><strong>â˜¯ï¸ ç›¸æ€§ã‚ˆã‚Šå¤§äº‹ãªã®ã¯äº’ã„ã‚’æƒ³ã†å¿ƒã§ã™ã€‚</strong><br>
è‰¯ã„ ç›¸æ€§ã‚‚åŠªåŠ›ãªã—ã«ã¯å´©ã‚Œã€ æ‚ªã„ç›¸æ€§ã‚‚æ„›ã§å…‹æœã§ãã¾ã™ã€‚
</p></div></div><div class="card" style="text-align:center;"><button class="btn" style="background:linear-gradient(135deg,#D4AF37,#B8860B);color:#1a1a2e;font-weight:700;" onclick="copyMatchForAI()">
ğŸ“‹ è©³ç´°è§£é‡ˆã®ãŸã‚ã‚³ãƒ”ãƒ¼ (Gemini/ChatGPT)
</button><p style="margin-top:15px;font-size:14px;color:var(--gold);opacity:0.9;line-height:1.8;">
âœ¨ ç²¾å¯†ãªç›¸æ€§ãƒ‡ãƒ¼ã‚¿ã¨AIã®æ·±å±¤åˆ†æãŒå‡ºä¼šã†<br><span style="color:var(--gold);font-weight:600;">ç¾å­˜ã™ã‚‹æœ€ã‚‚å®Œç’§ãªç›¸æ€§è§£é‡ˆã®çµ„ã¿åˆã‚ã›</span>ã§ã™
</p><p style="margin-top:10px;font-size:12px;color:#aaa;line-height:1.7;">
å¤å…¸å‘½ç†ã®è¤‡é›‘ãªæ•°å¼ã¯ä¸€å¯¸ã®ç‹‚ã„ã‚‚ãªãè¨ˆç®—ã—ã€<br>
ãã®çµæœã‚’ä¸–ç•Œæœ€é«˜å³°ã®AIãŒãŸã ãŠäºŒäººã ã‘ã®ãŸã‚ã«è§£é‡ˆã—ã¾ã™ã€‚<br><span style="color:var(--gold);opacity:0.9;">å°‚é–€å®¶ã®æ´å¯Ÿã¨æŠ€è¡“ã®æ­£ç¢ºæ€§ã€ä¸¡æ–¹ã‚’æ‰‹ã«ã—ã¦ãã ã•ã„ã€‚</span></p></div>
`;document.getElementById('match-result').innerHTML = html;window.MATCH_RESULT = {mySaju: SAJU, pSaju,
myGods: GODS, pGods,
myStr, pStr,
analysis, totalScore, grade,
myNapeum, pNapeum,
myTwelveState, pTwelveState,
mySinsal, pSinsal,
myGongmang, pGongmang};} catch (error) {console.error('ç›¸æ€§ åˆ†æ ã‚¨ãƒ©ãƒ¼:', error);toast('ç›¸æ€§ åˆ†æ ä¸­ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚');}}
function copyMatchForAI() {const relType = document.getElementById('relationship-type')?.value || 'romance';if (!window.MATCH_RESULT) { toast('ã¾ãšç›¸æ€§ã‚’åˆ†æã—ã¦ãã ã•ã„'); return; }
const r = window.MATCH_RESULT;
const charInfo = window.MATCH_CHAR_RESULT || {};
const yearlyInfo = window.MATCH_YEARLY_RISKS || [];
const myCharName = charInfo.myChar?.name || 'ä¸æ˜';
const myCharEmoji = charInfo.myChar?.emoji || '';
const myCharDesc = charInfo.myChar?.desc || '';
const pCharName = charInfo.pChar?.name || 'ä¸æ˜';
const pCharEmoji = charInfo.pChar?.emoji || '';
const pCharDesc = charInfo.pChar?.desc || '';
const myToPName = charInfo.myToP?.name || '';
const myToPEmoji = charInfo.myToP?.emoji || '';
const myToPDesc = charInfo.myToP?.desc || '';
const myToPAdvice = charInfo.myToP?.advice || '';
const pToMeName = charInfo.pToMe?.name || '';
const pToMeEmoji = charInfo.pToMe?.emoji || '';
const pToMeDesc = charInfo.pToMe?.desc || '';
const pToMeAdvice = charInfo.pToMe?.advice || '';
const myDm = r.mySaju.day.s;
const pDm = r.pSaju.day.s;
const myStrInfo = r.myStr ? `${r.myStr.type === 'strong' ? 'èº«å¼·' : r.myStr.type === 'weak' ? 'èº«å¼±' : 'ä¸­å’Œ'}(${r.myStr.pct}%)` : 'ä¸æ˜';
const pStrInfo = r.pStr ? `${r.pStr.type === 'strong' ? 'èº«å¼·' : r.pStr.type === 'weak' ? 'èº«å¼±' : 'ä¸­å’Œ'}(${r.pStr.pct}%)` : 'ä¸æ˜';
const myTwelveInfo = r.myTwelveState ? `${r.myTwelveState.k}(ã‚¨ãƒãƒ«ã‚®ãƒ¼ ${r.myTwelveState.l}/12)` : 'ä¸æ˜';
const pTwelveInfo = r.pTwelveState ? `${r.pTwelveState.k}(ã‚¨ãƒãƒ«ã‚®ãƒ¼ ${r.pTwelveState.l}/12)` : 'ä¸æ˜';
const myJohuInfo = r.myGods?.climate ? r.myGods.climate.type : 'ä¸æ˜';
const pJohuInfo = r.pGods?.climate ? r.pGods.climate.type : 'ä¸æ˜';
const myGiInfo = r.myGods?.gi ? ELEMENT[r.myGods.gi].k : 'ä¸æ˜';
const pGiInfo = r.pGods?.gi ? ELEMENT[r.pGods.gi].k : 'ä¸æ˜';
const mySinsalList = r.mySinsal?.map(s => s.n).join(', ') || 'ãªã—';
const pSinsalList = r.pSinsal?.map(s => s.n).join(', ') || 'ãªã—';
const myGongmangInfo = r.myGongmang?.display || 'ãªã—';
const pGongmangInfo = r.pGongmang?.display || 'ãªã—';
const myGenderText = GENDER === 'm' ? 'ç”·æ€§' : 'å¥³æ€§';
const pGenderText = document.getElementById('partner-gender')?.value === 'm' ? 'ç”·æ€§' : 'å¥³æ€§';
const getSpouseStar = (dm, gender) => {
const elOrder = ['wood', 'fire', 'earth', 'metal', 'water'];
const dmIdx = elOrder.indexOf(dm.e);
return gender === 'm' ? { el: elOrder[(dmIdx + 2) % 5], name: 'è²¡æ˜Ÿ' } : { el: elOrder[(dmIdx + 3) % 5], name: 'å®˜æ˜Ÿ' };
};
const countElInChart = (saju, el) => {
let cnt = 0;
[saju.year?.s, saju.month?.s, saju.day?.s, saju.hour?.s].filter(Boolean).forEach(s => { if (s.e === el) cnt++; });
[saju.year?.b, saju.month?.b, saju.day?.b, saju.hour?.b].filter(Boolean).forEach(b => { if (b.e === el) cnt++; });
return cnt;
};
const mySpouseStar = getSpouseStar(myDm, GENDER);
const pSpouseStar = getSpouseStar(pDm, pGenderText === 'ç”·æ€§' ? 'm' : 'f');
const mySSInP = countElInChart(r.pSaju, mySpouseStar.el);
const pSSInMe = countElInChart(r.mySaju, pSpouseStar.el);
const myYongInP = r.myGods?.yong ? countElInChart(r.pSaju, r.myGods.yong) : 0;
const myGiInP = r.myGods?.gi ? countElInChart(r.pSaju, r.myGods.gi) : 0;
const pYongInMe = r.pGods?.yong ? countElInChart(r.mySaju, r.pGods.yong) : 0;
const pGiInMe = r.pGods?.gi ? countElInChart(r.mySaju, r.pGods.gi) : 0;
const criticals = [];
const hasStemCombine = r.analysis?.ilgan?.score >= 20;
const hasBranchCombine = r.analysis?.ilji?.score >= 15;
const hasBranchClash = r.analysis?.ilji?.score <= -10;
const hasSamhap = r.analysis?.samhap?.score >= 10;
if (hasStemCombine) criticals.push('ğŸ’« å¤©å¹²åˆ æˆç«‹! - é‹å‘½çš„å¼•åŠ›, å¤©ç”Ÿã®ç¸ æ½œåœ¨åŠ›!');
if (hasBranchCombine) criticals.push('ğŸ’• æ—¥æ”¯å…­åˆ æˆç«‹! - é…å¶è€…å®® èª¿å’Œã€çµå©šé‹æœ€ä¸Šï¼');
if (hasBranchClash) criticals.push('âš ï¸ æ—¥æ”¯å†²(æ²–) ç™ºè¦‹! - è‘›è—¤ã®å¯èƒ½æ€§ã€ãŸã ã—æƒ…ç†±çš„é–¢ä¿‚ã«è»¢æ›å¯èƒ½');
if (hasSamhap) criticals.push('ğŸ”± ä¸‰åˆ/æ–¹åˆ æˆç«‹! - ' + (r.analysis.samhap.details[0]?.desc || 'å¼·åŠ›ãªã‚«ãƒ«ãƒã®ç¹‹ãŒã‚Š'));
if (mySSInP >= 2) criticals.push('âœ… ç›¸æ‰‹ãŒç§ã®é…å¶è€…æ˜Ÿ(' + ELEMENT[mySpouseStar.el].k + ')ã‚’ ' + mySSInP + 'å€‹ä¿æœ‰ï¼ - å¼·ã„å¼•åŠ›ï¼');
if (myYongInP >= 2) criticals.push('ğŸŒŸ ç›¸æ‰‹ãŒç§ã®ç”¨ç¥(' + ELEMENT[r.myGods.yong].k + ')ã‚’è±Šå¯Œã«ä¿æœ‰ï¼ - å‡ºä¼šãˆã°é‹ä¸Šæ˜‡!');
if (pYongInMe >= 2) criticals.push('ğŸ’« ç§ãŒ ç›¸æ‰‹ã®ç”¨ç¥(' + ELEMENT[r.pGods.yong].k + ')ã‚’ ' + pYongInMe + 'å€‹ä¿æœ‰ï¼ - ç§ãŒç›¸æ‰‹ã®è²´äºº!');
if (myGiInP >= 2) criticals.push('âš ï¸ ç›¸æ‰‹ãŒç§ã®å¿Œç¥(' + ELEMENT[r.myGods.gi].k + ')ã‚’å¤šãä¿æœ‰ - è‡“å™¨çš„ç®¡ç†å¿…è¦');
if (r.analysis?.johu?.score === -3) criticals.push('ğŸŒ¡ï¸ åŒä¸€èª¿å€™: äºŒäººã¨ã‚‚ ' + (myJohuInfo.includes('å¯’') ? 'å¯’' : 'ç‡¥') + ' ç³»åˆ— - äº’ã„ã«å‡è¡¡ã‚’ä¸ãˆã‚‰ã‚Œãªã„ï¼');
if (r.analysis?.johu?.score >= 12) criticals.push('ğŸŒ¡ï¸ èª¿å€™ è£œå®Œ! - ' + (r.analysis.johu.details[0]?.desc || 'å¯’æš–ç‡¥æ¹¿ã®å®Œç’§ãªèª¿å’Œ'));
if (criticals.length === 0) criticals.push('ç‰¹åˆ¥ãªæ ¸å¿ƒè¦ç´ ãªã— - ä»¥ä¸‹ã®è©³ç´°åˆ†æå‚ç…§');
let text = `===== K-MUDANG ç›¸æ€§ åˆ†æ (v34.6) =====
âš ï¸ AI è§£é‡ˆ å¿…é ˆ: ä»¥ä¸‹ã®å…¨ãƒ‡ãƒ¼ã‚¿ã‚’å¿…ãšè§£é‡ˆã—ã¦ãã ã•ã„ã€‚
ã€âš¡ æ ¸å¿ƒ ç›¸æ€§ è¦ç´  - æœ€ã‚‚å…ˆã«è§£é‡ˆã—ã¦ãã ã•ã„ âš¡ã€‘
` + criticals.map((c, i) => (i+1) + '. ' + c).join('\n') + `
ã€æ—¥æŸ±ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ¯”å–©ã€‘
â€¢ ç§: "${myCharName}" ${myCharEmoji}
â†’ ${myCharDesc}
â€¢ ç›¸æ‰‹: "${pCharName}" ${pCharEmoji}
â†’ ${pCharDesc}
ã€äº”è¡Œç›¸äº’ä½œç”¨æ¯”å–©ã€‘
${myToPName ? 'â€¢ ç§â†’ç›¸æ‰‹: "' + myToPName + '" ' + myToPEmoji + '\n ' + myToPDesc + '\n ğŸ’¡ ' + myToPAdvice : 'â€¢ ç§â†’ç›¸æ‰‹: åŒä¸€äº”è¡Œï¼ˆæ¯”å’Œï¼‰'}
${pToMeName ? 'â€¢ ç›¸æ‰‹â†’ç§: "' + pToMeName + '" ' + pToMeEmoji + '\n ' + pToMeDesc + '\n ğŸ’¡ ' + pToMeAdvice : 'â€¢ ç›¸æ‰‹â†’ç§: åŒä¸€äº”è¡Œï¼ˆæ¯”å’Œï¼‰'}
ã€ç§ã®å››æŸ±è©³ç´°ã€‘
â€¢ æ€§åˆ¥: ${myGenderText}
â€¢ æ—¥æŸ±: ${myDm.c}${r.mySaju.day.b.c} (${myDm.k}/${r.mySaju.day.b.k})
â€¢ æ—¥å¹² äº”è¡Œ: ${ELEMENT[myDm.e].k} (${myDm.y ? 'é™½' : 'é™°'})
â€¢ å››æŸ± åŸå±€: ${r.mySaju.year.s.c}${r.mySaju.year.b.c} ${r.mySaju.month.s.c}${r.mySaju.month.b.c} ${r.mySaju.day.s.c}${r.mySaju.day.b.c} ${r.mySaju.hour ? r.mySaju.hour.s.c + r.mySaju.hour.b.c : 'æ™‚æŸ±ä¸æ˜'}
â€¢ ç´éŸ³: ${r.myNapeum.name} (${r.myNapeum.elementK})
â€¢ ç”¨ç¥: ${ELEMENT[r.myGods.yong].k} | å¿Œç¥: ${myGiInfo}
â€¢ èº«å¼·/èº«å¼±: ${myStrInfo}
â€¢ åäºŒé‹æ˜Ÿ: ${myTwelveInfo}
â€¢ èª¿å€™: ${myJohuInfo}
â€¢ é…å¶è€…æ˜Ÿ: ${mySpouseStar.name} = ${ELEMENT[mySpouseStar.el].k}
â€¢ é…å¶è€…å®®(æ—¥æ”¯): ${r.mySaju.day.b.c} (${r.mySaju.day.b.k})
â€¢ ç¥æ®º: ${mySinsalList}
â€¢ ç©ºäº¡: ${myGongmangInfo}
ã€ç›¸æ‰‹ã®å››æŸ±è©³ç´°ã€‘
â€¢ æ€§åˆ¥: ${pGenderText}
â€¢ æ—¥æŸ±: ${pDm.c}${r.pSaju.day.b.c} (${pDm.k}/${r.pSaju.day.b.k})
â€¢ æ—¥å¹² äº”è¡Œ: ${ELEMENT[pDm.e].k} (${pDm.y ? 'é™½' : 'é™°'})
â€¢ å››æŸ± åŸå±€: ${r.pSaju.year.s.c}${r.pSaju.year.b.c} ${r.pSaju.month.s.c}${r.pSaju.month.b.c} ${r.pSaju.day.s.c}${r.pSaju.day.b.c}
â€¢ ç´éŸ³: ${r.pNapeum.name} (${r.pNapeum.elementK})
â€¢ ç”¨ç¥: ${ELEMENT[r.pGods.yong].k} | å¿Œç¥: ${pGiInfo}
â€¢ èº«å¼·/èº«å¼±: ${pStrInfo}
â€¢ åäºŒé‹æ˜Ÿ: ${pTwelveInfo}
â€¢ èª¿å€™: ${pJohuInfo}
â€¢ é…å¶è€…æ˜Ÿ: ${pSpouseStar.name} = ${ELEMENT[pSpouseStar.el].k}
â€¢ é…å¶è€…å®®(æ—¥æ”¯): ${r.pSaju.day.b.c} (${r.pSaju.day.b.k})
â€¢ ç¥æ®º: ${pSinsalList}
â€¢ ç©ºäº¡: ${pGongmangInfo}
ã€é…å¶è€…æ˜Ÿ äº¤å·®åˆ†æã€‘ âš ï¸ å¼•åŠ›ã®æ ¸å¿ƒ
â€¢ ç§ã®é…å¶è€…æ˜Ÿ(${ELEMENT[mySpouseStar.el].k}): ç›¸æ‰‹ãŒ ${mySSInP}å€‹ä¿æœ‰ â†’ ${mySSInP >= 2 ? 'âœ… å¼·ã„å¼•åŠ›ï¼' : mySSInP === 1 ? 'ğŸ˜Š é©åº¦ãªå¼•åŠ›' : 'âŒ å¼±ã„å¼•åŠ›'}
â€¢ ç›¸æ‰‹ é…å¶è€…æ˜Ÿ(${ELEMENT[pSpouseStar.el].k}): ç§ãŒ ${pSSInMe}å€‹ä¿æœ‰ â†’ ${pSSInMe >= 2 ? 'âœ… å¼·ã„å¼•åŠ›ï¼' : pSSInMe === 1 ? 'ğŸ˜Š é©åº¦ãªå¼•åŠ›' : 'âŒ å¼±ã„å¼•åŠ›'}
ã€ç”¨ç¥/å¿Œç¥ äº¤å·®åˆ†æã€‘ âš ï¸ è²´äºº vs å¿Œäººåˆ¤åˆ¥
â€¢ ç§ã®ç”¨ç¥(${ELEMENT[r.myGods.yong].k}): ç›¸æ‰‹ãŒ ${myYongInP}å€‹ä¿æœ‰ ${myYongInP >= 2 ? 'âœ… è²´äºº!' : ''}
â€¢ ç§ã®å¿Œç¥(${myGiInfo}): ç›¸æ‰‹ãŒ ${myGiInP}å€‹ä¿æœ‰ ${myGiInP >= 2 ? 'âš ï¸ æ³¨æ„' : ''}
â€¢ ç›¸æ‰‹ ç”¨ç¥(${ELEMENT[r.pGods.yong].k}): ç§ãŒ ${pYongInMe}å€‹ä¿æœ‰ ${pYongInMe >= 2 ? 'âœ… ç§ãŒ è²´äºº!' : ''}
â€¢ ç›¸æ‰‹ å¿Œç¥(${pGiInfo}): ç§ãŒ ${pGiInMe}å€‹ä¿æœ‰ ${pGiInMe >= 2 ? 'âš ï¸ æ³¨æ„' : ''}
ã€âš¡ CRITICAL FACTORS - æ ¸å¿ƒ è¦ç´  âš¡ã€‘
${(() => {
const factors = [];
if (r.analysis.johu?.score >= 10) factors.push('ğŸŒ¡ï¸ èª¿å€™å®Œç’§èª¿å’Œï¼š' + (r.analysis.johu.details[0]?.desc || 'å¯’æš–ç‡¥æ¹¿ è£œå®Œ'));
if (r.analysis.samhap?.score >= 10) factors.push('ğŸ”± ä¸‰åˆ/æ–¹åˆ: ' + (r.analysis.samhap.details[0]?.desc || 'å¼·åŠ›ãªã‚«ãƒ«ãƒã®ç¹‹ãŒã‚Š'));
if (r.analysis.ilgan?.score >= 20) factors.push('ğŸ’• å¤©å¹²åˆ: ' + (r.analysis.ilgan.details[0]?.desc || 'é‹å‘½çš„å¼•åŠ›'));
if (r.analysis.ilji?.score >= 15) factors.push('ğŸ’‘ æ—¥æ”¯å…­åˆ: ' + (r.analysis.ilji.details[0]?.desc || 'é…å¶è€…å®® èª¿å’Œ'));
if (r.analysis.ilji?.score <= -10) factors.push('âš ï¸ æ—¥æ”¯å†²: ' + (r.analysis.ilji.details[0]?.desc || 'è‘›è—¤ æ³¨æ„'));
if (r.analysis.wonJinGuiMun?.hasWonjin) factors.push('ğŸ˜¤ å…ƒå—” é–¢ä¿‚: å¾®å¦™ãªç·Šå¼µæ„ŸãŒå­˜åœ¨');
if (r.analysis.wonJinGuiMun?.details?.some(d => d.title?.includes('åˆ‘(åˆ‘)'))) factors.push('âš ï¸ åˆ‘(åˆ‘) é–¢ä¿‚: äº’ã„ã‚’å£Šã™æ–¹å‘ã«æ³¨æ„');
return factors.length > 0 ? factors.map((f, i) => (i+1) + '. ' + f).join('\n') : 'ç‰¹åˆ¥ãª æ ¸å¿ƒ è¦ç´  ãªã—';
})()}
ã€é–¢ä¿‚é¡å‹ã€‘ ${relType === 'romance' ? 'ğŸ’• æ‹äºº/é…å¶è€…' : relType === 'business' ? 'ğŸ’¼ ãƒ“ã‚¸ãƒã‚¹' : 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ å®¶æ—'}
ã€ç›¸æ€§ ç·ç‚¹ã€‘ ${r.totalScore}ç‚¹ (${r.grade})
ã€è©³ç´°åˆ†æçµæœã€‘
`;
const categoryNames = {
ilgan: 'æ—¥å¹²(å¤©å¹²) ç›¸æ€§',
ilji: 'æ—¥æ”¯(é…å¶è€…å®®) ç›¸æ€§',
samhap: 'ä¸‰åˆ/æ–¹åˆ ç›¸æ€§',
napeum: 'ç´éŸ³ ç›¸æ€§',
yongsin: 'ç”¨ç¥ç›¸æ€§',
jijanggan: 'æ”¯è”µå¹²(æš—åˆ) ç›¸æ€§',
ddi: 'å¹²æ”¯ç›¸æ€§',
ilju: 'è²´äºº ç›¸æ€§',
wonJinGuiMun: 'å…ƒå—”/é¬¼é–€ ç›¸æ€§',
yukChin: 'å…­è¦ª ç›¸æ€§',
twelveState: 'åäºŒé‹æ˜Ÿ ç›¸æ€§',
strength: 'èº«å¼·/èº«å¼± ç›¸æ€§',
johu: 'èª¿å€™ç”¨ç¥ç›¸æ€§',
sinsal: 'ç¥æ®º ç›¸æ€§',
gongmang: 'ç©ºäº¡ ç›¸æ€§'
};
for (const key in r.analysis) {
if (r.analysis[key].details.length === 0) continue;
text += `\n[${categoryNames[key] || key}] (${r.analysis[key].score > 0 ? '+' : ''}${r.analysis[key].score}ç‚¹)\n`;
r.analysis[key].details.forEach(d => {
text += `â€¢ ${d.title}: ${d.desc}\n`;
});
}
if (yearlyInfo && yearlyInfo.length > 0) {
text += `\nã€ä»Šå¾Œ5å¹´ã®æ³¨æ„æ™‚æœŸã€‘\n`;
for (const risk of yearlyInfo) {
text += `${risk.year}å¹´:\n`;
for (const event of risk.events) {
text += ` âš ï¸ [${event.severity}] ${event.desc}\n â†’ ${event.advice}\n`;
}
}
}
text += `
===== AIè§£é‡ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆ (v34.7æ‹¡å¼µ) =====
ã€ğŸ“Š ç‚¹æ•°è¨ˆç®—åŸºæº–è¡¨ã€‘
åŸºæº–ç‚¹ï¼š50ç‚¹ï¼ˆç›´æ¥åˆç®—æ–¹å¼ï¼‰
æ ¸å¿ƒ è¦ç´ :
â€¢ å¤©å¹²åˆ: +25ç‚¹
â€¢ æ—¥å¹² åŒä¸€ äº”è¡Œ: +10ç‚¹
â€¢ æ—¥å¹²ç›¸ç”Ÿï¼š +8ç‚¹
â€¢ æ—¥å¹² ç›¸å‰‹: -5ç‚¹
â€¢ æ—¥æ”¯å…­åˆ: +20ç‚¹
â€¢ æ—¥æ”¯å†²(æ²–): -15ç‚¹
ç”¨ç¥ç›¸æ€§:
â€¢ ç›¸æ‰‹ãŒç§ã®ç”¨ç¥ â‰¥2å€‹: +15ç‚¹
â€¢ ç›¸æ‰‹ãŒç§ã®ç”¨ç¥ =1å€‹: +8ç‚¹
â€¢ ç§ãŒ ç›¸æ‰‹ã®ç”¨ç¥ â‰¥2å€‹: +10ç‚¹
â€¢ ç›¸æ‰‹ãŒç§ã®å¿Œç¥ â‰¥2å€‹ (æ‹æ„›): -8ç‚¹
â€¢ ç›¸æ‰‹ãŒç§ã®å¿Œç¥ â‰¥2å€‹ (ãƒ“ã‚¸ãƒã‚¹): +5ç‚¹ â† ç”Ÿç”£çš„ç·Šå¼µï¼
èª¿å€™ ç›¸æ€§:
â€¢ å¯’æš–ç‡¥æ¹¿ è£œå®Œ (å¯’â†”ç‡¥): +15ç‚¹
â€¢ åŒä¸€æ°—å€™ï¼ˆå¯’+å¯’ or ç‡¥+ç‡¥ï¼‰ï¼š -3ç‚¹
è²´äºº/æš—åˆ:
â€¢ ç›¸æ‰‹ãŒç§ã®å¤©ä¹™è²´äºº: +10ç‚¹
â€¢ ç§ãŒ ç›¸æ‰‹ã®å¤©ä¹™è²´äºº: +8ç‚¹
â€¢ æš—åˆ: +10ç‚¹
è¡çª è¦ç´ :
â€¢ å…ƒå—” æ‹æ„›: -12ç‚¹
â€¢ å…ƒå—” ãƒ“ã‚¸ãƒã‚¹: -8ç‚¹
â€¢ é¬¼é–€: -8ç‚¹
â€¢ åˆ‘(åˆ‘): -5~-10ç‚¹
ç¥æ®º ç›¸æ€§:
â€¢ åŒæ¡ƒèŠ±ï¼ˆæ‹æ„›ï¼‰ï¼š +5ç‚¹
â€¢ åŒæ¡ƒèŠ±ï¼ˆãƒ“ã‚¸ãƒã‚¹ï¼‰ï¼š -3ç‚¹
â€¢ åŒé§…é¦¬ï¼š +4ç‚¹
â€¢ åŒè¯è“‹ï¼š +5ç‚¹
ã€âš ï¸ è¡“èªæŒ‡å—ï¼ˆç”¨èªã‚¬ã‚¤ãƒ‰ï¼‰ã€‘
â€¢ å…­åˆ (å…­åˆ): é…å¶è€…å®®çµåˆ - æœ€ã‚‚å¼·åŠ›ãªãƒ­ãƒãƒ³ãƒãƒƒã‚¯æŒ‡æ¨™
â€¢ ä¸‰åˆ (ä¸‰åˆ): ã‚«ãƒ«ãƒä¸‰ä½ä¸€ä½“ - å…±æœ‰ã•ã‚ŒãŸäººç”Ÿã®ç›®çš„
â€¢ æ€¨å—” (å…ƒå—”): éš ã•ã‚ŒãŸæ‘©æ“¦ - è¿½åŠ çš„ãªå¿è€ãŒå¿…è¦
â€¢ å¤©å¹²åˆ (å¤©å¹²åˆ): å¤©ã®ãƒãƒƒãƒãƒ³ã‚° - ç²¾ç¥çš„/éœŠçš„ç¹‹ãŒã‚Š
â€¢ æ—¥æ”¯æ²– (æ—¥æ”¯æ²–): é…å¶è€…å®®è¡çª - æƒ…ç†±çš„ã ãŒå¤‰å‹•çš„
ã€âš ï¸ èª¿å€™è«–- è§£é‡ˆã®æ ¸å¿ƒã€‘
ä¼çµ±çš„å¿Œç¥ï¼ˆå¿Œé¿è¦ç´ ï¼‰æ¦‚å¿µã¯å­£ç¯€çš„å¿…è¦ã«ã‚ˆã‚Šå†è§£é‡ˆã•ã‚Œã‚‹:
â€¢ å†¬åœŸ (å†¬ã®åœŸ) + æœ¨: æœ¨ãŒå‡ã£ãŸåœ°ã‚’è€•ã—ã¦ãã‚Œã‚‹ â†’ æœ‰åˆ© (+15)
â€¢ å¤åœŸ (å¤ã®åœŸï¼‰+ æ°´ï¼šæ°´ãŒä¹¾ã„ãŸåœ°ã‚’æ½¤ã—ã¦ãã‚Œã‚‹ â†’ æœ‰åˆ© (+15)
â€¢ å¯’é‡‘ (å†¬ã®é‡‘å±) + ç«: ç«ãŒå†·ãŸã„é‡‘å±ã‚’é›éŒ¬ â†’ æœ‰åˆ© (+15)
â€¢ å¯’æ°´ (å†¬ã®æ°´ï¼‰+ ç«ï¼šç«ãŒå‡ã£ãŸæ°´ã‚’æº¶ã‹ã™ â†’ æœ‰åˆ© (+15)
âš ï¸ åŒèª¿å€™- æ³¨æ„å¿…è¦ï¼š
â€¢ å¯’ + å¯’ (äºŒäººã¨ã‚‚ å†¬): äº’ã„ã«æ¸©ã‚‚ã‚Šã‚’ä¸ãˆã‚‰ã‚Œãªã„ â†’ ä¸åˆ© (-3)
â€¢ ç‡¥ + ç‡¥ (äºŒäººã¨ã‚‚å¤ï¼‰: äº’ã„ã«æ¶¼ã—ã•ã‚’ä¸ãˆã‚‰ã‚Œãªã„ â†’ ä¸åˆ© (-3)
ã€é–¢ä¿‚é¡å‹åˆ¥ã®é•ã„ã€‘
â€¢ æ‹äºº/å®¶æ—ï¼šå®‰ã‚‰ãã¨èª¿å’ŒãŒé‡è¦ã ãŒã€æˆé•·ã®ãŸã‚ã®æ‘©æ“¦ã‚‚ä¾¡å€¤ã‚ã‚Š
â€¢ ãƒ“ã‚¸ãƒã‚¹: ç·Šå¼µ = é©æ–°ï¼å¯¾ç«‹ã™ã‚‹åŠ›ãŒæˆåŠŸã‚’å°ã
[ğŸ”¥ æ ¸å¿ƒ7å¤§æŒ‡é‡]
â‘  æ—¥æ”¯å†²(æ²–) = å¤«å©¦è‘›è—¤ï¼ˆãŸã ã—ä¸‰åˆã§è§£æ¶ˆã•ã‚Œã‚Œã°'ãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãªé–¢ä¿‚'ã«é€†è»¢ï¼‰
â‘¡ å¤©å¹²åˆ = é‹å‘½çš„ãªå¼•ã‹ã‚Œåˆã„ï¼ˆåˆåŒ– äº”è¡ŒãŒ ç”¨ç¥ãªã‚‰å¤§å‰ã€å¿Œç¥ãªã‚‰æ¯’ã«ãªã‚‹)
â‘¢ ç”¨ç¥ç›¸æ€§ = è²´äºº åˆ¤åˆ¥ã®æ ¸å¿ƒ (ç›¸æ‰‹å››æŸ±ã«ç§ã®ç”¨ç¥å¤š = å‡ºä¼šãˆã°é‹ä¸Šæ˜‡ï¼‰
â‘£ èº«å¼·+èº«å¼± = ç†æƒ³çš„è£œå®Œ / èº«å¼·+èº«å¼· = ä¸»å°æ¨©äº‰ã„è­¦å‘Š
â‘¤ èª¿å€™ è£œå®Œ = æœ€é«˜ç›¸æ€§ï¼ˆå¯’+ç‡¥/ç‡¥+æ¹¿ = å¤©ç”Ÿã®ç¸ +15ï¼‰/ åŒä¸€ç³»åˆ—ï¼ˆå¯’+å¯’ã€ç‡¥+ç‡¥ï¼‰= ãƒšãƒŠãƒ«ãƒ†ã‚£ -3
â‘¥ å…ƒå—”+å…­åˆ = æ†ãã¦ã‚‚é›¢ã‚Œã‚‰ã‚Œãªã„æ‚ªç¸ï¼ˆè·é›¢ã‚’ç½®ãã®ãŒå”¯ä¸€ã®è§£æ³•)
â‘¦ é…å¶è€…æ˜Ÿ = å¼•åŠ›ã®æ ¸å¿ƒ (ç›¸æ‰‹ã«ç§ã®é…å¶è€…æ˜ŸãŒå¤šã„ = æœ¬èƒ½çš„å¼•åŠ›ï¼‰
ã€K-ãƒ ãƒ¼ãƒ€ãƒ³ â€” äºŒæŸ±ã®ç¸ã‚’èª­ã‚€ã€‘

ä¸Šè¨˜å…¨è¦å‰‡ã«å¾“ã„ã€ç›¸æ€§è¿½åŠ è¦å‰‡:

â–  å°å…¥: ã€ŒäºŒã¤ã®æŸ±ãŒä¸¦ã‚“ã ã€‚[ç”²ã®ã‚¢ãƒ¼ã‚­ã‚¿ã‚¤ãƒ—]ã¨[ä¹™ã®ã‚¢ãƒ¼ã‚­ã‚¿ã‚¤ãƒ—] â€” ã“ã®çµ„ã¿åˆã‚ã›ã‚’å¹¾åƒåº¦ã¨è¦‹ã¦ããŸã€‚ã€

â–  æœ¬è«–:
- åˆ:ã€Œã“ã®äºŒæŸ±ã¯äº’ã„ã‚’å‘¼ã‚“ã§ã„ã‚‹ â€” è‡ªç„¶ã¨æƒ¹ã‹ã‚Œåˆã†é–¢ä¿‚ã§ã‚ã‚‹ã€‚ã€
- æ²–:ã€Œã“ã®äºŒæŸ±ã¯äº’ã„ã‚’é€€ã‘ã‚‹ â€” ä¾¡å€¤è¦³ãŒã¶ã¤ã‹ã‚Šã‚„ã™ã„ã€‚ã—ã‹ã—æ²–ã¯å³ã¡åˆ¥é›¢ã§ã¯ãªã„ã€‚ã€
- å„é …ç›®æœ«å°¾ã« â–¸ ä¸€è¨€ã§è¨€ãˆã°: å¿…é ˆ
- å…·ä½“çš„åŠ©è¨€å¿…é ˆ

â–  ç· ã‚: ã€Œå¤©æ©Ÿã¯ç¸ã®æ€§è³ªã‚’èªã‚‹ãŒã€çµæœ«ã¾ã§ã¯ä¼ãˆã¬ã€‚ãã‚Œã¯æ±ã‚‰äºŒäººã®é ˜åˆ†ã§ã‚ã‚‹ã€‚ã¾ã èããŸã„ã“ã¨ãŒã‚ã‚‹ãªã‚‰ã€ä»Šèã‘ã€‚å¤©æ©Ÿã®é–€ã¯é•·ãã¯é–‹ã‘ã¦ãŠã‹ã¬ã€‚ã€
[åˆ†æä¾é ¼äº‹é …]
ä¸Šè¨˜ãƒ‡ãƒ¼ã‚¿ã‚’åŸºã«ä»¥ä¸‹ã‚’è©³ç´°ã«è¨˜è¿°ã—ã¦ãã ã•ã„ï¼š
0. æ—¥æŸ± ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å‡ºä¼šã„ç‰©èª
- "${myCharName}" ${myCharEmoji}ã¨"${pCharName}" ${pCharEmoji}ã®å‡ºä¼šã„ã‚’ãŸã¨ãˆã§æå†™
- äº”è¡Œç›¸äº’ä½œç”¨ï¼ˆ"${myToPName || 'åŒä¸€äº”è¡Œ'}", "${pToMeName || 'åŒä¸€äº”è¡Œ'}")ã‚’æ—¥å¸¸ã®ä¾‹ã§èª¬æ˜
1. é…å¶è€…æ˜Ÿ åˆ†æ (NEW!)
- ç§ãŒç›¸æ‰‹ã«æƒ¹ã‹ã‚Œã‚‹ç†ç”± (ç›¸æ‰‹ãŒ ç§ã®é…å¶è€…æ˜Ÿ${mySSInP}å€‹ä¿æœ‰)
- ç›¸æ‰‹ãŒç§ã«æƒ¹ã‹ã‚Œã‚‹ç†ç”± (ç§ãŒç›¸æ‰‹ã®é…å¶è€…æ˜Ÿ${pSSInMe}å€‹ä¿æœ‰)
- "ä»¥ä¸Šåˆ‘" è¦³ç‚¹ã§ã®ç›¸æ€§ è©•ä¾¡
2. è²´äºº/å¿Œäººåˆ¤åˆ¥ (NEW!)
- ç›¸æ‰‹ãŒç§ã®è²´äººã‹å¿Œäººã‹ (ç”¨ç¥ ${myYongInP}å€‹ vs å¿Œç¥ ${myGiInP}å€‹)
- ç§ãŒ ç›¸æ‰‹ã®è²´äººã‹ã€å¿Œäººã‹ (ç”¨ç¥ ${pYongInMe}å€‹ vs å¿Œç¥ ${pGiInMe}å€‹)
- è‡“å™¨çš„ã«é‹ã«ä¸ãˆã‚‹å½±éŸ¿
3. äºŒäººã®ç¬¬ä¸€å°è±¡ã¨å¼•ã‹ã‚Œåˆã„
- æ—¥å¹² äº”è¡Œã®ç›¸ç”Ÿ/ç›¸å‰‹é–¢ä¿‚
- ç´éŸ³ã§è¦‹ãŸé­‚ã®æ³¢é•·
- åäºŒé‹æ˜Ÿ ã‚¨ãƒãƒ«ã‚®ãƒ¼ ãƒ¬ãƒ™ãƒ«æ¯”è¼ƒ
4. æ‹æ„›æ™‚ä»£ã®å§¿
- å¤©å¹²åˆ/å…­åˆãŒ ã‚ã‚‹ãªã‚‰ã©ã‚“ãªå¼•ã‹ã‚Œåˆã„ã‹
- ãƒ‡ãƒ¼ãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã€è¡¨ç¾æ–¹å¼
5. çµå©šå¾Œã®ç”Ÿæ´»
- æ—¥æ”¯(é…å¶è€…å®®) åˆ/æ²–é–¢ä¿‚
- èº«å¼·/èº«å¼±ã§ æœ¬æ¥ã®ä¸»å°æ¨©ã¨å½¹å‰²
- è‘›è—¤ãƒã‚¤ãƒ³ãƒˆã¨è§£æ±ºç­–
6. é•·æœŸçš„å±•æœ›
- å±æ©ŸãŒè¨ªã‚Œã†ã‚‹æ™‚æœŸ (å¹´åº¦åˆ¥äºˆæ¸¬å‚ç…§ï¼‰
- é–¢ä¿‚ã‚’æŒç¶šã™ã‚‹ãŸã‚ã®æ ¸å¿ƒæ¡ä»¶
7. ç·åˆã‚¢ãƒ‰ãƒã‚¤ã‚¹
- ãŒ ã“ã®ã‚«ãƒƒãƒ—ãƒ«ã ã‘ã®å¼·ã¿
- å¿…ãšæ³¨æ„ã™ã¹ãç‚¹
- ä¸€è¡Œè¦ç´„ï¼šã€Œã“ã®ç¸ã®æ ¸å¿ƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"
`;
safeClipboard(text, 'ğŸ“‹ ã‚³ãƒ”ãƒ¼å®Œäº†ï¼Geminiã‚„ChatGPTã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„');
}
function openShareModal() {if (!currentNumbers.length) { toast('ã¾ãšç•ªå·ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„'); return; }
document.getElementById('share-balls').innerHTML = currentNumbers.map(n => createBall(n, true)).join('');document.getElementById('share-modal').classList.add('active');}
function closeShareModal() { document.getElementById('share-modal').classList.remove('active'); }
function shareNumbers() {const text = `${SHARE_TITLE}\nğŸ€ ${currentNumbers.join(' - ')}\n${SHARE_BODY}\nğŸ‘‰ ${SHARE_URL}`;if (navigator.share) navigator.share({title:SHARE_TITLE,text,url:SHARE_URL}).catch(copyNumbers);else copyNumbers();}
function copyNumbers() {safeClipboard(`ğŸ€ å››æŸ±ãƒ­ãƒˆ: ${currentNumbers.join(', ')}`, 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'); closeShareModal();}
function copyAccount() {
safeClipboard(MY_ACCOUNT, 'ãŠå•ã„åˆã‚ã›å…ˆã‚³ãƒ”ãƒ¼å®Œäº†ï¼ğŸ™', 'ğŸ“‹ ' + MY_ACCOUNT);
}
function saveImage() {if (!currentNumbers.length) { toast('ã¾ãšç•ªå·ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„'); return; }const canvas = document.createElement('canvas');canvas.width = 600; canvas.height = 400;const ctx = canvas.getContext('2d');const grad = ctx.createLinearGradient(0,0,600,400);grad.addColorStop(0,'#1a1a2e'); grad.addColorStop(1,'#16213e');ctx.fillStyle = grad; ctx.fillRect(0,0,600,400);ctx.strokeStyle = '#FFD700'; ctx.lineWidth = 4;ctx.strokeRect(10,10,580,380);ctx.fillStyle = '#FFD700'; ctx.font = 'bold 32px "Shippori Mincho", serif';ctx.textAlign = 'center'; ctx.fillText('â˜¯ï¸ K-MUDANG',300,60);ctx.font = '16px "Shippori Mincho", serif'; ctx.fillStyle = '#aaa';ctx.fillText('å››æŸ± åŸºç›¤ å¹¸é‹ã®ç•ªå·',300,90);const colorFn = n => {if(n<=9) return '#FFC107';if(n<=18) return '#2196F3';if(n<=27) return '#F44336';return '#4CAF50';};const ballY = 200;currentNumbers.forEach((n,i) => {const x = 68 + i*78;ctx.beginPath(); ctx.arc(x,ballY,30,0,Math.PI*2);ctx.fillStyle = colorFn(n); ctx.fill();ctx.fillStyle = '#fff'; ctx.font = 'bold 24px "Shippori Mincho", serif';ctx.fillText(n,x,ballY+8);});ctx.fillStyle = '#888'; ctx.font = '14px "Shippori Mincho", serif';ctx.fillText('âœ¨ éå»ã®å½“é¸ç•ªå·100%é™¤å¤– âœ¨',300,320);ctx.fillText('k-mudang.com',300,350);const link = document.createElement('a');link.download = 'K-MUDANG_LOTO7.png';link.href = canvas.toDataURL('image/png');link.click();toast('ğŸ“¥ ç”»åƒãŒä¿å­˜ã•ã‚Œã¾ã—ãŸï¼');
/*removed*/}</script><!-- è‘—ä½œæ¨©è¡¨ç¤º --><div style="text-align:center;padding:20px;color:#555;font-size:11px;">
    Â© 2026 K-MUDANG. All Rights Reserved.<br><span style="font-size:10px;color:#444;">ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã‚³ãƒ¼ãƒ‰ã¯è‘—ä½œæ¨©æ³•ã«ã‚ˆã‚Šä¿è­·ã•ã‚Œã¦ã„ã¾ã™ã€‚</span></div>
<div id="oracle-loading-overlay" style="display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);z-index:9999;justify-content:center;align-items:center;flex-direction:column;"><img src="taegeuk-icon.png" alt="â˜¯" style="height:80px;width:80px;opacity:0.7;animation:spin 3s linear infinite;filter:drop-shadow(0 0 30px rgba(212,175,55,0.8));"><p id="oracle-loading-text" style="color:#D4AF37;font-size:1.2rem;margin-top:25px;text-align:center;letter-spacing:2px;animation:pulse 1.5s infinite;"></p><style>@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}</style></div>
</body></html>